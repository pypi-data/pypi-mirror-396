import { $APP, shadow$provide } from "./common.js";
var eJ=function(){},fJ=function(a,b){if(a!=null&&a.Ne!=null)a=a.Ne(a,b);else{var c=fJ[$APP.aa(a==null?null:a)];if(c!=null)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=fJ._,c!=null)a=c.h?c.h(a,b):c.call(null,a,b);else throw $APP.Na("IEncodeClojure.-js-\x3eclj",a);}return a},gJ=function(a){var b=$APP.J([$APP.sx,!0]),c=$APP.Oe(b);c=$APP.M(c,$APP.sx);var d=$APP.m(c)?$APP.ni:$APP.Oa;return function g(f){return(f!=null?$APP.u===f.Zf||(f.Pd?0:$APP.Ka(eJ,f)):$APP.Ka(eJ,f))?fJ(f,$APP.S.h($APP.Mv,b)):$APP.Bd(f)?
$APP.Xh($APP.lf.h(g,f)):$APP.Pf(f)?new $APP.ug(g($APP.tb(f)),g($APP.ub(f))):$APP.sd(f)?$APP.yf.i($APP.gd(f),$APP.lf.g(g),f):$APP.m($APP.Fa(f))?$APP.Fe($APP.Ua(function(h,l){l=g(l);return $APP.$b(h,l)},$APP.Zb($APP.wf),f)):$APP.Ma(f)===Object?$APP.Fe($APP.Ua(function(h,l){return $APP.Ge(h,d.g?d.g(l):d.call(null,l),g($APP.oa(f,l)))},$APP.Zb($APP.Q),$APP.na(f))):f}(a)},kJ=function(a,b){return fetch(a,$APP.ol(new $APP.V(null,4,[hJ,"POST",iJ,new $APP.V(null,1,["Content-Type","application/json"],null),
jJ,"include",$APP.gv,$APP.m(b)?JSON.stringify($APP.ol(b)):null],null)))},rJ=function(){var a=$APP.n(lJ),b=$APP.n(mJ),c=$APP.Jm(1);$APP.mm(function(){var d=function(){function f(g){var h=g[1];if(h===7){h=g[2];var l=h instanceof $APP.fj;g[7]=h;g[8]=l;g[1]=$APP.m(l)?8:9;return $APP.Z}if(h===20)return g[1]=$APP.m(g[2])?21:22,$APP.Z;if(h===27)return g[1]=$APP.m(g[2])?28:29,$APP.Z;if(h===1)return g[2]=null,g[1]=2,$APP.Z;if(h===24)return h=g[2],l=h instanceof $APP.fj,g[9]=h,g[10]=l,g[1]=$APP.m(l)?25:26,
$APP.Z;if(h===4){g[4]=$APP.D(g[4]);h=g[2];l=$APP.gf(nJ,!1);var p=g[5];if($APP.m(p))throw p;g[11]=l;g[2]=h;g[1]=3;return $APP.Z}if(h===15)return h=g[12],h=h.json(),h=$APP.Lm(h),$APP.Em(g,24,h);if(h===21)throw h=g[13],h;if(h===13)return h=g[2],l=h.ok,g[12]=h,g[1]=$APP.m(l)?14:15,$APP.Z;if(h===22)return h=g[13],g[2]=h,g[1]=23,$APP.Z;if(h===29)return h=g[9],g[2]=h,g[1]=30,$APP.Z;if(h===6){g[4]=$APP.D(g[4]);h=g[2];g[5]=h;if(h instanceof Error)g[1]=5,g[5]=null;else throw h;return $APP.Z}if(h===28)throw h=
g[9],h;if(h===25)return h=g[9],h=$APP.dj.g($APP.gj(h)),h=$APP.H.h(h,$APP.ej),g[2]=h,g[1]=27,$APP.Z;if(h===17)return h=g[2],l=h instanceof $APP.fj,g[13]=h,g[14]=l,g[1]=$APP.m(l)?18:19,$APP.Z;if(h===3)return $APP.Hm(g,g[2]);if(h===12)return h=g[7],g[2]=h,g[1]=13,$APP.Z;if(h===2)return g[4]=$APP.oe(4,g[4]),g[4]=$APP.oe(6,g[4]),h=$APP.gf(nJ,!0),l=$APP.gf(oJ,null),p=$APP.fh([pJ,qJ],[a,b]),p=kJ("/auth/login",p),p=$APP.Lm(p),g[15]=h,g[16]=l,$APP.Em(g,7,p);if(h===23)return l=g[2],h=console.log("Login successful:",
l),p=localStorage.setItem("username",l.name),l=$APP.gf($APP.av,!0),g[17]=h,g[18]=p,g[2]=l,g[1]=16,$APP.Z;if(h===19)return h=g[14],g[2]=h,g[1]=20,$APP.Z;if(h===11)throw h=g[7],h;return h===9?(h=g[8],g[2]=h,g[1]=10,$APP.Z):h===5?(l=console.error("Login error:",g[2]),h=$APP.gf(oJ,"Network error. Please try again."),g[19]=l,g[2]=h,g[1]=4,$APP.Z):h===14?(h=g[12],h=h.json(),h=$APP.Lm(h),$APP.Em(g,17,h)):h===26?(h=g[10],g[2]=h,g[1]=27,$APP.Z):h===16?(h=g[2],g[4]=$APP.D(g[4]),g[2]=h,g[1]=4,$APP.Z):h===30?
(h=$APP.gf(oJ,g[2].error),g[2]=h,g[1]=16,$APP.Z):h===10?(g[1]=$APP.m(g[2])?11:12,$APP.Z):h===18?(h=g[13],h=$APP.dj.g($APP.gj(h)),h=$APP.H.h(h,$APP.ej),g[2]=h,g[1]=20,$APP.Z):h===8?(h=g[7],h=$APP.dj.g($APP.gj(h)),h=$APP.H.h(h,$APP.ej),g[2]=h,g[1]=10,$APP.Z):null}return function(){function g(p){for(;;){a:{try{for(;;){var q=f(p);if(!$APP.P(q,$APP.Z)){var t=q;break a}}}catch(v){t=v;p[2]=t;if($APP.B(p[4]))p[1]=$APP.C(p[4]);else throw t;t=$APP.Z;break a}t=void 0}if(!$APP.P(t,$APP.Z))return t}}function h(){var p=
[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];p[0]=l;p[1]=1;return p}var l=null;l=function(p){switch(arguments.length){case 0:return h.call(this);case 1:return g.call(this,p)}throw Error("Invalid arity: "+arguments.length);};l.m=h;l.g=g;return l}()}(),e=function(){var f=d();f[6]=c;return f}();return $APP.Dm(e)});return c},sJ=function(){var a=$APP.n(lJ),b=$APP.n(mJ),c=$APP.Jm(1);$APP.mm(function(){var d=function(){function f(g){var h=g[1];if(h===
7){h=g[2];var l=h instanceof $APP.fj;g[7]=h;g[8]=l;g[1]=$APP.m(l)?8:9;return $APP.Z}if(h===20)return g[1]=$APP.m(g[2])?21:22,$APP.Z;if(h===27)return g[1]=$APP.m(g[2])?28:29,$APP.Z;if(h===1)return g[2]=null,g[1]=2,$APP.Z;if(h===24)return h=g[2],l=h instanceof $APP.fj,g[9]=h,g[10]=l,g[1]=$APP.m(l)?25:26,$APP.Z;if(h===4){g[4]=$APP.D(g[4]);h=g[2];l=$APP.gf(nJ,!1);var p=g[5];if($APP.m(p))throw p;g[11]=l;g[2]=h;g[1]=3;return $APP.Z}if(h===15)return h=g[12],h=h.json(),h=$APP.Lm(h),$APP.Em(g,24,h);if(h===
21)throw h=g[13],h;if(h===13)return h=g[2],l=h.ok,g[12]=h,g[1]=$APP.m(l)?14:15,$APP.Z;if(h===22)return h=g[13],g[2]=h,g[1]=23,$APP.Z;if(h===29)return h=g[9],g[2]=h,g[1]=30,$APP.Z;if(h===6){g[4]=$APP.D(g[4]);h=g[2];g[5]=h;if(h instanceof Error)g[1]=5,g[5]=null;else throw h;return $APP.Z}if(h===28)throw h=g[9],h;if(h===25)return h=g[9],h=$APP.dj.g($APP.gj(h)),h=$APP.H.h(h,$APP.ej),g[2]=h,g[1]=27,$APP.Z;if(h===17)return h=g[2],l=h instanceof $APP.fj,g[13]=h,g[14]=l,g[1]=$APP.m(l)?18:19,$APP.Z;if(h===
3)return $APP.Hm(g,g[2]);if(h===12)return h=g[7],g[2]=h,g[1]=13,$APP.Z;if(h===2)return g[4]=$APP.oe(4,g[4]),g[4]=$APP.oe(6,g[4]),h=$APP.gf(nJ,!0),l=$APP.gf(oJ,null),p=$APP.fh([pJ,qJ],[a,b]),p=kJ("/auth/register",p),p=$APP.Lm(p),g[15]=h,g[16]=l,$APP.Em(g,7,p);if(h===23){l=g[2];h=console.log("Registration successful:",l);p=localStorage.setItem("username",l.name);var q=$APP.gf($APP.av,!0);l=window.location.replace("/");g[17]=h;g[18]=p;g[19]=q;g[2]=l;g[1]=16;return $APP.Z}if(h===19)return h=g[14],g[2]=
h,g[1]=20,$APP.Z;if(h===11)throw h=g[7],h;return h===9?(h=g[8],g[2]=h,g[1]=10,$APP.Z):h===5?(l=console.error("Registration error:",g[2]),h=$APP.gf(oJ,"Network error. Please try again."),g[20]=l,g[2]=h,g[1]=4,$APP.Z):h===14?(h=g[12],h=h.json(),h=$APP.Lm(h),$APP.Em(g,17,h)):h===26?(h=g[10],g[2]=h,g[1]=27,$APP.Z):h===16?(h=g[2],g[4]=$APP.D(g[4]),g[2]=h,g[1]=4,$APP.Z):h===30?(h=$APP.gf(oJ,g[2].error),g[2]=h,g[1]=16,$APP.Z):h===10?(g[1]=$APP.m(g[2])?11:12,$APP.Z):h===18?(h=g[13],h=$APP.dj.g($APP.gj(h)),
h=$APP.H.h(h,$APP.ej),g[2]=h,g[1]=20,$APP.Z):h===8?(h=g[7],h=$APP.dj.g($APP.gj(h)),h=$APP.H.h(h,$APP.ej),g[2]=h,g[1]=10,$APP.Z):null}return function(){function g(p){for(;;){a:{try{for(;;){var q=f(p);if(!$APP.P(q,$APP.Z)){var t=q;break a}}}catch(v){t=v;p[2]=t;if($APP.B(p[4]))p[1]=$APP.C(p[4]);else throw t;t=$APP.Z;break a}t=void 0}if(!$APP.P(t,$APP.Z))return t}}function h(){var p=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];p[0]=l;p[1]=
1;return p}var l=null;l=function(p){switch(arguments.length){case 0:return h.call(this);case 1:return g.call(this,p)}throw Error("Invalid arity: "+arguments.length);};l.m=h;l.g=g;return l}()}(),e=function(){var f=d();f[6]=c;return f}();return $APP.Dm(e)});return c},vJ=function(a,b,c){var d=$APP.Jm(1);$APP.mm(function(){var e=function(){function g(h){var l=h[1];if(l===7)return h[2]=b,h[1]=9,$APP.Z;if(l===20)return l=h[7],l=l.json(),l=$APP.Lm(l),$APP.Em(h,23,l);if(l===27)throw l=h[8],l;if(l===1)return h[2]=
null,h[1]=2,$APP.Z;if(l===24)return l=h[8],l=$APP.dj.g($APP.gj(l)),l=$APP.H.h(l,$APP.ej),h[2]=l,h[1]=26,$APP.Z;if(l===4){h[4]=$APP.D(h[4]);l=h[2];var p=$APP.gf(nJ,!1),q=h[5];if($APP.m(q))throw q;h[9]=p;h[2]=l;h[1]=3;return $APP.Z}if(l===15)return h[2]=h[10],h[1]=16,$APP.Z;if(l===21)return l=h[7],l=l.json(),l=$APP.Lm(l),$APP.Em(h,30,l);if(l===31)return l=h[11],l=$APP.dj.g($APP.gj(l)),l=$APP.H.h(l,$APP.ej),h[2]=l,h[1]=33,$APP.Z;if(l===32)return h[2]=h[12],h[1]=33,$APP.Z;if(l===33)return h[1]=$APP.m(h[2])?
34:35,$APP.Z;if(l===13)return l=h[2],p=l instanceof $APP.fj,h[13]=l,h[10]=p,h[1]=$APP.m(p)?14:15,$APP.Z;if(l===22)return l=h[2],h[4]=$APP.D(h[4]),h[2]=l,h[1]=4,$APP.Z;if(l===36)return l=gJ(h[2]),l=$APP.dj.g(l),l=$APP.gf(oJ,l),h[2]=l,h[1]=22,$APP.Z;if(l===29)return l=gJ(h[2]),l=tJ.g(l),l=window.location=l,h[2]=l,h[1]=22,$APP.Z;if(l===6){h[4]=$APP.D(h[4]);l=h[2];h[5]=l;if(l instanceof Error)h[1]=5,h[5]=null;else throw l;return $APP.Z}if(l===28)return l=h[8],h[2]=l,h[1]=29,$APP.Z;if(l===25)return h[2]=
h[14],h[1]=26,$APP.Z;if(l===34)throw l=h[11],l;if(l===17)throw l=h[13],l;return l===3?$APP.Hm(h,h[2]):l===12?(l=kJ("/oauth/login",h[2]),l=$APP.Lm(l),$APP.Em(h,13,l)):l===2?(h[4]=$APP.oe(4,h[4]),h[4]=$APP.oe(6,h[4]),l=$APP.gf(nJ,!0),p=$APP.gf(oJ,null),h[16]=l,h[17]=p,h[15]=a,h[1]=$APP.m(a)?7:8,$APP.Z):l===23?(l=h[2],p=l instanceof $APP.fj,h[8]=l,h[14]=p,h[1]=$APP.m(p)?24:25,$APP.Z):l===35?(l=h[11],h[2]=l,h[1]=36,$APP.Z):l===19?(l=h[2],p=l.ok,h[7]=l,h[1]=$APP.m(p)?20:21,$APP.Z):l===11?(l=$APP.fh([uJ],
[c]),h[2]=l,h[1]=12,$APP.Z):l===9?(h[1]=$APP.m(h[2])?10:11,$APP.Z):l===5?(p=h[2],l=$APP.gf(oJ,"Failed to grant access. Please try again."),h[18]=p,h[2]=l,h[1]=4,$APP.Z):l===14?(l=h[13],l=$APP.dj.g($APP.gj(l)),l=$APP.H.h(l,$APP.ej),h[2]=l,h[1]=16,$APP.Z):l===26?(h[1]=$APP.m(h[2])?27:28,$APP.Z):l===16?(h[1]=$APP.m(h[2])?17:18,$APP.Z):l===30?(l=h[2],p=l instanceof $APP.fj,h[11]=l,h[12]=p,h[1]=$APP.m(p)?31:32,$APP.Z):l===10?(l=$APP.fh([pJ,qJ,uJ],[a,b,c]),h[2]=l,h[1]=12,$APP.Z):l===18?(l=h[13],h[2]=l,
h[1]=19,$APP.Z):l===8?(l=h[15],h[2]=l,h[1]=9,$APP.Z):null}return function(){function h(q){for(;;){a:{try{for(;;){var t=g(q);if(!$APP.P(t,$APP.Z)){var v=t;break a}}}catch(x){v=x;q[2]=v;if($APP.B(q[4]))q[1]=$APP.C(q[4]);else throw v;v=$APP.Z;break a}v=void 0}if(!$APP.P(v,$APP.Z))return v}}function l(){var q=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];q[0]=p;q[1]=1;return q}var p=null;p=function(q){switch(arguments.length){case 0:return l.call(this);
case 1:return h.call(this,q)}throw Error("Invalid arity: "+arguments.length);};p.m=l;p.g=h;return p}()}(),f=function(){var g=e();g[6]=d;return g}();return $APP.Dm(f)});return d},wJ=function(){var a=$APP.Jm(1);$APP.mm(function(){var b=function(){function d(e){var f=e[1];if(f===7)return f=e[7],f=$APP.dj.g($APP.gj(f)),f=$APP.H.h(f,$APP.ej),e[2]=f,e[1]=9,$APP.Z;if(f===1)return e[2]=null,e[1]=2,$APP.Z;if(f===4)return f=console.error("Logout error:",e[2]),e[2]=f,e[1]=3,$APP.Z;if(f===6){f=e[2];var g=f instanceof
$APP.fj;e[7]=f;e[8]=g;e[1]=$APP.m(g)?7:8;return $APP.Z}if(f===3)return $APP.Hm(e,e[2]);if(f===12){g=e[2];var h=$APP.bv();f=window.location.reload();e[4]=$APP.D(e[4]);e[9]=g;e[10]=h;e[2]=f;e[1]=3;return $APP.Z}if(f===2)return e[4]=$APP.oe(5,e[4]),f=kJ("/auth/logout",$APP.Cg),f=$APP.Lm(f),$APP.Em(e,6,f);if(f===11)return f=e[7],e[2]=f,e[1]=12,$APP.Z;if(f===9)return e[1]=$APP.m(e[2])?10:11,$APP.Z;if(f===5){e[4]=$APP.D(e[4]);f=e[2];e[5]=f;if(f instanceof Error)e[1]=4,e[5]=null;else throw f;return $APP.Z}if(f===
10)throw f=e[7],f;return f===8?(f=e[8],e[2]=f,e[1]=9,$APP.Z):null}return function(){function e(h){for(;;){a:{try{for(;;){var l=d(h);if(!$APP.P(l,$APP.Z)){var p=l;break a}}}catch(q){p=q;h[2]=p;if($APP.B(h[4]))h[1]=$APP.C(h[4]);else throw p;p=$APP.Z;break a}p=void 0}if(!$APP.P(p,$APP.Z))return p}}function f(){var h=[null,null,null,null,null,null,null,null,null,null,null];h[0]=g;h[1]=1;return h}var g=null;g=function(h){switch(arguments.length){case 0:return f.call(this);case 1:return e.call(this,h)}throw Error("Invalid arity: "+
arguments.length);};g.m=f;g.g=e;return g}()}(),c=function(){var d=b();d[6]=a;return d}();return $APP.Dm(c)});return a},yJ=function(a,b,c,d){return new $APP.T(null,3,5,$APP.U,[xJ,new $APP.T(null,2,5,$APP.U,[$APP.px,a],null),new $APP.T(null,2,5,$APP.U,[$APP.Px,new $APP.V(null,4,[$APP.kA,b,$APP.Nw,$APP.n(c),$APP.Lz,d,$APP.yw,function(e){return $APP.gf(c,e.target.value)}],null)],null)],null)},KJ=function(){return new $APP.T(null,2,5,$APP.U,[zJ,new $APP.T(null,5,5,$APP.U,[AJ,new $APP.T(null,2,5,$APP.U,
[$APP.qy,$APP.m($APP.n(BJ))?"Sign in to NyanCAD":$APP.H.h($APP.n(CJ),DJ)?"Login":"Register"],null),$APP.m($APP.n(oJ))?new $APP.T(null,2,5,$APP.U,[EJ,$APP.n(oJ)],null):null,new $APP.T(null,7,5,$APP.U,[$APP.Ly,new $APP.V(null,1,[$APP.Dz,function(a){a.preventDefault();a=$APP.rd($APP.n(lJ))?"Username is required":$APP.rd($APP.n(mJ))?"Password is required":$APP.H.h($APP.n(CJ),FJ)&&$APP.Pe($APP.n(mJ),$APP.n(GJ))?"Passwords do not match":$APP.H.h($APP.n(CJ),FJ)&&$APP.G($APP.n(mJ))<6?"Password must be at least 6 characters":
null;return $APP.m(a)?$APP.gf(oJ,a):$APP.m($APP.n(BJ))?vJ($APP.n(lJ),$APP.n(mJ),$APP.n(BJ)):$APP.H.h($APP.n(CJ),DJ)?rJ():sJ()}],null),new $APP.T(null,5,5,$APP.U,[yJ,"Username","text",lJ,"Enter your username"],null),new $APP.T(null,5,5,$APP.U,[yJ,"Password","password",mJ,"Enter your password"],null),$APP.H.h($APP.n(CJ),FJ)?new $APP.T(null,5,5,$APP.U,[yJ,"Confirm Password","password",GJ,"Confirm your password"],null):null,new $APP.T(null,3,5,$APP.U,[$APP.ww,new $APP.V(null,2,[$APP.kA,"submit",$APP.yx,
$APP.n(nJ)],null),$APP.m($APP.n(nJ))?"Please wait...":$APP.H.h($APP.n(CJ),DJ)?"Login":"Register"],null),$APP.m($APP.n(BJ))?null:new $APP.T(null,2,5,$APP.U,[HJ,$APP.H.h($APP.n(CJ),DJ)?new $APP.T(null,3,5,$APP.U,[$APP.kz,"Don't have an account? ",new $APP.T(null,3,5,$APP.U,[$APP.sz,new $APP.V(null,2,[$APP.nA,"#",$APP.Ny,function(a){a.preventDefault();$APP.gf(CJ,FJ);return $APP.gf(oJ,null)}],null),"Register here"],null)],null):new $APP.T(null,3,5,$APP.U,[$APP.kz,"Already have an account? ",new $APP.T(null,
3,5,$APP.U,[$APP.sz,new $APP.V(null,2,[$APP.nA,"#",$APP.Ny,function(a){a.preventDefault();$APP.gf(CJ,DJ);return $APP.gf(oJ,null)}],null),"Login here"],null)],null)],null)],null),new $APP.T(null,3,5,$APP.U,[IJ,new $APP.T(null,2,5,$APP.U,[$APP.kz,"Or continue without an account:"],null),new $APP.T(null,3,5,$APP.U,[JJ,new $APP.V(null,1,[$APP.nA,"/"],null),"Work Locally"],null)],null)],null)],null)},RJ=function(){return new $APP.T(null,2,5,$APP.U,[LJ,new $APP.T(null,5,5,$APP.U,[MJ,new $APP.T(null,2,5,
$APP.U,[$APP.qy,$APP.m($APP.n(BJ))?"Grant Access":"Account"],null),$APP.m($APP.n(oJ))?new $APP.T(null,2,5,$APP.U,[EJ,$APP.n(oJ)],null):null,new $APP.T(null,3,5,$APP.U,[NJ,new $APP.T(null,3,5,$APP.U,[$APP.kz,"Logged in as: ",new $APP.T(null,2,5,$APP.U,[OJ,$APP.Yu()],null)],null),new $APP.T(null,3,5,$APP.U,[$APP.kz,"Sync URL: ",new $APP.T(null,2,5,$APP.U,[$APP.jz,$APP.$u()],null)],null)],null),new $APP.T(null,2,5,$APP.U,[PJ,$APP.m($APP.n(BJ))?new $APP.T(null,3,5,$APP.U,[$APP.fA,new $APP.T(null,3,5,
$APP.U,[$APP.ww,new $APP.V(null,2,[$APP.Ny,function(){var a=$APP.n(BJ);return vJ(null,null,a)},$APP.yx,$APP.n(nJ)],null),$APP.m($APP.n(nJ))?"Please wait...":"Grant Access"],null),new $APP.T(null,3,5,$APP.U,[JJ,new $APP.V(null,1,[$APP.nA,"/"],null),"Cancel"],null)],null):new $APP.T(null,3,5,$APP.U,[$APP.fA,new $APP.T(null,3,5,$APP.U,[JJ,new $APP.V(null,1,[$APP.nA,"/"],null),"Back to Editor"],null),new $APP.T(null,3,5,$APP.U,[QJ,new $APP.V(null,1,[$APP.Ny,wJ],null),"Logout"],null)],null)],null)],null)],
null)},SJ=function(){return $APP.m($APP.n($APP.av))?new $APP.T(null,1,5,$APP.U,[RJ],null):new $APP.T(null,1,5,$APP.U,[KJ],null)},UJ=function(){if($APP.m($APP.n($APP.av))){var a=$APP.Jm(1);$APP.mm(function(){var b=function(){function d(e){var f=e[1];if(f===7)return f=e[7],f=$APP.dj.g($APP.gj(f)),f=$APP.H.h(f,$APP.ej),e[2]=f,e[1]=9,$APP.Z;if(f===20)throw f=e[8],f;if(f===1)return e[2]=null,e[1]=2,$APP.Z;if(f===24){var g=$APP.bv();f=console.log("Session validation failed, logged out");e[9]=g;e[2]=f;e[1]=
25;return $APP.Z}if(f===4)return f=console.error("Session validation error:",e[2]),e[10]=f,e[2]=null,e[1]=3,$APP.Z;if(f===15)return f=e[2],e[4]=$APP.D(e[4]),e[2]=f,e[1]=3,$APP.Z;if(f===21)return f=e[8],e[2]=f,e[1]=22,$APP.Z;if(f===13)return f=e[11].json(),f=$APP.Lm(f),$APP.Em(e,16,f);if(f===22)return f=gJ(e[2]),f=TJ.g(f),f=$APP.Ej.g(f),g=$APP.Yu(),f=$APP.H.h(f,g),e[1]=f?23:24,$APP.Z;if(f===6)return f=e[2],g=f instanceof $APP.fj,e[7]=f,e[12]=g,e[1]=$APP.m(g)?7:8,$APP.Z;if(f===25)return e[2]=e[2],e[1]=
15,$APP.Z;if(f===17)return f=e[8],f=$APP.dj.g($APP.gj(f)),f=$APP.H.h(f,$APP.ej),e[2]=f,e[1]=19,$APP.Z;if(f===3)return $APP.Hm(e,e[2]);if(f===12)return f=e[2],g=f.ok,e[11]=f,e[1]=$APP.m(g)?13:14,$APP.Z;if(f===2)return e[4]=$APP.oe(5,e[4]),f=""+$APP.X.g("https://api.nyancad.com/")+"_session",g=$APP.fh([jJ],["include"]),g=$APP.ol(g),f=fetch(f,g),f=$APP.Lm(f),$APP.Em(e,6,f);if(f===23)return e[2]=null,e[1]=25,$APP.Z;if(f===19)return e[1]=$APP.m(e[2])?20:21,$APP.Z;if(f===11)return f=e[7],e[2]=f,e[1]=12,
$APP.Z;if(f===9)return e[1]=$APP.m(e[2])?10:11,$APP.Z;if(f===5){e[4]=$APP.D(e[4]);f=e[2];e[5]=f;if(f instanceof Error)e[1]=4,e[5]=null;else throw f;return $APP.Z}if(f===14)return g=$APP.bv(),f=console.log("Session validation returned error, logged out"),e[13]=g,e[2]=f,e[1]=15,$APP.Z;if(f===16)return f=e[2],g=f instanceof $APP.fj,e[8]=f,e[14]=g,e[1]=$APP.m(g)?17:18,$APP.Z;if(f===10)throw f=e[7],f;return f===18?(f=e[14],e[2]=f,e[1]=19,$APP.Z):f===8?(f=e[12],e[2]=f,e[1]=9,$APP.Z):null}return function(){function e(h){for(;;){a:{try{for(;;){var l=
d(h);if(!$APP.P(l,$APP.Z)){var p=l;break a}}}catch(q){p=q;h[2]=p;if($APP.B(h[4]))h[1]=$APP.C(h[4]);else throw p;p=$APP.Z;break a}p=void 0}if(!$APP.P(p,$APP.Z))return p}}function f(){var h=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];h[0]=g;h[1]=1;return h}var g=null;g=function(h){switch(arguments.length){case 0:return f.call(this);case 1:return e.call(this,h)}throw Error("Invalid arity: "+arguments.length);};g.m=f;g.g=e;return g}()}(),c=function(){var d=b();d[6]=a;
return d}();return $APP.Dm(c)})}},VJ=function(){window.name="auth";var a=(new URLSearchParams(window.location.search)).get("state");$APP.m(a)&&($APP.gf(BJ,a),$APP.gf(CJ,DJ));$APP.gf($APP.av,$APP.Yu()!=null);UJ();return $APP.Ol(new $APP.T(null,1,5,$APP.U,[SJ],null),document.getElementById("mosaic_auth"))},hJ=new $APP.O(null,"method","method",55703592),QJ=new $APP.O(null,"button.danger","button.danger",567836529),xJ=new $APP.O(null,"div.form-group","div.form-group",-1721134770),LJ=new $APP.O(null,"div.account-container",
"div.account-container",2057554452),DJ=new $APP.O(null,"login","login",55217519),MJ=new $APP.O(null,"div.account-card","div.account-card",1175069527),JJ=new $APP.O(null,"a.button.secondary","a.button.secondary",-1863018976),pJ=new $APP.O(null,"username","username",1605666410),iJ=new $APP.O(null,"headers","headers",-835030129),OJ=new $APP.O(null,"strong","strong",269529E3),zJ=new $APP.O(null,"div.auth-container","div.auth-container",-319032841),EJ=new $APP.O(null,"div.error-message","div.error-message",
926006572),jJ=new $APP.O(null,"credentials","credentials",1373178854),IJ=new $APP.O(null,"div.local-option","div.local-option",811824439),AJ=new $APP.O(null,"div.auth-card","div.auth-card",-1909068711),qJ=new $APP.O(null,"password","password",417022471),PJ=new $APP.O(null,"div.account-actions","div.account-actions",-1458280921),TJ=new $APP.O(null,"userCtx","userCtx",-1540423942),HJ=new $APP.O(null,"div.auth-toggle","div.auth-toggle",-1951668853),uJ=new $APP.O(null,"state","state",-1988618099),tJ=
new $APP.O(null,"redirect_url","redirect_url",-596127915),FJ=new $APP.O(null,"register","register",1968522516),NJ=new $APP.O(null,"div.user-info","div.user-info",-1795367347);var CJ=$APP.Hl(DJ),lJ=$APP.Hl(""),mJ=$APP.Hl(""),GJ=$APP.Hl(""),nJ=$APP.Hl(!1),oJ=$APP.Hl(null),BJ=$APP.Hl(null);$APP.ja("nyancad.mosaic.auth.init",VJ);VJ();