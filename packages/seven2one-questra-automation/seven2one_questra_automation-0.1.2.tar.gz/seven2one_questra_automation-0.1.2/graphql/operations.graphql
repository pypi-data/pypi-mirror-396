# Auto-generated GraphQL Operations
# ACHTUNG: Diese Datei wird bei jedem Run überschrieben!
# Generiert aus: automation.sdl
# Max Depth: 4
#
# Für custom operations: siehe custom_operations.graphql

# === QUERIES ===

query Automations($first: Int, $after: String, $last: Int, $before: String, $where: AutomationViewFilterInput, $order: [AutomationViewSortInput!]) {
  automations(
    first: $first
    after: $after
    last: $last
    before: $before
    where: $where
    order: $order
  ) {
    pageInfo {
      hasNextPage
      hasPreviousPage
      startCursor
      endCursor
    }
    edges {
      cursor
      node {
        workspace {
          name
          repositoryName
          buildStatus
          buildBranch
          buildCommit
          buildStartedAt
          buildFinishedAt
          buildDuration
          activeBranch
          activeCommit
          createdAt
          changedAt
        }
        schedules {
          fireTimes
          automationPath
          name
          description
          cron
          timezone
          active
          version
        }
        workspaceName
        path
        description
        environment
        allowParallelExecution
        argumentDefinitions {
          name
          description
          mandatory
        }
      }
    }
    totalCount
  }
}

query Executions($first: Int, $after: String, $last: Int, $before: String, $where: AutomationExecutionViewFilterInput, $order: [AutomationExecutionViewSortInput!]) {
  executions(
    first: $first
    after: $after
    last: $last
    before: $before
    where: $where
    order: $order
  ) {
    pageInfo {
      hasNextPage
      hasPreviousPage
      startCursor
      endCursor
    }
    edges {
      cursor
      node {
        workspace {
          name
          repositoryName
          buildStatus
          buildBranch
          buildCommit
          buildStartedAt
          buildFinishedAt
          buildDuration
          activeBranch
          activeCommit
          createdAt
          changedAt
        }
        id
        branch
        commit
        workspaceName
        repositoryName
        repositoryUrl
        automationPath
        environment
        initiatorType
        initiatorReference
        argumentInstances {
          name
          value
        }
        status
        output
        domainStatus
        domainStatusMessage
        createdAt
        startedAt
        finishedAt
        duration
      }
    }
    totalCount
  }
}

query ErrorCodes($first: Int, $after: String, $last: Int, $before: String, $where: ErrorCodeViewFilterInput, $order: [ErrorCodeViewSortInput!]) {
  errorCodes(
    first: $first
    after: $after
    last: $last
    before: $before
    where: $where
    order: $order
  ) {
    pageInfo {
      hasNextPage
      hasPreviousPage
      startCursor
      endCursor
    }
    edges {
      cursor
      node {
        code
        messageTemplate
        parameters
      }
    }
    totalCount
  }
}

query Repositories($first: Int, $after: String, $last: Int, $before: String, $where: RepositoryViewFilterInput, $order: [RepositoryViewSortInput!]) {
  repositories(
    first: $first
    after: $after
    last: $last
    before: $before
    where: $where
    order: $order
  ) {
    pageInfo {
      hasNextPage
      hasPreviousPage
      startCursor
      endCursor
    }
    edges {
      cursor
      node {
        workspaces {
          name
          repositoryName
          buildStatus
          buildBranch
          buildCommit
          buildStartedAt
          buildFinishedAt
          buildDuration
          activeBranch
          activeCommit
          createdAt
          changedAt
        }
        name
        url
        createdAt
        changedAt
        authenticationMethod
        username
        sshPublicKey
      }
    }
    totalCount
  }
}

query Schedules($first: Int, $after: String, $last: Int, $before: String, $where: ScheduleViewFilterInput, $order: [ScheduleViewSortInput!]) {
  schedules(
    first: $first
    after: $after
    last: $last
    before: $before
    where: $where
    order: $order
  ) {
    pageInfo {
      hasNextPage
      hasPreviousPage
      startCursor
      endCursor
    }
    edges {
      cursor
      node {
        workspace {
          name
          repositoryName
          buildStatus
          buildBranch
          buildCommit
          buildStartedAt
          buildFinishedAt
          buildDuration
          activeBranch
          activeCommit
          createdAt
          changedAt
        }
        fireTimes
        automationPath
        name
        description
        cron
        timezone
        active
        argumentInstances {
          name
          value
        }
        version
      }
    }
    totalCount
  }
}

query ScheduledExecutions($from: DateTime, $to: DateTime, $first: Int, $after: String, $last: Int, $before: String) {
  scheduledExecutions(
    from: $from
    to: $to
    first: $first
    after: $after
    last: $last
    before: $before
  ) {
    pageInfo {
      hasNextPage
      hasPreviousPage
      startCursor
      endCursor
    }
    edges {
      cursor
      node {
        workspace {
          name
          repositoryName
          buildStatus
          buildBranch
          buildCommit
          buildStartedAt
          buildFinishedAt
          buildDuration
          activeBranch
          activeCommit
          createdAt
          changedAt
        }
        name
        description
        cron
        timezone
        automationPath
        fireTime
        argumentInstances {
          name
          value
        }
      }
    }
  }
}

query AutomationServiceInfo {
  automationServiceInfo {
    name
    version
    informationalVersion
  }
}

query Workspaces($first: Int, $after: String, $last: Int, $before: String, $where: WorkspaceViewFilterInput, $order: [WorkspaceViewSortInput!]) {
  workspaces(
    first: $first
    after: $after
    last: $last
    before: $before
    where: $where
    order: $order
  ) {
    pageInfo {
      hasNextPage
      hasPreviousPage
      startCursor
      endCursor
    }
    edges {
      cursor
      node {
        repository {
          name
          url
          createdAt
          changedAt
          authenticationMethod
          username
          sshPublicKey
        }
        automations {
          workspaceName
          path
          description
          environment
          allowParallelExecution
        }
        name
        repositoryName
        buildStatus
        buildErrors {
          code
          messageTemplate
        }
        buildBranch
        buildCommit
        buildStartedAt
        buildFinishedAt
        buildDuration
        activeBranch
        activeCommit
        createdAt
        changedAt
      }
    }
    totalCount
  }
}

# === MUTATIONS ===

mutation ExecuteAutomation($input: ExecuteInput!) {
  execute(input: $input) {
    id
  }
}

mutation CreateRepository($input: CreateRepositoryInput!) {
  createRepository(input: $input) {
    name
  }
}

mutation UpdateRepository($input: UpdateRepositoryInput!) {
  updateRepository(input: $input) {
    name
  }
}

mutation DeleteRepository($input: DeleteRepositoryInput!) {
  deleteRepository(input: $input) {
    name
  }
}

mutation RenewRepositorySshKey($input: RenewRepositorySshKeyInput!) {
  renewRepositorySshKey(input: $input) {
    name
  }
}

mutation CreateSchedule($input: CreateScheduleInput!) {
  createSchedule(input: $input) {
    name
    workspaceName
    automationPath
  }
}

mutation UpdateSchedule($input: UpdateScheduleInput!) {
  updateSchedule(input: $input) {
    name
    workspaceName
    automationPath
  }
}

mutation DeleteSchedule($input: DeleteScheduleInput!) {
  deleteSchedule(input: $input) {
    name
    workspaceName
    automationPath
  }
}

mutation CreateWorkspace($input: CreateWorkspaceInput!) {
  createWorkspace(input: $input) {
    name
  }
}

mutation UpdateWorkspace($input: UpdateWorkspaceInput!) {
  updateWorkspace(input: $input) {
    name
  }
}

mutation DeleteWorkspace($input: DeleteWorkspaceInput!) {
  deleteWorkspace(input: $input) {
    name
  }
}

mutation SynchronizeWorkspace($input: SynchronizeWorkspaceInput!) {
  synchronizeWorkspace(input: $input) {
    name
  }
}

# === CUSTOM OPERATIONS ===

# Diese Datei wird NICHT überschrieben - hier eigene Queries/Mutations pflegen

query ExecutionsWithoutOutput($first: Int, $after: String, $last: Int, $before: String, $where: AutomationExecutionViewFilterInput, $order: [AutomationExecutionViewSortInput!]) {
  executions(
    first: $first
    after: $after
    last: $last
    before: $before
    where: $where
    order: $order
  ) {
    pageInfo {
      hasNextPage
      hasPreviousPage
      startCursor
      endCursor
    }
    edges {
      cursor
      node {
        workspace {
          name
          repositoryName
          buildStatus
          buildBranch
          buildCommit
          buildStartedAt
          buildFinishedAt
          buildDuration
          activeBranch
          activeCommit
          createdAt
          changedAt
        }
        id
        branch
        commit
        workspaceName
        repositoryName
        repositoryUrl
        automationPath
        environment
        initiatorType
        initiatorReference
        argumentInstances {
          name
          value
        }
        status
        domainStatus
        domainStatusMessage
        createdAt
        startedAt
        finishedAt
        duration
      }
    }
    totalCount
  }
}
