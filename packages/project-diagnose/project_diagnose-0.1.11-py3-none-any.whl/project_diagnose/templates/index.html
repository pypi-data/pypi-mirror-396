<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8" />
    <title>Project Diagnose</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<header>
    <h1>Project Diagnose</h1>
    <button id="themeToggle">üåì –¢–µ–º–∞</button>
</header>

<div class="toolbar">
	<a href="/settings" class="button">‚öô –ù–∞—Å—Ç—Ä–æ–π–∫–∏</a>
    <button id="refactorBtn">üõ† –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥</button>
	<a href="/dump" class="button">üì¶ Dump –ø—Ä–æ–µ–∫—Ç–∞</a>
    <a href="/report.txt" class="button">‚¨á –°–∫–∞—á–∞—Ç—å –æ—Ç—á—ë—Ç (.txt)</a>
    <input id="searchInput" type="text" placeholder="–ü–æ–∏—Å–∫ –≤ –æ—Ç—á—ë—Ç–µ‚Ä¶" />
</div>

<section class="panel">
    <h2>üìà –ü–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –ø—Ä–æ–µ–∫—Ç–∞</h2>
    <div class="metrics-row">
        <div class="metric-card">
            <div class="metric-label">–ò–Ω–¥–µ–∫—Å —Ö–∞–æ—Å–∞</div>
            <div class="metric-value">{{ "%.2f"|format(metrics.chaos) }}</div>
        </div>
        <div class="metric-card">
            <div class="metric-label">–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∫–∞—Ä–º–∞</div>
            <div class="metric-value">{{ "%.2f"|format(metrics.tech_karma) }}</div>
        </div>
        <div class="metric-card">
            <div class="metric-label">FRI</div>
            <div class="metric-value">{{ "%.2f"|format(metrics.future_regret) }}</div>
        </div>
    </div>
    <div class="chart-wrapper">
        <canvas id="extChart"></canvas>
    </div>
</section>

<section class="panel">
    <h2 class="collapsible">üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞</h2>
    <div class="content open">
        <pre id="treeBlock">{{ tree }}</pre>
    </div>
</section>

<section class="panel">
    <h2 class="collapsible">üìä –û—Ç—á—ë—Ç –∞–Ω–∞–ª–∏–∑–∞</h2>
    <div class="content open">
        <pre id="reportBlock">{{ report }}</pre>
    </div>
</section>

<script>
    // –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ–º –º–µ—Ç—Ä–∏–∫–∏ –∏–∑ Python –≤ JS
    window.PROJECT_METRICS = {{ metrics | tojson }};
</script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
