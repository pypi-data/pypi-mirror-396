"use strict";(self.webpackChunk_JUPYTERLAB_CORE_OUTPUT=self.webpackChunk_JUPYTERLAB_CORE_OUTPUT||[]).push([[2514],{8186:(e,t,r)=>{r.d(t,{E:()=>a,r:()=>o});var n=r(25884),i=r(17808);const a=new n.Token("@jupyterlab/application:ILayoutRestorer","A service providing application layout restoration functionality. Use this to have your activities restored across page loads."),s="layout-restorer:data";class o{constructor(e){this._deferred=new Array,this._deferredMainArea=null,this._firstDone=!1,this._promisesDone=!1,this._promises=[],this._restored=new n.PromiseDelegate,this._trackers=new Set,this._widgets=new Map,this._mode="multiple-document",this._connector=e.connector,this._first=e.first,this._registry=e.registry,e.mode&&(this._mode=e.mode),this._first.then(()=>{this._firstDone=!0}).then(()=>Promise.all(this._promises)).then(()=>{this._promisesDone=!0,this._trackers.clear()}).then(()=>{this._restored.resolve(void 0)})}get isDeferred(){return this._deferred.length>0}get restored(){return this._restored.promise}add(e,t){d.nameProperty.set(e,t),this._widgets.set(t,e),e.disposed.connect(this._onWidgetDisposed,this)}async fetch(){var e;const t={fresh:!0,mainArea:null,downArea:null,leftArea:null,rightArea:null,topArea:null,relativeSizes:null},r=this._connector.fetch(s);try{const[n]=await Promise.all([r,this.restored]);if(!n)return t;const{main:i,down:a,left:s,right:o,relativeSizes:d,top:c}=n,l=!1;let u=null;"multiple-document"===this._mode?u=this._rehydrateMainArea(i):this._deferredMainArea=i;const h=this._rehydrateDownArea(a);return{fresh:l,mainArea:u,downArea:h,leftArea:this._rehydrateSideArea(s),rightArea:this._rehydrateSideArea(o),relativeSizes:d||null,topArea:null!==(e=c)&&void 0!==e?e:null}}catch(e){return t}}async restore(e,t){if(this._firstDone)throw new Error("restore() must be called before `first` has resolved.");const{namespace:r}=e;if(this._trackers.has(r))throw new Error(`The tracker "${r}" is already restored.`);const{args:i,command:a,name:s,when:o}=t;this._trackers.add(r),e.widgetAdded.connect((e,t)=>{const n=s(t);n&&this.add(t,`${r}:${n}`)},this),e.widgetUpdated.connect((e,t)=>{const n=s(t);if(n){const e=`${r}:${n}`;d.nameProperty.set(t,e),this._widgets.set(e,t)}});const c=this._first;if("multiple-document"==this._mode){const t=e.restore({args:i||(()=>n.JSONExt.emptyObject),command:a,connector:this._connector,name:s,registry:this._registry,when:o?[c].concat(o):c}).catch(e=>{console.error(e)});return this._promises.push(t),t}e.defer({args:i||(()=>n.JSONExt.emptyObject),command:a,connector:this._connector,name:s,registry:this._registry,when:o?[c].concat(o):c}),this._deferred.push(e)}async restoreDeferred(){if(!this.isDeferred)return null;const e=Promise.resolve(),t=this._deferred.map(t=>e.then(()=>t.restore()));return this._deferred.length=0,await Promise.all(t),this._rehydrateMainArea(this._deferredMainArea)}save(e){var t;if(!this._promisesDone){const e="save() was called prematurely.";return console.warn(e),Promise.reject(e)}const r={};if(r.main=this.isDeferred?this._deferredMainArea:this._dehydrateMainArea(e.mainArea),this.isDeferred){const n=null===(t=e.mainArea)||void 0===t?void 0:t.currentWidget;if(n){const e=d.nameProperty.get(n);r.main={...r.main,current:e||void 0}}}return r.down=this._dehydrateDownArea(e.downArea),r.left=this._dehydrateSideArea(e.leftArea),r.right=this._dehydrateSideArea(e.rightArea),r.relativeSizes=e.relativeSizes,r.top={...e.topArea},this._connector.save(s,r)}_dehydrateMainArea(e){return e?d.serializeMain(e):null}_rehydrateMainArea(e){return e?d.deserializeMain(e,this._widgets):null}_dehydrateDownArea(e){if(!e)return null;const t={size:e.size};if(e.currentWidget){const r=d.nameProperty.get(e.currentWidget);r&&(t.current=r)}return e.widgets&&(t.widgets=e.widgets.map(e=>d.nameProperty.get(e)).filter(e=>!!e)),t}_rehydrateDownArea(e){var t;if(!e)return{currentWidget:null,size:0,widgets:null};const r=this._widgets,n=e.current&&r.has(`${e.current}`)?r.get(`${e.current}`):null,i=Array.isArray(e.widgets)?e.widgets.map(e=>r.has(`${e}`)?r.get(`${e}`):null).filter(e=>!!e):null;return{currentWidget:n,size:null!==(t=e.size)&&void 0!==t?t:0,widgets:i}}_dehydrateSideArea(e){if(!e)return null;const t={collapsed:e.collapsed,visible:e.visible};if(e.currentWidget){const r=d.nameProperty.get(e.currentWidget);r&&(t.current=r)}return e.widgets&&(t.widgets=e.widgets.map(e=>d.nameProperty.get(e)).filter(e=>!!e)),e.widgetStates&&(t.widgetStates=e.widgetStates),t}_rehydrateSideArea(e){var t,r;if(!e)return{collapsed:!0,currentWidget:null,visible:!0,widgets:null,widgetStates:{null:{sizes:null,expansionStates:null}}};const n=this._widgets,i=null!==(t=e.collapsed)&&void 0!==t&&t,a=e.current&&n.has(`${e.current}`)?n.get(`${e.current}`):null,s=Array.isArray(e.widgets)?e.widgets.map(e=>n.has(`${e}`)?n.get(`${e}`):null).filter(e=>!!e):null,o=e.widgetStates;return{collapsed:i,currentWidget:a,widgets:s,visible:null===(r=e.visible)||void 0===r||r,widgetStates:o}}_onWidgetDisposed(e){const t=d.nameProperty.get(e);this._widgets.delete(t)}}var d;!function(e){function t(r){return r&&r.type?"tab-area"===r.type?{type:"tab-area",currentIndex:r.currentIndex,widgets:r.widgets.map(t=>e.nameProperty.get(t)).filter(e=>!!e)}:{type:"split-area",orientation:r.orientation,sizes:r.sizes,children:r.children.map(t).filter(e=>!!e)}:null}function r(e,t){if(!e)return null;const n=e.type||"unknown";if("unknown"===n||"tab-area"!==n&&"split-area"!==n)return console.warn(`Attempted to deserialize unknown type: ${n}`),null;if("tab-area"===n){const{currentIndex:r,widgets:n}=e,i={type:"tab-area",currentIndex:r||0,widgets:n&&n.map(e=>t.get(e)).filter(e=>!!e)||[]};return i.currentIndex>i.widgets.length-1&&(i.currentIndex=0),i}const{orientation:i,sizes:a,children:s}=e;return{type:"split-area",orientation:i,sizes:a||[],children:s&&s.map(e=>r(e,t)).filter(e=>!!e)||[]}}e.nameProperty=new i.AttachedProperty({name:"name",create:e=>""}),e.serializeMain=function(r){const n={dock:r&&r.dock&&t(r.dock.main)||null};if(r&&r.currentWidget){const t=e.nameProperty.get(r.currentWidget);t&&(n.current=t)}return n},e.deserializeMain=function(e,t){if(!e)return null;const n=e.current||null,i=e.dock||null;return{currentWidget:n&&t.has(n)&&t.get(n)||null,dock:i?{main:r(i,t)}:null}}}(d||(d={}))},82514:(e,t,r)=>{r.d(t,{fo:()=>u,jO:()=>h,sU:()=>m});var n=r(93855),i=r(59915),a=r(75862),s=r(43834),o=r(92410),d=r(25884),c=r(17808),l=r(8186);const u=new d.Token("@jupyterlab/application:IMimeDocumentTracker","A widget tracker for documents rendered using a mime renderer extension. Use this if you want to list and interact with documents rendered by such extensions.");function h(e){const t=[],r=new n.WidgetTracker({namespace:"application-mimedocuments"});return e.forEach(e=>{let n=e.default;e.hasOwnProperty("__esModule")||(n=e),Array.isArray(n)||(n=[n]),n.forEach(e=>{t.push(m(r,e))})}),t.push({id:"@jupyterlab/application-extension:mimedocument",description:"Provides a mime document widget tracker.",optional:[l.E],provides:u,autoStart:!0,activate:(e,t)=>(t&&t.restore(r,{command:"docmanager:open",args:e=>({path:e.context.path,factory:p.factoryNameProperty.get(e)}),name:e=>`${e.context.path}:${p.factoryNameProperty.get(e)}`}),r)}),t}function m(e,t){return{id:t.id,description:t.description,requires:[a.IRenderMimeRegistry,s.ITranslator],autoStart:!0,activate:(r,n,a)=>{if(void 0!==t.rank?n.addFactory(t.rendererFactory,t.rank):n.addFactory(t.rendererFactory),!t.documentWidgetFactoryOptions)return;const s=r.docRegistry;let d=[];d=Array.isArray(t.documentWidgetFactoryOptions)?t.documentWidgetFactoryOptions:[t.documentWidgetFactoryOptions],t.fileTypes&&t.fileTypes.forEach(e=>{e.icon&&(e={...e,icon:o.LabIcon.resolve({icon:e.icon})}),r.docRegistry.addFileType(e)}),d.forEach(r=>{const o=r.toolbarFactory?e=>r.toolbarFactory(e.content.renderer):void 0,d=new i.MimeDocumentFactory({renderTimeout:t.renderTimeout,dataType:t.dataType,rendermime:n,modelName:r.modelName,name:r.name,primaryFileType:s.getFileType(r.primaryFileType),fileTypes:r.fileTypes,defaultFor:r.defaultFor,defaultRendered:r.defaultRendered,toolbarFactory:o,translator:a,factory:t.rendererFactory});s.addWidgetFactory(d),d.widgetCreated.connect((t,r)=>{p.factoryNameProperty.set(r,d.name),r.context.pathChanged.connect(()=>{e.save(r)}),e.add(r)})})}}}var p;!function(e){e.factoryNameProperty=new c.AttachedProperty({name:"factoryName",create:()=>{}})}(p||(p={}))}}]);
//# sourceMappingURL=2514.js.map