{"version":3,"file":"3289.bundle.js","mappings":"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","sources":["webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/@jupyterlab/mermaid/lib/tokens.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/@jupyterlab/mermaid/lib/manager.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/@jupyterlab/mermaid/lib/markdown.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/@jupyterlab/mermaid/lib/mime.js"],"sourcesContent":["// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\nimport { Token } from '@lumino/coreutils';\n// documented upstream constants\nexport const MERMAID_MIME_TYPE = 'text/vnd.mermaid';\nexport const MERMAID_FILE_EXTENSIONS = ['.mmd', '.mermaid'];\n// layout sniffing\nexport const RE_DEFAULT_RENDERER = /\\bdefaultRenderer[\"']?\\s*:\\s*([\"']?)(\\b[^\"'\\s]+\\b)(\\1)/gm;\n// mermaid themes\nexport const MERMAID_DEFAULT_THEME = 'default';\nexport const MERMAID_DARK_THEME = 'dark';\n// DOM\nexport const MERMAID_CLASS = 'jp-RenderedMermaid';\nexport const MERMAID_CODE_CLASS = 'mermaid';\nexport const WARNING_CLASS = 'jp-mod-warning';\nexport const DETAILS_CLASS = 'jp-RenderedMermaid-Details';\nexport const SUMMARY_CLASS = 'jp-RenderedMermaid-Summary';\n/**\n * The exported token for a mermaid manager\n */\nexport const IMermaidManager = new Token('@jupyterlab/mermaid:IMermaidManager', `a manager for rendering mermaid text-based diagrams`);\n/**\n * The exported token for a mermaid manager\n */\nexport const IMermaidMarkdown = new Token('@jupyterlab/mermaid:IMermaidMarkdown', `a manager for rendering mermaid text-based diagrams in markdown fenced code blocks`);\n//# sourceMappingURL=tokens.js.map","// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\nimport { PromiseDelegate } from '@lumino/coreutils';\nimport { LruCache } from '@jupyterlab/coreutils';\nimport { DETAILS_CLASS, MERMAID_CLASS, MERMAID_CODE_CLASS, MERMAID_DARK_THEME, MERMAID_DEFAULT_THEME, RE_DEFAULT_RENDERER, SUMMARY_CLASS, WARNING_CLASS } from './tokens';\n/**\n * A mermaid diagram manager with cache.\n */\nexport class MermaidManager {\n    constructor(options = {}) {\n        this._diagrams = new LruCache({ maxSize: options.maxCacheSize || null });\n        // handle reacting to themes\n        if (options.themes) {\n            Private.initThemes(options.themes || null);\n            options.themes.themeChanged.connect(this.initialize, this);\n        }\n    }\n    /**\n     * Post-process to ensure mermaid diagrams contain only valid SVG and XHTML.\n     */\n    static cleanMermaidSvg(svg) {\n        svg = svg.replace(Private.RE_VOID_ELEMENT, Private.replaceVoidElement);\n        return `${Private.SVG_XML_HEADER}${svg}`;\n    }\n    /**\n     * Handle (re)-initializing mermaid based on external values.\n     */\n    initialize() {\n        this._diagrams.clear();\n        Private.initMermaid();\n    }\n    /**\n     * Get the underlying, potentially un-initialized mermaid module.\n     */\n    async getMermaid() {\n        return await Private.ensureMermaid();\n    }\n    /**\n     * Get the version of the currently-loaded mermaid module\n     */\n    getMermaidVersion() {\n        return Private.version();\n    }\n    /**\n     * Get a pre-cached mermaid figure.\n     *\n     * This primarily exists for the needs of `marked`, which supports async node\n     * visitors, but not async rendering.\n     */\n    getCachedFigure(text) {\n        return this._diagrams.get(text);\n    }\n    /**\n     * Attempt a raw rendering of mermaid to an SVG string, extracting some metadata.\n     */\n    async renderSvg(text) {\n        const _mermaid = await this.getMermaid();\n        await Private.ensureRenderers(text);\n        const id = `jp-mermaid-${Private.nextMermaidId()}`;\n        // create temporary element into which to render\n        const el = document.createElement('div');\n        document.body.appendChild(el);\n        try {\n            let { svg } = await _mermaid.render(id, text, el);\n            svg = MermaidManager.cleanMermaidSvg(svg);\n            const parser = new DOMParser();\n            const doc = parser.parseFromString(svg, 'image/svg+xml');\n            const info = { text, svg };\n            const svgEl = doc.querySelector('svg');\n            const { maxWidth } = (svgEl === null || svgEl === void 0 ? void 0 : svgEl.style) || {};\n            info.width = maxWidth ? parseFloat(maxWidth) : null;\n            const firstTitle = doc.querySelector('title');\n            const firstDesc = doc.querySelector('desc');\n            if (firstTitle) {\n                info.accessibleTitle = firstTitle.textContent;\n            }\n            if (firstDesc) {\n                info.accessibleDescription = firstDesc.textContent;\n            }\n            return info;\n        }\n        finally {\n            el.remove();\n        }\n    }\n    /**\n     * Provide and cache a fully-rendered element, checking the cache first.\n     */\n    async renderFigure(text) {\n        // bail if already cached\n        let output = this._diagrams.get(text);\n        if (output != null) {\n            return output;\n        }\n        let className = MERMAID_CLASS;\n        let result = null;\n        // the element that will be returned\n        output = document.createElement('div');\n        output.className = className;\n        try {\n            const response = await this.renderSvg(text);\n            result = this.makeMermaidFigure(response);\n        }\n        catch (err) {\n            output.classList.add(WARNING_CLASS);\n            result = await this.makeMermaidError(text);\n        }\n        let version = this.getMermaidVersion();\n        if (version) {\n            result.dataset.jpMermaidVersion = version;\n        }\n        output.appendChild(result);\n        // update the cache for use when rendering synchronously\n        this._diagrams.set(text, output);\n        return output;\n    }\n    /**\n     * Provide a code block with the mermaid source.\n     */\n    makeMermaidCode(text) {\n        // append the source\n        const pre = document.createElement('pre');\n        const code = document.createElement('code');\n        code.innerText = text;\n        pre.appendChild(code);\n        code.className = MERMAID_CODE_CLASS;\n        code.textContent = text;\n        return pre;\n    }\n    /**\n     * Get the parser message element from a failed parse.\n     *\n     * This doesn't do much of anything if the text is successfully parsed.\n     */\n    async makeMermaidError(text) {\n        const _mermaid = await this.getMermaid();\n        let errorMessage = '';\n        try {\n            await _mermaid.parse(text);\n        }\n        catch (err) {\n            errorMessage = `${err}`;\n        }\n        const result = document.createElement('details');\n        result.className = DETAILS_CLASS;\n        const summary = document.createElement('summary');\n        summary.className = SUMMARY_CLASS;\n        summary.appendChild(this.makeMermaidCode(text));\n        result.appendChild(summary);\n        const warning = document.createElement('pre');\n        warning.innerText = errorMessage;\n        result.appendChild(warning);\n        return result;\n    }\n    /**\n     * Extract extra attributes to add to a generated figure.\n     */\n    makeMermaidFigure(info) {\n        const figure = document.createElement('figure');\n        const img = document.createElement('img');\n        figure.appendChild(img);\n        img.setAttribute('src', `data:image/svg+xml,${encodeURIComponent(info.svg)}`);\n        // add dimension information\n        if (info.width) {\n            img.width = info.width;\n        }\n        // add accessible alt title\n        if (info.accessibleTitle) {\n            img.setAttribute('alt', info.accessibleTitle);\n        }\n        figure.appendChild(this.makeMermaidCode(info.text));\n        // add accessible caption, with fallback to raw mermaid source\n        if (info.accessibleDescription) {\n            const caption = document.createElement('figcaption');\n            caption.className = 'sr-only';\n            caption.textContent = info.accessibleDescription;\n            figure.appendChild(caption);\n        }\n        return figure;\n    }\n}\n/**\n * A namespace for global, private mermaid data.\n */\nvar Private;\n(function (Private) {\n    let _themes = null;\n    let _mermaid = null;\n    let _mermaidElk = null;\n    let _loading = null;\n    let _loadingElk = null;\n    let _nextMermaidId = 0;\n    let _version = null;\n    /**\n     * Cache a reference to the theme manager.\n     */\n    function initThemes(themes) {\n        _themes = themes;\n    }\n    Private.initThemes = initThemes;\n    /**\n     * Get the version of mermaid used for rendering.\n     */\n    function version() {\n        return _version;\n    }\n    Private.version = version;\n    /**\n     * (Re-)initialize mermaid with lab-specific theme information\n     */\n    function initMermaid(mermaid = null) {\n        mermaid = _mermaid;\n        if (!mermaid) {\n            return false;\n        }\n        let theme = MERMAID_DEFAULT_THEME;\n        if (_themes) {\n            const jpTheme = _themes.theme;\n            theme =\n                jpTheme && _themes.isLight(jpTheme)\n                    ? MERMAID_DEFAULT_THEME\n                    : MERMAID_DARK_THEME;\n        }\n        const fontFamily = window\n            .getComputedStyle(document.body)\n            .getPropertyValue('--jp-ui-font-family');\n        mermaid.initialize({\n            theme,\n            fontFamily,\n            securityLevel: 'strict',\n            maxTextSize: 100000,\n            maxEdges: 100000,\n            startOnLoad: false\n        });\n        return true;\n    }\n    Private.initMermaid = initMermaid;\n    /**\n     * Determine whether mermaid has been loaded yet.\n     */\n    function getMermaid() {\n        return _mermaid;\n    }\n    Private.getMermaid = getMermaid;\n    /**\n     * Provide a globally-unique, but unstable, ID for disambiguation.\n     */\n    function nextMermaidId() {\n        return _nextMermaidId++;\n    }\n    Private.nextMermaidId = nextMermaidId;\n    /**\n     * Ensure mermaid has been lazily loaded once, initialized, and cached.\n     */\n    async function ensureMermaid() {\n        if (_mermaid != null) {\n            return _mermaid;\n        }\n        if (_loading) {\n            return _loading.promise;\n        }\n        _loading = new PromiseDelegate();\n        _version = (await import('mermaid/package.json')).version;\n        const tmpMermaid = (_mermaid = (await import('mermaid')).default);\n        initMermaid(tmpMermaid);\n        _mermaid = tmpMermaid;\n        _loading.resolve(_mermaid);\n        return _mermaid;\n    }\n    Private.ensureMermaid = ensureMermaid;\n    /** Detect and load any renderers configured via `%init` or YAML front matter.\n     *\n     * The current upstream behavior appears to be last-in wins, but check all.\n     */\n    async function ensureRenderers(text) {\n        let promises = [];\n        for (const match of [...text.matchAll(RE_DEFAULT_RENDERER)]) {\n            // eslint-disable-next-line @typescript-eslint/switch-exhaustiveness-check\n            switch ((match && match[2]) || null) {\n                case 'elk':\n                    promises.push(Private.ensureMermaidElk());\n                    break;\n            }\n        }\n        if (promises.length) {\n            await Promise.all(promises);\n        }\n    }\n    Private.ensureRenderers = ensureRenderers;\n    /**\n     * Ensure mermaid-elk has been lazily loaded once, initialized, and cached.\n     */\n    async function ensureMermaidElk() {\n        if (_mermaidElk != null) {\n            return _mermaidElk;\n        }\n        if (_loadingElk) {\n            return _loadingElk.promise;\n        }\n        _loadingElk = new PromiseDelegate();\n        const _mermaid = await ensureMermaid();\n        const tmpElk = (await import('@mermaid-js/layout-elk')).default;\n        _mermaid.registerLayoutLoaders(tmpElk);\n        _mermaidElk = tmpElk;\n        _loadingElk.resolve(_mermaidElk);\n        return _mermaidElk;\n    }\n    Private.ensureMermaidElk = ensureMermaidElk;\n    /**\n     * A regular expression for all void elements, which may include attributes and\n     * a slash.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Glossary/Void_element\n     *\n     * Of these, only `<br>` is generated by Mermaid in place of `\\n`,\n     * but _any_ \"malformed\" tag will break the SVG rendering entirely.\n     */\n    Private.RE_VOID_ELEMENT = /<\\s*(area|base|br|col|embed|hr|img|input|link|meta|param|source|track|wbr)\\s*([^>]*?)\\s*>/gi;\n    /**\n     * Ensure a void element is closed with a slash, preserving any attributes.\n     */\n    function replaceVoidElement(match, tag, rest) {\n        rest = rest.trim();\n        if (!rest.endsWith('/')) {\n            rest = `${rest} /`;\n        }\n        return `<${tag} ${rest}>`;\n    }\n    Private.replaceVoidElement = replaceVoidElement;\n    /**\n     * Named HTML entities with their decimal equivalent codes.\n     *\n     * @see https://www.w3.org/TR/WD-html40-970708/sgml/entities.html\n     * */\n    Private.HTML_ENTITIES = `<!ENTITY Aacute \"&#193;\">\n<!ENTITY aacute \"&#225;\">\n<!ENTITY Acirc \"&#194;\">\n<!ENTITY acirc \"&#226;\">\n<!ENTITY acute \"&#180;\">\n<!ENTITY AElig \"&#198;\">\n<!ENTITY aelig \"&#230;\">\n<!ENTITY Agrave \"&#192;\">\n<!ENTITY agrave \"&#224;\">\n<!ENTITY alefsym \"&#8501;\">\n<!ENTITY Alpha \"&#913;\">\n<!ENTITY alpha \"&#945;\">\n<!ENTITY amp \"&#38;\">\n<!ENTITY and \"&#8869;\">\n<!ENTITY ang \"&#8736;\">\n<!ENTITY Aring \"&#197;\">\n<!ENTITY aring \"&#229;\">\n<!ENTITY asymp \"&#8776;\">\n<!ENTITY Atilde \"&#195;\">\n<!ENTITY atilde \"&#227;\">\n<!ENTITY Auml \"&#196;\">\n<!ENTITY auml \"&#228;\">\n<!ENTITY bdquo \"&#8222;\">\n<!ENTITY Beta \"&#914;\">\n<!ENTITY beta \"&#946;\">\n<!ENTITY brvbar \"&#166;\">\n<!ENTITY bull \"&#8226;\">\n<!ENTITY cap \"&#8745;\">\n<!ENTITY Ccedil \"&#199;\">\n<!ENTITY ccedil \"&#231;\">\n<!ENTITY cedil \"&#184;\">\n<!ENTITY cent \"&#162;\">\n<!ENTITY Chi \"&#935;\">\n<!ENTITY chi \"&#967;\">\n<!ENTITY circ \"&#710;\">\n<!ENTITY clubs \"&#9827;\">\n<!ENTITY cong \"&#8773;\">\n<!ENTITY copy \"&#169;\">\n<!ENTITY crarr \"&#8629;\">\n<!ENTITY cup \"&#8746;\">\n<!ENTITY curren \"&#164;\">\n<!ENTITY dagger \"&#8224;\">\n<!ENTITY Dagger \"&#8225;\">\n<!ENTITY darr \"&#8595;\">\n<!ENTITY dArr \"&#8659;\">\n<!ENTITY deg \"&#176;\">\n<!ENTITY Delta \"&#916;\">\n<!ENTITY delta \"&#948;\">\n<!ENTITY diams \"&#9830;\">\n<!ENTITY divide \"&#247;\">\n<!ENTITY Eacute \"&#201;\">\n<!ENTITY eacute \"&#233;\">\n<!ENTITY Ecirc \"&#202;\">\n<!ENTITY ecirc \"&#234;\">\n<!ENTITY Egrave \"&#200;\">\n<!ENTITY egrave \"&#232;\">\n<!ENTITY empty \"&#8709;\">\n<!ENTITY emsp \"&#8195;\">\n<!ENTITY ensp \"&#8194;\">\n<!ENTITY epsilon \"&#949;\">\n<!ENTITY Epsilon \"&#917;\">\n<!ENTITY equiv \"&#8801;\">\n<!ENTITY Eta \"&#919;\">\n<!ENTITY eta \"&#951;\">\n<!ENTITY ETH \"&#208;\">\n<!ENTITY eth \"&#240;\">\n<!ENTITY Euml \"&#203;\">\n<!ENTITY euml \"&#235;\">\n<!ENTITY exist \"&#8707;\">\n<!ENTITY fnof \"&#402;\">\n<!ENTITY forall \"&#8704;\">\n<!ENTITY frac12 \"&#189;\">\n<!ENTITY frac14 \"&#188;\">\n<!ENTITY frac34 \"&#190;\">\n<!ENTITY frasl \"&#8260;\">\n<!ENTITY Gamma \"&#915;\">\n<!ENTITY gamma \"&#947;\">\n<!ENTITY ge \"&#8805;\">\n<!ENTITY gt \"&#62;\">\n<!ENTITY harr \"&#8596;\">\n<!ENTITY hArr \"&#8660;\">\n<!ENTITY hearts \"&#9829;\">\n<!ENTITY hellip \"&#8230;\">\n<!ENTITY Iacute \"&#205;\">\n<!ENTITY iacute \"&#237;\">\n<!ENTITY Icirc \"&#206;\">\n<!ENTITY icirc \"&#238;\">\n<!ENTITY iexcl \"&#161;\">\n<!ENTITY Igrave \"&#204;\">\n<!ENTITY igrave \"&#236;\">\n<!ENTITY image \"&#8465;\">\n<!ENTITY infin \"&#8734;\">\n<!ENTITY int \"&#8747;\">\n<!ENTITY Iota \"&#921;\">\n<!ENTITY iota \"&#953;\">\n<!ENTITY iquest \"&#191;\">\n<!ENTITY isin \"&#8712;\">\n<!ENTITY Iuml \"&#207;\">\n<!ENTITY iuml \"&#239;\">\n<!ENTITY Kappa \"&#922;\">\n<!ENTITY kappa \"&#954;\">\n<!ENTITY Lambda \"&#923;\">\n<!ENTITY lambda \"&#955;\">\n<!ENTITY lang \"&#9001;\">\n<!ENTITY laquo \"&#171;\">\n<!ENTITY larr \"&#8592;\">\n<!ENTITY lArr \"&#8656;\">\n<!ENTITY lceil \"&#8968;\">\n<!ENTITY ldquo \"&#8220;\">\n<!ENTITY le \"&#8804;\">\n<!ENTITY lfloor \"&#8970;\">\n<!ENTITY lowast \"&#8727;\">\n<!ENTITY loz \"&#9674;\">\n<!ENTITY lrm \"&#8206;\">\n<!ENTITY lsaquo \"&#8249;\">\n<!ENTITY lsquo \"&#8216;\">\n<!ENTITY lt \"&#60;\">\n<!ENTITY macr \"&#175;\">\n<!ENTITY mdash \"&#8212;\">\n<!ENTITY micro \"&#181;\">\n<!ENTITY middot \"&#183;\">\n<!ENTITY minus \"&#8722;\">\n<!ENTITY Mu \"&#924;\">\n<!ENTITY mu \"&#956;\">\n<!ENTITY nabla \"&#8711;\">\n<!ENTITY nbsp \"&#160;\">\n<!ENTITY ndash \"&#8211;\">\n<!ENTITY ne \"&#8800;\">\n<!ENTITY ni \"&#8715;\">\n<!ENTITY not \"&#172;\">\n<!ENTITY notin \"&#8713;\">\n<!ENTITY nsub \"&#8836;\">\n<!ENTITY Ntilde \"&#209;\">\n<!ENTITY ntilde \"&#241;\">\n<!ENTITY Nu \"&#925;\">\n<!ENTITY nu \"&#957;\">\n<!ENTITY Oacute \"&#211;\">\n<!ENTITY oacute \"&#243;\">\n<!ENTITY Ocirc \"&#212;\">\n<!ENTITY ocirc \"&#244;\">\n<!ENTITY OElig \"&#338;\">\n<!ENTITY oelig \"&#339;\">\n<!ENTITY Ograve \"&#210;\">\n<!ENTITY ograve \"&#242;\">\n<!ENTITY oline \"&#8254;\">\n<!ENTITY Omega \"&#937;\">\n<!ENTITY omega \"&#969;\">\n<!ENTITY Omicron \"&#927;\">\n<!ENTITY omicron \"&#959;\">\n<!ENTITY oplus \"&#8853;\">\n<!ENTITY or \"&#8870;\">\n<!ENTITY ordf \"&#170;\">\n<!ENTITY ordm \"&#186;\">\n<!ENTITY Oslash \"&#216;\">\n<!ENTITY oslash \"&#248;\">\n<!ENTITY Otilde \"&#213;\">\n<!ENTITY otilde \"&#245;\">\n<!ENTITY otimes \"&#8855;\">\n<!ENTITY Ouml \"&#214;\">\n<!ENTITY ouml \"&#246;\">\n<!ENTITY para \"&#182;\">\n<!ENTITY part \"&#8706;\">\n<!ENTITY permil \"&#8240;\">\n<!ENTITY perp \"&#8869;\">\n<!ENTITY Phi \"&#934;\">\n<!ENTITY phi \"&#966;\">\n<!ENTITY Pi \"&#928;\">\n<!ENTITY pi \"&#960;\">\n<!ENTITY piv \"&#982;\">\n<!ENTITY plusmn \"&#177;\">\n<!ENTITY pound \"&#163;\">\n<!ENTITY prime \"&#8242;\">\n<!ENTITY Prime \"&#8243;\">\n<!ENTITY prod \"&#8719;\">\n<!ENTITY prop \"&#8733;\">\n<!ENTITY Psi \"&#936;\">\n<!ENTITY psi \"&#968;\">\n<!ENTITY quot \"&#34;\">\n<!ENTITY radic \"&#8730;\">\n<!ENTITY rang \"&#9002;\">\n<!ENTITY raquo \"&#187;\">\n<!ENTITY rarr \"&#8594;\">\n<!ENTITY rArr \"&#8658;\">\n<!ENTITY rceil \"&#8969;\">\n<!ENTITY rdquo \"&#8221;\">\n<!ENTITY real \"&#8476;\">\n<!ENTITY reg \"&#174;\">\n<!ENTITY rfloor \"&#8971;\">\n<!ENTITY Rho \"&#929;\">\n<!ENTITY rho \"&#961;\">\n<!ENTITY rlm \"&#8207;\">\n<!ENTITY rsaquo \"&#8250;\">\n<!ENTITY rsquo \"&#8217;\">\n<!ENTITY sbquo \"&#8218;\">\n<!ENTITY Scaron \"&#352;\">\n<!ENTITY scaron \"&#353;\">\n<!ENTITY sdot \"&#8901;\">\n<!ENTITY sect \"&#167;\">\n<!ENTITY shy \"&#173;\">\n<!ENTITY Sigma \"&#931;\">\n<!ENTITY sigma \"&#963;\">\n<!ENTITY sigmaf \"&#962;\">\n<!ENTITY sim \"&#8764;\">\n<!ENTITY spades \"&#9824;\">\n<!ENTITY sub \"&#8834;\">\n<!ENTITY sube \"&#8838;\">\n<!ENTITY sum \"&#8721;\">\n<!ENTITY sup \"&#8835;\">\n<!ENTITY sup1 \"&#185;\">\n<!ENTITY sup2 \"&#178;\">\n<!ENTITY sup3 \"&#179;\">\n<!ENTITY supe \"&#8839;\">\n<!ENTITY szlig \"&#223;\">\n<!ENTITY Tau \"&#932;\">\n<!ENTITY tau \"&#964;\">\n<!ENTITY there4 \"&#8756;\">\n<!ENTITY Theta \"&#920;\">\n<!ENTITY theta \"&#952;\">\n<!ENTITY thetasym \"&#977;\">\n<!ENTITY thinsp \"&#8201;\">\n<!ENTITY THORN \"&#222;\">\n<!ENTITY thorn \"&#254;\">\n<!ENTITY tilde \"&#732;\">\n<!ENTITY times \"&#215;\">\n<!ENTITY trade \"&#8482;\">\n<!ENTITY Uacute \"&#218;\">\n<!ENTITY uacute \"&#250;\">\n<!ENTITY uarr \"&#8593;\">\n<!ENTITY uArr \"&#8657;\">\n<!ENTITY Ucirc \"&#219;\">\n<!ENTITY ucirc \"&#251;\">\n<!ENTITY Ugrave \"&#217;\">\n<!ENTITY ugrave \"&#249;\">\n<!ENTITY uml \"&#168;\">\n<!ENTITY upsih \"&#978;\">\n<!ENTITY Upsilon \"&#933;\">\n<!ENTITY upsilon \"&#965;\">\n<!ENTITY Uuml \"&#220;\">\n<!ENTITY uuml \"&#252;\">\n<!ENTITY weierp \"&#8472;\">\n<!ENTITY Xi \"&#926;\">\n<!ENTITY xi \"&#958;\">\n<!ENTITY Yacute \"&#221;\">\n<!ENTITY yacute \"&#253;\">\n<!ENTITY yen \"&#165;\">\n<!ENTITY Yuml \"&#376;\">\n<!ENTITY yuml \"&#255;\">\n<!ENTITY Zeta \"&#918;\">\n<!ENTITY zeta \"&#950;\">\n<!ENTITY zwj \"&#8205;\">\n<!ENTITY zwnj \"&#8204;\">`.replace(/\\n/g, ' ');\n    /**\n     * A reasonably strict xml declaration.\n     */\n    const XML_DECL = '<?xml version=\"1.0\" standalone=\"no\"?>';\n    /**\n     * The beginning of the XML doctype declaration.\n     */\n    const DOCTYPE_START = `<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\" [`;\n    /**\n     * The end of the XML docype declaration.\n     */\n    const DOCTYPE_END = ']>';\n    /**\n     * A full header for an SVG XML document.\n     */\n    Private.SVG_XML_HEADER = `${XML_DECL}\n    ${DOCTYPE_START}${Private.HTML_ENTITIES}${DOCTYPE_END}`;\n})(Private || (Private = {}));\n//# sourceMappingURL=manager.js.map","// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\n/**\n * An implementation of mermaid fenced code blocks in markdown.\n */\nexport class MermaidMarkdown {\n    constructor(options) {\n        this.languages = ['mermaid'];\n        this.rank = 100;\n        this._mermaid = options.mermaid;\n    }\n    /**\n     * Pre-parse and cache the rendered text.\n     */\n    async walk(text) {\n        await this._mermaid.renderFigure(text);\n    }\n    /**\n     * Render the diagram.\n     */\n    render(text) {\n        // handle pre-cached mermaid figures\n        let cachedFigure = this._mermaid.getCachedFigure(text);\n        if (cachedFigure) {\n            return cachedFigure.outerHTML;\n        }\n        return null;\n    }\n}\n//# sourceMappingURL=markdown.js.map","/* -----------------------------------------------------------------------------\n| Copyright (c) Jupyter Development Team.\n| Distributed under the terms of the Modified BSD License.\n|----------------------------------------------------------------------------*/\n/**\n * @packageDocumentation\n * @module mermaid-extension\n */\nimport { MERMAID_CLASS, MERMAID_MIME_TYPE, WARNING_CLASS } from './tokens';\nimport { PromiseDelegate } from '@lumino/coreutils';\nimport { Widget } from '@lumino/widgets';\nconst SVG_MIME = 'image/svg+xml';\n/**\n * A widget for rendering mermaid text-based diagrams, for usage with rendermime.\n */\nexport class RenderedMermaid extends Widget {\n    /**\n     * Create a new widget for rendering Vega/Vega-Lite.\n     */\n    constructor(options) {\n        super();\n        this._lastRendered = null;\n        this._mimeType = options.mimeType;\n        this.addClass(MERMAID_CLASS);\n    }\n    static set manager(manager) {\n        if (RenderedMermaid._manager) {\n            console.warn('Mermaid manager may only be set once, and is already set.');\n            return;\n        }\n        RenderedMermaid._manager = manager;\n        RenderedMermaid._managerReady.resolve(manager);\n    }\n    /**\n     * Render mermaid text-based diagrams into this widget's node.\n     */\n    async renderModel(model) {\n        const manager = await RenderedMermaid._managerReady.promise;\n        const text = model.data[this._mimeType];\n        if (text == null || text === this._lastRendered) {\n            return;\n        }\n        this._lastRendered = text;\n        // get a div containing a figure or parser message\n        const figure = await manager.renderFigure(text);\n        if (figure.classList.contains(WARNING_CLASS)) {\n            this.node.classList.add(WARNING_CLASS);\n        }\n        else {\n            this.node.classList.remove(WARNING_CLASS);\n        }\n        if (!figure.firstChild) {\n            return;\n        }\n        if (this.node.innerHTML !== figure.innerHTML) {\n            this.node.innerHTML = figure.innerHTML;\n        }\n        // capture the version of mermaid used\n        const version = manager.getMermaidVersion();\n        const mermaidMetadata = {\n            ...(model.metadata[MERMAID_MIME_TYPE] || {}),\n            version\n        };\n        const metadata = {\n            ...model.metadata,\n            [MERMAID_MIME_TYPE]: mermaidMetadata\n        };\n        // if available, set the fully-rendered SVG\n        const img = figure.querySelector('img');\n        if (img) {\n            const svg = decodeURIComponent(img.src.split(',')[1]);\n            const oldSvg = model.data[SVG_MIME];\n            if (svg !== oldSvg) {\n                model.setData({\n                    data: { ...model.data, [SVG_MIME]: svg },\n                    metadata\n                });\n            }\n        }\n        else {\n            const dataWithoutSvg = { ...model.data };\n            delete dataWithoutSvg[SVG_MIME];\n            model.setData({ data: dataWithoutSvg, metadata });\n        }\n    }\n}\nRenderedMermaid._manager = null;\nRenderedMermaid._managerReady = new PromiseDelegate();\n/**\n * A mime renderer factory for mermaid text-based diagrams.\n */\nexport const rendererFactory = {\n    safe: true,\n    mimeTypes: [MERMAID_MIME_TYPE],\n    createRenderer: options => new RenderedMermaid(options)\n};\n//# sourceMappingURL=mime.js.map"],"names":["MERMAID_MIME_TYPE","MERMAID_FILE_EXTENSIONS","RE_DEFAULT_RENDERER","MERMAID_DEFAULT_THEME","MERMAID_DARK_THEME","MERMAID_CLASS","MERMAID_CODE_CLASS","WARNING_CLASS","DETAILS_CLASS","SUMMARY_CLASS","IMermaidManager","Token","IMermaidMarkdown","MermaidManager","constructor","options","this","_diagrams","LruCache","maxSize","maxCacheSize","themes","Private","initThemes","themeChanged","connect","initialize","cleanMermaidSvg","svg","replace","RE_VOID_ELEMENT","replaceVoidElement","SVG_XML_HEADER","clear","initMermaid","getMermaid","ensureMermaid","getMermaidVersion","version","getCachedFigure","text","get","renderSvg","_mermaid","ensureRenderers","id","nextMermaidId","el","document","createElement","body","appendChild","render","doc","DOMParser","parseFromString","info","svgEl","querySelector","maxWidth","style","width","parseFloat","firstTitle","firstDesc","accessibleTitle","textContent","accessibleDescription","remove","renderFigure","output","className","result","response","makeMermaidFigure","err","classList","add","makeMermaidError","dataset","jpMermaidVersion","set","makeMermaidCode","pre","code","innerText","errorMessage","parse","summary","warning","figure","img","setAttribute","encodeURIComponent","caption","_themes","_mermaidElk","_loading","_loadingElk","_nextMermaidId","_version","mermaid","theme","jpTheme","isLight","fontFamily","window","getComputedStyle","getPropertyValue","securityLevel","maxTextSize","maxEdges","startOnLoad","async","promise","PromiseDelegate","tmpMermaid","default","resolve","promises","match","matchAll","push","ensureMermaidElk","length","Promise","all","tmpElk","registerLayoutLoaders","tag","rest","trim","endsWith","HTML_ENTITIES","MermaidMarkdown","languages","rank","walk","cachedFigure","outerHTML","SVG_MIME","RenderedMermaid","Widget","super","_lastRendered","_mimeType","mimeType","addClass","manager","_manager","console","warn","_managerReady","renderModel","model","data","contains","node","firstChild","innerHTML","mermaidMetadata","metadata","decodeURIComponent","src","split","setData","dataWithoutSvg","rendererFactory","safe","mimeTypes","createRenderer"],"ignoreList":[],"sourceRoot":""}