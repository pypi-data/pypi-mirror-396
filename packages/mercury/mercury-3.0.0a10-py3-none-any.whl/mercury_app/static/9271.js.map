{"version":3,"file":"9271.bundle.js","mappings":"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","sources":["webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/@jupyterlab/translation-extension/lib/index.js"],"sourcesContent":["/* ----------------------------------------------------------------------------\n| Copyright (c) Jupyter Development Team.\n| Distributed under the terms of the Modified BSD License.\n|----------------------------------------------------------------------------*/\n/**\n * @packageDocumentation\n * @module translation-extension\n */\nimport { ILabShell, JupyterFrontEnd } from '@jupyterlab/application';\nimport { Dialog, ICommandPalette, showDialog } from '@jupyterlab/apputils';\nimport { IMainMenu } from '@jupyterlab/mainmenu';\nimport { ISettingRegistry } from '@jupyterlab/settingregistry';\nimport { ITranslator, ITranslatorConnector, TranslationManager, TranslatorConnector } from '@jupyterlab/translation';\n/**\n * Translation plugins\n */\nconst PLUGIN_ID = '@jupyterlab/translation-extension:plugin';\n/**\n * Provide the translator connector as a separate plugin to allow for alternative\n * implementations that may want to fetch translation bundles from a different\n * source or endpoint.\n */\nconst translatorConnector = {\n    id: '@jupyterlab/translation-extension:translator-connector',\n    description: 'Provides the application translation connector.',\n    autoStart: true,\n    requires: [JupyterFrontEnd.IPaths],\n    provides: ITranslatorConnector,\n    activate: (app, paths) => {\n        const url = paths.urls.translations;\n        const serverSettings = app.serviceManager.serverSettings;\n        return new TranslatorConnector(url, serverSettings);\n    }\n};\n/**\n * The main translator plugin.\n */\nconst translator = {\n    id: '@jupyterlab/translation-extension:translator',\n    description: 'Provides the application translation object.',\n    autoStart: true,\n    requires: [JupyterFrontEnd.IPaths, ISettingRegistry],\n    optional: [ILabShell, ITranslatorConnector],\n    provides: ITranslator,\n    activate: async (app, paths, settings, labShell, connector) => {\n        const setting = await settings.load(PLUGIN_ID);\n        const currentLocale = setting.get('locale').composite;\n        let stringsPrefix = setting.get('stringsPrefix')\n            .composite;\n        const displayStringsPrefix = setting.get('displayStringsPrefix')\n            .composite;\n        stringsPrefix = displayStringsPrefix ? stringsPrefix : '';\n        const serverSettings = app.serviceManager.serverSettings;\n        const translationManager = new TranslationManager(paths.urls.translations, stringsPrefix, serverSettings, connector !== null && connector !== void 0 ? connector : undefined);\n        // As we wait for fetching the translation, ITranslator is guarantee to be\n        // ready when consumed in other plugins.\n        await translationManager.fetch(currentLocale);\n        // Set the document language after optionally fetching the system language\n        // if the setting 'locale' is set to 'default'\n        document.documentElement.lang = translationManager.languageCode;\n        // Set translator to UI\n        if (labShell) {\n            labShell.translator = translationManager;\n        }\n        Dialog.translator = translationManager;\n        return translationManager;\n    }\n};\n/**\n * Initialization data for the extension.\n */\nconst langMenu = {\n    id: PLUGIN_ID,\n    description: 'Adds translation commands and settings.',\n    requires: [ISettingRegistry, ITranslator, ITranslatorConnector],\n    optional: [IMainMenu, ICommandPalette],\n    autoStart: true,\n    activate: (app, settings, translator, translatorConnector, mainMenu, palette) => {\n        var _a;\n        const trans = translator.load('jupyterlab');\n        const { commands } = app;\n        // Create a languages menu\n        const languagesMenu = mainMenu\n            ? (_a = mainMenu.settingsMenu.items.find(item => {\n                var _a;\n                return item.type === 'submenu' &&\n                    ((_a = item.submenu) === null || _a === void 0 ? void 0 : _a.id) === 'jp-mainmenu-settings-language';\n            })) === null || _a === void 0 ? void 0 : _a.submenu\n            : null;\n        // Get list of available locales\n        translatorConnector\n            .fetch()\n            .then(languageList => {\n            const appLocale = translator.languageCode.replace('-', '_');\n            for (const locale in languageList.data) {\n                const value = languageList.data[locale];\n                const displayName = value.displayName;\n                const nativeName = value.nativeName;\n                const toggled = appLocale === locale;\n                const label = toggled\n                    ? `${displayName}`\n                    : `${displayName} - ${nativeName}`;\n                // Add a command per language\n                const command = `jupyterlab-translation:${locale}`;\n                commands.addCommand(command, {\n                    label: label,\n                    caption: trans.__('Change interface language to %1', label),\n                    isEnabled: () => !toggled,\n                    isToggled: () => toggled,\n                    execute: async () => {\n                        const result = await showDialog({\n                            title: trans.__('Change interface language?'),\n                            body: trans.__('After changing the interface language to %1, you will need to reload JupyterLab to see the changes.', label),\n                            buttons: [\n                                Dialog.cancelButton(),\n                                Dialog.okButton({ label: trans.__('Change and reload') })\n                            ]\n                        });\n                        if (result.button.accept) {\n                            try {\n                                await settings.set(PLUGIN_ID, 'locale', locale);\n                                window.location.reload();\n                            }\n                            catch (reason) {\n                                console.error(`Failed to update language locale to ${locale}`, reason);\n                            }\n                        }\n                    },\n                    describedBy: {\n                        args: {\n                            type: 'object',\n                            properties: {}\n                        }\n                    }\n                });\n                // Add the language command to the menu\n                if (languagesMenu) {\n                    languagesMenu.addItem({\n                        command,\n                        args: {}\n                    });\n                }\n                if (palette) {\n                    palette.addItem({\n                        category: trans.__('Display Languages'),\n                        command\n                    });\n                }\n            }\n        })\n            .catch(reason => {\n            console.error(`Available locales errored!\\n${reason}`);\n        });\n    }\n};\n/**\n * Export the plugins as default.\n */\nconst plugins = [\n    translatorConnector,\n    translator,\n    langMenu\n];\nexport default plugins;\n//# sourceMappingURL=index.js.map"],"names":["PLUGIN_ID","translatorConnector","id","description","autoStart","requires","JupyterFrontEnd","IPaths","provides","ITranslatorConnector","activate","app","paths","url","urls","translations","serverSettings","serviceManager","TranslatorConnector","translator","ISettingRegistry","optional","ILabShell","ITranslator","async","settings","labShell","connector","setting","load","currentLocale","get","composite","stringsPrefix","translationManager","TranslationManager","undefined","fetch","document","documentElement","lang","languageCode","Dialog","langMenu","IMainMenu","ICommandPalette","mainMenu","palette","_a","trans","commands","languagesMenu","settingsMenu","items","find","item","type","submenu","then","languageList","appLocale","replace","locale","data","value","displayName","nativeName","toggled","label","command","addCommand","caption","__","isEnabled","isToggled","execute","showDialog","title","body","buttons","cancelButton","okButton","button","accept","set","window","location","reload","reason","console","error","describedBy","args","properties","addItem","category","catch"],"ignoreList":[],"sourceRoot":""}