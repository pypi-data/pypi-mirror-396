{"version":3,"file":"4506.bundle.js","mappings":"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","sources":["webpack://_JUPYTERLAB.CORE_OUTPUT/../packages/application/src/app/index.ts","webpack://_JUPYTERLAB.CORE_OUTPUT/../packages/application/src/plugins/navbar.ts","webpack://_JUPYTERLAB.CORE_OUTPUT/../packages/application/src/plugins/mercury.ts","webpack://_JUPYTERLAB.CORE_OUTPUT/../packages/application/src/plugins/index.ts","webpack://_JUPYTERLAB.CORE_OUTPUT/../packages/application/src/index.ts"],"sourcesContent":["import {\n  JupyterFrontEnd,\n  JupyterFrontEndPlugin\n} from '@jupyterlab/application';\nimport { createRendermimePlugins } from '@jupyterlab/application/lib/mimerenderers';\nimport { PageConfig } from '@jupyterlab/coreutils';\nimport { DocumentRegistry } from '@jupyterlab/docregistry';\nimport { IRenderMime } from '@jupyterlab/rendermime-interfaces';\nimport { Token } from '@lumino/coreutils';\nimport { Message } from '@lumino/messaging';\nimport { Signal, ISignal } from '@lumino/signaling';\nimport { BoxLayout, Widget } from '@lumino/widgets';\n\n/**\n * The Mercury application shell token.\n */\nexport const IMercuryShell = new Token<MercuryShell>(\n  'mercury-application:IMercuryShell'\n);\n\nexport class MercuryShell extends Widget implements JupyterFrontEnd.IShell {\n  constructor() {\n    super();\n    this._updated = new Signal(this);\n    this.layout = new BoxLayout();\n    this.id = 'main';\n    this._currentWidget = null;\n  }\n\n  /**\n   * Signal emitted when the shell is updated.\n   */\n  get updated(): ISignal<MercuryShell, void> {\n    return this._updated;\n  }\n\n  /**\n   * Activates a widget inside the application shell.\n   *\n   * @param id - The ID of the widget being activated.\n   */\n  activateById(id: string): void {\n    // pass no-op\n  }\n\n  /**\n   * Add a widget to the application shell.\n   *\n   * @param widget - The widget being added.\n   *\n   * @param area - Optional region in the shell into which the widget should\n   * be added.\n   *\n   * @param options - Optional flags the shell might use when opening the\n   * widget, as defined in the `DocumentRegistry`.\n   */\n  add(\n    widget: Widget,\n    area?: string,\n    options?: DocumentRegistry.IOpenOptions\n  ): void {\n    if ((this.layout as BoxLayout).widgets.length > 0 || area !== 'mercury') {\n      // Bail\n      return;\n    }\n    BoxLayout.setStretch(widget, 1);\n    (this.layout as BoxLayout).addWidget(widget);\n    this._currentWidget = widget;\n  }\n  /**\n   * The focused widget in the application shell.\n   *\n   * #### Notes\n   * Different shell implementations have latitude to decide what \"current\"\n   * or \"focused\" mean, depending on their user interface characteristics.\n   */\n  get currentWidget(): Widget | null {\n    return this._currentWidget;\n  }\n\n  /**\n   * Returns an iterator for the widgets inside the application shell.\n   *\n   * @param area - Optional regions in the shell whose widgets are iterated.\n   */\n  *widgets(area?: string): IterableIterator<Widget> {\n    yield* (this.layout as BoxLayout).widgets;\n  }\n\n  /**\n   * A message handler invoked on an `'update-request'` message.\n   *\n   * #### Notes\n   * The default implementation of this handler is a no-op.\n   */\n  protected onUpdateRequest(msg: Message): void {\n    super.onUpdateRequest(msg);\n    this._updated.emit();\n  }\n\n  private _currentWidget: Widget | null;\n  private _updated: Signal<MercuryShell, void>;\n}\n\nexport class MercuryApp extends JupyterFrontEnd<JupyterFrontEnd.IShell> {\n  /**\n   * Construct a new application object.\n   *\n   * @param options The instantiation options for an application.\n   */\n  constructor(options: Partial<MercuryApp.IOptions> = {}) {\n    super({ ...options, shell: options.shell ?? new MercuryShell() });\n    if (options.mimeExtensions) {\n      for (const plugin of createRendermimePlugins(options.mimeExtensions)) {\n        this.registerPlugin(plugin);\n      }\n    }\n  }\n\n  /**\n   * The name of the application.\n   */\n  readonly name = 'Mercury';\n\n  /**\n   * A namespace/prefix plugins may use to denote their provenance.\n   */\n  readonly namespace = this.name;\n\n  /**\n   * The version of the application.\n   */\n  readonly version = PageConfig.getOption('appVersion') ?? 'unknown';\n\n  /**\n   * The JupyterLab application paths dictionary.\n   */\n  get paths(): JupyterFrontEnd.IPaths {\n    return {\n      urls: {\n        base: PageConfig.getOption('baseUrl'),\n        notFound: PageConfig.getOption('notFoundUrl'),\n        app: PageConfig.getOption('appUrl'),\n        static: PageConfig.getOption('staticUrl'),\n        settings: PageConfig.getOption('settingsUrl'),\n        themes: PageConfig.getOption('themesUrl'),\n        doc: PageConfig.getOption('docUrl'),\n        translations: PageConfig.getOption('translationsApiUrl')\n      },\n      directories: {\n        appSettings: PageConfig.getOption('appSettingsDir'),\n        schemas: PageConfig.getOption('schemasDir'),\n        static: PageConfig.getOption('staticDir'),\n        templates: PageConfig.getOption('templatesDir'),\n        themes: PageConfig.getOption('themesDir'),\n        userSettings: PageConfig.getOption('userSettingsDir'),\n        serverRoot: PageConfig.getOption('serverRoot'),\n        workspaces: PageConfig.getOption('workspacesDir')\n      }\n    };\n  }\n\n  /**\n   * Register plugins from a plugin module.\n   *\n   * @param mod - The plugin module to register.\n   */\n  registerPluginModule(mod: MercuryApp.IPluginModule): void {\n    let data = mod.default;\n    // Handle commonjs exports.\n    if (!Object.prototype.hasOwnProperty.call(mod, '__esModule')) {\n      data = mod as any;\n    }\n    if (!Array.isArray(data)) {\n      data = [data];\n    }\n    data.forEach(item => {\n      try {\n        this.registerPlugin(item);\n      } catch (error) {\n        console.error(error);\n      }\n    });\n  }\n\n  /**\n   * Register the plugins from multiple plugin modules.\n   *\n   * @param mods - The plugin modules to register.\n   */\n  registerPluginModules(mods: MercuryApp.IPluginModule[]): void {\n    mods.forEach(mod => {\n      this.registerPluginModule(mod);\n    });\n  }\n}\n\nexport namespace MercuryApp {\n  export interface IOptions\n    extends JupyterFrontEnd.IOptions<JupyterFrontEnd.IShell>,\n      Partial<IInfo> {}\n\n  /**\n   * The information about a RetroLab application.\n   */\n  export interface IInfo {\n    /**\n     * The mime renderer extensions.\n     */\n    readonly mimeExtensions: IRenderMime.IExtensionModule[];\n  }\n\n  /**\n   * The interface for a module that exports a plugin or plugins as\n   * the default value.\n   */\n  export interface IPluginModule {\n    /**\n     * The default export.\n     */\n    default: JupyterFrontEndPlugin<any> | JupyterFrontEndPlugin<any>[];\n  }\n}\n","// src/navbar.ts\ntype NotebookItem = {\n  name: string;\n  description?: string;\n  href: string;\n  slug: string;\n  thumbnail_bg?: string;\n  thumbnail_text?: string;\n  thumbnail_text_color?: string;\n};\n\nexport type MercuryNavbarOptions = {\n  /** Base URL from PageConfig.getBaseUrl() */\n  baseUrl: string;\n  /** Title from PageConfig.getOption('title') */\n  title: string;\n  /** URL that returns the notebooks JSON array */\n  apiUrl: string;\n  /** Callback fired when the header height is known/changes (e.g., mount) */\n  onHeightChange?: (px: number) => void;\n  /** Where to insert the header; defaults to document.body */\n  attachTo?: HTMLElement;\n};\n\nexport class MercuryNavbar {\n  private opts: MercuryNavbarOptions;\n  private header?: HTMLElement;\n  private styleEl?: HTMLStyleElement;\n  private btn?: HTMLButtonElement;\n  private menu?: HTMLDivElement;\n  private menuList?: HTMLDivElement;\n  private caret?: SVGSVGElement;\n  private notebooks: NotebookItem[] = [];\n  private menuOpen = false;\n  private clickAway?: (e: MouseEvent) => void;\n  private keyHandler?: (e: KeyboardEvent) => void;\n\n  constructor(opts: MercuryNavbarOptions) {\n    this.opts = { ...opts, attachTo: opts.attachTo ?? document.body };\n  }\n\n  async mount(): Promise<void> {\n    this.injectStyles();\n    this.buildHeader();\n    this.opts.attachTo!.insertBefore(this.header!, this.opts.attachTo!.firstChild);\n\n    // Notify consumer about height so they can add padding to content below\n    const height = this.header!.getBoundingClientRect().height || 52;\n    this.opts.onHeightChange?.(height);\n\n    await this.loadNotebooks();\n    this.bindGlobalHandlers();\n  }\n\n  destroy(): void {\n    this.unbindGlobalHandlers();\n    this.header?.remove();\n    this.styleEl?.remove();\n  }\n\n  /** ------- private helpers below ------- */\n\n  private injectStyles() {\n    const style = document.createElement('style');\n    style.id = 'mrc-header-style';\n    style.textContent = `\n        :root { color-scheme: light dark; }\n        .mrc-hidden { display: none; }\n  \n        /* Header */\n        .mrc-hdr {\n          position: fixed; top: 0; left: 0; right: 0; z-index: 10000;\n          background: #0b0b0c;\n          border-bottom: 1px solid rgba(255,255,255,0.08);\n        }\n        .mrc-hdr-inner {\n          margin: 0 auto;\n          display: flex; align-items: center; justify-content: space-between;\n          padding: .6rem .75rem;\n        }\n        .mrc-brand {\n          font-weight: 750; letter-spacing: -.01em;\n          color: #f3f4f6; font-size: clamp(14px, 2vw, 20px);\n          text-decoration: none;\n          font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, sans-serif;\n        }\n        .mrc-brand:hover { text-decoration: underline; }\n  \n        /* Button */\n        .mrc-btn {\n          display: inline-flex; align-items: center; gap: .5rem;\n          border: 1px solid #e5e7eb;\n          background: #fff; color: #374151;\n          padding: .45rem .75rem; font-size: 13px; border-radius: .5rem;\n          transition: box-shadow .15s ease, transform .15s ease;\n          cursor: pointer;\n        }\n        .mrc-btn[disabled] { opacity: .7; cursor: progress; }\n        .mrc-btn:hover { text-decoration: none; box-shadow: 0 1px 8px rgba(0,0,0,.06); }\n        .mrc-caret { transition: transform .15s ease; }\n  \n        /* Menu (dropdown) */\n        .mrc-menu{\n          position:absolute; right:0; margin-top:.5rem; width:22rem; max-height:28rem; overflow:auto;\n          border:1px solid rgba(0,0,0,.08); border-radius:1rem;\n          background:rgba(255,255,255,.95); backdrop-filter:blur(8px);\n          box-shadow:0 10px 30px rgba(0,0,0,.08);\n        }\n        .mrc-menu-list{ padding:.4rem; }\n        .mrc-menu-item{\n          display:flex; align-items:center; gap:.7rem;\n          padding:.6rem .65rem; border-radius:.75rem;\n          color:#111827; font-size:14px;\n          text-decoration:none;\n          transition: background-color .12s ease, transform .12s ease;\n          font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, sans-serif;\n        }\n        .mrc-menu-item:hover{ background:#f8fafc; text-decoration:none; }\n        .mrc-menu-item:active{ transform: translateY(0.5px); }\n        .mrc-menu-thumb{\n          width:36px; height:28px; border-radius:.6rem;\n          display:grid; place-items:center; font-weight:700; line-height:1;\n          box-shadow: inset 0 0 0 1px rgba(0,0,0,.03);\n        }\n      `;\n    document.head.appendChild(style);\n    this.styleEl = style;\n  }\n\n  private buildHeader() {\n    const header = document.createElement('header');\n    header.className = 'mrc-hdr';\n    header.setAttribute('role', 'banner');\n\n    const inner = document.createElement('div');\n    inner.className = 'mrc-hdr-inner';\n\n    // Brand\n    const brand = document.createElement('a');\n    brand.className = 'mrc-brand';\n    brand.href = this.opts.baseUrl || '/';\n    brand.textContent = this.opts.title || 'Mercury';\n\n    // Right side\n    const rightWrap = document.createElement('div');\n    rightWrap.style.position = 'relative';\n\n    const btn = document.createElement('button');\n    btn.type = 'button';\n    btn.className = 'mrc-btn';\n    btn.id = 'mrcNbBtn';\n    btn.setAttribute('aria-haspopup', 'menu');\n    btn.setAttribute('aria-expanded', 'false');\n    btn.textContent = 'Notebooks';\n\n    const caret = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n    caret.setAttribute('class', 'mrc-caret');\n    caret.setAttribute('width', '16');\n    caret.setAttribute('height', '16');\n    caret.setAttribute('viewBox', '0 0 20 20');\n    caret.setAttribute('fill', 'currentColor');\n    caret.setAttribute('aria-hidden', 'true');\n    caret.innerHTML = `<path fill-rule=\"evenodd\" d=\"M5.23 7.21a.75.75 0 0 1 1.06.02L10 10.94l3.71-3.71a.75.75 0 0 1 1.08 1.04l-4.25 4.25a.75.75 0 0 1-1.06 0L5.21 8.27a.75.75 0 0 1 .02-1.06z\" clip-rule=\"evenodd\"/>`;\n    btn.appendChild(caret);\n\n    const menu = document.createElement('div');\n    menu.id = 'mrcNbMenu';\n    menu.className = 'mrc-menu mrc-hidden';\n    menu.setAttribute('role', 'menu');\n    menu.setAttribute('aria-label', 'Notebook list');\n\n    const menuList = document.createElement('div');\n    menuList.id = 'mrcNbMenuList';\n    menuList.className = 'mrc-menu-list';\n    menuList.setAttribute('role', 'none');\n\n    menu.appendChild(menuList);\n    rightWrap.appendChild(btn);\n    rightWrap.appendChild(menu);\n\n    inner.appendChild(brand);\n    inner.appendChild(rightWrap);\n    header.appendChild(inner);\n\n    // Events\n    btn.addEventListener('click', (e) => {\n      e.preventDefault();\n      if (!this.notebooks.length) return;\n      this.setMenu(!this.menuOpen);\n    });\n\n    this.header = header;\n    this.btn = btn;\n    this.menu = menu;\n    this.menuList = menuList;\n    this.caret = caret;\n  }\n\n  private bindGlobalHandlers() {\n    this.clickAway = (e: MouseEvent) => {\n      if (!this.menuOpen || !this.menu || !this.btn) return;\n      const t = e.target as Node;\n      if (!this.menu.contains(t) && !this.btn.contains(t)) this.setMenu(false);\n    };\n    this.keyHandler = (e: KeyboardEvent) => {\n      if (String(e.key).toLowerCase() === 'escape') this.setMenu(false);\n    };\n    document.addEventListener('click', this.clickAway!);\n    document.addEventListener('keydown', this.keyHandler!);\n  }\n\n  private unbindGlobalHandlers() {\n    if (this.clickAway) document.removeEventListener('click', this.clickAway);\n    if (this.keyHandler) document.removeEventListener('keydown', this.keyHandler);\n  }\n\n  private setMenu(open: boolean) {\n    if (!this.menu || !this.btn || !this.caret) return;\n    this.menu.classList.toggle('mrc-hidden', !open);\n    this.btn.setAttribute('aria-expanded', String(open));\n    this.caret.style.transform = open ? 'rotate(180deg)' : 'rotate(0deg)';\n    this.menuOpen = open;\n  }\n\n  private sizeThumb(el: HTMLElement) {\n    const txt = (el.textContent || '').trim();\n    let fs = '1.0rem';\n    if (txt.length > 6) fs = '0.4rem';\n    else if (txt.length > 4) fs = '0.6rem';\n    else if (txt.length > 2) fs = '0.8rem';\n    el.style.fontSize = fs;\n  }\n\n  private renderMenu(items: NotebookItem[]) {\n    if (!this.menuList) return;\n    const frag = document.createDocumentFragment();\n    for (const nb of items) {\n      const a = document.createElement('a');\n      a.className = 'mrc-menu-item';\n      a.href = nb.slug || '#';\n      a.setAttribute('role', 'menuitem');\n\n      const t = document.createElement('div');\n      t.className = 'mrc-menu-thumb';\n      t.style.background = nb.thumbnail_bg || '#f1f5f9';\n      t.style.color = nb.thumbnail_text_color || '#0f172a';\n      t.textContent = nb.thumbnail_text || 'ðŸ“’';\n      this.sizeThumb(t);\n\n      const span = document.createElement('span');\n      span.textContent = nb.name || 'Notebook';\n\n      a.appendChild(t);\n      a.appendChild(span);\n      frag.appendChild(a);\n    }\n    this.menuList.innerHTML = '';\n    this.menuList.appendChild(frag);\n  }\n\n  private async loadNotebooks() {\n    if (!this.btn || !this.menu) return;\n    try {\n      this.btn.disabled = true;\n      const resp = await fetch(this.opts.apiUrl, {\n        method: 'GET',\n        credentials: 'same-origin',\n        headers: { Accept: 'application/json' }\n      });\n      if (!resp.ok) throw new Error(`HTTP ${resp.status}`);\n      const data = (await resp.json()) as NotebookItem[] | undefined;\n      this.notebooks = Array.isArray(data) ? data : [];\n      if (this.notebooks.length === 0) {\n        this.btn.style.display = 'none';\n        this.menu.remove();\n        return;\n      }\n      this.renderMenu(this.notebooks);\n    } catch (err) {\n      console.warn('[Mercury] Failed to load notebooks menu:', err);\n      this.btn.style.display = 'none';\n      this.menu?.remove();\n    } finally {\n      this.btn.disabled = false;\n    }\n  }\n}\n","/* eslint-disable no-inner-declarations */\nimport {\n  JupyterFrontEnd,\n  JupyterFrontEndPlugin\n} from '@jupyterlab/application';\nimport { ISessionContextDialogs } from '@jupyterlab/apputils';\nimport type { Cell } from '@jupyterlab/cells';\nimport { IEditorServices } from '@jupyterlab/codeeditor';\nimport { PageConfig, signalToPromise } from '@jupyterlab/coreutils';\nimport { IDocumentManager } from '@jupyterlab/docmanager';\nimport { ITranslator } from '@jupyterlab/translation';\nimport { PromiseDelegate } from '@lumino/coreutils';\nimport { type AppWidget, type MercuryWidget } from '@mljar/mercury-extension';\nimport { IMercuryCellExecutor } from '@mljar/mercury-tokens';\n\nimport { MercuryNavbar } from './navbar';\n\n/**\n * Open the notebook with Mercury.\n */\nexport const plugin: JupyterFrontEndPlugin<void> = {\n  id: 'mercury-application:opener',\n  autoStart: true,\n  requires: [IDocumentManager, IMercuryCellExecutor],\n  optional: [IEditorServices, ISessionContextDialogs, ITranslator],\n  activate: (\n    app: JupyterFrontEnd,\n    documentManager: IDocumentManager,\n    executor: IMercuryCellExecutor,\n    editorServices: IEditorServices | null,\n    sessionContextDialogs: ISessionContextDialogs | null,\n    translator: ITranslator | null\n  ) => {\n    const { mimeTypeService } = editorServices ?? {};\n    Promise.all([app.started, app.restored]).then(async () => {\n      const notebookPath = PageConfig.getOption('notebookPath');\n      const mercuryPanel = documentManager.open(\n        notebookPath,\n        'Mercury'\n      ) as MercuryWidget;\n\n      // Hide default toolbar and mount panel early\n      mercuryPanel.toolbar.hide();\n      app.shell.add(mercuryPanel, 'mercury');\n\n      // ------- Navbar: create and mount (separate file) -------\n      const baseUrl = PageConfig.getBaseUrl() || '/';\n\n      const urlParams = new URLSearchParams(window.location.search);\n      const skipNavbar = urlParams.has('no-navbar');\n\n      if (!skipNavbar) {\n        const navbar = new MercuryNavbar({\n          baseUrl,\n          title: PageConfig.getOption('title') || 'Mercury',\n          apiUrl: `${baseUrl}mercury/api/notebooks`,\n          onHeightChange: px => {\n            // add top padding below fixed header\n            const mercuryMainPanel = mercuryPanel.node.querySelector(\n              '.mercury-main-panel'\n            ) as HTMLElement | null;\n            if (mercuryMainPanel) {\n              mercuryMainPanel.style.paddingTop = `${px}px`;\n            } else {\n              const notebookPanel = mercuryPanel.node.querySelector(\n                '.jp-Notebook'\n              ) as HTMLElement | null;\n              if (notebookPanel) {\n                notebookPanel.style.paddingTop = `${px}px`;\n              }\n            }\n          }\n        });\n        await navbar.mount();\n\n        // Clean up if panel is disposed\n        mercuryPanel.disposed.connect(() => navbar.destroy());\n      }\n\n      // ---------- Execute notebook cells once kernel is ready ----------\n      mercuryPanel.context.ready.then(async () => {\n        let session = mercuryPanel.context.sessionContext.session;\n        if (!session) {\n          const [, changes] = await signalToPromise(\n            mercuryPanel.context.sessionContext.sessionChanged\n          );\n          session = changes.newValue!;\n        }\n        let kernelConnection = session?.kernel;\n        if (!kernelConnection) {\n          const [, changes] = await signalToPromise(session.kernelChanged);\n          kernelConnection = changes.newValue!;\n        }\n\n        const executeAll = async () => {\n          if (\n            kernelConnection?.connectionStatus === 'connected' &&\n            kernelConnection?.status === 'idle'\n          ) {\n            kernelConnection.connectionStatusChanged.disconnect(executeAll);\n            kernelConnection.statusChanged.disconnect(executeAll);\n\n            const scheduledForExecution = new Set<string>();\n            const notebook = mercuryPanel.context.model;\n            const info = notebook.getMetadata('language_info');\n            const mimetype = info\n              ? mimeTypeService?.getMimeTypeByLanguage(info)\n              : undefined;\n\n            const onCellExecutionScheduled = (args: { cell: Cell }) => {\n              scheduledForExecution.add(args.cell.model.id);\n            };\n\n            const onCellExecuted = (args: { cell: Cell }) => {\n              scheduledForExecution.delete(args.cell.model.id);\n            };\n\n            for (const cellItem of (\n              mercuryPanel.content.widgets[0] as AppWidget\n            ).cellWidgets) {\n              if (mimetype) {\n                cellItem.child.model.mimeType = mimetype;\n              }\n              await executor.runCell({\n                cell: cellItem.child,\n                notebook,\n                notebookConfig: mercuryPanel.content.notebookConfig,\n                onCellExecuted: onCellExecuted,\n                onCellExecutionScheduled: onCellExecutionScheduled,\n                sessionContext: mercuryPanel.context.sessionContext,\n                sessionDialogs: sessionContextDialogs ?? undefined,\n                translator: translator ?? undefined\n              });\n            }\n\n            const waitForExecution = new PromiseDelegate<void>();\n            const pollExecution = setInterval(() => {\n              if (scheduledForExecution.size === 0) {\n                clearInterval(pollExecution);\n                waitForExecution.resolve();\n              }\n            }, 500);\n\n            await waitForExecution.promise;\n          }\n        };\n\n        kernelConnection?.connectionStatusChanged.connect(executeAll);\n        kernelConnection?.statusChanged.connect(executeAll);\n        executeAll();\n      });\n    });\n  }\n};\n","/* eslint-disable no-inner-declarations */\nimport {\n  JupyterFrontEnd,\n  JupyterFrontEndPlugin\n} from '@jupyterlab/application';\nimport { MercuryApp } from '../app';\nimport { plugin } from './mercury';\n\n/**\n * The default paths for Mercury app.\n */\nconst paths: JupyterFrontEndPlugin<JupyterFrontEnd.IPaths> = {\n  id: 'mercury-application:paths',\n  autoStart: true,\n  provides: JupyterFrontEnd.IPaths,\n  activate: (app: JupyterFrontEnd): JupyterFrontEnd.IPaths => {\n    if (!(app instanceof MercuryApp)) {\n      throw new Error(`${paths.id} can only be activated in Mercury.`);\n    }\n    return app.paths;\n  }\n};\n\nexport default [paths, plugin];\n","import * as plugins from './plugins';\n\nexport * from './app';\n\nexport default plugins;\n"],"names":["IMercuryShell","Token","MercuryShell","Widget","constructor","super","this","_updated","Signal","layout","BoxLayout","id","_currentWidget","updated","activateById","add","widget","area","options","widgets","length","setStretch","addWidget","currentWidget","onUpdateRequest","msg","emit","MercuryApp","JupyterFrontEnd","shell","name","namespace","version","PageConfig","getOption","mimeExtensions","plugin","registerPlugin","paths","urls","base","notFound","app","static","settings","themes","doc","translations","directories","appSettings","schemas","templates","userSettings","serverRoot","workspaces","registerPluginModule","mod","data","default","Object","prototype","hasOwnProperty","call","Array","isArray","forEach","item","error","console","registerPluginModules","mods","MercuryNavbar","opts","notebooks","menuOpen","attachTo","document","body","mount","injectStyles","buildHeader","insertBefore","header","firstChild","height","getBoundingClientRect","onHeightChange","loadNotebooks","bindGlobalHandlers","destroy","unbindGlobalHandlers","remove","styleEl","style","createElement","textContent","head","appendChild","className","setAttribute","inner","brand","href","baseUrl","title","rightWrap","position","btn","type","caret","createElementNS","innerHTML","menu","menuList","addEventListener","e","preventDefault","setMenu","clickAway","t","target","contains","keyHandler","String","key","toLowerCase","removeEventListener","open","classList","toggle","transform","sizeThumb","el","txt","trim","fs","fontSize","renderMenu","items","frag","createDocumentFragment","nb","a","slug","background","thumbnail_bg","color","thumbnail_text_color","thumbnail_text","span","disabled","resp","fetch","apiUrl","method","credentials","headers","Accept","ok","Error","status","json","display","err","warn","autoStart","requires","IDocumentManager","IMercuryCellExecutor","optional","IEditorServices","ISessionContextDialogs","ITranslator","activate","documentManager","executor","editorServices","sessionContextDialogs","translator","mimeTypeService","Promise","all","started","restored","then","async","notebookPath","mercuryPanel","toolbar","hide","getBaseUrl","URLSearchParams","window","location","search","has","navbar","px","mercuryMainPanel","node","querySelector","paddingTop","notebookPanel","disposed","connect","context","ready","session","sessionContext","changes","signalToPromise","sessionChanged","newValue","kernelConnection","kernel","kernelChanged","executeAll","connectionStatus","connectionStatusChanged","disconnect","statusChanged","scheduledForExecution","Set","notebook","model","info","getMetadata","mimetype","getMimeTypeByLanguage","undefined","onCellExecutionScheduled","args","cell","onCellExecuted","delete","cellItem","content","cellWidgets","child","mimeType","runCell","notebookConfig","sessionDialogs","waitForExecution","PromiseDelegate","pollExecution","setInterval","size","clearInterval","resolve","promise","provides","IPaths"],"ignoreList":[],"sourceRoot":""}