{"version":3,"file":"21.bundle.js","mappings":"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","sources":["webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/@jupyterlab/translation/lib/server.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/@jupyterlab/translation/lib/tokens.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/@jupyterlab/translation/lib/utils.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/@jupyterlab/translation/lib/gettext.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/@jupyterlab/translation/lib/base.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../node_modules/@jupyterlab/translation/lib/manager.js"],"sourcesContent":["// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\nimport { URLExt } from '@jupyterlab/coreutils';\nimport { ServerConnection } from '@jupyterlab/services';\n/**\n * The url for the translations service.\n */\nconst TRANSLATIONS_SETTINGS_URL = 'api/translations';\n/**\n * Call the API extension\n *\n * @param locale API REST end point for the extension\n * @param init Initial values for the request\n * @returns The response body interpreted as JSON\n */\nexport async function requestTranslationsAPI(translationsUrl = '', locale = '', init = {}, serverSettings = undefined) {\n    // Make request to Jupyter API\n    const settings = serverSettings !== null && serverSettings !== void 0 ? serverSettings : ServerConnection.makeSettings();\n    translationsUrl =\n        translationsUrl || `${settings.appUrl}/${TRANSLATIONS_SETTINGS_URL}`;\n    const translationsBase = URLExt.join(settings.baseUrl, translationsUrl);\n    const requestUrl = URLExt.join(translationsBase, locale);\n    if (!requestUrl.startsWith(translationsBase)) {\n        throw new Error('Can only be used for translations requests');\n    }\n    let response;\n    try {\n        response = await ServerConnection.makeRequest(requestUrl, init, settings);\n    }\n    catch (error) {\n        throw new ServerConnection.NetworkError(error);\n    }\n    let data = await response.text();\n    if (data.length > 0) {\n        try {\n            data = JSON.parse(data);\n        }\n        catch (error) {\n            console.error('Not a JSON response body.', response);\n        }\n    }\n    if (!response.ok) {\n        throw new ServerConnection.ResponseError(response, data.message || data);\n    }\n    return data;\n}\n//# sourceMappingURL=server.js.map","/* ----------------------------------------------------------------------------\n| Copyright (c) Jupyter Development Team.\n| Distributed under the terms of the Modified BSD License.\n|----------------------------------------------------------------------------*/\nimport { DataConnector } from '@jupyterlab/statedb';\nimport { Token } from '@lumino/coreutils';\nimport { requestTranslationsAPI } from './server';\n/**\n * Application default locale.\n */\nexport const DEFAULT_LANGUAGE_CODE = 'en';\n/**\n * A service to connect to the server translation endpoint\n */\nexport const ITranslatorConnector = new Token('@jupyterlab/translation:ITranslatorConnector', 'A service to connect to the server translation endpoint.');\nexport class TranslatorConnector extends DataConnector {\n    constructor(translationsUrl = '', serverSettings) {\n        super();\n        this._translationsUrl = translationsUrl;\n        this._serverSettings = serverSettings;\n    }\n    async fetch(opts) {\n        var _a;\n        return requestTranslationsAPI(this._translationsUrl, (_a = opts === null || opts === void 0 ? void 0 : opts.language) !== null && _a !== void 0 ? _a : '', {}, this._serverSettings);\n    }\n}\n/**\n * Translation provider token\n */\nexport const ITranslator = new Token('@jupyterlab/translation:ITranslator', 'A service to translate strings.');\n//# sourceMappingURL=tokens.js.map","/*\n * Copyright (c) Jupyter Development Team.\n * Distributed under the terms of the Modified BSD License.\n */\n/**\n * Normalize domain\n *\n * @param domain Domain to normalize\n * @returns Normalized domain\n */\nexport function normalizeDomain(domain) {\n    return domain.replace('-', '_');\n}\n//# sourceMappingURL=utils.js.map","/* ----------------------------------------------------------------------------\n| Copyright (c) Jupyter Development Team.\n| Distributed under the terms of the Modified BSD License.\n|\n| Base gettext.js implementation.\n| Copyright (c) Guillaume Potier.\n| Distributed under the terms of the Modified MIT License.\n| See: https://github.com/guillaumepotier/gettext.js\n|\n| Type definitions.\n| Copyright (c) Julien Crouzet and Florian SchwingenschlÃ¶gl.\n| Distributed under the terms of the Modified MIT License.\n| See: https://github.com/DefinitelyTyped/DefinitelyTyped\n|----------------------------------------------------------------------------*/\nimport { DEFAULT_LANGUAGE_CODE } from './tokens';\nimport { normalizeDomain } from './utils';\n/**\n * Gettext class providing localization methods.\n */\nclass Gettext {\n    constructor(options) {\n        options = options || {};\n        // default values that could be overridden in Gettext() constructor\n        this._defaults = {\n            domain: 'messages',\n            locale: document.documentElement.getAttribute('lang') || DEFAULT_LANGUAGE_CODE,\n            pluralFunc: function (n) {\n                return { nplurals: 2, plural: n != 1 ? 1 : 0 };\n            },\n            contextDelimiter: String.fromCharCode(4), // \\u0004\n            stringsPrefix: ''\n        };\n        // Ensure the correct separator is used\n        this._locale = (options.locale || this._defaults.locale).replace('_', '-');\n        this._domain = normalizeDomain(options.domain || this._defaults.domain);\n        this._contextDelimiter =\n            options.contextDelimiter || this._defaults.contextDelimiter;\n        this._stringsPrefix = options.stringsPrefix || this._defaults.stringsPrefix;\n        this._pluralFuncs = {};\n        this._dictionary = {};\n        this._pluralForms = {};\n        if (options.messages) {\n            this._dictionary[this._domain] = {};\n            this._dictionary[this._domain][this._locale] = options.messages;\n        }\n        if (options.pluralForms) {\n            this._pluralForms[this._locale] = options.pluralForms;\n        }\n    }\n    /**\n     * Set current context delimiter.\n     *\n     * @param delimiter - The delimiter to set.\n     */\n    setContextDelimiter(delimiter) {\n        this._contextDelimiter = delimiter;\n    }\n    /**\n     * Get current context delimiter.\n     *\n     * @returns The current delimiter.\n     */\n    getContextDelimiter() {\n        return this._contextDelimiter;\n    }\n    /**\n     * Set current locale.\n     *\n     * @param locale - The locale to set.\n     */\n    setLocale(locale) {\n        this._locale = locale.replace('_', '-');\n    }\n    /**\n     * Get current locale.\n     *\n     * @returns The current locale.\n     */\n    getLocale() {\n        return this._locale;\n    }\n    /**\n     * Set current domain.\n     *\n     * @param domain - The domain to set.\n     */\n    setDomain(domain) {\n        this._domain = normalizeDomain(domain);\n    }\n    /**\n     * Get current domain.\n     *\n     * @returns The current domain string.\n     */\n    getDomain() {\n        return this._domain;\n    }\n    /**\n     * Set current strings prefix.\n     *\n     * @param prefix - The string prefix to set.\n     */\n    setStringsPrefix(prefix) {\n        this._stringsPrefix = prefix;\n    }\n    /**\n     * Get current strings prefix.\n     *\n     * @returns The strings prefix.\n     */\n    getStringsPrefix() {\n        return this._stringsPrefix;\n    }\n    /**\n     * `sprintf` equivalent, takes a string and some arguments to make a\n     * computed string.\n     *\n     * @param fmt - The string to interpolate.\n     * @param args - The variables to use in interpolation.\n     *\n     * ### Examples\n     * strfmt(\"%1 dogs are in %2\", 7, \"the kitchen\"); => \"7 dogs are in the kitchen\"\n     * strfmt(\"I like %1, bananas and %1\", \"apples\"); => \"I like apples, bananas and apples\"\n     */\n    static strfmt(fmt, ...args) {\n        return (fmt\n            // put space after double % to prevent placeholder replacement of such matches\n            .replace(/%%/g, '%% ')\n            // replace placeholders\n            .replace(/%(\\d+)/g, function (str, p1) {\n            return args[p1 - 1];\n        })\n            // replace double % and space with single %\n            .replace(/%% /g, '%'));\n    }\n    /**\n     * Load json translations strings (In Jed 2.x format).\n     *\n     * @param jsonData - The translation strings plus metadata.\n     * @param domain - The translation domain, e.g. \"jupyterlab\".\n     */\n    loadJSON(jsonData, domain) {\n        if (!jsonData[''] ||\n            !jsonData['']['language'] ||\n            !jsonData['']['pluralForms']) {\n            throw new Error(`Wrong jsonData, it must have an empty key (\"\") with \"language\" and \"pluralForms\" information: ${jsonData}`);\n        }\n        domain = normalizeDomain(domain);\n        let headers = jsonData[''];\n        let jsonDataCopy = JSON.parse(JSON.stringify(jsonData));\n        delete jsonDataCopy[''];\n        this.setMessages(domain || this._defaults.domain, headers['language'], jsonDataCopy, headers['pluralForms']);\n    }\n    /**\n     * Shorthand for gettext.\n     *\n     * @param msgid - The singular string to translate.\n     * @param args - Any additional values to use with interpolation.\n     *\n     * @returns A translated string if found, or the original string.\n     *\n     * ### Notes\n     * This is not a private method (starts with an underscore) it is just\n     * a shorter and standard way to call these methods.\n     */\n    __(msgid, ...args) {\n        return this.gettext(msgid, ...args);\n    }\n    /**\n     * Shorthand for ngettext.\n     *\n     * @param msgid - The singular string to translate.\n     * @param msgid_plural - The plural string to translate.\n     * @param n - The number for pluralization.\n     * @param args - Any additional values to use with interpolation.\n     *\n     * @returns A translated string if found, or the original string.\n     *\n     * ### Notes\n     * This is not a private method (starts with an underscore) it is just\n     * a shorter and standard way to call these methods.\n     */\n    _n(msgid, msgid_plural, n, ...args) {\n        return this.ngettext(msgid, msgid_plural, n, ...args);\n    }\n    /**\n     * Shorthand for pgettext.\n     *\n     * @param msgctxt - The message context.\n     * @param msgid - The singular string to translate.\n     * @param args - Any additional values to use with interpolation.\n     *\n     * @returns A translated string if found, or the original string.\n     *\n     * ### Notes\n     * This is not a private method (starts with an underscore) it is just\n     * a shorter and standard way to call these methods.\n     */\n    _p(msgctxt, msgid, ...args) {\n        return this.pgettext(msgctxt, msgid, ...args);\n    }\n    /**\n     * Shorthand for npgettext.\n     *\n     * @param msgctxt - The message context.\n     * @param msgid - The singular string to translate.\n     * @param msgid_plural - The plural string to translate.\n     * @param n - The number for pluralization.\n     * @param args - Any additional values to use with interpolation.\n     *\n     * @returns A translated string if found, or the original string.\n     *\n     * ### Notes\n     * This is not a private method (starts with an underscore) it is just\n     * a shorter and standard way to call these methods.\n     */\n    _np(msgctxt, msgid, msgid_plural, n, ...args) {\n        return this.npgettext(msgctxt, msgid, msgid_plural, n, ...args);\n    }\n    /**\n     * Translate a singular string with extra interpolation values.\n     *\n     * @param msgid - The singular string to translate.\n     * @param args - Any additional values to use with interpolation.\n     *\n     * @returns A translated string if found, or the original string.\n     */\n    gettext(msgid, ...args) {\n        return this.dcnpgettext('', '', msgid, '', 0, ...args);\n    }\n    /**\n     * Translate a plural string with extra interpolation values.\n     *\n     * @param msgid - The singular string to translate.\n     * @param args - Any additional values to use with interpolation.\n     *\n     * @returns A translated string if found, or the original string.\n     */\n    ngettext(msgid, msgid_plural, n, ...args) {\n        return this.dcnpgettext('', '', msgid, msgid_plural, n, ...args);\n    }\n    /**\n     * Translate a contextualized singular string with extra interpolation values.\n     *\n     * @param msgctxt - The message context.\n     * @param msgid - The singular string to translate.\n     * @param args - Any additional values to use with interpolation.\n     *\n     * @returns A translated string if found, or the original string.\n     *\n     * ### Notes\n     * This is not a private method (starts with an underscore) it is just\n     * a shorter and standard way to call these methods.\n     */\n    pgettext(msgctxt, msgid, ...args) {\n        return this.dcnpgettext('', msgctxt, msgid, '', 0, ...args);\n    }\n    /**\n     * Translate a contextualized plural string with extra interpolation values.\n     *\n     * @param msgctxt - The message context.\n     * @param msgid - The singular string to translate.\n     * @param msgid_plural - The plural string to translate.\n     * @param n - The number for pluralization.\n     * @param args - Any additional values to use with interpolation\n     *\n     * @returns A translated string if found, or the original string.\n     */\n    npgettext(msgctxt, msgid, msgid_plural, n, ...args) {\n        return this.dcnpgettext('', msgctxt, msgid, msgid_plural, n, ...args);\n    }\n    /**\n     * Translate a singular string with extra interpolation values.\n     *\n     * @param domain - The translations domain.\n     * @param msgctxt - The message context.\n     * @param msgid - The singular string to translate.\n     * @param msgid_plural - The plural string to translate.\n     * @param n - The number for pluralization.\n     * @param args - Any additional values to use with interpolation\n     *\n     * @returns A translated string if found, or the original string.\n     */\n    dcnpgettext(domain, msgctxt, msgid, msgid_plural, n, ...args) {\n        domain = normalizeDomain(domain) || this._domain;\n        let translation;\n        let key = msgctxt\n            ? msgctxt + this._contextDelimiter + msgid\n            : msgid;\n        let options = { pluralForm: false };\n        let exist = false;\n        let locale = this._locale;\n        let locales = this.expandLocale(this._locale);\n        for (let i in locales) {\n            locale = locales[i];\n            exist =\n                this._dictionary[domain] &&\n                    this._dictionary[domain][locale] &&\n                    this._dictionary[domain][locale][key];\n            // check condition are valid (.length)\n            // because it's not possible to define both a singular and a plural form of the same msgid,\n            // we need to check that the stored form is the same as the expected one.\n            // if not, we'll just ignore the translation and consider it as not translated.\n            if (msgid_plural) {\n                exist = exist && this._dictionary[domain][locale][key].length > 1;\n            }\n            else {\n                exist = exist && this._dictionary[domain][locale][key].length == 1;\n            }\n            if (exist) {\n                // This ensures that a variation is used.\n                options.locale = locale;\n                break;\n            }\n        }\n        if (!exist) {\n            translation = [msgid];\n            options.pluralFunc = this._defaults.pluralFunc;\n        }\n        else {\n            translation = this._dictionary[domain][locale][key];\n        }\n        // Singular form\n        if (!msgid_plural) {\n            return this.t(translation, n, options, ...args);\n        }\n        // Plural one\n        options.pluralForm = true;\n        let value = exist ? translation : [msgid, msgid_plural];\n        return this.t(value, n, options, ...args);\n    }\n    /**\n     * Split a locale into parent locales. \"es-CO\" -> [\"es-CO\", \"es\"]\n     *\n     * @param locale - The locale string.\n     *\n     * @returns An array of locales.\n     */\n    expandLocale(locale) {\n        let locales = [locale];\n        let i = locale.lastIndexOf('-');\n        while (i > 0) {\n            locale = locale.slice(0, i);\n            locales.push(locale);\n            i = locale.lastIndexOf('-');\n        }\n        return locales;\n    }\n    /**\n     * Split a locale into parent locales. \"es-CO\" -> [\"es-CO\", \"es\"]\n     *\n     * @param pluralForm - Plural form string..\n     * @returns An function to compute plural forms.\n     */\n    // eslint-disable-next-line @typescript-eslint/ban-types\n    getPluralFunc(pluralForm) {\n        // Plural form string regexp\n        // taken from https://github.com/Orange-OpenSource/gettext.js/blob/master/lib.gettext.js\n        // plural forms list available here http://localization-guide.readthedocs.org/en/latest/l10n/pluralforms.html\n        let pf_re = new RegExp('^\\\\s*nplurals\\\\s*=\\\\s*[0-9]+\\\\s*;\\\\s*plural\\\\s*=\\\\s*(?:\\\\s|[-\\\\?\\\\|&=!<>+*/%:;n0-9_()])+');\n        if (!pf_re.test(pluralForm))\n            throw new Error(Gettext.strfmt('The plural form \"%1\" is not valid', pluralForm));\n        // Careful here, this is a hidden eval() equivalent..\n        // Risk should be reasonable though since we test the pluralForm through regex before\n        // taken from https://github.com/Orange-OpenSource/gettext.js/blob/master/lib.gettext.js\n        // TODO: should test if https://github.com/soney/jsep present and use it if so\n        return new Function('n', 'let plural, nplurals; ' +\n            pluralForm +\n            ' return { nplurals: nplurals, plural: (plural === true ? 1 : (plural ? plural : 0)) };');\n    }\n    /**\n     * Remove the context delimiter from string.\n     *\n     * @param str - Translation string.\n     * @returns A translation string without context.\n     */\n    removeContext(str) {\n        // if there is context, remove it\n        if (str.indexOf(this._contextDelimiter) !== -1) {\n            let parts = str.split(this._contextDelimiter);\n            return parts[1];\n        }\n        return str;\n    }\n    /**\n     * Proper translation function that handle plurals and directives.\n     *\n     * @param messages - List of translation strings.\n     * @param n - The number for pluralization.\n     * @param options - Translation options.\n     * @param args - Any variables to interpolate.\n     *\n     * @returns A translation string without context.\n     *\n     * ### Notes\n     * Contains juicy parts of https://github.com/Orange-OpenSource/gettext.js/blob/master/lib.gettext.js\n     */\n    t(messages, n, options, ...args) {\n        // Singular is very easy, just pass dictionary message through strfmt\n        if (!options.pluralForm)\n            return (this._stringsPrefix +\n                Gettext.strfmt(this.removeContext(messages[0]), ...args));\n        let plural;\n        // if a plural func is given, use that one\n        if (options.pluralFunc) {\n            plural = options.pluralFunc(n);\n            // if plural form never interpreted before, do it now and store it\n        }\n        else if (!this._pluralFuncs[options.locale || '']) {\n            this._pluralFuncs[options.locale || ''] = this.getPluralFunc(this._pluralForms[options.locale || '']);\n            plural = this._pluralFuncs[options.locale || ''](n);\n            // we have the plural function, compute the plural result\n        }\n        else {\n            plural = this._pluralFuncs[options.locale || ''](n);\n        }\n        // If there is a problem with plurals, fallback to singular one\n        if ('undefined' === typeof !plural.plural ||\n            plural.plural > plural.nplurals ||\n            messages.length <= plural.plural)\n            plural.plural = 0;\n        return (this._stringsPrefix +\n            Gettext.strfmt(this.removeContext(messages[plural.plural]), ...[n].concat(args)));\n    }\n    /**\n     * Set messages after loading them.\n     *\n     * @param domain - The translation domain.\n     * @param locale - The translation locale.\n     * @param messages - List of translation strings.\n     * @param pluralForms - Plural form string.\n     *\n     * ### Notes\n     * Contains juicy parts of https://github.com/Orange-OpenSource/gettext.js/blob/master/lib.gettext.js\n     */\n    setMessages(domain, locale, messages, pluralForms) {\n        domain = normalizeDomain(domain);\n        if (pluralForms)\n            this._pluralForms[locale] = pluralForms;\n        if (!this._dictionary[domain])\n            this._dictionary[domain] = {};\n        this._dictionary[domain][locale] = messages;\n    }\n}\nexport { Gettext };\n//# sourceMappingURL=gettext.js.map","// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\nimport { Gettext } from './gettext';\nimport { DEFAULT_LANGUAGE_CODE } from './tokens';\n/**\n * A translator that loads a dummy language bundle that returns the same input\n * strings.\n */\nexport class NullTranslator {\n    constructor(bundle) {\n        this.languageCode = DEFAULT_LANGUAGE_CODE;\n        this._languageBundle = bundle;\n    }\n    load(domain) {\n        return this._languageBundle;\n    }\n}\n/**\n * A language bundle that returns the same input strings.\n */\nclass NullLanguageBundle {\n    __(msgid, ...args) {\n        return this.gettext(msgid, ...args);\n    }\n    _n(msgid, msgid_plural, n, ...args) {\n        return this.ngettext(msgid, msgid_plural, n, ...args);\n    }\n    _p(msgctxt, msgid, ...args) {\n        return this.pgettext(msgctxt, msgid, ...args);\n    }\n    _np(msgctxt, msgid, msgid_plural, n, ...args) {\n        return this.npgettext(msgctxt, msgid, msgid_plural, n, ...args);\n    }\n    gettext(msgid, ...args) {\n        return Gettext.strfmt(msgid, ...args);\n    }\n    ngettext(msgid, msgid_plural, n, ...args) {\n        return Gettext.strfmt(n == 1 ? msgid : msgid_plural, ...[n].concat(args));\n    }\n    pgettext(msgctxt, msgid, ...args) {\n        return Gettext.strfmt(msgid, ...args);\n    }\n    npgettext(msgctxt, msgid, msgid_plural, n, ...args) {\n        return this.ngettext(msgid, msgid_plural, n, ...args);\n    }\n    dcnpgettext(domain, msgctxt, msgid, msgid_plural, n, ...args) {\n        return this.ngettext(msgid, msgid_plural, n, ...args);\n    }\n}\n/**\n * The application null translator instance that just returns the same text.\n * Also provides interpolation.\n */\nexport const nullTranslator = new NullTranslator(new NullLanguageBundle());\n//# sourceMappingURL=base.js.map","// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\nimport { Gettext } from './gettext';\nimport { DEFAULT_LANGUAGE_CODE, TranslatorConnector } from './tokens';\nimport { normalizeDomain } from './utils';\n/**\n * Translation Manager.\n */\nexport class TranslationManager {\n    /**\n     * Construct a new TranslationManager.\n     *\n     * @param translationsUrl The URL of the translation server.\n     * @param stringsPrefix (optional) The prefix for translation strings.\n     * @param serverSettings (optional) The server settings.\n     * @param connector (optional) The translation connector. If provided, the `translationsUrl` and `serverSettings` parameters will be ignored.\n     */\n    constructor(translationsUrl = '', stringsPrefix, serverSettings, connector) {\n        this._domainData = {};\n        this._translationBundles = {};\n        this._connector =\n            connector !== null && connector !== void 0 ? connector : new TranslatorConnector(translationsUrl, serverSettings);\n        this._stringsPrefix = stringsPrefix || '';\n        this._englishBundle = new Gettext({ stringsPrefix: this._stringsPrefix });\n        this._currentLocale = DEFAULT_LANGUAGE_CODE;\n    }\n    /**\n     * Get the language code (tag) of the current locale.\n     *\n     * It respects BCP47 (RFC5646): https://datatracker.ietf.org/doc/html/rfc5646\n     */\n    get languageCode() {\n        return this._currentLocale;\n    }\n    /**\n     * Fetch the localization data from the server.\n     *\n     * @param locale The language locale to use for translations.\n     */\n    async fetch(locale) {\n        var _a, _b, _c, _d;\n        this._languageData = await this._connector.fetch({ language: locale });\n        let serverLocale;\n        if (this._languageData && locale === 'default') {\n            try {\n                for (const lang of Object.values((_a = this._languageData.data) !== null && _a !== void 0 ? _a : {})) {\n                    serverLocale =\n                        // If the language is provided by the system set up, we need to retrieve the final\n                        // language. This is done through the `\"\"` entry in `_languageData` that contains\n                        // language metadata.\n                        lang['']['language'];\n                    break;\n                }\n            }\n            catch (reason) {\n                // no-op\n            }\n        }\n        this._currentLocale = (locale !== 'default' ? locale : serverLocale !== null && serverLocale !== void 0 ? serverLocale : DEFAULT_LANGUAGE_CODE).replace('_', '-');\n        this._domainData = (_c = (_b = this._languageData) === null || _b === void 0 ? void 0 : _b.data) !== null && _c !== void 0 ? _c : {};\n        const message = (_d = this._languageData) === null || _d === void 0 ? void 0 : _d.message;\n        if (message && this._currentLocale !== DEFAULT_LANGUAGE_CODE) {\n            console.warn(message);\n        }\n    }\n    /**\n     * Load translation bundles for a given domain.\n     *\n     * @param domain The translation domain to use for translations.\n     */\n    load(domain) {\n        if (this._domainData) {\n            if (this._currentLocale == DEFAULT_LANGUAGE_CODE) {\n                return this._englishBundle;\n            }\n            else {\n                domain = normalizeDomain(domain);\n                if (!(domain in this._translationBundles)) {\n                    let translationBundle = new Gettext({\n                        domain: domain,\n                        locale: this._currentLocale,\n                        stringsPrefix: this._stringsPrefix\n                    });\n                    if (domain in this._domainData) {\n                        const metadata = this._domainData[domain][''];\n                        const harmonizedData = {\n                            ...this._domainData[domain],\n                            '': {\n                                ...metadata,\n                                pluralForms: metadata.plural_forms\n                            }\n                        };\n                        translationBundle.loadJSON(harmonizedData, domain);\n                    }\n                    this._translationBundles[domain] = translationBundle;\n                }\n                return this._translationBundles[domain];\n            }\n        }\n        else {\n            return this._englishBundle;\n        }\n    }\n}\n//# sourceMappingURL=manager.js.map"],"names":["TRANSLATIONS_SETTINGS_URL","async","requestTranslationsAPI","translationsUrl","locale","init","serverSettings","undefined","settings","ServerConnection","makeSettings","appUrl","translationsBase","URLExt","join","baseUrl","requestUrl","startsWith","Error","response","makeRequest","error","NetworkError","data","text","length","JSON","parse","console","ok","ResponseError","message","DEFAULT_LANGUAGE_CODE","ITranslatorConnector","Token","TranslatorConnector","DataConnector","constructor","super","this","_translationsUrl","_serverSettings","fetch","opts","_a","language","ITranslator","normalizeDomain","domain","replace","Gettext","options","_defaults","document","documentElement","getAttribute","pluralFunc","n","nplurals","plural","contextDelimiter","String","fromCharCode","stringsPrefix","_locale","_domain","_contextDelimiter","_stringsPrefix","_pluralFuncs","_dictionary","_pluralForms","messages","pluralForms","setContextDelimiter","delimiter","getContextDelimiter","setLocale","getLocale","setDomain","getDomain","setStringsPrefix","prefix","getStringsPrefix","strfmt","fmt","args","str","p1","loadJSON","jsonData","headers","jsonDataCopy","stringify","setMessages","__","msgid","gettext","_n","msgid_plural","ngettext","_p","msgctxt","pgettext","_np","npgettext","dcnpgettext","translation","key","pluralForm","exist","locales","expandLocale","i","t","value","lastIndexOf","slice","push","getPluralFunc","RegExp","test","Function","removeContext","indexOf","split","concat","NullTranslator","bundle","languageCode","_languageBundle","load","nullTranslator","TranslationManager","connector","_domainData","_translationBundles","_connector","_englishBundle","_currentLocale","_b","_c","_d","serverLocale","_languageData","lang","Object","values","reason","warn","translationBundle","metadata","harmonizedData","plural_forms"],"ignoreList":[],"sourceRoot":""}