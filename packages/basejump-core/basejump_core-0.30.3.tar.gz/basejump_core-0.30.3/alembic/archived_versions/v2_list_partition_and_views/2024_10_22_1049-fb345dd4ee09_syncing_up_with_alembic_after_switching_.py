"""syncing up with alembic after switching to partitions and views

Revision ID: fb345dd4ee09
Revises: 79d2ccd724d4
Create Date: 2024-10-22 10:49:49.278546

"""

from typing import Sequence, Union

import sqlalchemy as sa
from alembic import op
from sqlalchemy.dialects import postgresql

# revision identifiers, used by Alembic.
revision: str = "fb345dd4ee09"
down_revision: Union[str, None] = "79d2ccd724d4"
branch_labels: Union[str, Sequence[str], None] = None
depends_on: Union[str, Sequence[str], None] = None


def upgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    from basejump.core.database.crud.crud_utils import gen_client_id_suffixes
    from basejump.core.database.db_connect import ConnectDB, conn_params_noasync

    conn_db = ConnectDB(conn_params=conn_params_noasync)
    basejump_engine_noasync = conn_db.connect_db()
    suffixes = gen_client_id_suffixes(engine=basejump_engine_noasync, reverse=False, local_override=True)
    print("Running suffixes...", suffixes)
    print("Dropping views...")
    for suffix in suffixes:
        if not suffix or suffix == "0":
            continue
        for table in [
            "connect.team_connection",
            "connect.table_connection",
            "connect.connection",
            "connect.database",
            "connect.db_conn",
            "connect.vector_db",
            "connect.database_tables",
            "connect.table_columns",
            "ai_model.user_chat_id",
            "ai_model.prompt_history",
            "ai_model.chat_history",
            "ai_model.result_history",
            "ai_model.token_count",
            "transaction.deposit_history",
            "transaction.withdraw_history",
            "transaction.basejump_credit_ledger",
        ]:
            table_name = f"{table.split('.')[0] + suffix}.{table.split('.')[1]}"
            # Drop the view
            if table_name == "connect0.db_conn":
                continue
            op.execute(f"DROP VIEW {table_name}")
    print("Running code...")
    op.alter_column(
        "chat_history",
        "msg_uuid",
        existing_type=sa.UUID(),
        nullable=False,
        existing_server_default=sa.text("gen_random_uuid()"),
        schema="ai_model",
    )
    op.alter_column("chat_history", "parent_msg_uuid", existing_type=sa.UUID(), nullable=False, schema="ai_model")
    op.alter_column(
        "chat_history",
        "prompt_time",
        existing_type=postgresql.TIMESTAMP(),
        type_=sa.TIMESTAMP(timezone=True),
        nullable=False,
        existing_server_default=sa.text("CURRENT_TIMESTAMP"),
        schema="ai_model",
    )
    op.alter_column(
        "chat_history",
        "timestamp",
        existing_type=postgresql.TIMESTAMP(),
        type_=sa.TIMESTAMP(timezone=True),
        nullable=False,
        existing_server_default=sa.text("CURRENT_TIMESTAMP"),
        schema="ai_model",
    )
    op.drop_constraint("chat_history_client_id_msg_uuid_key", "chat_history", schema="ai_model", type_="foreignkey")
    op.drop_constraint("chat_history_client_id_fkey", "chat_history", schema="ai_model", type_="foreignkey")
    op.alter_column(
        "prompt_history",
        "prompt_uuid",
        existing_type=sa.UUID(),
        nullable=False,
        existing_server_default=sa.text("gen_random_uuid()"),
        schema="ai_model",
    )
    op.drop_constraint("prompt_history_client_id_prompt_uuid_key", "prompt_history", schema="ai_model", type_="unique")
    op.alter_column(
        "result_history",
        "result_uuid",
        existing_type=sa.UUID(),
        nullable=False,
        existing_server_default=sa.text("gen_random_uuid()"),
        schema="ai_model",
    )
    op.alter_column(
        "result_history",
        "result_exp_time",
        existing_type=postgresql.TIMESTAMP(),
        type_=sa.TIMESTAMP(timezone=True),
        existing_nullable=False,
        schema="ai_model",
    )
    op.alter_column(
        "result_history",
        "result_deleted",
        existing_type=sa.BOOLEAN(),
        nullable=False,
        existing_server_default=sa.text("false"),
        schema="ai_model",
    )
    op.alter_column(
        "result_history",
        "share_w_team",
        existing_type=sa.BOOLEAN(),
        nullable=False,
        existing_server_default=sa.text("false"),
        schema="ai_model",
    )
    op.alter_column(
        "result_history",
        "saved_result",
        existing_type=sa.BOOLEAN(),
        nullable=False,
        existing_server_default=sa.text("false"),
        schema="ai_model",
    )
    op.alter_column(
        "result_history",
        "timestamp",
        existing_type=postgresql.TIMESTAMP(),
        type_=sa.TIMESTAMP(timezone=True),
        nullable=False,
        existing_server_default=sa.text("CURRENT_TIMESTAMP"),
        schema="ai_model",
    )
    op.alter_column(
        "token_count",
        "token_uuid",
        existing_type=sa.UUID(),
        nullable=False,
        existing_server_default=sa.text("gen_random_uuid()"),
        schema="ai_model",
    )
    op.alter_column("token_count", "prompt_id", existing_type=sa.INTEGER(), nullable=False, schema="ai_model")
    op.alter_column(
        "token_count",
        "timestamp",
        existing_type=postgresql.TIMESTAMP(),
        type_=sa.TIMESTAMP(timezone=True),
        nullable=False,
        existing_server_default=sa.text("CURRENT_TIMESTAMP"),
        schema="ai_model",
    )
    op.drop_constraint("token_count_migrate_client_id_fkey", "token_count", schema="ai_model", type_="foreignkey")
    op.alter_column(
        "user_chat_id",
        "chat_uuid",
        existing_type=sa.UUID(),
        nullable=False,
        existing_server_default=sa.text("gen_random_uuid()"),
        schema="ai_model",
    )
    op.alter_column(
        "user_chat_id",
        "timestamp",
        existing_type=postgresql.TIMESTAMP(),
        type_=sa.TIMESTAMP(timezone=True),
        nullable=False,
        existing_server_default=sa.text("CURRENT_TIMESTAMP"),
        schema="ai_model",
    )
    op.alter_column(
        "user_chat_id",
        "last_updt_date",
        existing_type=postgresql.TIMESTAMP(),
        type_=sa.TIMESTAMP(timezone=True),
        existing_nullable=True,
        schema="ai_model",
    )
    op.alter_column(
        "database_tables",
        "tbl_uuid",
        existing_type=sa.UUID(),
        nullable=False,
        existing_server_default=sa.text("gen_random_uuid()"),
        schema="connect",
    )
    op.alter_column(
        "database_tables",
        "primary_keys",
        existing_type=postgresql.ARRAY(sa.TEXT()),
        type_=postgresql.ARRAY(sa.String()),
        existing_nullable=True,
        schema="connect",
    )
    op.alter_column(
        "database_tables",
        "timestamp",
        existing_type=postgresql.TIMESTAMP(),
        type_=sa.TIMESTAMP(timezone=True),
        nullable=False,
        existing_server_default=sa.text("CURRENT_TIMESTAMP"),
        schema="connect",
    )
    op.drop_constraint("database_tables_migrate_conn_id_fkey", "database_tables", schema="connect", type_="foreignkey")
    op.drop_column("database_tables", "conn_uuid", schema="connect")
    op.drop_column("database_tables", "conn_id", schema="connect")
    # op.drop_constraint("db_conn_migrate_client_id_fkey", "db_conn", schema="connect", type_="foreignkey")
    # op.drop_constraint("db_conn_migrate_conn_id_fkey", "db_conn", schema="connect", type_="foreignkey")
    op.create_unique_constraint(
        "connection_client_id_conn_id_key", "connection", ["client_id", "conn_id"], schema="connect"
    )
    op.create_foreign_key(
        None,
        "db_conn",
        "connection",
        ["client_id", "conn_id"],
        ["client_id", "conn_id"],
        source_schema="connect",
        referent_schema="connect",
        ondelete="CASCADE",
    )
    op.alter_column(
        "table_columns",
        "col_uuid",
        existing_type=sa.UUID(),
        nullable=False,
        existing_server_default=sa.text("gen_random_uuid()"),
        schema="connect",
    )
    op.alter_column(
        "table_columns",
        "distinct_values",
        existing_type=postgresql.ARRAY(sa.TEXT()),
        type_=postgresql.ARRAY(sa.String()),
        existing_nullable=True,
        schema="connect",
    )
    op.alter_column(
        "table_columns",
        "timestamp",
        existing_type=postgresql.TIMESTAMP(),
        type_=sa.TIMESTAMP(timezone=True),
        nullable=False,
        existing_server_default=sa.text("CURRENT_TIMESTAMP"),
        schema="connect",
    )
    op.drop_constraint("table_columns_migrate_client_id_fkey", "table_columns", schema="connect", type_="foreignkey")
    op.create_foreign_key(
        None,
        "table_columns",
        "database_tables",
        ["client_id", "tbl_id"],
        ["client_id", "tbl_id"],
        source_schema="connect",
        referent_schema="connect",
        ondelete="CASCADE",
    )
    op.create_foreign_key(
        None,
        "table_connection",
        "database_tables",
        ["client_id", "tbl_id"],
        ["client_id", "tbl_id"],
        source_schema="connect",
        referent_schema="connect",
        ondelete="CASCADE",
    )
    op.alter_column(
        "basejump_credit_ledger",
        "credit_uuid",
        existing_type=sa.UUID(),
        nullable=False,
        existing_server_default=sa.text("gen_random_uuid()"),
        schema="transaction",
    )
    op.alter_column(
        "basejump_credit_ledger",
        "purchased_credit_bal",
        existing_type=sa.NUMERIC(),
        nullable=False,
        existing_server_default=sa.text("0"),
        schema="transaction",
    )
    op.alter_column(
        "basejump_credit_ledger",
        "timestamp",
        existing_type=postgresql.TIMESTAMP(),
        type_=sa.TIMESTAMP(timezone=True),
        nullable=False,
        existing_server_default=sa.text("CURRENT_TIMESTAMP"),
        schema="transaction",
    )
    op.drop_constraint(
        "basejump_credit_ledger_migrate_client_id_fkey",
        "basejump_credit_ledger",
        schema="transaction",
        type_="foreignkey",
    )
    op.alter_column(
        "deposit_history",
        "deposit_uuid",
        existing_type=sa.UUID(),
        nullable=False,
        existing_server_default=sa.text("gen_random_uuid()"),
        schema="transaction",
    )
    op.alter_column(
        "deposit_history",
        "timestamp",
        existing_type=postgresql.TIMESTAMP(),
        type_=sa.TIMESTAMP(timezone=True),
        nullable=False,
        existing_server_default=sa.text("CURRENT_TIMESTAMP"),
        schema="transaction",
    )
    op.drop_constraint(
        "deposit_history_migrate_client_id_deposit_uuid_key", "deposit_history", schema="transaction", type_="unique"
    )
    op.create_unique_constraint(None, "deposit_history", ["client_id", "deposit_uuid"], schema="transaction")
    op.alter_column(
        "withdraw_history",
        "withdrawal_uuid",
        existing_type=sa.UUID(),
        nullable=False,
        existing_server_default=sa.text("gen_random_uuid()"),
        schema="transaction",
    )
    op.alter_column(
        "withdraw_history",
        "timestamp",
        existing_type=postgresql.TIMESTAMP(),
        type_=sa.TIMESTAMP(timezone=True),
        nullable=False,
        existing_server_default=sa.text("CURRENT_TIMESTAMP"),
        schema="transaction",
    )
    op.drop_constraint(
        "withdraw_history_migrate_client_id_withdrawal_uuid_key",
        "withdraw_history",
        schema="transaction",
        type_="unique",
    )
    op.create_unique_constraint(None, "withdraw_history", ["client_id", "withdrawal_uuid"], schema="transaction")
    op.drop_constraint(
        "withdraw_history_migrate_client_id_fkey", "withdraw_history", schema="transaction", type_="foreignkey"
    )
    print("Adding views...")
    for suffix in suffixes:
        if not suffix or suffix == "0":
            continue
        # Create views
        for table in [
            "connect.team_connection",
            "connect.table_connection",
            "connect.connection",
            "connect.database",
            "connect.db_conn",
            "connect.vector_db",
            "connect.database_tables",
            "connect.table_columns",
            "ai_model.user_chat_id",
            "ai_model.prompt_history",
            "ai_model.chat_history",
            "ai_model.result_history",
            "ai_model.token_count",
            "transaction.deposit_history",
            "transaction.withdraw_history",
            "transaction.basejump_credit_ledger",
        ]:
            table_name_w_suffix = f"{table.split('.')[0] + suffix}.{table.split('.')[1]}"
            op.execute(
                f"""\
        CREATE VIEW {table_name_w_suffix} WITH(security_invoker=TRUE) AS \
        SELECT * FROM {table} \
        WHERE client_id = {suffix}"""
            )
    # ### end Alembic commands ###


def downgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.create_foreign_key(
        "withdraw_history_client_id_fkey",
        "withdraw_history",
        "client",
        ["client_id"],
        ["client_id"],
        source_schema="transaction",
        referent_schema="account",
        ondelete="CASCADE",
    )
    op.drop_constraint(None, "withdraw_history", schema="transaction", type_="unique")
    op.drop_constraint(None, "withdraw_history", schema="transaction", type_="unique")
    op.create_unique_constraint(
        "withdraw_history_client_id_withdrawal_uuid_key",
        "withdraw_history",
        ["client_id", "withdrawal_uuid"],
        schema="transaction",
    )
    op.alter_column(
        "withdraw_history",
        "timestamp",
        existing_type=sa.TIMESTAMP(timezone=True),
        type_=postgresql.TIMESTAMP(),
        nullable=True,
        existing_server_default=sa.text("CURRENT_TIMESTAMP"),
        schema="transaction",
    )
    op.alter_column(
        "withdraw_history",
        "withdrawal_uuid",
        existing_type=sa.UUID(),
        nullable=True,
        existing_server_default=sa.text("gen_random_uuid()"),
        schema="transaction",
    )
    op.drop_constraint(None, "deposit_history", schema="transaction", type_="unique")
    op.create_unique_constraint(
        "deposit_history_client_id_deposit_uuid_key",
        "deposit_history",
        ["client_id", "deposit_uuid"],
        schema="transaction",
    )
    op.alter_column(
        "deposit_history",
        "timestamp",
        existing_type=sa.TIMESTAMP(timezone=True),
        type_=postgresql.TIMESTAMP(),
        nullable=True,
        existing_server_default=sa.text("CURRENT_TIMESTAMP"),
        schema="transaction",
    )
    op.alter_column(
        "deposit_history",
        "deposit_uuid",
        existing_type=sa.UUID(),
        nullable=True,
        existing_server_default=sa.text("gen_random_uuid()"),
        schema="transaction",
    )
    op.create_foreign_key(
        "basejump_credit_ledger_client_id_fkey",
        "basejump_credit_ledger",
        "client",
        ["client_id"],
        ["client_id"],
        source_schema="transaction",
        referent_schema="account",
        ondelete="CASCADE",
    )
    op.alter_column(
        "basejump_credit_ledger",
        "timestamp",
        existing_type=sa.TIMESTAMP(timezone=True),
        type_=postgresql.TIMESTAMP(),
        nullable=True,
        existing_server_default=sa.text("CURRENT_TIMESTAMP"),
        schema="transaction",
    )
    op.alter_column(
        "basejump_credit_ledger",
        "purchased_credit_bal",
        existing_type=sa.NUMERIC(),
        nullable=True,
        existing_server_default=sa.text("0"),
        schema="transaction",
    )
    op.alter_column(
        "basejump_credit_ledger",
        "credit_uuid",
        existing_type=sa.UUID(),
        nullable=True,
        existing_server_default=sa.text("gen_random_uuid()"),
        schema="transaction",
    )
    op.drop_constraint(None, "table_connection", schema="connect", type_="foreignkey")
    op.drop_constraint(None, "table_columns", schema="connect", type_="foreignkey")
    op.create_foreign_key(
        "table_columns_client_id_fkey",
        "table_columns",
        "client",
        ["client_id"],
        ["client_id"],
        source_schema="connect",
        referent_schema="account",
        ondelete="CASCADE",
    )
    op.alter_column(
        "table_columns",
        "timestamp",
        existing_type=sa.TIMESTAMP(timezone=True),
        type_=postgresql.TIMESTAMP(),
        nullable=True,
        existing_server_default=sa.text("CURRENT_TIMESTAMP"),
        schema="connect",
    )
    op.alter_column(
        "table_columns",
        "distinct_values",
        existing_type=postgresql.ARRAY(sa.String()),
        type_=postgresql.ARRAY(sa.TEXT()),
        existing_nullable=True,
        schema="connect",
    )
    op.alter_column(
        "table_columns",
        "col_uuid",
        existing_type=sa.UUID(),
        nullable=True,
        existing_server_default=sa.text("gen_random_uuid()"),
        schema="connect",
    )
    op.drop_constraint(None, "db_conn", schema="connect", type_="foreignkey")
    op.create_foreign_key(
        "db_conn_conn_id_fkey",
        "db_conn",
        "connection",
        ["conn_id"],
        ["conn_id"],
        source_schema="connect",
        referent_schema="connect",
        ondelete="CASCADE",
    )
    op.create_foreign_key(
        "db_conn_client_id_fkey",
        "db_conn",
        "client",
        ["client_id"],
        ["client_id"],
        source_schema="connect",
        referent_schema="account",
        ondelete="CASCADE",
    )
    op.add_column(
        "database_tables", sa.Column("conn_id", sa.INTEGER(), autoincrement=False, nullable=True), schema="connect"
    )
    op.add_column(
        "database_tables", sa.Column("conn_uuid", sa.UUID(), autoincrement=False, nullable=True), schema="connect"
    )
    op.create_foreign_key(
        "database_tables_conn_id_fkey",
        "database_tables",
        "db_conn",
        ["conn_id"],
        ["conn_id"],
        source_schema="connect",
        referent_schema="connect",
        ondelete="CASCADE",
    )
    op.alter_column(
        "database_tables",
        "timestamp",
        existing_type=sa.TIMESTAMP(timezone=True),
        type_=postgresql.TIMESTAMP(),
        nullable=True,
        existing_server_default=sa.text("CURRENT_TIMESTAMP"),
        schema="connect",
    )
    op.alter_column(
        "database_tables",
        "primary_keys",
        existing_type=postgresql.ARRAY(sa.String()),
        type_=postgresql.ARRAY(sa.TEXT()),
        existing_nullable=True,
        schema="connect",
    )
    op.alter_column(
        "database_tables",
        "tbl_uuid",
        existing_type=sa.UUID(),
        nullable=True,
        existing_server_default=sa.text("gen_random_uuid()"),
        schema="connect",
    )
    op.alter_column(
        "user_chat_id",
        "last_updt_date",
        existing_type=sa.TIMESTAMP(timezone=True),
        type_=postgresql.TIMESTAMP(),
        existing_nullable=True,
        schema="ai_model",
    )
    op.alter_column(
        "user_chat_id",
        "timestamp",
        existing_type=sa.TIMESTAMP(timezone=True),
        type_=postgresql.TIMESTAMP(),
        nullable=True,
        existing_server_default=sa.text("CURRENT_TIMESTAMP"),
        schema="ai_model",
    )
    op.alter_column(
        "user_chat_id",
        "chat_uuid",
        existing_type=sa.UUID(),
        nullable=True,
        existing_server_default=sa.text("gen_random_uuid()"),
        schema="ai_model",
    )
    op.create_foreign_key(
        "token_count_client_id_fkey",
        "token_count",
        "client",
        ["client_id"],
        ["client_id"],
        source_schema="ai_model",
        referent_schema="account",
        ondelete="CASCADE",
    )
    op.alter_column(
        "token_count",
        "timestamp",
        existing_type=sa.TIMESTAMP(timezone=True),
        type_=postgresql.TIMESTAMP(),
        nullable=True,
        existing_server_default=sa.text("CURRENT_TIMESTAMP"),
        schema="ai_model",
    )
    op.alter_column("token_count", "prompt_id", existing_type=sa.INTEGER(), nullable=True, schema="ai_model")
    op.alter_column(
        "token_count",
        "token_uuid",
        existing_type=sa.UUID(),
        nullable=True,
        existing_server_default=sa.text("gen_random_uuid()"),
        schema="ai_model",
    )
    op.alter_column(
        "result_history",
        "timestamp",
        existing_type=sa.TIMESTAMP(timezone=True),
        type_=postgresql.TIMESTAMP(),
        nullable=True,
        existing_server_default=sa.text("CURRENT_TIMESTAMP"),
        schema="ai_model",
    )
    op.alter_column(
        "result_history",
        "saved_result",
        existing_type=sa.BOOLEAN(),
        nullable=True,
        existing_server_default=sa.text("false"),
        schema="ai_model",
    )
    op.alter_column(
        "result_history",
        "share_w_team",
        existing_type=sa.BOOLEAN(),
        nullable=True,
        existing_server_default=sa.text("false"),
        schema="ai_model",
    )
    op.alter_column(
        "result_history",
        "result_deleted",
        existing_type=sa.BOOLEAN(),
        nullable=True,
        existing_server_default=sa.text("false"),
        schema="ai_model",
    )
    op.alter_column(
        "result_history",
        "result_exp_time",
        existing_type=sa.TIMESTAMP(timezone=True),
        type_=postgresql.TIMESTAMP(),
        existing_nullable=False,
        schema="ai_model",
    )
    op.alter_column(
        "result_history",
        "result_uuid",
        existing_type=sa.UUID(),
        nullable=True,
        existing_server_default=sa.text("gen_random_uuid()"),
        schema="ai_model",
    )
    op.create_unique_constraint(
        "prompt_history_client_id_prompt_uuid_key", "prompt_history", ["client_id", "prompt_uuid"], schema="ai_model"
    )
    op.alter_column(
        "prompt_history",
        "prompt_uuid",
        existing_type=sa.UUID(),
        nullable=True,
        existing_server_default=sa.text("gen_random_uuid()"),
        schema="ai_model",
    )
    op.create_foreign_key(
        "chat_history_client_id_fkey",
        "chat_history",
        "client",
        ["client_id"],
        ["client_id"],
        source_schema="ai_model",
        referent_schema="account",
        ondelete="CASCADE",
    )
    op.create_unique_constraint(
        "chat_history_client_id_msg_uuid_key", "chat_history", ["client_id", "msg_uuid"], schema="ai_model"
    )
    op.alter_column(
        "chat_history",
        "timestamp",
        existing_type=sa.TIMESTAMP(timezone=True),
        type_=postgresql.TIMESTAMP(),
        nullable=True,
        existing_server_default=sa.text("CURRENT_TIMESTAMP"),
        schema="ai_model",
    )
    op.alter_column(
        "chat_history",
        "prompt_time",
        existing_type=sa.TIMESTAMP(timezone=True),
        type_=postgresql.TIMESTAMP(),
        nullable=True,
        existing_server_default=sa.text("CURRENT_TIMESTAMP"),
        schema="ai_model",
    )
    op.alter_column("chat_history", "parent_msg_uuid", existing_type=sa.UUID(), nullable=True, schema="ai_model")
    op.alter_column(
        "chat_history",
        "msg_uuid",
        existing_type=sa.UUID(),
        nullable=True,
        existing_server_default=sa.text("gen_random_uuid()"),
        schema="ai_model",
    )
    op.create_table(
        "database_tables_pclient22",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("tbl_id", sa.INTEGER(), autoincrement=True, nullable=False),
        sa.Column(
            "tbl_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("conn_id", sa.INTEGER(), autoincrement=False, nullable=True),
        sa.Column("conn_uuid", sa.UUID(), autoincrement=False, nullable=True),
        sa.Column("db_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("table_name", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("context", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("ignore", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column("primary_keys", postgresql.ARRAY(sa.TEXT()), autoincrement=False, nullable=True),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="database_tables_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["conn_id"], ["connect.db_conn.conn_id"], name="database_tables_conn_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["db_id"], ["connect.database.db_id"], name="database_tables_db_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "tbl_id", name="database_tables_pclient22_pkey"),
        schema="connect",
    )
    op.create_table(
        "basejump_credit_ledger_pclient5",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("credit_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "credit_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("sub_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("withdrawal_id", sa.BIGINT(), autoincrement=False, nullable=True),
        sa.Column("deposit_id", sa.INTEGER(), autoincrement=False, nullable=True),
        sa.Column("allotted_credit_bal", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column(
            "purchased_credit_bal", sa.NUMERIC(), server_default=sa.text("0"), autoincrement=False, nullable=True
        ),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"],
            ["account.client.client_id"],
            name="basejump_credit_ledger_client_id_fkey",
            ondelete="CASCADE",
        ),
        sa.ForeignKeyConstraint(
            ["sub_id"], ["account.subscription.sub_id"], name="basejump_credit_ledger_sub_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "credit_id", name="basejump_credit_ledger_pclient5_pkey"),
        schema="transaction",
    )
    op.create_table(
        "withdraw_history_pclient23",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("withdrawal_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "withdrawal_uuid",
            sa.UUID(),
            server_default=sa.text("gen_random_uuid()"),
            autoincrement=False,
            nullable=True,
        ),
        sa.Column("prompt_id", sa.BIGINT(), autoincrement=False, nullable=True),
        sa.Column("sub_plan_id", sa.INTEGER(), autoincrement=False, nullable=True),
        sa.Column("transaction_amt", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("transaction_description", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("withdrawn_credits", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="withdraw_history_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["sub_plan_id"], ["account.subscription_plan.sub_plan_id"], name="withdraw_history_sub_plan_id_fkey"
        ),
        sa.PrimaryKeyConstraint("client_id", "withdrawal_id", name="withdraw_history_pclient23_pkey"),
        sa.UniqueConstraint(
            "client_id", "withdrawal_uuid", name="withdraw_history_pclient23_client_id_withdrawal_uuid_key"
        ),
        schema="transaction",
    )
    op.create_table(
        "prompt_history_pclient5",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("prompt_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "prompt_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="prompt_history_client_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "prompt_id", name="prompt_history_pclient5_pkey"),
        sa.UniqueConstraint("client_id", "prompt_uuid", name="prompt_history_pclient5_client_id_prompt_uuid_key"),
        schema="ai_model",
    )
    op.create_table(
        "withdraw_history_pclient5",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("withdrawal_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "withdrawal_uuid",
            sa.UUID(),
            server_default=sa.text("gen_random_uuid()"),
            autoincrement=False,
            nullable=True,
        ),
        sa.Column("prompt_id", sa.BIGINT(), autoincrement=False, nullable=True),
        sa.Column("sub_plan_id", sa.INTEGER(), autoincrement=False, nullable=True),
        sa.Column("transaction_amt", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("transaction_description", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("withdrawn_credits", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="withdraw_history_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["sub_plan_id"], ["account.subscription_plan.sub_plan_id"], name="withdraw_history_sub_plan_id_fkey"
        ),
        sa.PrimaryKeyConstraint("client_id", "withdrawal_id", name="withdraw_history_pclient5_pkey"),
        sa.UniqueConstraint(
            "client_id", "withdrawal_uuid", name="withdraw_history_pclient5_client_id_withdrawal_uuid_key"
        ),
        schema="transaction",
    )
    op.create_table(
        "table_connection_pclient24",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("conn_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("tbl_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="table_connection_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["conn_id"], ["connect.db_conn.conn_id"], name="table_connection_conn_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "conn_id", "tbl_id", name="table_connection_pclient24_pkey"),
        schema="connect",
    )
    op.create_table(
        "withdraw_history_pclient2",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("withdrawal_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "withdrawal_uuid",
            sa.UUID(),
            server_default=sa.text("gen_random_uuid()"),
            autoincrement=False,
            nullable=True,
        ),
        sa.Column("prompt_id", sa.BIGINT(), autoincrement=False, nullable=True),
        sa.Column("sub_plan_id", sa.INTEGER(), autoincrement=False, nullable=True),
        sa.Column("transaction_amt", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("transaction_description", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("withdrawn_credits", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="withdraw_history_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["sub_plan_id"], ["account.subscription_plan.sub_plan_id"], name="withdraw_history_sub_plan_id_fkey"
        ),
        sa.PrimaryKeyConstraint("client_id", "withdrawal_id", name="withdraw_history_pclient2_pkey"),
        sa.UniqueConstraint(
            "client_id", "withdrawal_uuid", name="withdraw_history_pclient2_client_id_withdrawal_uuid_key"
        ),
        schema="transaction",
    )
    op.create_table(
        "basejump_credit_ledger_pclient23",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("credit_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "credit_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("sub_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("withdrawal_id", sa.BIGINT(), autoincrement=False, nullable=True),
        sa.Column("deposit_id", sa.INTEGER(), autoincrement=False, nullable=True),
        sa.Column("allotted_credit_bal", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column(
            "purchased_credit_bal", sa.NUMERIC(), server_default=sa.text("0"), autoincrement=False, nullable=True
        ),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"],
            ["account.client.client_id"],
            name="basejump_credit_ledger_client_id_fkey",
            ondelete="CASCADE",
        ),
        sa.ForeignKeyConstraint(
            ["sub_id"], ["account.subscription.sub_id"], name="basejump_credit_ledger_sub_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "credit_id", name="basejump_credit_ledger_pclient23_pkey"),
        schema="transaction",
    )
    op.create_table(
        "result_history_pclient40",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("result_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "result_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("result_conn_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("result_exp_time", postgresql.TIMESTAMP(), autoincrement=False, nullable=False),
        sa.Column("result_deleted", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column("result_file_path", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("row_num_total", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("preview_file_path", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("row_num_preview", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("result_type", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("title", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("description", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("author_user_uuid", sa.UUID(), autoincrement=False, nullable=False),
        sa.Column("author_team_uuid", sa.UUID(), autoincrement=False, nullable=True),
        sa.Column("share_w_team", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column("saved_result", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column("refresh_result", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column("sql_query", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="result_history_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["result_conn_id"],
            ["connect.connection.conn_id"],
            name="result_history_result_conn_id_fkey",
            ondelete="CASCADE",
        ),
        sa.PrimaryKeyConstraint("client_id", "result_id", name="result_history_pclient40_pkey"),
        schema="ai_model",
    )
    op.create_table(
        "deposit_history_pclient23",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("deposit_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column(
            "deposit_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("sub_plan_id", sa.INTEGER(), autoincrement=False, nullable=True),
        sa.Column("transaction_item_description", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("transaction_item_quantity", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("transaction_item_cost", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("transaction_description", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("transaction_type", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("transaction_total_cost", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("deposited_credits", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="deposit_history_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["sub_plan_id"], ["account.subscription_plan.sub_plan_id"], name="deposit_history_sub_plan_id_fkey"
        ),
        sa.PrimaryKeyConstraint("client_id", "deposit_id", name="deposit_history_pclient23_pkey"),
        sa.UniqueConstraint("client_id", "deposit_uuid", name="deposit_history_pclient23_client_id_deposit_uuid_key"),
        schema="transaction",
    )
    op.create_table(
        "table_columns_pclient5",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("col_id", sa.INTEGER(), autoincrement=True, nullable=False),
        sa.Column(
            "col_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("tbl_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("column_name", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("column_type", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("description", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("foreign_key_table_name", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("foreign_key_column_name", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("primary_key", sa.BOOLEAN(), autoincrement=False, nullable=True),
        sa.Column("distinct_values", postgresql.ARRAY(sa.TEXT()), autoincrement=False, nullable=True),
        sa.Column("ignore", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="table_columns_client_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "col_id", name="table_columns_pclient5_pkey"),
        schema="connect",
    )
    op.create_table(
        "prompt_history_pclient53",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("prompt_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "prompt_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="prompt_history_client_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "prompt_id", name="prompt_history_pclient53_pkey"),
        sa.UniqueConstraint("client_id", "prompt_uuid", name="prompt_history_pclient53_client_id_prompt_uuid_key"),
        schema="ai_model",
    )
    op.create_table(
        "token_count_pclient22",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("token_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "token_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("prompt_id", sa.INTEGER(), autoincrement=False, nullable=True),
        sa.Column("prompt", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("user_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("team_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("ai_model_provider", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("ai_model_nm", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("cost_per_1k_tokens_input", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("cost_per_1k_tokens_output", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("total_embedding_token_count", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("prompt_llm_token_count", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("completion_llm_token_count", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("total_llm_token_count", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="token_count_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(["team_id"], ["account.team.team_id"], name="token_count_team_id_fkey"),
        sa.ForeignKeyConstraint(["user_id"], ["account.user.user_id"], name="token_count_user_id_fkey"),
        sa.PrimaryKeyConstraint("client_id", "token_id", name="token_count_pclient22_pkey"),
        schema="ai_model",
    )
    op.create_table(
        "user_chat_id_pclient22",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("chat_id", sa.INTEGER(), autoincrement=True, nullable=False),
        sa.Column(
            "chat_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("user_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("team_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("chat_name", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("chat_description", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.Column("last_updt_date", postgresql.TIMESTAMP(), autoincrement=False, nullable=True),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="user_chat_id_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["team_id"], ["account.team.team_id"], name="user_chat_id_team_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["user_id"], ["account.user.user_id"], name="user_chat_id_user_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "chat_id", name="user_chat_id_pclient22_pkey"),
        schema="ai_model",
    )
    op.create_table(
        "user_chat_id_pclient23",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("chat_id", sa.INTEGER(), autoincrement=True, nullable=False),
        sa.Column(
            "chat_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("user_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("team_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("chat_name", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("chat_description", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.Column("last_updt_date", postgresql.TIMESTAMP(), autoincrement=False, nullable=True),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="user_chat_id_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["team_id"], ["account.team.team_id"], name="user_chat_id_team_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["user_id"], ["account.user.user_id"], name="user_chat_id_user_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "chat_id", name="user_chat_id_pclient23_pkey"),
        schema="ai_model",
    )
    op.create_table(
        "withdraw_history_pclient53",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("withdrawal_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "withdrawal_uuid",
            sa.UUID(),
            server_default=sa.text("gen_random_uuid()"),
            autoincrement=False,
            nullable=True,
        ),
        sa.Column("prompt_id", sa.BIGINT(), autoincrement=False, nullable=True),
        sa.Column("sub_plan_id", sa.INTEGER(), autoincrement=False, nullable=True),
        sa.Column("transaction_amt", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("transaction_description", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("withdrawn_credits", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="withdraw_history_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["sub_plan_id"], ["account.subscription_plan.sub_plan_id"], name="withdraw_history_sub_plan_id_fkey"
        ),
        sa.PrimaryKeyConstraint("client_id", "withdrawal_id", name="withdraw_history_pclient53_pkey"),
        sa.UniqueConstraint(
            "client_id", "withdrawal_uuid", name="withdraw_history_pclient53_client_id_withdrawal_uuid_key"
        ),
        schema="transaction",
    )
    op.create_table(
        "user_chat_id_pclient24",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("chat_id", sa.INTEGER(), autoincrement=True, nullable=False),
        sa.Column(
            "chat_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("user_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("team_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("chat_name", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("chat_description", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.Column("last_updt_date", postgresql.TIMESTAMP(), autoincrement=False, nullable=True),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="user_chat_id_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["team_id"], ["account.team.team_id"], name="user_chat_id_team_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["user_id"], ["account.user.user_id"], name="user_chat_id_user_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "chat_id", name="user_chat_id_pclient24_pkey"),
        schema="ai_model",
    )
    op.create_table(
        "token_count_pclient2",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("token_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "token_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("prompt_id", sa.INTEGER(), autoincrement=False, nullable=True),
        sa.Column("prompt", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("user_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("team_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("ai_model_provider", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("ai_model_nm", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("cost_per_1k_tokens_input", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("cost_per_1k_tokens_output", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("total_embedding_token_count", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("prompt_llm_token_count", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("completion_llm_token_count", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("total_llm_token_count", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="token_count_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(["team_id"], ["account.team.team_id"], name="token_count_team_id_fkey"),
        sa.ForeignKeyConstraint(["user_id"], ["account.user.user_id"], name="token_count_user_id_fkey"),
        sa.PrimaryKeyConstraint("client_id", "token_id", name="token_count_pclient2_pkey"),
        schema="ai_model",
    )
    op.create_table(
        "team_connection_pclient24",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("conn_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("team_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="team_connection_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["conn_id"], ["connect.connection.conn_id"], name="team_connection_conn_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["team_id"], ["account.team.team_id"], name="team_connection_team_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "conn_id", "team_id", name="team_connection_pclient24_pkey"),
        schema="connect",
    )
    op.create_table(
        "chat_history_pclient53",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("msg_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "msg_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("parent_msg_uuid", sa.UUID(), autoincrement=False, nullable=True),
        sa.Column("result_uuid", sa.UUID(), autoincrement=False, nullable=True),
        sa.Column("chat_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("prompt_uuid", sa.UUID(), autoincrement=False, nullable=False),
        sa.Column("initial_prompt", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column(
            "prompt_time",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.Column("content", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("internal_content", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("role", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("msg_type", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("sql_query", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("result_type", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="chat_history_client_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "msg_id", name="chat_history_pclient53_pkey"),
        sa.UniqueConstraint("client_id", "msg_uuid", name="chat_history_pclient53_client_id_msg_uuid_key"),
        schema="ai_model",
    )
    op.create_table(
        "team_connection_pclient40",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("conn_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("team_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="team_connection_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["conn_id"], ["connect.connection.conn_id"], name="team_connection_conn_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["team_id"], ["account.team.team_id"], name="team_connection_team_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "conn_id", "team_id", name="team_connection_pclient40_pkey"),
        schema="connect",
    )
    op.create_table(
        "chat_history_pclient23",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("msg_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "msg_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("parent_msg_uuid", sa.UUID(), autoincrement=False, nullable=True),
        sa.Column("result_uuid", sa.UUID(), autoincrement=False, nullable=True),
        sa.Column("chat_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("prompt_uuid", sa.UUID(), autoincrement=False, nullable=False),
        sa.Column("initial_prompt", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column(
            "prompt_time",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.Column("content", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("internal_content", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("role", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("msg_type", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("sql_query", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("result_type", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="chat_history_client_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "msg_id", name="chat_history_pclient23_pkey"),
        sa.UniqueConstraint("client_id", "msg_uuid", name="chat_history_pclient23_client_id_msg_uuid_key"),
        schema="ai_model",
    )
    op.create_table(
        "withdraw_history_pclient39",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("withdrawal_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "withdrawal_uuid",
            sa.UUID(),
            server_default=sa.text("gen_random_uuid()"),
            autoincrement=False,
            nullable=True,
        ),
        sa.Column("prompt_id", sa.BIGINT(), autoincrement=False, nullable=True),
        sa.Column("sub_plan_id", sa.INTEGER(), autoincrement=False, nullable=True),
        sa.Column("transaction_amt", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("transaction_description", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("withdrawn_credits", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="withdraw_history_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["sub_plan_id"], ["account.subscription_plan.sub_plan_id"], name="withdraw_history_sub_plan_id_fkey"
        ),
        sa.PrimaryKeyConstraint("client_id", "withdrawal_id", name="withdraw_history_pclient39_pkey"),
        sa.UniqueConstraint(
            "client_id", "withdrawal_uuid", name="withdraw_history_pclient39_client_id_withdrawal_uuid_key"
        ),
        schema="transaction",
    )
    op.create_table(
        "table_connection_pclient39",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("conn_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("tbl_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="table_connection_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["conn_id"], ["connect.db_conn.conn_id"], name="table_connection_conn_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "conn_id", "tbl_id", name="table_connection_pclient39_pkey"),
        schema="connect",
    )
    op.create_table(
        "deposit_history_pclient5",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("deposit_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column(
            "deposit_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("sub_plan_id", sa.INTEGER(), autoincrement=False, nullable=True),
        sa.Column("transaction_item_description", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("transaction_item_quantity", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("transaction_item_cost", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("transaction_description", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("transaction_type", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("transaction_total_cost", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("deposited_credits", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="deposit_history_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["sub_plan_id"], ["account.subscription_plan.sub_plan_id"], name="deposit_history_sub_plan_id_fkey"
        ),
        sa.PrimaryKeyConstraint("client_id", "deposit_id", name="deposit_history_pclient5_pkey"),
        sa.UniqueConstraint("client_id", "deposit_uuid", name="deposit_history_pclient5_client_id_deposit_uuid_key"),
        schema="transaction",
    )
    op.create_table(
        "database_tables_pclient53",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("tbl_id", sa.INTEGER(), autoincrement=True, nullable=False),
        sa.Column(
            "tbl_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("conn_id", sa.INTEGER(), autoincrement=False, nullable=True),
        sa.Column("conn_uuid", sa.UUID(), autoincrement=False, nullable=True),
        sa.Column("db_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("table_name", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("context", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("ignore", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column("primary_keys", postgresql.ARRAY(sa.TEXT()), autoincrement=False, nullable=True),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="database_tables_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["conn_id"], ["connect.db_conn.conn_id"], name="database_tables_conn_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["db_id"], ["connect.database.db_id"], name="database_tables_db_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "tbl_id", name="database_tables_pclient53_pkey"),
        schema="connect",
    )
    op.create_table(
        "team_connection_pclient2",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("conn_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("team_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="team_connection_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["conn_id"], ["connect.connection.conn_id"], name="team_connection_conn_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["team_id"], ["account.team.team_id"], name="team_connection_team_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "conn_id", "team_id", name="team_connection_pclient2_pkey"),
        schema="connect",
    )
    op.create_table(
        "database_tables_pclient3",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("tbl_id", sa.INTEGER(), autoincrement=True, nullable=False),
        sa.Column(
            "tbl_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("conn_id", sa.INTEGER(), autoincrement=False, nullable=True),
        sa.Column("conn_uuid", sa.UUID(), autoincrement=False, nullable=True),
        sa.Column("db_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("table_name", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("context", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("ignore", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column("primary_keys", postgresql.ARRAY(sa.TEXT()), autoincrement=False, nullable=True),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="database_tables_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["conn_id"], ["connect.db_conn.conn_id"], name="database_tables_conn_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["db_id"], ["connect.database.db_id"], name="database_tables_db_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "tbl_id", name="database_tables_pclient3_pkey"),
        schema="connect",
    )
    op.create_table(
        "database_tables_pclient23",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("tbl_id", sa.INTEGER(), autoincrement=True, nullable=False),
        sa.Column(
            "tbl_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("conn_id", sa.INTEGER(), autoincrement=False, nullable=True),
        sa.Column("conn_uuid", sa.UUID(), autoincrement=False, nullable=True),
        sa.Column("db_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("table_name", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("context", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("ignore", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column("primary_keys", postgresql.ARRAY(sa.TEXT()), autoincrement=False, nullable=True),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="database_tables_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["conn_id"], ["connect.db_conn.conn_id"], name="database_tables_conn_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["db_id"], ["connect.database.db_id"], name="database_tables_db_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "tbl_id", name="database_tables_pclient23_pkey"),
        schema="connect",
    )
    op.create_table(
        "user_chat_id_pclient40",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("chat_id", sa.INTEGER(), autoincrement=True, nullable=False),
        sa.Column(
            "chat_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("user_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("team_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("chat_name", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("chat_description", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.Column("last_updt_date", postgresql.TIMESTAMP(), autoincrement=False, nullable=True),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="user_chat_id_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["team_id"], ["account.team.team_id"], name="user_chat_id_team_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["user_id"], ["account.user.user_id"], name="user_chat_id_user_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "chat_id", name="user_chat_id_pclient40_pkey"),
        schema="ai_model",
    )
    op.create_table(
        "deposit_history_pclient39",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("deposit_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column(
            "deposit_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("sub_plan_id", sa.INTEGER(), autoincrement=False, nullable=True),
        sa.Column("transaction_item_description", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("transaction_item_quantity", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("transaction_item_cost", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("transaction_description", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("transaction_type", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("transaction_total_cost", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("deposited_credits", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="deposit_history_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["sub_plan_id"], ["account.subscription_plan.sub_plan_id"], name="deposit_history_sub_plan_id_fkey"
        ),
        sa.PrimaryKeyConstraint("client_id", "deposit_id", name="deposit_history_pclient39_pkey"),
        sa.UniqueConstraint("client_id", "deposit_uuid", name="deposit_history_pclient39_client_id_deposit_uuid_key"),
        schema="transaction",
    )
    op.create_table(
        "table_columns_pclient2",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("col_id", sa.INTEGER(), autoincrement=True, nullable=False),
        sa.Column(
            "col_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("tbl_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("column_name", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("column_type", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("description", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("foreign_key_table_name", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("foreign_key_column_name", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("primary_key", sa.BOOLEAN(), autoincrement=False, nullable=True),
        sa.Column("distinct_values", postgresql.ARRAY(sa.TEXT()), autoincrement=False, nullable=True),
        sa.Column("ignore", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="table_columns_client_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "col_id", name="table_columns_pclient2_pkey"),
        schema="connect",
    )
    op.create_table(
        "database_tables_pclient5",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("tbl_id", sa.INTEGER(), autoincrement=True, nullable=False),
        sa.Column(
            "tbl_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("conn_id", sa.INTEGER(), autoincrement=False, nullable=True),
        sa.Column("conn_uuid", sa.UUID(), autoincrement=False, nullable=True),
        sa.Column("db_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("table_name", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("context", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("ignore", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column("primary_keys", postgresql.ARRAY(sa.TEXT()), autoincrement=False, nullable=True),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="database_tables_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["conn_id"], ["connect.db_conn.conn_id"], name="database_tables_conn_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["db_id"], ["connect.database.db_id"], name="database_tables_db_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "tbl_id", name="database_tables_pclient5_pkey"),
        schema="connect",
    )
    op.create_table(
        "table_connection_pclient53",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("conn_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("tbl_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="table_connection_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["conn_id"], ["connect.db_conn.conn_id"], name="table_connection_conn_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "conn_id", "tbl_id", name="table_connection_pclient53_pkey"),
        schema="connect",
    )
    op.create_table(
        "chat_history_pclient3",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("msg_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "msg_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("parent_msg_uuid", sa.UUID(), autoincrement=False, nullable=True),
        sa.Column("result_uuid", sa.UUID(), autoincrement=False, nullable=True),
        sa.Column("chat_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("prompt_uuid", sa.UUID(), autoincrement=False, nullable=False),
        sa.Column("initial_prompt", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column(
            "prompt_time",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.Column("content", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("internal_content", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("role", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("msg_type", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("sql_query", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("result_type", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="chat_history_client_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "msg_id", name="chat_history_pclient3_pkey"),
        sa.UniqueConstraint("client_id", "msg_uuid", name="chat_history_pclient3_client_id_msg_uuid_key"),
        schema="ai_model",
    )
    op.create_table(
        "team_connection_pclient39",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("conn_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("team_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="team_connection_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["conn_id"], ["connect.connection.conn_id"], name="team_connection_conn_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["team_id"], ["account.team.team_id"], name="team_connection_team_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "conn_id", "team_id", name="team_connection_pclient39_pkey"),
        schema="connect",
    )
    op.create_table(
        "database_tables_pclient40",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("tbl_id", sa.INTEGER(), autoincrement=True, nullable=False),
        sa.Column(
            "tbl_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("conn_id", sa.INTEGER(), autoincrement=False, nullable=True),
        sa.Column("conn_uuid", sa.UUID(), autoincrement=False, nullable=True),
        sa.Column("db_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("table_name", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("context", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("ignore", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column("primary_keys", postgresql.ARRAY(sa.TEXT()), autoincrement=False, nullable=True),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="database_tables_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["conn_id"], ["connect.db_conn.conn_id"], name="database_tables_conn_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["db_id"], ["connect.database.db_id"], name="database_tables_db_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "tbl_id", name="database_tables_pclient40_pkey"),
        schema="connect",
    )
    op.create_table(
        "chat_history_pclient2",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("msg_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "msg_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("parent_msg_uuid", sa.UUID(), autoincrement=False, nullable=True),
        sa.Column("result_uuid", sa.UUID(), autoincrement=False, nullable=True),
        sa.Column("chat_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("prompt_uuid", sa.UUID(), autoincrement=False, nullable=False),
        sa.Column("initial_prompt", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column(
            "prompt_time",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.Column("content", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("internal_content", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("role", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("msg_type", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("sql_query", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("result_type", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="chat_history_client_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "msg_id", name="chat_history_pclient2_pkey"),
        sa.UniqueConstraint("client_id", "msg_uuid", name="chat_history_pclient2_client_id_msg_uuid_key"),
        schema="ai_model",
    )
    op.create_table(
        "prompt_history_pclient40",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("prompt_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "prompt_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="prompt_history_client_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "prompt_id", name="prompt_history_pclient40_pkey"),
        sa.UniqueConstraint("client_id", "prompt_uuid", name="prompt_history_pclient40_client_id_prompt_uuid_key"),
        schema="ai_model",
    )
    op.create_table(
        "withdraw_history_pclient3",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("withdrawal_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "withdrawal_uuid",
            sa.UUID(),
            server_default=sa.text("gen_random_uuid()"),
            autoincrement=False,
            nullable=True,
        ),
        sa.Column("prompt_id", sa.BIGINT(), autoincrement=False, nullable=True),
        sa.Column("sub_plan_id", sa.INTEGER(), autoincrement=False, nullable=True),
        sa.Column("transaction_amt", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("transaction_description", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("withdrawn_credits", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="withdraw_history_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["sub_plan_id"], ["account.subscription_plan.sub_plan_id"], name="withdraw_history_sub_plan_id_fkey"
        ),
        sa.PrimaryKeyConstraint("client_id", "withdrawal_id", name="withdraw_history_pclient3_pkey"),
        sa.UniqueConstraint(
            "client_id", "withdrawal_uuid", name="withdraw_history_pclient3_client_id_withdrawal_uuid_key"
        ),
        schema="transaction",
    )
    op.create_table(
        "table_connection_pclient40",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("conn_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("tbl_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="table_connection_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["conn_id"], ["connect.db_conn.conn_id"], name="table_connection_conn_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "conn_id", "tbl_id", name="table_connection_pclient40_pkey"),
        schema="connect",
    )
    op.create_table(
        "withdraw_history_pclient22",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("withdrawal_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "withdrawal_uuid",
            sa.UUID(),
            server_default=sa.text("gen_random_uuid()"),
            autoincrement=False,
            nullable=True,
        ),
        sa.Column("prompt_id", sa.BIGINT(), autoincrement=False, nullable=True),
        sa.Column("sub_plan_id", sa.INTEGER(), autoincrement=False, nullable=True),
        sa.Column("transaction_amt", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("transaction_description", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("withdrawn_credits", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="withdraw_history_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["sub_plan_id"], ["account.subscription_plan.sub_plan_id"], name="withdraw_history_sub_plan_id_fkey"
        ),
        sa.PrimaryKeyConstraint("client_id", "withdrawal_id", name="withdraw_history_pclient22_pkey"),
        sa.UniqueConstraint(
            "client_id", "withdrawal_uuid", name="withdraw_history_pclient22_client_id_withdrawal_uuid_key"
        ),
        schema="transaction",
    )
    op.create_table(
        "prompt_history_pclient22",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("prompt_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "prompt_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="prompt_history_client_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "prompt_id", name="prompt_history_pclient22_pkey"),
        sa.UniqueConstraint("client_id", "prompt_uuid", name="prompt_history_pclient22_client_id_prompt_uuid_key"),
        schema="ai_model",
    )
    op.create_table(
        "table_connection_pclient5",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("conn_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("tbl_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="table_connection_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["conn_id"], ["connect.db_conn.conn_id"], name="table_connection_conn_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "conn_id", "tbl_id", name="table_connection_pclient5_pkey"),
        schema="connect",
    )
    op.create_table(
        "withdraw_history_pclient24",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("withdrawal_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "withdrawal_uuid",
            sa.UUID(),
            server_default=sa.text("gen_random_uuid()"),
            autoincrement=False,
            nullable=True,
        ),
        sa.Column("prompt_id", sa.BIGINT(), autoincrement=False, nullable=True),
        sa.Column("sub_plan_id", sa.INTEGER(), autoincrement=False, nullable=True),
        sa.Column("transaction_amt", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("transaction_description", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("withdrawn_credits", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="withdraw_history_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["sub_plan_id"], ["account.subscription_plan.sub_plan_id"], name="withdraw_history_sub_plan_id_fkey"
        ),
        sa.PrimaryKeyConstraint("client_id", "withdrawal_id", name="withdraw_history_pclient24_pkey"),
        sa.UniqueConstraint(
            "client_id", "withdrawal_uuid", name="withdraw_history_pclient24_client_id_withdrawal_uuid_key"
        ),
        schema="transaction",
    )
    op.create_table(
        "table_columns_pclient22",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("col_id", sa.INTEGER(), autoincrement=True, nullable=False),
        sa.Column(
            "col_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("tbl_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("column_name", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("column_type", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("description", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("foreign_key_table_name", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("foreign_key_column_name", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("primary_key", sa.BOOLEAN(), autoincrement=False, nullable=True),
        sa.Column("distinct_values", postgresql.ARRAY(sa.TEXT()), autoincrement=False, nullable=True),
        sa.Column("ignore", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="table_columns_client_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "col_id", name="table_columns_pclient22_pkey"),
        schema="connect",
    )
    op.create_table(
        "result_history_pclient24",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("result_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "result_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("result_conn_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("result_exp_time", postgresql.TIMESTAMP(), autoincrement=False, nullable=False),
        sa.Column("result_deleted", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column("result_file_path", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("row_num_total", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("preview_file_path", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("row_num_preview", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("result_type", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("title", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("description", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("author_user_uuid", sa.UUID(), autoincrement=False, nullable=False),
        sa.Column("author_team_uuid", sa.UUID(), autoincrement=False, nullable=True),
        sa.Column("share_w_team", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column("saved_result", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column("refresh_result", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column("sql_query", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="result_history_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["result_conn_id"],
            ["connect.connection.conn_id"],
            name="result_history_result_conn_id_fkey",
            ondelete="CASCADE",
        ),
        sa.PrimaryKeyConstraint("client_id", "result_id", name="result_history_pclient24_pkey"),
        schema="ai_model",
    )
    op.create_table(
        "result_history_pclient2",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("result_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "result_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("result_conn_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("result_exp_time", postgresql.TIMESTAMP(), autoincrement=False, nullable=False),
        sa.Column("result_deleted", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column("result_file_path", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("row_num_total", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("preview_file_path", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("row_num_preview", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("result_type", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("title", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("description", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("author_user_uuid", sa.UUID(), autoincrement=False, nullable=False),
        sa.Column("author_team_uuid", sa.UUID(), autoincrement=False, nullable=True),
        sa.Column("share_w_team", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column("saved_result", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column("refresh_result", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column("sql_query", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="result_history_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["result_conn_id"],
            ["connect.connection.conn_id"],
            name="result_history_result_conn_id_fkey",
            ondelete="CASCADE",
        ),
        sa.PrimaryKeyConstraint("client_id", "result_id", name="result_history_pclient2_pkey"),
        schema="ai_model",
    )
    op.create_table(
        "prompt_history_pclient39",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("prompt_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "prompt_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="prompt_history_client_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "prompt_id", name="prompt_history_pclient39_pkey"),
        sa.UniqueConstraint("client_id", "prompt_uuid", name="prompt_history_pclient39_client_id_prompt_uuid_key"),
        schema="ai_model",
    )
    op.create_table(
        "user_chat_id_pclient2",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("chat_id", sa.INTEGER(), autoincrement=True, nullable=False),
        sa.Column(
            "chat_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("user_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("team_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("chat_name", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("chat_description", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.Column("last_updt_date", postgresql.TIMESTAMP(), autoincrement=False, nullable=True),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="user_chat_id_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["team_id"], ["account.team.team_id"], name="user_chat_id_team_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["user_id"], ["account.user.user_id"], name="user_chat_id_user_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "chat_id", name="user_chat_id_pclient2_pkey"),
        schema="ai_model",
    )
    op.create_table(
        "deposit_history_pclient2",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("deposit_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column(
            "deposit_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("sub_plan_id", sa.INTEGER(), autoincrement=False, nullable=True),
        sa.Column("transaction_item_description", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("transaction_item_quantity", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("transaction_item_cost", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("transaction_description", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("transaction_type", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("transaction_total_cost", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("deposited_credits", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="deposit_history_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["sub_plan_id"], ["account.subscription_plan.sub_plan_id"], name="deposit_history_sub_plan_id_fkey"
        ),
        sa.PrimaryKeyConstraint("client_id", "deposit_id", name="deposit_history_pclient2_pkey"),
        sa.UniqueConstraint("client_id", "deposit_uuid", name="deposit_history_pclient2_client_id_deposit_uuid_key"),
        schema="transaction",
    )
    op.create_table(
        "user_chat_id_pclient3",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("chat_id", sa.INTEGER(), autoincrement=True, nullable=False),
        sa.Column(
            "chat_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("user_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("team_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("chat_name", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("chat_description", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.Column("last_updt_date", postgresql.TIMESTAMP(), autoincrement=False, nullable=True),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="user_chat_id_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["team_id"], ["account.team.team_id"], name="user_chat_id_team_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["user_id"], ["account.user.user_id"], name="user_chat_id_user_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "chat_id", name="user_chat_id_pclient3_pkey"),
        schema="ai_model",
    )
    op.create_table(
        "basejump_credit_ledger_pclient24",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("credit_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "credit_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("sub_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("withdrawal_id", sa.BIGINT(), autoincrement=False, nullable=True),
        sa.Column("deposit_id", sa.INTEGER(), autoincrement=False, nullable=True),
        sa.Column("allotted_credit_bal", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column(
            "purchased_credit_bal", sa.NUMERIC(), server_default=sa.text("0"), autoincrement=False, nullable=True
        ),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"],
            ["account.client.client_id"],
            name="basejump_credit_ledger_client_id_fkey",
            ondelete="CASCADE",
        ),
        sa.ForeignKeyConstraint(
            ["sub_id"], ["account.subscription.sub_id"], name="basejump_credit_ledger_sub_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "credit_id", name="basejump_credit_ledger_pclient24_pkey"),
        schema="transaction",
    )
    op.create_table(
        "chat_history_pclient22",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("msg_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "msg_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("parent_msg_uuid", sa.UUID(), autoincrement=False, nullable=True),
        sa.Column("result_uuid", sa.UUID(), autoincrement=False, nullable=True),
        sa.Column("chat_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("prompt_uuid", sa.UUID(), autoincrement=False, nullable=False),
        sa.Column("initial_prompt", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column(
            "prompt_time",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.Column("content", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("internal_content", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("role", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("msg_type", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("sql_query", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("result_type", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="chat_history_client_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "msg_id", name="chat_history_pclient22_pkey"),
        sa.UniqueConstraint("client_id", "msg_uuid", name="chat_history_pclient22_client_id_msg_uuid_key"),
        schema="ai_model",
    )
    op.create_table(
        "table_columns_pclient3",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("col_id", sa.INTEGER(), autoincrement=True, nullable=False),
        sa.Column(
            "col_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("tbl_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("column_name", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("column_type", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("description", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("foreign_key_table_name", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("foreign_key_column_name", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("primary_key", sa.BOOLEAN(), autoincrement=False, nullable=True),
        sa.Column("distinct_values", postgresql.ARRAY(sa.TEXT()), autoincrement=False, nullable=True),
        sa.Column("ignore", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="table_columns_client_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "col_id", name="table_columns_pclient3_pkey"),
        schema="connect",
    )
    op.create_table(
        "user_chat_id_pclient53",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("chat_id", sa.INTEGER(), autoincrement=True, nullable=False),
        sa.Column(
            "chat_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("user_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("team_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("chat_name", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("chat_description", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.Column("last_updt_date", postgresql.TIMESTAMP(), autoincrement=False, nullable=True),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="user_chat_id_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["team_id"], ["account.team.team_id"], name="user_chat_id_team_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["user_id"], ["account.user.user_id"], name="user_chat_id_user_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "chat_id", name="user_chat_id_pclient53_pkey"),
        schema="ai_model",
    )
    op.create_table(
        "basejump_credit_ledger_pclient40",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("credit_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "credit_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("sub_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("withdrawal_id", sa.BIGINT(), autoincrement=False, nullable=True),
        sa.Column("deposit_id", sa.INTEGER(), autoincrement=False, nullable=True),
        sa.Column("allotted_credit_bal", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column(
            "purchased_credit_bal", sa.NUMERIC(), server_default=sa.text("0"), autoincrement=False, nullable=True
        ),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"],
            ["account.client.client_id"],
            name="basejump_credit_ledger_client_id_fkey",
            ondelete="CASCADE",
        ),
        sa.ForeignKeyConstraint(
            ["sub_id"], ["account.subscription.sub_id"], name="basejump_credit_ledger_sub_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "credit_id", name="basejump_credit_ledger_pclient40_pkey"),
        schema="transaction",
    )
    op.create_table(
        "team_connection_pclient53",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("conn_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("team_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="team_connection_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["conn_id"], ["connect.connection.conn_id"], name="team_connection_conn_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["team_id"], ["account.team.team_id"], name="team_connection_team_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "conn_id", "team_id", name="team_connection_pclient53_pkey"),
        schema="connect",
    )
    op.create_table(
        "prompt_history_pclient3",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("prompt_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "prompt_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="prompt_history_client_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "prompt_id", name="prompt_history_pclient3_pkey"),
        sa.UniqueConstraint("client_id", "prompt_uuid", name="prompt_history_pclient3_client_id_prompt_uuid_key"),
        schema="ai_model",
    )
    op.create_table(
        "user_chat_id_pclient5",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("chat_id", sa.INTEGER(), autoincrement=True, nullable=False),
        sa.Column(
            "chat_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("user_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("team_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("chat_name", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("chat_description", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.Column("last_updt_date", postgresql.TIMESTAMP(), autoincrement=False, nullable=True),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="user_chat_id_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["team_id"], ["account.team.team_id"], name="user_chat_id_team_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["user_id"], ["account.user.user_id"], name="user_chat_id_user_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "chat_id", name="user_chat_id_pclient5_pkey"),
        schema="ai_model",
    )
    op.create_table(
        "table_connection_pclient2",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("conn_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("tbl_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="table_connection_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["conn_id"], ["connect.db_conn.conn_id"], name="table_connection_conn_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "conn_id", "tbl_id", name="table_connection_pclient2_pkey"),
        schema="connect",
    )
    op.create_table(
        "result_history_pclient3",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("result_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "result_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("result_conn_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("result_exp_time", postgresql.TIMESTAMP(), autoincrement=False, nullable=False),
        sa.Column("result_deleted", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column("result_file_path", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("row_num_total", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("preview_file_path", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("row_num_preview", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("result_type", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("title", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("description", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("author_user_uuid", sa.UUID(), autoincrement=False, nullable=False),
        sa.Column("author_team_uuid", sa.UUID(), autoincrement=False, nullable=True),
        sa.Column("share_w_team", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column("saved_result", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column("refresh_result", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column("sql_query", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="result_history_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["result_conn_id"],
            ["connect.connection.conn_id"],
            name="result_history_result_conn_id_fkey",
            ondelete="CASCADE",
        ),
        sa.PrimaryKeyConstraint("client_id", "result_id", name="result_history_pclient3_pkey"),
        schema="ai_model",
    )
    op.create_table(
        "chat_history_pclient40",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("msg_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "msg_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("parent_msg_uuid", sa.UUID(), autoincrement=False, nullable=True),
        sa.Column("result_uuid", sa.UUID(), autoincrement=False, nullable=True),
        sa.Column("chat_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("prompt_uuid", sa.UUID(), autoincrement=False, nullable=False),
        sa.Column("initial_prompt", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column(
            "prompt_time",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.Column("content", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("internal_content", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("role", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("msg_type", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("sql_query", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("result_type", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="chat_history_client_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "msg_id", name="chat_history_pclient40_pkey"),
        sa.UniqueConstraint("client_id", "msg_uuid", name="chat_history_pclient40_client_id_msg_uuid_key"),
        schema="ai_model",
    )
    op.create_table(
        "token_count_pclient53",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("token_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "token_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("prompt_id", sa.INTEGER(), autoincrement=False, nullable=True),
        sa.Column("prompt", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("user_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("team_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("ai_model_provider", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("ai_model_nm", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("cost_per_1k_tokens_input", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("cost_per_1k_tokens_output", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("total_embedding_token_count", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("prompt_llm_token_count", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("completion_llm_token_count", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("total_llm_token_count", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="token_count_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(["team_id"], ["account.team.team_id"], name="token_count_team_id_fkey"),
        sa.ForeignKeyConstraint(["user_id"], ["account.user.user_id"], name="token_count_user_id_fkey"),
        sa.PrimaryKeyConstraint("client_id", "token_id", name="token_count_pclient53_pkey"),
        schema="ai_model",
    )
    op.create_table(
        "table_connection_pclient3",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("conn_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("tbl_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="table_connection_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["conn_id"], ["connect.db_conn.conn_id"], name="table_connection_conn_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "conn_id", "tbl_id", name="table_connection_pclient3_pkey"),
        schema="connect",
    )
    op.create_table(
        "chat_history_pclient39",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("msg_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "msg_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("parent_msg_uuid", sa.UUID(), autoincrement=False, nullable=True),
        sa.Column("result_uuid", sa.UUID(), autoincrement=False, nullable=True),
        sa.Column("chat_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("prompt_uuid", sa.UUID(), autoincrement=False, nullable=False),
        sa.Column("initial_prompt", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column(
            "prompt_time",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.Column("content", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("internal_content", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("role", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("msg_type", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("sql_query", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("result_type", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="chat_history_client_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "msg_id", name="chat_history_pclient39_pkey"),
        sa.UniqueConstraint("client_id", "msg_uuid", name="chat_history_pclient39_client_id_msg_uuid_key"),
        schema="ai_model",
    )
    op.create_table(
        "token_count_pclient5",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("token_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "token_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("prompt_id", sa.INTEGER(), autoincrement=False, nullable=True),
        sa.Column("prompt", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("user_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("team_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("ai_model_provider", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("ai_model_nm", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("cost_per_1k_tokens_input", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("cost_per_1k_tokens_output", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("total_embedding_token_count", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("prompt_llm_token_count", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("completion_llm_token_count", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("total_llm_token_count", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="token_count_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(["team_id"], ["account.team.team_id"], name="token_count_team_id_fkey"),
        sa.ForeignKeyConstraint(["user_id"], ["account.user.user_id"], name="token_count_user_id_fkey"),
        sa.PrimaryKeyConstraint("client_id", "token_id", name="token_count_pclient5_pkey"),
        schema="ai_model",
    )
    op.create_table(
        "database_tables_pclient2",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("tbl_id", sa.INTEGER(), autoincrement=True, nullable=False),
        sa.Column(
            "tbl_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("conn_id", sa.INTEGER(), autoincrement=False, nullable=True),
        sa.Column("conn_uuid", sa.UUID(), autoincrement=False, nullable=True),
        sa.Column("db_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("table_name", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("context", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("ignore", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column("primary_keys", postgresql.ARRAY(sa.TEXT()), autoincrement=False, nullable=True),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="database_tables_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["conn_id"], ["connect.db_conn.conn_id"], name="database_tables_conn_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["db_id"], ["connect.database.db_id"], name="database_tables_db_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "tbl_id", name="database_tables_pclient2_pkey"),
        schema="connect",
    )
    op.create_table(
        "team_connection_pclient23",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("conn_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("team_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="team_connection_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["conn_id"], ["connect.connection.conn_id"], name="team_connection_conn_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["team_id"], ["account.team.team_id"], name="team_connection_team_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "conn_id", "team_id", name="team_connection_pclient23_pkey"),
        schema="connect",
    )
    op.create_table(
        "deposit_history_pclient3",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("deposit_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column(
            "deposit_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("sub_plan_id", sa.INTEGER(), autoincrement=False, nullable=True),
        sa.Column("transaction_item_description", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("transaction_item_quantity", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("transaction_item_cost", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("transaction_description", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("transaction_type", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("transaction_total_cost", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("deposited_credits", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="deposit_history_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["sub_plan_id"], ["account.subscription_plan.sub_plan_id"], name="deposit_history_sub_plan_id_fkey"
        ),
        sa.PrimaryKeyConstraint("client_id", "deposit_id", name="deposit_history_pclient3_pkey"),
        sa.UniqueConstraint("client_id", "deposit_uuid", name="deposit_history_pclient3_client_id_deposit_uuid_key"),
        schema="transaction",
    )
    op.create_table(
        "token_count_pclient24",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("token_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "token_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("prompt_id", sa.INTEGER(), autoincrement=False, nullable=True),
        sa.Column("prompt", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("user_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("team_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("ai_model_provider", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("ai_model_nm", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("cost_per_1k_tokens_input", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("cost_per_1k_tokens_output", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("total_embedding_token_count", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("prompt_llm_token_count", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("completion_llm_token_count", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("total_llm_token_count", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="token_count_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(["team_id"], ["account.team.team_id"], name="token_count_team_id_fkey"),
        sa.ForeignKeyConstraint(["user_id"], ["account.user.user_id"], name="token_count_user_id_fkey"),
        sa.PrimaryKeyConstraint("client_id", "token_id", name="token_count_pclient24_pkey"),
        schema="ai_model",
    )
    op.create_table(
        "prompt_history_pclient24",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("prompt_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "prompt_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="prompt_history_client_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "prompt_id", name="prompt_history_pclient24_pkey"),
        sa.UniqueConstraint("client_id", "prompt_uuid", name="prompt_history_pclient24_client_id_prompt_uuid_key"),
        schema="ai_model",
    )
    op.create_table(
        "table_columns_pclient40",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("col_id", sa.INTEGER(), autoincrement=True, nullable=False),
        sa.Column(
            "col_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("tbl_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("column_name", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("column_type", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("description", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("foreign_key_table_name", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("foreign_key_column_name", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("primary_key", sa.BOOLEAN(), autoincrement=False, nullable=True),
        sa.Column("distinct_values", postgresql.ARRAY(sa.TEXT()), autoincrement=False, nullable=True),
        sa.Column("ignore", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="table_columns_client_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "col_id", name="table_columns_pclient40_pkey"),
        schema="connect",
    )
    op.create_table(
        "prompt_history_pclient2",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("prompt_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "prompt_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="prompt_history_client_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "prompt_id", name="prompt_history_pclient2_pkey"),
        sa.UniqueConstraint("client_id", "prompt_uuid", name="prompt_history_pclient2_client_id_prompt_uuid_key"),
        schema="ai_model",
    )
    op.create_table(
        "basejump_credit_ledger_pclient2",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("credit_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "credit_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("sub_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("withdrawal_id", sa.BIGINT(), autoincrement=False, nullable=True),
        sa.Column("deposit_id", sa.INTEGER(), autoincrement=False, nullable=True),
        sa.Column("allotted_credit_bal", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column(
            "purchased_credit_bal", sa.NUMERIC(), server_default=sa.text("0"), autoincrement=False, nullable=True
        ),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"],
            ["account.client.client_id"],
            name="basejump_credit_ledger_client_id_fkey",
            ondelete="CASCADE",
        ),
        sa.ForeignKeyConstraint(
            ["sub_id"], ["account.subscription.sub_id"], name="basejump_credit_ledger_sub_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "credit_id", name="basejump_credit_ledger_pclient2_pkey"),
        schema="transaction",
    )
    op.create_table(
        "result_history_pclient23",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("result_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "result_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("result_conn_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("result_exp_time", postgresql.TIMESTAMP(), autoincrement=False, nullable=False),
        sa.Column("result_deleted", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column("result_file_path", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("row_num_total", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("preview_file_path", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("row_num_preview", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("result_type", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("title", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("description", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("author_user_uuid", sa.UUID(), autoincrement=False, nullable=False),
        sa.Column("author_team_uuid", sa.UUID(), autoincrement=False, nullable=True),
        sa.Column("share_w_team", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column("saved_result", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column("refresh_result", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column("sql_query", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="result_history_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["result_conn_id"],
            ["connect.connection.conn_id"],
            name="result_history_result_conn_id_fkey",
            ondelete="CASCADE",
        ),
        sa.PrimaryKeyConstraint("client_id", "result_id", name="result_history_pclient23_pkey"),
        schema="ai_model",
    )
    op.create_table(
        "withdraw_history_pclient40",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("withdrawal_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "withdrawal_uuid",
            sa.UUID(),
            server_default=sa.text("gen_random_uuid()"),
            autoincrement=False,
            nullable=True,
        ),
        sa.Column("prompt_id", sa.BIGINT(), autoincrement=False, nullable=True),
        sa.Column("sub_plan_id", sa.INTEGER(), autoincrement=False, nullable=True),
        sa.Column("transaction_amt", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("transaction_description", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("withdrawn_credits", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="withdraw_history_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["sub_plan_id"], ["account.subscription_plan.sub_plan_id"], name="withdraw_history_sub_plan_id_fkey"
        ),
        sa.PrimaryKeyConstraint("client_id", "withdrawal_id", name="withdraw_history_pclient40_pkey"),
        sa.UniqueConstraint(
            "client_id", "withdrawal_uuid", name="withdraw_history_pclient40_client_id_withdrawal_uuid_key"
        ),
        schema="transaction",
    )
    op.create_table(
        "prompt_history_pclient23",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("prompt_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "prompt_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="prompt_history_client_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "prompt_id", name="prompt_history_pclient23_pkey"),
        sa.UniqueConstraint("client_id", "prompt_uuid", name="prompt_history_pclient23_client_id_prompt_uuid_key"),
        schema="ai_model",
    )
    op.create_table(
        "database_tables_pclient39",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("tbl_id", sa.INTEGER(), autoincrement=True, nullable=False),
        sa.Column(
            "tbl_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("conn_id", sa.INTEGER(), autoincrement=False, nullable=True),
        sa.Column("conn_uuid", sa.UUID(), autoincrement=False, nullable=True),
        sa.Column("db_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("table_name", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("context", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("ignore", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column("primary_keys", postgresql.ARRAY(sa.TEXT()), autoincrement=False, nullable=True),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="database_tables_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["conn_id"], ["connect.db_conn.conn_id"], name="database_tables_conn_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["db_id"], ["connect.database.db_id"], name="database_tables_db_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "tbl_id", name="database_tables_pclient39_pkey"),
        schema="connect",
    )
    op.create_table(
        "token_count_pclient40",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("token_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "token_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("prompt_id", sa.INTEGER(), autoincrement=False, nullable=True),
        sa.Column("prompt", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("user_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("team_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("ai_model_provider", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("ai_model_nm", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("cost_per_1k_tokens_input", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("cost_per_1k_tokens_output", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("total_embedding_token_count", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("prompt_llm_token_count", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("completion_llm_token_count", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("total_llm_token_count", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="token_count_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(["team_id"], ["account.team.team_id"], name="token_count_team_id_fkey"),
        sa.ForeignKeyConstraint(["user_id"], ["account.user.user_id"], name="token_count_user_id_fkey"),
        sa.PrimaryKeyConstraint("client_id", "token_id", name="token_count_pclient40_pkey"),
        schema="ai_model",
    )
    op.create_table(
        "team_connection_pclient5",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("conn_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("team_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="team_connection_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["conn_id"], ["connect.connection.conn_id"], name="team_connection_conn_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["team_id"], ["account.team.team_id"], name="team_connection_team_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "conn_id", "team_id", name="team_connection_pclient5_pkey"),
        schema="connect",
    )
    op.create_table(
        "user_chat_id_pclient39",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("chat_id", sa.INTEGER(), autoincrement=True, nullable=False),
        sa.Column(
            "chat_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("user_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("team_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("chat_name", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("chat_description", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.Column("last_updt_date", postgresql.TIMESTAMP(), autoincrement=False, nullable=True),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="user_chat_id_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["team_id"], ["account.team.team_id"], name="user_chat_id_team_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["user_id"], ["account.user.user_id"], name="user_chat_id_user_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "chat_id", name="user_chat_id_pclient39_pkey"),
        schema="ai_model",
    )
    op.create_table(
        "token_count_pclient23",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("token_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "token_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("prompt_id", sa.INTEGER(), autoincrement=False, nullable=True),
        sa.Column("prompt", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("user_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("team_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("ai_model_provider", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("ai_model_nm", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("cost_per_1k_tokens_input", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("cost_per_1k_tokens_output", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("total_embedding_token_count", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("prompt_llm_token_count", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("completion_llm_token_count", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("total_llm_token_count", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="token_count_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(["team_id"], ["account.team.team_id"], name="token_count_team_id_fkey"),
        sa.ForeignKeyConstraint(["user_id"], ["account.user.user_id"], name="token_count_user_id_fkey"),
        sa.PrimaryKeyConstraint("client_id", "token_id", name="token_count_pclient23_pkey"),
        schema="ai_model",
    )
    op.create_table(
        "basejump_credit_ledger_pclient3",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("credit_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "credit_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("sub_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("withdrawal_id", sa.BIGINT(), autoincrement=False, nullable=True),
        sa.Column("deposit_id", sa.INTEGER(), autoincrement=False, nullable=True),
        sa.Column("allotted_credit_bal", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column(
            "purchased_credit_bal", sa.NUMERIC(), server_default=sa.text("0"), autoincrement=False, nullable=True
        ),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"],
            ["account.client.client_id"],
            name="basejump_credit_ledger_client_id_fkey",
            ondelete="CASCADE",
        ),
        sa.ForeignKeyConstraint(
            ["sub_id"], ["account.subscription.sub_id"], name="basejump_credit_ledger_sub_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "credit_id", name="basejump_credit_ledger_pclient3_pkey"),
        schema="transaction",
    )
    op.create_table(
        "table_columns_pclient24",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("col_id", sa.INTEGER(), autoincrement=True, nullable=False),
        sa.Column(
            "col_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("tbl_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("column_name", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("column_type", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("description", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("foreign_key_table_name", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("foreign_key_column_name", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("primary_key", sa.BOOLEAN(), autoincrement=False, nullable=True),
        sa.Column("distinct_values", postgresql.ARRAY(sa.TEXT()), autoincrement=False, nullable=True),
        sa.Column("ignore", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="table_columns_client_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "col_id", name="table_columns_pclient24_pkey"),
        schema="connect",
    )
    op.create_table(
        "table_connection_pclient23",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("conn_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("tbl_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="table_connection_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["conn_id"], ["connect.db_conn.conn_id"], name="table_connection_conn_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "conn_id", "tbl_id", name="table_connection_pclient23_pkey"),
        schema="connect",
    )
    op.create_table(
        "chat_history_pclient24",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("msg_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "msg_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("parent_msg_uuid", sa.UUID(), autoincrement=False, nullable=True),
        sa.Column("result_uuid", sa.UUID(), autoincrement=False, nullable=True),
        sa.Column("chat_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("prompt_uuid", sa.UUID(), autoincrement=False, nullable=False),
        sa.Column("initial_prompt", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column(
            "prompt_time",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.Column("content", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("internal_content", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("role", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("msg_type", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("sql_query", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("result_type", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="chat_history_client_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "msg_id", name="chat_history_pclient24_pkey"),
        sa.UniqueConstraint("client_id", "msg_uuid", name="chat_history_pclient24_client_id_msg_uuid_key"),
        schema="ai_model",
    )
    op.create_table(
        "team_connection_pclient3",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("conn_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("team_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="team_connection_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["conn_id"], ["connect.connection.conn_id"], name="team_connection_conn_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["team_id"], ["account.team.team_id"], name="team_connection_team_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "conn_id", "team_id", name="team_connection_pclient3_pkey"),
        schema="connect",
    )
    op.create_table(
        "result_history_pclient53",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("result_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "result_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("result_conn_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("result_exp_time", postgresql.TIMESTAMP(), autoincrement=False, nullable=False),
        sa.Column("result_deleted", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column("result_file_path", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("row_num_total", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("preview_file_path", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("row_num_preview", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("result_type", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("title", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("description", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("author_user_uuid", sa.UUID(), autoincrement=False, nullable=False),
        sa.Column("author_team_uuid", sa.UUID(), autoincrement=False, nullable=True),
        sa.Column("share_w_team", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column("saved_result", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column("refresh_result", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column("sql_query", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="result_history_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["result_conn_id"],
            ["connect.connection.conn_id"],
            name="result_history_result_conn_id_fkey",
            ondelete="CASCADE",
        ),
        sa.PrimaryKeyConstraint("client_id", "result_id", name="result_history_pclient53_pkey"),
        schema="ai_model",
    )
    op.create_table(
        "table_columns_pclient23",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("col_id", sa.INTEGER(), autoincrement=True, nullable=False),
        sa.Column(
            "col_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("tbl_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("column_name", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("column_type", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("description", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("foreign_key_table_name", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("foreign_key_column_name", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("primary_key", sa.BOOLEAN(), autoincrement=False, nullable=True),
        sa.Column("distinct_values", postgresql.ARRAY(sa.TEXT()), autoincrement=False, nullable=True),
        sa.Column("ignore", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="table_columns_client_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "col_id", name="table_columns_pclient23_pkey"),
        schema="connect",
    )
    op.create_table(
        "team_connection_pclient22",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("conn_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("team_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="team_connection_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["conn_id"], ["connect.connection.conn_id"], name="team_connection_conn_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["team_id"], ["account.team.team_id"], name="team_connection_team_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "conn_id", "team_id", name="team_connection_pclient22_pkey"),
        schema="connect",
    )
    op.create_table(
        "deposit_history_pclient24",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("deposit_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column(
            "deposit_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("sub_plan_id", sa.INTEGER(), autoincrement=False, nullable=True),
        sa.Column("transaction_item_description", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("transaction_item_quantity", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("transaction_item_cost", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("transaction_description", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("transaction_type", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("transaction_total_cost", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("deposited_credits", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="deposit_history_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["sub_plan_id"], ["account.subscription_plan.sub_plan_id"], name="deposit_history_sub_plan_id_fkey"
        ),
        sa.PrimaryKeyConstraint("client_id", "deposit_id", name="deposit_history_pclient24_pkey"),
        sa.UniqueConstraint("client_id", "deposit_uuid", name="deposit_history_pclient24_client_id_deposit_uuid_key"),
        schema="transaction",
    )
    op.create_table(
        "database_tables_pclient24",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("tbl_id", sa.INTEGER(), autoincrement=True, nullable=False),
        sa.Column(
            "tbl_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("conn_id", sa.INTEGER(), autoincrement=False, nullable=True),
        sa.Column("conn_uuid", sa.UUID(), autoincrement=False, nullable=True),
        sa.Column("db_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("table_name", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("context", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("ignore", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column("primary_keys", postgresql.ARRAY(sa.TEXT()), autoincrement=False, nullable=True),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="database_tables_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["conn_id"], ["connect.db_conn.conn_id"], name="database_tables_conn_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["db_id"], ["connect.database.db_id"], name="database_tables_db_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "tbl_id", name="database_tables_pclient24_pkey"),
        schema="connect",
    )
    op.create_table(
        "result_history_pclient39",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("result_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "result_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("result_conn_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("result_exp_time", postgresql.TIMESTAMP(), autoincrement=False, nullable=False),
        sa.Column("result_deleted", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column("result_file_path", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("row_num_total", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("preview_file_path", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("row_num_preview", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("result_type", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("title", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("description", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("author_user_uuid", sa.UUID(), autoincrement=False, nullable=False),
        sa.Column("author_team_uuid", sa.UUID(), autoincrement=False, nullable=True),
        sa.Column("share_w_team", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column("saved_result", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column("refresh_result", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column("sql_query", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="result_history_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["result_conn_id"],
            ["connect.connection.conn_id"],
            name="result_history_result_conn_id_fkey",
            ondelete="CASCADE",
        ),
        sa.PrimaryKeyConstraint("client_id", "result_id", name="result_history_pclient39_pkey"),
        schema="ai_model",
    )
    op.create_table(
        "table_columns_pclient53",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("col_id", sa.INTEGER(), autoincrement=True, nullable=False),
        sa.Column(
            "col_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("tbl_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("column_name", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("column_type", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("description", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("foreign_key_table_name", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("foreign_key_column_name", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("primary_key", sa.BOOLEAN(), autoincrement=False, nullable=True),
        sa.Column("distinct_values", postgresql.ARRAY(sa.TEXT()), autoincrement=False, nullable=True),
        sa.Column("ignore", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="table_columns_client_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "col_id", name="table_columns_pclient53_pkey"),
        schema="connect",
    )
    op.create_table(
        "deposit_history_pclient40",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("deposit_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column(
            "deposit_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("sub_plan_id", sa.INTEGER(), autoincrement=False, nullable=True),
        sa.Column("transaction_item_description", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("transaction_item_quantity", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("transaction_item_cost", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("transaction_description", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("transaction_type", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("transaction_total_cost", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("deposited_credits", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="deposit_history_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["sub_plan_id"], ["account.subscription_plan.sub_plan_id"], name="deposit_history_sub_plan_id_fkey"
        ),
        sa.PrimaryKeyConstraint("client_id", "deposit_id", name="deposit_history_pclient40_pkey"),
        sa.UniqueConstraint("client_id", "deposit_uuid", name="deposit_history_pclient40_client_id_deposit_uuid_key"),
        schema="transaction",
    )
    op.create_table(
        "basejump_credit_ledger_pclient22",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("credit_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "credit_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("sub_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("withdrawal_id", sa.BIGINT(), autoincrement=False, nullable=True),
        sa.Column("deposit_id", sa.INTEGER(), autoincrement=False, nullable=True),
        sa.Column("allotted_credit_bal", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column(
            "purchased_credit_bal", sa.NUMERIC(), server_default=sa.text("0"), autoincrement=False, nullable=True
        ),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"],
            ["account.client.client_id"],
            name="basejump_credit_ledger_client_id_fkey",
            ondelete="CASCADE",
        ),
        sa.ForeignKeyConstraint(
            ["sub_id"], ["account.subscription.sub_id"], name="basejump_credit_ledger_sub_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "credit_id", name="basejump_credit_ledger_pclient22_pkey"),
        schema="transaction",
    )
    op.create_table(
        "token_count_pclient39",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("token_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "token_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("prompt_id", sa.INTEGER(), autoincrement=False, nullable=True),
        sa.Column("prompt", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("user_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("team_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("ai_model_provider", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("ai_model_nm", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("cost_per_1k_tokens_input", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("cost_per_1k_tokens_output", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("total_embedding_token_count", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("prompt_llm_token_count", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("completion_llm_token_count", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("total_llm_token_count", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="token_count_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(["team_id"], ["account.team.team_id"], name="token_count_team_id_fkey"),
        sa.ForeignKeyConstraint(["user_id"], ["account.user.user_id"], name="token_count_user_id_fkey"),
        sa.PrimaryKeyConstraint("client_id", "token_id", name="token_count_pclient39_pkey"),
        schema="ai_model",
    )
    op.create_table(
        "deposit_history_pclient22",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("deposit_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column(
            "deposit_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("sub_plan_id", sa.INTEGER(), autoincrement=False, nullable=True),
        sa.Column("transaction_item_description", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("transaction_item_quantity", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("transaction_item_cost", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("transaction_description", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("transaction_type", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("transaction_total_cost", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("deposited_credits", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="deposit_history_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["sub_plan_id"], ["account.subscription_plan.sub_plan_id"], name="deposit_history_sub_plan_id_fkey"
        ),
        sa.PrimaryKeyConstraint("client_id", "deposit_id", name="deposit_history_pclient22_pkey"),
        sa.UniqueConstraint("client_id", "deposit_uuid", name="deposit_history_pclient22_client_id_deposit_uuid_key"),
        schema="transaction",
    )
    op.create_table(
        "basejump_credit_ledger_pclient53",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("credit_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "credit_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("sub_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("withdrawal_id", sa.BIGINT(), autoincrement=False, nullable=True),
        sa.Column("deposit_id", sa.INTEGER(), autoincrement=False, nullable=True),
        sa.Column("allotted_credit_bal", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column(
            "purchased_credit_bal", sa.NUMERIC(), server_default=sa.text("0"), autoincrement=False, nullable=True
        ),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"],
            ["account.client.client_id"],
            name="basejump_credit_ledger_client_id_fkey",
            ondelete="CASCADE",
        ),
        sa.ForeignKeyConstraint(
            ["sub_id"], ["account.subscription.sub_id"], name="basejump_credit_ledger_sub_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "credit_id", name="basejump_credit_ledger_pclient53_pkey"),
        schema="transaction",
    )
    op.create_table(
        "table_connection_pclient22",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("conn_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("tbl_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="table_connection_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["conn_id"], ["connect.db_conn.conn_id"], name="table_connection_conn_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "conn_id", "tbl_id", name="table_connection_pclient22_pkey"),
        schema="connect",
    )
    op.create_table(
        "chat_history_pclient5",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("msg_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "msg_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("parent_msg_uuid", sa.UUID(), autoincrement=False, nullable=True),
        sa.Column("result_uuid", sa.UUID(), autoincrement=False, nullable=True),
        sa.Column("chat_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("prompt_uuid", sa.UUID(), autoincrement=False, nullable=False),
        sa.Column("initial_prompt", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column(
            "prompt_time",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.Column("content", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("internal_content", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("role", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("msg_type", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("sql_query", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("result_type", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="chat_history_client_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "msg_id", name="chat_history_pclient5_pkey"),
        sa.UniqueConstraint("client_id", "msg_uuid", name="chat_history_pclient5_client_id_msg_uuid_key"),
        schema="ai_model",
    )
    op.create_table(
        "result_history_pclient5",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("result_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "result_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("result_conn_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("result_exp_time", postgresql.TIMESTAMP(), autoincrement=False, nullable=False),
        sa.Column("result_deleted", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column("result_file_path", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("row_num_total", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("preview_file_path", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("row_num_preview", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("result_type", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("title", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("description", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("author_user_uuid", sa.UUID(), autoincrement=False, nullable=False),
        sa.Column("author_team_uuid", sa.UUID(), autoincrement=False, nullable=True),
        sa.Column("share_w_team", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column("saved_result", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column("refresh_result", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column("sql_query", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="result_history_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["result_conn_id"],
            ["connect.connection.conn_id"],
            name="result_history_result_conn_id_fkey",
            ondelete="CASCADE",
        ),
        sa.PrimaryKeyConstraint("client_id", "result_id", name="result_history_pclient5_pkey"),
        schema="ai_model",
    )
    op.create_table(
        "basejump_credit_ledger_pclient39",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("credit_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "credit_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("sub_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("withdrawal_id", sa.BIGINT(), autoincrement=False, nullable=True),
        sa.Column("deposit_id", sa.INTEGER(), autoincrement=False, nullable=True),
        sa.Column("allotted_credit_bal", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column(
            "purchased_credit_bal", sa.NUMERIC(), server_default=sa.text("0"), autoincrement=False, nullable=True
        ),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"],
            ["account.client.client_id"],
            name="basejump_credit_ledger_client_id_fkey",
            ondelete="CASCADE",
        ),
        sa.ForeignKeyConstraint(
            ["sub_id"], ["account.subscription.sub_id"], name="basejump_credit_ledger_sub_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "credit_id", name="basejump_credit_ledger_pclient39_pkey"),
        schema="transaction",
    )
    op.create_table(
        "token_count_pclient3",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("token_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "token_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("prompt_id", sa.INTEGER(), autoincrement=False, nullable=True),
        sa.Column("prompt", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("user_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("team_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("ai_model_provider", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("ai_model_nm", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("cost_per_1k_tokens_input", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("cost_per_1k_tokens_output", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("total_embedding_token_count", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("prompt_llm_token_count", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("completion_llm_token_count", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("total_llm_token_count", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="token_count_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(["team_id"], ["account.team.team_id"], name="token_count_team_id_fkey"),
        sa.ForeignKeyConstraint(["user_id"], ["account.user.user_id"], name="token_count_user_id_fkey"),
        sa.PrimaryKeyConstraint("client_id", "token_id", name="token_count_pclient3_pkey"),
        schema="ai_model",
    )
    op.create_table(
        "result_history_pclient22",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("result_id", sa.BIGINT(), autoincrement=False, nullable=False),
        sa.Column(
            "result_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("result_conn_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("result_exp_time", postgresql.TIMESTAMP(), autoincrement=False, nullable=False),
        sa.Column("result_deleted", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column("result_file_path", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("row_num_total", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("preview_file_path", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("row_num_preview", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("result_type", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("title", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("description", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("author_user_uuid", sa.UUID(), autoincrement=False, nullable=False),
        sa.Column("author_team_uuid", sa.UUID(), autoincrement=False, nullable=True),
        sa.Column("share_w_team", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column("saved_result", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column("refresh_result", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column("sql_query", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="result_history_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["result_conn_id"],
            ["connect.connection.conn_id"],
            name="result_history_result_conn_id_fkey",
            ondelete="CASCADE",
        ),
        sa.PrimaryKeyConstraint("client_id", "result_id", name="result_history_pclient22_pkey"),
        schema="ai_model",
    )
    op.create_table(
        "table_columns_pclient39",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("col_id", sa.INTEGER(), autoincrement=True, nullable=False),
        sa.Column(
            "col_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("tbl_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("column_name", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("column_type", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("description", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("foreign_key_table_name", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("foreign_key_column_name", sa.VARCHAR(), autoincrement=False, nullable=True),
        sa.Column("primary_key", sa.BOOLEAN(), autoincrement=False, nullable=True),
        sa.Column("distinct_values", postgresql.ARRAY(sa.TEXT()), autoincrement=False, nullable=True),
        sa.Column("ignore", sa.BOOLEAN(), server_default=sa.text("false"), autoincrement=False, nullable=True),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="table_columns_client_id_fkey", ondelete="CASCADE"
        ),
        sa.PrimaryKeyConstraint("client_id", "col_id", name="table_columns_pclient39_pkey"),
        schema="connect",
    )
    op.create_table(
        "deposit_history_pclient53",
        sa.Column("client_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("deposit_id", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column(
            "deposit_uuid", sa.UUID(), server_default=sa.text("gen_random_uuid()"), autoincrement=False, nullable=True
        ),
        sa.Column("sub_plan_id", sa.INTEGER(), autoincrement=False, nullable=True),
        sa.Column("transaction_item_description", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("transaction_item_quantity", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column("transaction_item_cost", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("transaction_description", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("transaction_type", sa.VARCHAR(), autoincrement=False, nullable=False),
        sa.Column("transaction_total_cost", sa.NUMERIC(), autoincrement=False, nullable=False),
        sa.Column("deposited_credits", sa.INTEGER(), autoincrement=False, nullable=False),
        sa.Column(
            "timestamp",
            postgresql.TIMESTAMP(),
            server_default=sa.text("CURRENT_TIMESTAMP"),
            autoincrement=False,
            nullable=True,
        ),
        sa.ForeignKeyConstraint(
            ["client_id"], ["account.client.client_id"], name="deposit_history_client_id_fkey", ondelete="CASCADE"
        ),
        sa.ForeignKeyConstraint(
            ["sub_plan_id"], ["account.subscription_plan.sub_plan_id"], name="deposit_history_sub_plan_id_fkey"
        ),
        sa.PrimaryKeyConstraint("client_id", "deposit_id", name="deposit_history_pclient53_pkey"),
        sa.UniqueConstraint("client_id", "deposit_uuid", name="deposit_history_pclient53_client_id_deposit_uuid_key"),
        schema="transaction",
    )
    # ### end Alembic commands ###
