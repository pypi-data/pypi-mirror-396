"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[96613],{16512:(e,t,n)=>{n.d(t,{A:()=>i,Z:()=>o});const o=()=>"\n    let currentScale = 1;\n    const svg = document.querySelector('svg');\n    \n    function zoomIn() {\n        currentScale *= 1.2;\n        svg.style.transform = `scale(${currentScale})`;\n    }\n    \n    function zoomOut() {\n        currentScale /= 1.2;\n        svg.style.transform = `scale(${currentScale})`;\n    }\n    \n    function resetZoom() {\n        currentScale = 1;\n        svg.style.transform = 'scale(1)';\n    }\n",i=function(){return"\n    function downloadSvg() {\n        const svgData = new XMLSerializer().serializeToString(svg);\n        const svgBlob = new Blob([svgData], {type: 'image/svg+xml'});\n        const url = URL.createObjectURL(svgBlob);\n        \n        const link = document.createElement('a');\n        link.href = url;\n        link.download = '".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"diagram.svg","';\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        \n        setTimeout(() => URL.revokeObjectURL(url), 1000);\n    }\n")}},67974:(e,t,n)=>{function o(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function i(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function r(e){if(!e||"transparent"===e||"none"===e)return!1;let t=0,n=0,o=0;const r=e.match(/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i);if(r)t=parseInt(r[1],16),n=parseInt(r[2],16),o=parseInt(r[3],16);else{if(!e.startsWith("rgb")){return["white","lightblue","lightgreen","lightyellow","lightgrey","lightgray","pink","yellow","#aed6f1","#d4e6f1","#d5f5e3","#f5f5f5","#e6e6e6","#f0f0f0","#ffffff","#f8f9fa","#e9ecef","#dee2e6","#ced4da","#adb5bd"].some(t=>t.toLowerCase()===e.toLowerCase())}{const i=e.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);if(!i)return!1;t=parseInt(i[1]),n=parseInt(i[2]),o=parseInt(i[3])}}const a=function(e,t,n){return.2126*i(e)+.7152*i(t)+.0722*i(n)}(t,n,o);return a>.4}function a(e){const t=o(e);if(!t)return"#000000";if(t.r>200&&t.g>200&&t.b<100)return"#000000";return(.299*t.r+.587*t.g+.114*t.b)/255>.4?"#000000":"#ffffff"}n.d(t,{E2:()=>o,RP:()=>a,l1:()=>r})},96613:(e,t,n)=>{n.r(t),n.d(t,{graphvizPlugin:()=>l});var o=n(28004),i=n(67974),r=n(16512);const a=new WeakMap,s=(e,t)=>{const n=e.querySelectorAll("text");n.forEach((e,n)=>{var o;if(!(null===(o=e.textContent)||void 0===o?void 0:o.trim()))return;let r=null;const a=e.getAttribute("fill")||"",s=e.closest("g");if(s){const e=s.querySelector('ellipse, polygon, rect, circle, path[fill]:not([fill="none"])');if(e){const t=e.getAttribute("fill"),n=window.getComputedStyle(e).fill;r="none"!==n&&"rgb(0, 0, 0)"!==n?n:t}}if(!r&&null!==s&&void 0!==s&&s.classList.contains("edge")&&(r=t?"#2e3440":"#ffffff"),!r&&null!==s&&void 0!==s&&s.classList.contains("cluster")){const e=s.querySelector("polygon");if(e){const t=e.getAttribute("fill"),n=window.getComputedStyle(e).fill;r="none"!==n&&"rgb(0, 0, 0)"!==n?n:t}}if(r){const t=(0,i.l1)(r),n=(0,i.RP)(r);t&&(e.setAttribute("fill",n),e.style.setProperty("fill",n,"important"))}else{const n=t?"#ffffff":"#000000";a!==n&&e.setAttribute("fill",n)}})},l={name:"graphviz-renderer",priority:5,sizingConfig:{sizingStrategy:"auto-expand",needsDynamicHeight:!0,needsOverflowVisible:!0,observeResize:!0,containerStyles:{width:"100%",height:"auto",overflow:"visible"}},canHandle:e=>"object"===typeof e&&null!==e&&"graphviz"===e.type&&e.definition?"string"===typeof e.definition&&e.definition.trim().length>0:!!(e=>"object"===typeof e&&null!==e&&"graphviz"===e.type&&e.definition?"string"===typeof e.definition&&e.definition.trim().length>0:"object"===typeof e&&null!==e&&"graphviz"===e.type&&"string"===typeof e.definition&&e.definition.trim().length>0)(e),isDefinitionComplete:e=>{if(!e||0===e.trim().length)return!1;const t=e.split("{").length-1;return t===e.split("}").length-1&&t>0&&e.includes("}")},render:async(e,t,f,g)=>{try{const b=await n.e(87122).then(n.bind(n,87122));let m;if(console.log("=== GRAPHVIZ DEBUG START ==="),console.log("Spec type:",typeof f),console.log("Spec is null:",null===f),console.log("Spec keys:",f?Object.keys(f):"N/A"),console.log("Spec stringified:",JSON.stringify(f,null,2)),console.log("Spec.definition exists:",!(!f||"object"!==typeof f||!("definition"in f))),console.log("Spec.definition type:",f&&"object"===typeof f&&"definition"in f?typeof f.definition:"N/A"),console.log("Spec.definition value (first 200):",f&&"object"===typeof f&&f.definition?f.definition.substring(0,200):"N/A"),console.log("=== GRAPHVIZ DEBUG END ==="),console.log("Graphviz render called with spec:",typeof f,f),"object"===typeof f&&null!==f&&f.definition){let e=f.definition;if("string"===typeof e&&e.trim().startsWith("{"))try{const t=JSON.parse(e);"graphviz"===t.type&&t.definition?(m=t.definition,console.log("Extracted definition from double-wrapped JSON")):(m=e,console.log("Using definition string as-is"))}catch(p){m=e,console.log("JSON parse failed, using definition string as-is")}else m=e,console.log("Using definition directly from spec object")}else{if("string"!==typeof f)throw console.error("Invalid spec format:",f),new Error("Invalid graphviz spec: no definition found");console.log("Processing string spec");try{const e=JSON.parse(f);e.definition?(m=e.definition,console.log("Extracted definition from JSON string")):(m=(0,o.k)(f,"graphviz"),console.log("Used YAML extraction from string"))}catch(u){m=(0,o.k)(f,"graphviz"),console.log("Used YAML extraction fallback")}}console.log("Raw definition (first 200 chars):",m.substring(0,200));const v=null!==e.querySelector("svg"),y=document.createElement("div");if(y.innerHTML='\n                <div style="\n                    display: flex;\n                    flex-direction: column;\n                    align-items: center;\n                    justify-content: center;\n                    padding: 2em;\n                    width: 100%;\n                    height: 100%;\n                    min-height: 150px;\n                ">\n                    <div style="\n                        border: 4px solid rgba(0, 0, 0, 0.1);\n                        border-top: 4px solid '.concat(g?"#4cc9f0":"#3498db",';\n                        border-radius: 50%;\n                        width: 40px;\n                        height: 40px;\n                        animation: graphviz-spin 1s linear infinite;\n                        margin-bottom: 15px;\n                    "></div>\n                    <div style="\n                        font-family: system-ui, -apple-system, sans-serif;\n                        color: ').concat(g?"#eceff4":"#333333",';\n                    ">Rendering Visualization...</div>\n                </div>\n                <style>\n                    @keyframes graphviz-spin {\n                        0% { transform: rotate(0deg); }\n                        100% { transform: rotate(360deg); }\n                    }\n            '),e.innerHTML=y.innerHTML,!f.isMarkdownBlockClosed&&!f.forceRender){console.log("Graphviz: Markdown block still open, letting content display as code");try{e.innerHTML=""}catch(h){console.warn("Could not remove loading spinner:",h)}return}if(!m||m.trim().length<10)return void console.log("Graphviz: Definition too short, waiting for more content");if(v&&f.isStreaming)return;console.log("Rendering Graphviz diagram with ".concat(m.length," chars")),a.set(e,g);const w={light:{text:"#333333",stroke:"#555555",nodeFill:"#f5f5f5",nodeBorder:"#999999",edgeColor:"#333333",background:"transparent",labelText:"#333333",clusterBg:"#f0f0f0",clusterBorder:"#cccccc"},dark:{text:"#ffffff",stroke:"#00b7ff",nodeFill:"#2a3990",nodeBorder:"#4cc9f0",edgeColor:"#f72585",background:"transparent",labelText:"#ffffff",clusterBg:"#1a1a2e",clusterBorder:"#4cc9f0",nodeColors:["#4361ee","#3a0ca3","#7209b7","#f72585","#4cc9f0","#06d6a0","#118ab2"]}},k=g?w.dark:w.light,S=await b.instance();let x=m;console.log("Starting with rawDefinition:",m.substring(0,100)),console.log("processedDefinition initialized as:",x.substring(0,100)),x=x.replace(/(\w+)\s*-\.->\s*(\w+)\s*\[([^\]]+)\]/g,"$1 -> $2 [$3]"),x=x.replace(/(\w+)\s*-\.->\s*(\w+)/g,"$1 -> $2"),x=x.replace(/label\s*=\s*"((?:\\"|[^"])*)"/g,(e,t)=>{const n=t.replace(/\\"/g,'"').replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/\\n/g,"<br/>").replace(/\n/g,"<br/>");return"label=<".concat(n,">")});let z=x;if(console.log("themedDot before theme application:",z.substring(0,100)),x.match(/^(\s*(?:di)?graph\s+[^{]*{)/)){const e=g?"#ffffff":"#000000";z=x.replace(/^(\s*(?:di)?graph\s+[^{]*{)/,'$1\n                    bgcolor="transparent";\n                    node [color="'.concat(k.nodeBorder,'", style="filled", fillcolor="').concat(k.nodeFill,'", penwidth=1.5];\n                    edge [color="').concat(k.edgeColor,'", fontcolor="').concat(e,'", penwidth=1.5];\n                    graph [fontcolor="').concat(e,'", color="').concat(k.clusterBorder,'", fontname="Arial"];'));const t=f.definition.match(/^\s*label\s*=\s*"([^"]+)"/m);if(t){const n=t[1];z=z.replace(/^\s*label\s*=\s*"([^"]+)"/m,' label=<<font color="'.concat(e,'">').concat(n,"</font>>"))}}console.log("Final themedDot being sent to Viz.js:",z.substring(0,100)),console.log("themedDot full length:",z.length);const A=await S.renderSVGElement(z),L=A.getElementsByTagName("*");let C=0;const M=g?w.dark.nodeColors:[],I=new Map,T=new Map;for(let e=0;e<L.length;e++){const t=L[e];if("polygon"===t.tagName&&t.parentElement&&t.parentElement.classList.contains("cluster")){const e=t.getAttribute("fill");if(e&&(T.set(t.parentElement,e),g&&(0,i.l1)(e))){const n=c(e);t.setAttribute("fill",n),t.setAttribute("stroke",k.clusterBorder),t.setAttribute("data-original-fill",e),t.setAttribute("data-darkened","true")}}}for(let e=0;e<L.length;e++){const t=L[e];if(("ellipse"===t.tagName||"polygon"===t.tagName)&&"none"!==t.getAttribute("fill")){const e=t.getAttribute("fill");if(e&&I.set(t,e),g){if(e&&(0,i.l1)(e))if("#ffffff"===e.toLowerCase()||"white"===e.toLowerCase()||d(e)>.9)if(M.length>0){const n=C%M.length;t.setAttribute("fill",M[n]),t.setAttribute("data-original-fill",e),t.setAttribute("data-darkened","true"),C++}else t.setAttribute("fill",k.nodeFill),t.setAttribute("data-original-fill",e),t.setAttribute("data-darkened","true");else{const n=c(e);t.setAttribute("fill",n),t.setAttribute("data-original-fill",e),t.setAttribute("data-darkened","true")}t.setAttribute("stroke",k.nodeBorder),t.setAttribute("stroke-width","1.5")}}}s(A,g),setTimeout(()=>{s(A,g)},500);for(let e=0;e<L.length;e++){const t=L[e];"path"===t.tagName?t.getAttribute("fill")&&"none"!==t.getAttribute("fill")||(t.setAttribute("stroke",k.edgeColor),t.setAttribute("stroke-width","1.5")):"polygon"===t.tagName&&t.classList.contains("arrow")&&(t.setAttribute("fill",k.edgeColor),t.setAttribute("stroke",k.edgeColor))}e.innerHTML="";const E=document.createElement("div");E.className="graphviz-wrapper",E.style.cssText="\n                width: 100%;\n                max-width: 100%;\n                overflow: auto;\n                padding: 1em;\n                display: flex;\n                justify-content: center;\n            ",E.appendChild(A),e.appendChild(E);const B=document.createElement("div");B.className="diagram-actions";const D=document.createElement("button");D.innerHTML="\u2197\ufe0f Open",D.className="diagram-action-button graphviz-open-button",D.onclick=()=>{const e=A;let t=600,n=400;try{const o=e.getBBox();t=Math.max(o.width+50,400),n=Math.max(o.height+100,300)}catch(h){console.warn("Could not get SVG dimensions, using defaults",h)}const o=(new XMLSerializer).serializeToString(A),i='\n                <!DOCTYPE html>\n                <html>\n                <head>\n                    <meta charset="UTF-8">\n                    <title>Graphviz Diagram</title>\n                    <style>\n                        body {\n                            margin: 0;\n                            padding: 0;\n                            display: flex;\n                            flex-direction: column;\n                            height: 100vh;\n                            background-color: #f8f9fa;\n                            font-family: system-ui, -apple-system, sans-serif;\n                        }\n                        .toolbar {\n                            background-color: #f1f3f5;\n                            border-bottom: 1px solid #dee2e6;\n                            padding: 8px;\n                            display: flex;\n                            justify-content: space-between;\n                            align-items: center;\n                        }\n                        .toolbar button {\n                            background-color: #4361ee;\n                            color: white;\n                            border: none;\n                            border-radius: 4px;\n                            padding: 6px 12px;\n                            cursor: pointer;\n                            margin-right: 8px;\n                            font-size: 14px;\n                        }\n                        .toolbar button:hover {\n                            background-color: #3a0ca3;\n                        }\n                        .container {\n                            flex: 1;\n                            display: flex;\n                            justify-content: center;\n                            align-items: center;\n                            overflow: auto;\n                            padding: 20px;\n                        }\n                        svg {\n                            max-width: 100%;\n                            max-height: 100%;\n                            height: auto;\n                            width: auto;\n                        }\n                        @media (prefers-color-scheme: dark) {\n                            body {\n                                background-color: #212529;\n                                color: #f8f9fa;\n                            }\n                            .toolbar {\n                                background-color: #343a40;\n                                border-bottom: 1px solid #495057;\n                            }\n                        }\n                    </style>\n                </head>\n                <body>\n                    <div class="toolbar">\n                        <div>\n                            <button onclick="zoomIn()">Zoom In</button>\n                            <button onclick="zoomOut()">Zoom Out</button>\n                            <button onclick="resetZoom()">Reset</button>\n                        </div>\n                        <div>\n                            <button onclick="downloadSvg()">Download SVG</button>\n                        </div>\n                    </div>\n                    <div class="container" id="svg-container">\n                        '.concat(o,"\n                    </div>\n                    <script>\n                        const svg = document.querySelector('svg');\n                        let currentScale = 1;\n                        \n                        // Make sure SVG is responsive\n                        svg.setAttribute('width', '100%');\n                        svg.setAttribute('height', '100%');\n                        svg.style.maxWidth = '100%';\n                        svg.style.maxHeight = '100%';\n                        svg.setAttribute('preserveAspectRatio', 'xMidYMid meet');\n                        ").concat((0,r.Z)()).concat((0,r.A)("graphviz-diagram.svg"),"\n                    <\/script>\n                </body>\n                </html>\n                "),a=new Blob([i],{type:"text/html"}),s=URL.createObjectURL(a),l=window.open(s,"GraphvizDiagram","width=".concat(t,",height=").concat(n,",resizable=yes,scrollbars=yes,status=no,toolbar=no,menubar=no,location=no"));l&&l.focus(),setTimeout(()=>URL.revokeObjectURL(s),1e4)},B.appendChild(D);const R=document.createElement("button");R.innerHTML="\ud83d\udcbe Save",R.className="diagram-action-button graphviz-save-button",R.onclick=()=>{const e=(new XMLSerializer).serializeToString(A),t='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n'.concat(e),n=new Blob([t],{type:"image/svg+xml"}),o=URL.createObjectURL(n),i=document.createElement("a");i.href=o,i.download="graphviz-diagram-".concat(Date.now(),".svg"),document.body.appendChild(i),i.click(),document.body.removeChild(i),setTimeout(()=>URL.revokeObjectURL(o),1e3)},B.appendChild(R);let N=!1;const U=E.innerHTML,j=document.createElement("button");j.innerHTML=N?"\ud83c\udfa8 View":"\ud83d\udcdd Source",j.className="diagram-action-button graphviz-source-button",j.onclick=()=>{N=!N,j.innerHTML=N?"\ud83c\udfa8 View":"\ud83d\udcdd Source",E.innerHTML=N?'\n                        <div style="\n                            backgroundColor: '.concat(g?"#1f1f1f":"#f6f8fa",";\n                            border: 1px solid ").concat(g?"#303030":"#e1e4e8",";\n                            borderRadius: '6px';\n                            padding: '16px';\n                            margin: '16px 0'\n                        \">\n                            <div style=\"\n                                fontSize: '12px';\n                                color: ").concat(g?"#8b949e":"#586069",";\n                                marginBottom: '8px';\n                                fontWeight: 'bold'\n                            \">\n                                \ud83d\udd17 Graphviz Source:\n                            </div>\n                            <pre style=\"\n                                margin: 0;\n                                color: ").concat(g?"#e6e6e6":"#24292e",";\n                                fontSize: '13px';\n                                lineHeight: '1.45';\n                                whiteSpace: 'pre-wrap';\n                                wordBreak: 'break-word';\n                                fontFamily: 'Monaco, Menlo, \"Ubuntu Mono\", monospace';\n                                maxHeight: '500px';\n                                overflow: 'auto'\n                            \"><code>").concat(f.definition,"</code></pre>\n                        </div>\n                    "):U},B.appendChild(j),e.insertBefore(B,E);const G=document.createElement("button");G.innerHTML=g?"\u2600\ufe0f Light":"\ud83c\udf19 Dark",G.className="diagram-action-button graphviz-theme-button",G.onclick=()=>{l.render(e,t,f,!g)},B.appendChild(G)}catch(b){console.error("Graphviz rendering error:",b),f.isStreaming&&e.querySelector("svg")||(e.innerHTML='\n                <div class="graphviz-error">\n                    <strong>Graphviz Error:</strong>\n                    <pre>'.concat(b instanceof Error?b.message:"Unknown error","</pre>\n                    <details>\n                        <summary>Show Definition</summary>\n                        <pre><code>").concat(f.definition,"</code></pre>\n                    </details>\n                </div>\n            "))}}};function c(e){const t={white:"#2e3440",lightblue:"#5e81ac",lightgreen:"#8fbcbb",lightgrey:"#4c566a",lightgray:"#4c566a",pink:"#b48ead"};if(t[e.toLowerCase()])return t[e.toLowerCase()];try{let t,n,o;if(e.startsWith("#")){const i=e.substring(1);3===i.length?(t=parseInt(i[0]+i[0],16),n=parseInt(i[1]+i[1],16),o=parseInt(i[2]+i[2],16)):(t=parseInt(i.substring(0,2),16),n=parseInt(i.substring(2,4),16),o=parseInt(i.substring(4,6),16))}else{if(!e.startsWith("rgb"))return"#2e3440";{const i=e.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*[\d.]+)?\)/);if(!i)return"#2e3440";t=parseInt(i[1],10),n=parseInt(i[2],10),o=parseInt(i[3],10)}}return t=Math.max(Math.floor(.4*t),0),n=Math.max(Math.floor(.4*n),0),o=Math.max(Math.floor(.4*o),0),"#".concat(t.toString(16).padStart(2,"0")).concat(n.toString(16).padStart(2,"0")).concat(o.toString(16).padStart(2,"0"))}catch(n){return"#2e3440"}}function d(e){let t,n,o;if(e.startsWith("#")){const i=e.substring(1);3===i.length?(t=parseInt(i[0]+i[0],16),n=parseInt(i[1]+i[1],16),o=parseInt(i[2]+i[2],16)):(t=parseInt(i.substring(0,2),16),n=parseInt(i.substring(2,4),16),o=parseInt(i.substring(4,6),16))}else{if(!e.startsWith("rgb"))return 0;{const i=e.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*[\d.]+)?\)/);if(!i)return 0;t=parseInt(i[1],10),n=parseInt(i[2],10),o=parseInt(i[3],10)}}return(.299*t+.587*n+.114*o)/255}}}]);
//# sourceMappingURL=96613.d3df926d.chunk.js.map