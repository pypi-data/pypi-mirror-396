[tox]
isolated_build = True
envlist = py38, py39, py310, py311, py312, flake8
skipsdist = False

[gh-actions]
python =
    3.8: py38
    3.9: py39
    3.10: py310
    3.11: py311
    3.12: py312, flake8

[testenv]
deps =
    pytest
    pytest-cov
    openai>=1.39.0
    pyperclip
    python-dotenv
    pytest-mock
commands =
    pytest {posargs:tests/test_path_normalization.py} --cov=aici
passenv =
    OPENAI_API_KEY
    AICI_LANG

[testenv:flake8]
deps = flake8
commands = flake8 aici tests

[flake8]
max-line-length = 150
exclude = .tox,*.egg,build,data
select = E,W,F
# Ignore specific errors:
# F401: imported but unused (needed for __init__.py exports)
# E402: module level import not at top of file (needed for conditional imports)
# W391: blank line at end of file
# E261: at least two spaces before inline comment
# E126: continuation line over-indented for hanging indent
# E302: expected 2 blank lines, found 1
# E305: expected 2 blank lines after class or function definition
# W291: trailing whitespace
# W293: blank line contains whitespace
# E271: multiple spaces after keyword
# E501: line too long (already set max-line-length to 150)
# F841: local variable assigned to but never used
# F811: redefinition of unused variable
ignore = F401,E402,W391,E261,E126,E302,E305,W291,W293,E271,E501,F841,F811
