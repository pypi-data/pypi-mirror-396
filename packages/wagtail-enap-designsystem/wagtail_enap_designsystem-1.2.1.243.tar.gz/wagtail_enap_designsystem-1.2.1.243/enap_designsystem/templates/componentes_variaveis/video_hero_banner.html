<!-- templates/components/video_hero_banner.html -->
{% load wagtailcore_tags %}
{% load wagtailimages_tags %}
<section class="video-hero-banner" 
    style="
    {% if value.background_image %}
    {% image value.background_image original as background_img %}
    background: url('{{ background_img.url }}');
    background-size: cover;
    {% else %} 
    background: {{ value.cor_fundo }};
    {% endif %}
    height: {{ value.altura_banner }};"
>
    
    <!-- Overlay para melhor legibilidade do texto -->
    <div class="video-hero-overlay"></div>
    
    <div class="container">
        <!-- Vídeo em tela cheia -->
        {% if value.video_file %}
        <div class="video-hero-media">
            <div class="video-frame">
                <video class="video-player-hero" autoplay muted loop>
                    <source src="{{ value.video_file.url }}" type="video/mp4">
                    <p>Seu navegador não suporta o elemento de vídeo.</p>
                </video>
                
                <!-- Conteúdo sobreposto ao vídeo -->
                <div class="video-content-overlay">
                    <div class="video-hero-content">
                        
                        <!-- Título principal -->
                        {% if value.titulo %}
                        <h1 class="video-hero-title">{{ value.titulo|richtext }}</h1>
                        {% endif %}
                        
                        <!-- Subtítulo -->
                        {% if value.subtitulo %}
                        <div class="video-hero-subtitle">
                            {{ value.subtitulo|richtext }}
                        </div>
                        {% endif %}
                        
                        <!-- Logo -->
                        {% if value.logo %}
                        <div class="card-imagem">
                            {% image value.logo width-400 as logo_img %}
                            <img src="{{ logo_img.url }}" 
                                    alt="Logos"
                                    class="logo-image">
                        </div>
                        {% endif %}
                        
                    </div>
                </div>
            </div>
        </div>
        {% else %}
        <!-- Fallback caso não tenha vídeo -->
        <div class="video-hero-content-only">
            
            <!-- Título principal -->
            {% if value.titulo %}
            <h1 class="video-hero-title">{{ value.titulo }}</h1>
            {% endif %}
            
            <!-- Subtítulo -->
            {% if value.subtitulo %}
            <div class="video-hero-subtitle">
                {{ value.subtitulo|richtext }}
            </div>
            {% endif %}
            
            <!-- Logo -->
            {% if value.logo %}
            <div class="video-hero-logo">
                <img src="{{ value.logo.get_rendition.url }}" 
                     alt="Logo" class="logo-image">
            </div>
            {% endif %}
            
        </div>
        {% endif %}
    </div>
</section>

<style>
/* CSS do componente Video Hero Banner */
.video-hero-banner {
    position: relative;
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    overflow: hidden;
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
}

.video-hero-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    z-index: 1;
}

.video-hero-banner .container {
    position: relative;
    z-index: 2;
    width: 100%;
    max-width: 1200px;
    margin: 0 auto;
    padding: 2rem 20px;
}

/* Frame do vídeo (tela cheia) */
.video-hero-media {
    width: 100%;
    display: flex;
    justify-content: center;
    position: relative;
}

.video-frame {
    width: 100%;
    max-width: 95%;
    border-radius: 32px;
    overflow: hidden;
    backdrop-filter: blur(10px);
    position: relative;
}

.video-player-hero {
    width: 100%;
    height: auto;
    display: block;
    border-radius: 8px;
    background: #000;
}

/* Conteúdo sobreposto ao vídeo */
.video-content-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    display: flex;
    align-items: center;
    padding: 2rem;
    background: linear-gradient(
        45deg, 
        rgba(0, 0, 0, 0.7) 0%, 
        rgba(0, 0, 0, 0.3) 50%, 
        rgba(0, 0, 0, 0.1) 100%
    );
    border-radius: 8px;
    z-index: 10;
    pointer-events: none;
}

.video-hero-content {
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    align-items: flex-start;
    max-width: 100%;
    color: white;
    pointer-events: auto;
}

.video-hero-content h2{
    color: white;
    font-size: 42px;
}

.video-content-only {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    height: 100%;
    min-height: 400px;
}

.video-hero-title{
    font-weight: 400;
    margin: 0px;
}

/* Responsividade */
@media (max-width: 1024px) {
    .video-hero-title {
        font-size: 3rem;
    }
    
    .video-hero-subtitle {
        font-size: 1.3rem;
    }
    
    .video-content-overlay {
        padding: 1.5rem;
    }
    
    .video-hero-content {
        width: 70%;
    }

    .video-player-hero {
        height: 100%;
        object-fit: cover;
    }
}

@media (max-width: 768px) {
    .video-content-overlay {
        padding: 1rem;
        background: linear-gradient(
            180deg, 
            rgba(0, 0, 0, 0.8) 0%, 
            rgba(0, 0, 0, 0.4) 50%, 
            rgba(0, 0, 0, 0.2) 100%
        );
    }

    .video-player-hero {
        height: 100%;
        object-fit: cover;
    }
    
    .video-hero-content {
        width: 100%;
        max-width: none;
    }
    
    .video-hero-title {
        font-size: 2.5rem;
    }
    
    .video-hero-subtitle {
        font-size: 1.2rem;
    }
    
    .video-hero-logo {
        bottom: 1rem;
        right: 1rem;
    }
    
    .video-hero-logo .logo-image {
        max-height: 60px;
    }

    .video-hero-media {
        height: 60vh;
    }
    
    .video-frame {
        border-radius: 8px;
    }
}

@media (max-width: 480px) {
    .video-content-overlay {
        padding: 0.8rem;
    }

    .video-player-hero {
        height: 100%;
        object-fit: cover;
    }

    .video-hero-media {
        height: 60vh;
    }
    
    .video-hero-title {
        font-size: 2rem;
        margin-bottom: 1rem;
    }
    
    .video-hero-subtitle {
        font-size: 1rem;
        margin-bottom: 1.5rem;
    }
    
    .video-hero-logo .logo-image {
        max-height: 50px;
    }
    
    .video-frame {
        border-radius: 6px;
    }
}
</style>