# Generated by Django 5.1.6 on 2025-10-30 14:11

import django.db.models.deletion
import modelcluster.fields
import wagtail.fields
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        (
            "enap_designsystem",
            "0475_alter_areaaluno_body_alter_cursoeadpage_curso_and_more",
        ),
        ("wagtailcore", "0094_alter_page_locale"),
        ("wagtailimages", "0027_image_description"),
    ]

    operations = [
        migrations.CreateModel(
            name="RotaPage",
            fields=[
                (
                    "page_ptr",
                    models.OneToOneField(
                        auto_created=True,
                        on_delete=django.db.models.deletion.CASCADE,
                        parent_link=True,
                        primary_key=True,
                        serialize=False,
                        to="wagtailcore.page",
                    ),
                ),
                (
                    "tipo_rota",
                    models.CharField(
                        choices=[
                            ("docente_presencial", "Docente Presencial"),
                            ("designer_instrucional", "Designer Instrucional"),
                            ("multimidia", "Multimídia"),
                            ("equipe_tecnica", "Equipe Técnica"),
                        ],
                        help_text="Selecione o tipo de rota",
                        max_length=100,
                        verbose_name="Tipo de Rota",
                    ),
                ),
                (
                    "cor_principal",
                    models.CharField(
                        default="#0066cc",
                        help_text="Código de cor hexadecimal (ex: #0066cc)",
                        max_length=20,
                        verbose_name="Cor Principal",
                    ),
                ),
                (
                    "descricao_curta",
                    models.CharField(
                        blank=True,
                        help_text="Breve descrição para uso em listagens (máx. 255 caracteres)",
                        max_length=255,
                        verbose_name="Descrição Curta",
                    ),
                ),
                (
                    "apresentacao",
                    wagtail.fields.RichTextField(
                        help_text="Texto introdutório explicando o foco da rota",
                        verbose_name="Apresentação da Rota",
                    ),
                ),
                (
                    "por_onde_comecar",
                    wagtail.fields.RichTextField(
                        help_text="Indicação dos conceitos ou conteúdos iniciais que ajudarão o usuário",
                        verbose_name="Por onde começar?",
                    ),
                ),
                (
                    "texto_capsulas",
                    wagtail.fields.RichTextField(
                        blank=True,
                        help_text="Texto explicativo sobre as cápsulas recomendadas para esta rota",
                        verbose_name="Texto sobre as Cápsulas",
                    ),
                ),
                (
                    "texto_materiais_extras",
                    wagtail.fields.RichTextField(
                        blank=True,
                        help_text="Texto introdutório para a seção de materiais de aprofundamento",
                        verbose_name="Introdução aos Materiais Extras",
                    ),
                ),
                (
                    "materiais_externos",
                    wagtail.fields.StreamField(
                        [("material", 5)],
                        blank=True,
                        block_lookup={
                            0: (
                                "wagtail.blocks.CharBlock",
                                (),
                                {"help_text": "Título do material", "required": True},
                            ),
                            1: (
                                "wagtail.blocks.TextBlock",
                                (),
                                {
                                    "help_text": "Breve descrição do material",
                                    "required": False,
                                },
                            ),
                            2: (
                                "wagtail.blocks.ChoiceBlock",
                                [],
                                {
                                    "choices": [
                                        ("curso", "Curso"),
                                        ("publicacao", "Publicação"),
                                        ("video", "Vídeo"),
                                        ("guia", "Guia"),
                                        ("outro", "Outro"),
                                    ],
                                    "help_text": "Tipo de material",
                                },
                            ),
                            3: (
                                "wagtail.blocks.URLBlock",
                                (),
                                {"help_text": "Link para o material", "required": True},
                            ),
                            4: (
                                "wagtail.images.blocks.ImageChooserBlock",
                                (),
                                {
                                    "help_text": "Imagem ilustrativa (opcional)",
                                    "required": False,
                                },
                            ),
                            5: (
                                "wagtail.blocks.StructBlock",
                                [
                                    [
                                        ("titulo", 0),
                                        ("descricao", 1),
                                        ("tipo", 2),
                                        ("url", 3),
                                        ("imagem", 4),
                                    ]
                                ],
                                {},
                            ),
                        },
                        verbose_name="Materiais Externos",
                    ),
                ),
                (
                    "icone",
                    models.ForeignKey(
                        blank=True,
                        help_text="Ícone representativo da rota",
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="+",
                        to="wagtailimages.image",
                        verbose_name="Ícone",
                    ),
                ),
                (
                    "imagem_capa",
                    models.ForeignKey(
                        blank=True,
                        help_text="Imagem principal da rota (banner)",
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="+",
                        to="wagtailimages.image",
                        verbose_name="Imagem de Capa",
                    ),
                ),
            ],
            options={
                "verbose_name": "Página de Rota Temática",
            },
            bases=("wagtailcore.page",),
        ),
        migrations.CreateModel(
            name="CapsulaOrdemRota",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                (
                    "sort_order",
                    models.IntegerField(blank=True, editable=False, null=True),
                ),
                (
                    "destaque",
                    models.BooleanField(
                        default=False,
                        help_text="Marque para destacar esta cápsula como prioritária",
                        verbose_name="Destaque",
                    ),
                ),
                (
                    "ordem",
                    models.IntegerField(
                        default=0,
                        help_text="Número para ordenar as cápsulas (menor = mais importante)",
                        verbose_name="Ordem",
                    ),
                ),
                (
                    "texto_contextualizacao",
                    models.TextField(
                        blank=True,
                        help_text="Texto explicando a relevância desta cápsula para esta rota específica",
                        verbose_name="Texto de Contextualização",
                    ),
                ),
                (
                    "capsula",
                    models.ForeignKey(
                        help_text="Selecione uma cápsula para vincular a esta rota",
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="+",
                        to="wagtailcore.page",
                        verbose_name="Cápsula",
                    ),
                ),
                (
                    "page",
                    modelcluster.fields.ParentalKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="capsulas_vinculadas",
                        to="enap_designsystem.rotapage",
                    ),
                ),
            ],
            options={
                "ordering": ["ordem"],
            },
        ),
    ]
