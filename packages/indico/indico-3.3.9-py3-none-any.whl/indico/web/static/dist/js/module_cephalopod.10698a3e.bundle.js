"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[1773],{82465:(e,t,s)=>{var n=s(637),o=s.n(n),i=s(25584);!function(e){function t(e,t,s){s=s||!1;const n=$.Deferred();return $.ajax({url:e,type:"GET",dataType:"json",timeout:1e4}).done((e=>{let s=!0;o().each(t,((t,n)=>{t!==e[n]&&(s=!1)})),n.resolve(s)})).fail(((e,t)=>{let o=i.$T.gettext("Unknown error while contacting the Community Hub");"rejected"===e.state()&&200===e.status&&"parsererror"===t?o=i.$T.gettext("Internal error: Parse error on the reply of the Community Hub."):"rejected"===e.state()&&0===e.status&&"error"===t?o=i.$T.gettext("Unable to contact the Community Hub."):"rejected"===e.state()&&0===e.status&&"timeout"===t?o=i.$T.gettext("The connection to the Community Hub timed out."):("rejected"===e.state()&&404===e.status||"NOT FOUND"===e.statusText)&&(o=i.$T.gettext("Your server is not registered with the Community Hub.")),s||$("<div>",{class:"message-text",html:o}).appendTo($("<div>",{class:"error-message-box fixed-width"}).appendTo($("#flashed-messages"))),n.reject(o)})),n.promise()}e.setupCephalopodSettings=function(e,s){$("#joined").on("change",(function(){$("#sync-button").prop("disabled",!this.checked)}));const n=$.Deferred();$.when(n).always((e=>{$("#tracking-status").attr("class",`action-box ${e.class}`).find(".section > .icon").attr("class",`icon ${e.icon}`).next(".text").children(".label").html(e.title).next().html(e.subtitle)})),s?t(e,{enabled:$("#joined").prop("checked"),contact:$("#contact_name").val(),email:$("#contact_email").val(),url:$("#server-url").html(),organization:$("#affiliation").html()},!0).done((e=>{e?n.resolve({title:i.$T.gettext("Synchronized"),subtitle:i.$T.gettext("This server is registered as part of the community and is up to date."),class:"highlight",icon:"icon-checkmark"}):($("#sync-tracking").show(),n.resolve({title:i.$T.gettext("Out of sync"),subtitle:i.$T.gettext("Your Indico server is out of sync. Synchronize it with the button on the right."),class:"warning",icon:"icon-warning"}))})).fail((e=>{n.reject({title:i.$T.gettext("Error!"),subtitle:e,class:"danger",icon:"icon-disable"})})):n.resolve({title:i.$T.gettext("Disabled"),subtitle:i.$T.gettext("This server is not registered as part of the community."),class:"disabled",icon:"icon-close"})},e.checkCephalopodSynced=function(e,s,n){t(e,s).done((e=>{e||$("<div>",{class:"message-text",html:i.$T.gettext('Your Indico server is not synchronized with the Community Hub! You can solve this <a href="{0}">here</a>.').format(n)}).appendTo($("<div>",{class:"warning-message-box fixed-width"}).appendTo($("#flashed-messages")))}))}}(window)}},e=>{e.O(0,[2076],(()=>{return t=82465,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=module_cephalopod.10698a3e.bundle.js.map