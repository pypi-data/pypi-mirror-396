"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[8402],{84818:(e,t,s)=>{var o=s(637),n=s.n(o),a=s(25584),i=(s(64622),s(86326)),r=s(35623),c=s(24406),l=s(96478);document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector("#session-calendar-link");if(!e)return;const{eventId:t,sessionId:s,sessionContribCount:o}=e.dataset,n=[{key:"session",text:l.Translate.string("Session"),extraParams:{}}];parseInt(o,10)>0&&n.push({key:"contribution",text:l.Translate.string("Detailed timetable"),extraParams:{detail:"contributions"}}),r.render(i.createElement(c.ICSCalendarLink,{endpoint:"sessions.export_ics",params:{event_id:t,session_id:s},renderButton:e=>i.createElement(c.IButton,{icon:"calendar",classes:e,title:l.Translate.string("Export")}),options:n}),e)})),function(e){function t(){$("#sessions .tablesorter").tablesorter({cssAsc:"header-sort-asc",cssDesc:"header-sort-desc",cssInfoBlock:"avoid-sort",cssChildRow:"session-blocks-row",headerTemplate:"",sortList:[[1,0]]})}function s(){$(".palette-picker-trigger").each((function(){const e=$(this);e.palettepicker({availableColors:e.data("colors"),selectedColor:e.data("color"),onSelect(e,t){$.ajax({url:$(this).data("href"),method:$(this).data("method"),data:JSON.stringify({colors:{text:t,background:e}}),dataType:"json",contentType:"application/json",error:handleAjaxError,complete:IndicoUI.Dialogs.Util.progress()})}})}))}const o={itemHandle:"tr",listItems:"#sessions-wrapper tr.session-row",term:"#search-input",state:"#filtering-state",placeholder:"#filter-placeholder"};e.setupSessionsList=function(e){var i;e=$.extend({createTypeURL:null},e),i=e.createTypeURL,$("#sessions").on("click",".session-type-picker",(function(){$(this).itempicker({filterPlaceholder:a.$T.gettext("Filter types"),containerClasses:"session-type-container",uncheckedItemIcon:"",footerElements:[{title:a.$T.gettext("Add new type"),onClick(e){ajaxDialog({title:a.$T.gettext("Add new type"),url:i,onClose(t){t&&($(".session-type-picker").each((function(){const e=$(this);e.data("indicoItempicker")?e.itempicker("updateItemList",t.types):e.data("items",t.types)})),e.itempicker("selectItem",t.new_type_id))}})}}],onSelect(e){const t=$(this),s={type_id:e?e.id:null};return(o=t.data("href"),n=t.data("method"),i=s,$.ajax({url:o,method:n,data:JSON.stringify(i),dataType:"json",contentType:"application/json",error:handleAjaxError,complete:IndicoUI.Dialogs.Util.progress()})).then((()=>{const s=e?e.title:a.$T.gettext("No type");t.find(".label").text(s)}));var o,n,i}})})),enableIfChecked("#sessions-wrapper",".select-row","#sessions .js-requires-selected-row"),t(),s(),handleRowSelection(!1);const r=setupSearchBox(o);$("#sessions .toolbar").on("click",".disabled",(e=>{e.preventDefault(),e.stopPropagation()})),$("#sessions-wrapper").on("indico:htmlUpdated",(()=>{t(),s(),handleRowSelection(!0),n().defer(r)})).on("click",".show-session-blocks",(function(){const e=$(this);ajaxDialog({title:e.data("title"),url:e.data("href")})})).on("attachments:updated",(e=>{const t=$(e.target);reloadManagementAttachmentInfoColumn(t.data("locator"),t.closest("td"))})),$(".js-submit-session-form").on("click",(function(e){e.preventDefault();const t=$(this);t.hasClass("disabled")||$("#sessions-wrapper form").attr("action",t.data("href")).submit()}))}}(window)}},e=>{e.O(0,[4644,4394,2076],(()=>{return t=84818,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=module_events.sessions.7a87359b.bundle.js.map