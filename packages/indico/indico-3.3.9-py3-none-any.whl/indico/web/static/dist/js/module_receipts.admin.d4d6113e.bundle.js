"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[1838],{37168:(e,t,a)=>{var n=a(86326),i=a(35623),r=a(77940),c=a(29079),s=a(97598),o=a.n(s),l=a(80841),d=a(58591),m=a(87597),u=a(24406),y=a(29481),p=a(96478),g=a(67599),f=a(49528),D=a(637),v=a.n(D),_=a(54219),h=a(47279),b=a(75313),E=a(49138);const w=o().shape({event_id:o().number,category_id:o().number}),j=o().shape({id:o().number,title:o().string,html:o().string,css:o().string,customFields:o().array,owner:o().shape({id:o().number,title:o().string,locator:o().object})}),T=o().shape({title:o().string.isRequired,version:o().number.isRequired}),C=c.default.bind(null,{endpoint:"receipts.add_default_template",rules:[{args:["event_id","object_type","template_name"],converters:{event_id:"IntegerConverter"},defaults:{object_type:"event"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1},{data:"add",isDynamic:!1},{data:"/",isDynamic:!1},{data:"template_name",isDynamic:!0}]},{args:["category_id","object_type","template_name"],converters:{category_id:"IntegerConverter"},defaults:{object_type:"category"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1},{data:"add",isDynamic:!1},{data:"/",isDynamic:!1},{data:"template_name",isDynamic:!0}]}]},"/"),O=c.default.bind(null,{endpoint:"receipts.add_template_page",rules:[{args:["event_id","object_type"],converters:{event_id:"IntegerConverter"},defaults:{object_type:"event"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1},{data:"add",isDynamic:!1}]},{args:["category_id","object_type"],converters:{category_id:"IntegerConverter"},defaults:{object_type:"category"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1},{data:"add",isDynamic:!1}]}]},"/"),A=c.default.bind(null,{endpoint:"receipts.clone_template",rules:[{args:["event_id","object_type","template_id"],converters:{event_id:"IntegerConverter",template_id:"IntegerConverter"},defaults:{object_type:"event"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1},{data:"template_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"clone",isDynamic:!1}]},{args:["category_id","object_type","template_id"],converters:{category_id:"IntegerConverter",template_id:"IntegerConverter"},defaults:{object_type:"category"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1},{data:"template_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"clone",isDynamic:!1}]}]},"/"),R=c.default.bind(null,{endpoint:"receipts.delete_template",rules:[{args:["event_id","object_type","template_id"],converters:{event_id:"IntegerConverter",template_id:"IntegerConverter"},defaults:{object_type:"event"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1},{data:"template_id",isDynamic:!0},{data:"/",isDynamic:!1}]},{args:["category_id","object_type","template_id"],converters:{category_id:"IntegerConverter",template_id:"IntegerConverter"},defaults:{object_type:"category"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1},{data:"template_id",isDynamic:!0},{data:"/",isDynamic:!1}]}]},"/"),I=c.default.bind(null,{endpoint:"receipts.template",rules:[{args:["event_id","object_type","template_id"],converters:{event_id:"IntegerConverter",template_id:"IntegerConverter"},defaults:{object_type:"event"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1},{data:"template_id",isDynamic:!0},{data:"/",isDynamic:!1}]},{args:["category_id","object_type","template_id"],converters:{category_id:"IntegerConverter",template_id:"IntegerConverter"},defaults:{object_type:"category"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1},{data:"template_id",isDynamic:!0},{data:"/",isDynamic:!1}]}]},"/"),M=c.default.bind(null,{endpoint:"receipts.template_list",rules:[{args:["event_id","object_type"],converters:{event_id:"IntegerConverter"},defaults:{object_type:"event"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1}]},{args:["category_id","object_type"],converters:{category_id:"IntegerConverter"},defaults:{object_type:"category"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1}]}]},"/"),L=c.default.bind(null,{endpoint:"receipts.template_preview",rules:[{args:["event_id","object_type","template_id"],converters:{event_id:"IntegerConverter",template_id:"IntegerConverter"},defaults:{object_type:"event"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1},{data:"template_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"preview-template",isDynamic:!1}]},{args:["category_id","object_type","template_id"],converters:{category_id:"IntegerConverter",template_id:"IntegerConverter"},defaults:{object_type:"category"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1},{data:"template_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"preview-template",isDynamic:!1}]}]},"/");function P({template:{id:e,type:t,title:a,owner:i},dispatch:r,setDeletePrompt:c,targetLocator:s,inherited:o}){const l={receipt:{color:"red",text:p.Translate.string("Receipt")},certificate:{color:"blue",text:p.Translate.string("Certificate")}}[t];return n.createElement("tr",null,n.createElement("td",{className:"i-table id-column"},n.createElement("i",{className:"icon-agreement"})),n.createElement("td",null,a,l&&n.createElement(_.A,{size:"small",style:{marginLeft:"1em"},color:l.color,basic:!0},l.text)),n.createElement("td",{className:"text-superfluous"},o&&("event_id"in i.locator?n.createElement(p.Translate,null,"from event"," ",n.createElement(p.Param,{name:"title",value:i.title,wrapper:n.createElement("a",{href:M(i.locator)})})):n.createElement(p.Translate,null,"from category"," ",n.createElement(p.Param,{name:"title",value:i.title,wrapper:n.createElement("a",{href:M(i.locator)})})))),n.createElement("td",{className:"receipts-client-js-templates-___TemplateListPane-module__template-actions___Tdv2v"},n.createElement("div",{className:"thin toolbar right"},n.createElement("a",{href:L({template_id:e,...s})},n.createElement(h.A,{name:"eye",color:"blue",title:p.Translate.string("Preview template")})),!o&&n.createElement(d.Link,{to:I({template_id:e,...s}),onClick:e=>e.target.dispatchEvent(new Event("indico:closeAutoTooltip"))},n.createElement(h.A,{name:"edit",color:"blue",title:p.Translate.string("Edit template")})),n.createElement(h.A,{name:"clone",color:"blue",title:p.Translate.string("Clone template"),onClick:t=>{t.target.dispatchEvent(new Event("indico:closeAutoTooltip")),(async()=>{try{const{data:t}=await f.indicoAxios.post(A({template_id:e,...s}));r({type:"ADD_TEMPLATE",template:t})}catch(e){(0,f.handleAxiosError)(e)}})()}}),!o&&c&&n.createElement(h.A,{name:"trash",color:"red",title:p.Translate.string("Delete template"),onClick:t=>{t.target.dispatchEvent(new Event("indico:closeAutoTooltip")),c({title:a,func:()=>(async()=>{try{await f.indicoAxios.delete(R({template_id:e,...s})),r({type:"DELETE_TEMPLATE",id:e})}catch(e){return(0,f.handleAxiosError)(e),!0}})()})}}))))}function S({ownTemplates:e,inheritedTemplates:t,otherTemplates:a,defaultTemplates:i,targetLocator:r,dispatch:c}){const[s,o]=(0,n.useState)(null);return n.createElement("div",{className:"receipts-client-js-templates-___TemplateListPane-module__template-list___JGHbb"},n.createElement(u.RequestConfirmDelete,{onClose:()=>o(null),requestFunc:s?.func||(()=>null),open:null!==s},n.createElement(p.Translate,null,"Are you sure you want to delete the template"," ",n.createElement(p.Param,{name:"template",value:s?.title,wrapper:n.createElement("strong",null)}),"?")),!!t.length&&n.createElement("section",null,n.createElement("h3",null,n.createElement(p.Translate,null,"Inherited templates")),n.createElement("table",{className:"i-table-widget"},n.createElement("tbody",null,v().sortBy(t,"title").map((e=>n.createElement(P,{key:e.id,template:e,dispatch:c,targetLocator:r,inherited:!0})))))),!!a.length&&n.createElement("section",null,n.createElement(b.A,{panels:[{key:"other",title:{content:n.createElement("h4",null,n.createElement(p.Translate,null,"Other templates"))},content:{content:n.createElement("table",{className:"i-table-widget"},n.createElement("tbody",null,a.map((e=>n.createElement(P,{key:e.id,template:e,dispatch:c,targetLocator:r,inherited:!0})))))}}]})),n.createElement("section",null,n.createElement("div",{className:"flexrow f-a-center f-j-space-between"},n.createElement("h3",null,n.createElement(p.Translate,null,"Custom templates")),n.createElement(E.A,{button:!0,labeled:!0,title:p.Translate.string("Add a new template"),icon:"plus",text:p.Translate.string("Add new","Custom template"),className:"mini primary icon",direction:"left"},n.createElement(E.A.Menu,null,n.createElement(E.A.Item,{as:d.Link,to:O(r),text:p.Translate.string("Blank template")}),v().sortBy(Object.entries(i),(([,e])=>e.title)).map((([e,{title:t,version:a}])=>n.createElement(E.A.Item,{key:e,as:d.Link,to:C({...r,template_name:e}),text:`${t} (v${a})`})))))),e.length?n.createElement("table",{className:"i-table-widget"},n.createElement("tbody",null,v().sortBy(e,"title").map((e=>n.createElement(P,{key:e.id,template:e,dispatch:c,setDeletePrompt:o,targetLocator:r}))))):n.createElement("div",{className:"italic text-not-important"},n.createElement(p.Translate,null,"No templates"))))}P.propTypes={template:j.isRequired,dispatch:o().func.isRequired,setDeletePrompt:o().func,targetLocator:w.isRequired,inherited:o().bool},P.defaultProps={inherited:!1,setDeletePrompt:null},S.propTypes={ownTemplates:o().arrayOf(j).isRequired,inheritedTemplates:o().arrayOf(j).isRequired,otherTemplates:o().arrayOf(j).isRequired,defaultTemplates:o().objectOf(T).isRequired,dispatch:o().func.isRequired,targetLocator:w.isRequired};var k=a(52379),x=a(57427),q=a(45423);function N(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function F(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function V(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?F(Object(a),!0).forEach((function(t){N(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):F(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function B(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function z(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function H(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function G(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?H(Object(a),!0).forEach((function(t){z(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):H(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function $(e){return function t(){for(var a=this,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return i.length>=e.length?e.apply(this,i):function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.apply(a,[].concat(i,n))}}}function K(e){return{}.toString.call(e).includes("Object")}function W(e){return"function"==typeof e}var Y=$((function(e,t){throw new Error(e[t]||e.default)}))({initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"}),J={changes:function(e,t){return K(t)||Y("changeType"),Object.keys(t).some((function(t){return a=e,n=t,!Object.prototype.hasOwnProperty.call(a,n);var a,n}))&&Y("changeField"),t},selector:function(e){W(e)||Y("selectorType")},handler:function(e){W(e)||K(e)||Y("handlerType"),K(e)&&Object.values(e).some((function(e){return!W(e)}))&&Y("handlersType")},initial:function(e){var t;e||Y("initialIsRequired"),K(e)||Y("initialType"),t=e,Object.keys(t).length||Y("initialContent")}};function Q(e,t){return W(t)?t(e.current):t}function X(e,t){return e.current=G(G({},e.current),t),t}function Z(e,t,a){return W(t)?t(e.current):Object.keys(a).forEach((function(a){var n;return null===(n=t[a])||void 0===n?void 0:n.call(t,e.current[a])})),a}const ee={create:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};J.initial(e),J.handler(t);var a={current:e},n=$(Z)(a,t),i=$(X)(a),r=$(J.changes)(e),c=$(Q)(a);return[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e};return J.selector(e),e(a.current)},function(e){!function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(e){return t.reduceRight((function(e,t){return t(e)}),e)}}(n,i,r,c)(e)}]}};const te={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.43.0/min/vs"}};const ae=function(e){return{}.toString.call(e).includes("Object")};var ne={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:"Deprecation warning!\n    You are using deprecated way of configuration.\n\n    Instead of using\n      monaco.config({ urls: { monacoBase: '...' } })\n    use\n      monaco.config({ paths: { vs: '...' } })\n\n    For more please check the link https://github.com/suren-atoyan/monaco-loader#config\n  "},ie=function(e){return function t(){for(var a=this,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return i.length>=e.length?e.apply(this,i):function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.apply(a,[].concat(i,n))}}}((function(e,t){throw new Error(e[t]||e.default)}))(ne),re={config:function(e){return e||ie("configIsRequired"),ae(e)||ie("configType"),e.urls?(console.warn(ne.deprecation),{paths:{vs:e.urls.monacoBase}}):e}};const ce=re;const se=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(e){return t.reduceRight((function(e,t){return t(e)}),e)}};const oe=function e(t,a){return Object.keys(a).forEach((function(n){a[n]instanceof Object&&t[n]&&Object.assign(a[n],e(t[n],a[n]))})),V(V({},t),a)};var le={type:"cancelation",msg:"operation is manually canceled"};const de=function(e){var t=!1,a=new Promise((function(a,n){e.then((function(e){return t?n(le):a(e)})),e.catch(n)}));return a.cancel=function(){return t=!0},a};var me,ue,ye=ee.create({config:te,isInitialized:!1,resolve:null,reject:null,monaco:null}),pe=(ue=2,function(e){if(Array.isArray(e))return e}(me=ye)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var a=[],n=!0,i=!1,r=void 0;try{for(var c,s=e[Symbol.iterator]();!(n=(c=s.next()).done)&&(a.push(c.value),!t||a.length!==t);n=!0);}catch(e){i=!0,r=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}return a}}(me,ue)||function(e,t){if(e){if("string"==typeof e)return U(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?U(e,t):void 0}}(me,ue)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),ge=pe[0],fe=pe[1];function De(e){return document.body.appendChild(e)}function ve(e){var t,a,n=ge((function(e){return{config:e.config,reject:e.reject}})),i=(t="".concat(n.config.paths.vs,"/loader.js"),a=document.createElement("script"),t&&(a.src=t),a);return i.onload=function(){return e()},i.onerror=n.reject,i}function _e(){var e=ge((function(e){return{config:e.config,resolve:e.resolve,reject:e.reject}})),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],(function(t){he(t),e.resolve(t)}),(function(t){e.reject(t)}))}function he(e){ge().monaco||fe({monaco:e})}var be=new Promise((function(e,t){return fe({resolve:e,reject:t})})),Ee={config:function(e){var t=ce.config(e),a=t.monaco,n=B(t,["monaco"]);fe((function(e){return{config:oe(e.config,n),monaco:a}}))},init:function(){var e=ge((function(e){return{monaco:e.monaco,isInitialized:e.isInitialized,resolve:e.resolve}}));if(!e.isInitialized){if(fe({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),de(be);if(window.monaco&&window.monaco.editor)return he(window.monaco),e.resolve(window.monaco),de(be);se(De,ve)(_e)}return de(be)},__getMonacoInstance:function(){return ge((function(e){return e.monaco}))}};const we=Ee;var je={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},Te={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}};var Ce=function({children:e}){return n.createElement("div",{style:Te.container},e)};var Oe=function({width:e,height:t,isEditorReady:a,loading:i,_ref:r,className:c,wrapperProps:s}){return n.createElement("section",{style:{...je.wrapper,width:e,height:t},...s},!a&&n.createElement(Ce,null,i),n.createElement("div",{ref:r,style:{...je.fullWidth,...!a&&je.hide},className:c}))},Ae=(0,n.memo)(Oe);var Re=function(e){(0,n.useEffect)(e,[])};var Ie=function(e,t,a=!0){let i=(0,n.useRef)(!0);(0,n.useEffect)(i.current||!a?()=>{i.current=!1}:e,t)};function Me(){}function Le(e,t,a,n){return function(e,t){return e.editor.getModel(Pe(e,t))}(e,n)||function(e,t,a,n){return e.editor.createModel(t,a,n?Pe(e,n):void 0)}(e,t,a,n)}function Pe(e,t){return e.Uri.parse(t)}var Se=function({original:e,modified:t,language:a,originalLanguage:i,modifiedLanguage:r,originalModelPath:c,modifiedModelPath:s,keepCurrentOriginalModel:o=!1,keepCurrentModifiedModel:l=!1,theme:d="light",loading:m="Loading...",options:u={},height:y="100%",width:p="100%",className:g,wrapperProps:f={},beforeMount:D=Me,onMount:v=Me}){let[_,h]=(0,n.useState)(!1),[b,E]=(0,n.useState)(!0),w=(0,n.useRef)(null),j=(0,n.useRef)(null),T=(0,n.useRef)(null),C=(0,n.useRef)(v),O=(0,n.useRef)(D),A=(0,n.useRef)(!1);Re((()=>{let e=we.init();return e.then((e=>(j.current=e)&&E(!1))).catch((e=>"cancelation"!==e?.type&&console.error("Monaco initialization: error:",e))),()=>w.current?function(){let e=w.current?.getModel();o||e?.original?.dispose(),l||e?.modified?.dispose(),w.current?.dispose()}():e.cancel()})),Ie((()=>{if(w.current&&j.current){let t=w.current.getOriginalEditor(),n=Le(j.current,e||"",i||a||"text",c||"");n!==t.getModel()&&t.setModel(n)}}),[c],_),Ie((()=>{if(w.current&&j.current){let e=w.current.getModifiedEditor(),n=Le(j.current,t||"",r||a||"text",s||"");n!==e.getModel()&&e.setModel(n)}}),[s],_),Ie((()=>{let e=w.current.getModifiedEditor();e.getOption(j.current.editor.EditorOption.readOnly)?e.setValue(t||""):t!==e.getValue()&&(e.executeEdits("",[{range:e.getModel().getFullModelRange(),text:t||"",forceMoveMarkers:!0}]),e.pushUndoStop())}),[t],_),Ie((()=>{w.current?.getModel()?.original.setValue(e||"")}),[e],_),Ie((()=>{let{original:e,modified:t}=w.current.getModel();j.current.editor.setModelLanguage(e,i||a||"text"),j.current.editor.setModelLanguage(t,r||a||"text")}),[a,i,r],_),Ie((()=>{j.current?.editor.setTheme(d)}),[d],_),Ie((()=>{w.current?.updateOptions(u)}),[u],_);let R=(0,n.useCallback)((()=>{if(!j.current)return;O.current(j.current);let n=Le(j.current,e||"",i||a||"text",c||""),o=Le(j.current,t||"",r||a||"text",s||"");w.current?.setModel({original:n,modified:o})}),[a,t,r,e,i,c,s]),I=(0,n.useCallback)((()=>{!A.current&&T.current&&(w.current=j.current.editor.createDiffEditor(T.current,{automaticLayout:!0,...u}),R(),j.current?.editor.setTheme(d),h(!0),A.current=!0)}),[u,d,R]);return(0,n.useEffect)((()=>{_&&C.current(w.current,j.current)}),[_]),(0,n.useEffect)((()=>{!b&&!_&&I()}),[b,_,I]),n.createElement(Ae,{width:p,height:y,isEditorReady:_,loading:m,_ref:T,className:g,wrapperProps:f})};(0,n.memo)(Se);var ke=function(e){let t=(0,n.useRef)();return(0,n.useEffect)((()=>{t.current=e}),[e]),t.current},xe=new Map;var qe=function({defaultValue:e,defaultLanguage:t,defaultPath:a,value:i,language:r,path:c,theme:s="light",line:o,loading:l="Loading...",options:d={},overrideServices:m={},saveViewState:u=!0,keepCurrentModel:y=!1,width:p="100%",height:g="100%",className:f,wrapperProps:D={},beforeMount:v=Me,onMount:_=Me,onChange:h,onValidate:b=Me}){let[E,w]=(0,n.useState)(!1),[j,T]=(0,n.useState)(!0),C=(0,n.useRef)(null),O=(0,n.useRef)(null),A=(0,n.useRef)(null),R=(0,n.useRef)(_),I=(0,n.useRef)(v),M=(0,n.useRef)(),L=(0,n.useRef)(i),P=ke(c),S=(0,n.useRef)(!1),k=(0,n.useRef)(!1);Re((()=>{let e=we.init();return e.then((e=>(C.current=e)&&T(!1))).catch((e=>"cancelation"!==e?.type&&console.error("Monaco initialization: error:",e))),()=>O.current?(M.current?.dispose(),y?u&&xe.set(c,O.current.saveViewState()):O.current.getModel()?.dispose(),void O.current.dispose()):e.cancel()})),Ie((()=>{let n=Le(C.current,e||i||"",t||r||"",c||a||"");n!==O.current?.getModel()&&(u&&xe.set(P,O.current?.saveViewState()),O.current?.setModel(n),u&&O.current?.restoreViewState(xe.get(c)))}),[c],E),Ie((()=>{O.current?.updateOptions(d)}),[d],E),Ie((()=>{!O.current||void 0===i||(O.current.getOption(C.current.editor.EditorOption.readOnly)?O.current.setValue(i):i!==O.current.getValue()&&(k.current=!0,O.current.executeEdits("",[{range:O.current.getModel().getFullModelRange(),text:i,forceMoveMarkers:!0}]),O.current.pushUndoStop(),k.current=!1))}),[i],E),Ie((()=>{let e=O.current?.getModel();e&&r&&C.current?.editor.setModelLanguage(e,r)}),[r],E),Ie((()=>{void 0!==o&&O.current?.revealLine(o)}),[o],E),Ie((()=>{C.current?.editor.setTheme(s)}),[s],E);let x=(0,n.useCallback)((()=>{if(A.current&&C.current&&!S.current){I.current(C.current);let n=c||a,l=Le(C.current,i||e||"",t||r||"",n||"");O.current=C.current?.editor.create(A.current,{model:l,automaticLayout:!0,...d},m),u&&O.current.restoreViewState(xe.get(n)),C.current.editor.setTheme(s),void 0!==o&&O.current.revealLine(o),w(!0),S.current=!0}}),[e,t,a,i,r,c,d,m,u,s,o]);return(0,n.useEffect)((()=>{E&&R.current(O.current,C.current)}),[E]),(0,n.useEffect)((()=>{!j&&!E&&x()}),[j,E,x]),L.current=i,(0,n.useEffect)((()=>{E&&h&&(M.current?.dispose(),M.current=O.current?.onDidChangeModelContent((e=>{k.current||h(O.current.getValue(),e)})))}),[E,h]),(0,n.useEffect)((()=>{if(E){let e=C.current.editor.onDidChangeMarkers((e=>{let t=O.current.getModel()?.uri;if(t&&e.find((e=>e.path===t.path))){let e=C.current.editor.getModelMarkers({resource:t});b?.(e)}}));return()=>{e?.dispose()}}return()=>{}}),[E,b]),n.createElement(Ae,{width:p,height:g,isEditorReady:E,loading:l,_ref:A,className:f,wrapperProps:D})},Ne=(0,n.memo)(qe),Fe=a(31573),Ve=a(42430),Be=a(6423),Ue=a(56237),ze=a(99323),He=a(23507),Ge=a(46145),$e=a(39023);function Ke({children:e,target:t,overrides:a,open:i}){const[r,c]=(0,n.useState)(null),s=(0,n.useRef)(null),o=(0,n.useRef)(null),l=(0,n.useCallback)((e=>{if(o.current=e,e&&i){const t=e.getBoundingClientRect();s.current=t,c({position:"absolute",left:t.x+window.scrollX,top:t.y+window.scrollY,width:t.width,height:t.height,...a})}}),[a,i]);return(0,n.useEffect)((()=>{if(!o.current||!i)return;const e=setInterval((()=>{if(!o.current)return;const e=o.current.getBoundingClientRect();var t,a;s.current&&(t=e,a=s.current,t.x!==a.x||t.y!==a.y||t.width!==a.width||t.height!==a.height)&&l(o.current)}),100);return()=>clearInterval(e)}),[o,l,i]),n.createElement(n.Fragment,null,n.createElement("div",{ref:l,style:{display:i?"block":"none"}},t),n.createElement($e.A,{open:null!==r&&i},n.createElement("div",{style:r},e)))}Ke.propTypes={children:o().node.isRequired,target:o().node.isRequired,overrides:o().object,open:o().bool},Ke.defaultProps={overrides:{},open:!1};const We=c.default.bind(null,{endpoint:"receipts.template_list",rules:[{args:["event_id","object_type"],converters:{event_id:"IntegerConverter"},defaults:{object_type:"event"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1}]},{args:["category_id","object_type"],converters:{category_id:"IntegerConverter"},defaults:{object_type:"category"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1}]}]},"/");we.config({monaco:Fe});const Ye={html:{syntax:"html",fileName:"template.html"},css:{syntax:"css",fileName:"theme.css"},yaml:{syntax:"yaml",fileName:"metadata.yaml"}};function Je({template:e,onChange:t,onSubmit:a,editorHeight:i,targetLocator:r,loading:c,add:s}){const[o,l]=(0,n.useState)("html"),u=v().pick(e,["html","css","yaml"]),y=(0,n.useRef)(null);return(0,n.useEffect)((()=>{y.current?.focus()}),[o]),n.createElement(Ve.Form,{onSubmit:a,initialValues:{title:e?.title||null,default_filename:e?.default_filename||"",...u},initialValuesEqual:v().isEqual},(({handleSubmit:a,values:u})=>n.createElement(Be.A,{onSubmit:a,subscription:{dirty:!0}},n.createElement(Ve.FormSpy,{subscription:{dirtyFieldsSinceLastSubmit:!0}},(({dirtyFieldsSinceLastSubmit:t})=>(!!e.owner||Object.values(t).some((e=>e)))&&n.createElement(Ge.FinalUnloadPrompt,{router:!0}))),n.createElement(Be.A.Group,{widths:"equal"},n.createElement(Ge.FinalInput,{name:"title",label:p.Translate.string("Title"),type:"text",disabled:c,required:!0,rows:24}),n.createElement(Ge.FinalInput,{name:"default_filename",label:p.Translate.string("Default filename"),type:"text",componentLabel:"-{n}.pdf",labelPosition:"right",format:Ge.formatters.slugify,disabled:c,formatOnBlur:!0})),n.createElement(Ue.A.Group,{attached:"top"},["html","css","yaml"].map((e=>n.createElement(Ue.A,{type:"button",primary:e===o,key:e,onClick:()=>l(e)},Ye[e].fileName)))),["html","css","yaml"].map((r=>n.createElement(Ge.FinalField,{key:r,name:r,initialValue:e[r],parse:e=>e},(({input:e,meta:s})=>n.createElement(n.Fragment,null,n.createElement(Ke,{target:n.createElement("div",{style:{height:`${i}px`,width:"100%"}}),open:r===o},c?n.createElement(x.A,{style:{height:`${i}px`},className:"receipts-client-js-templates-___Editor-module__loading-segment___jWKQs"},n.createElement(ze.A,{active:!0},n.createElement(He.A,null))):n.createElement(Ne,{height:`${i}px`,theme:"vs-dark",path:Ye[r].fileName,defaultLanguage:Ye[r].syntax,value:e.value,onChange:a=>{t({...u,[r]:a}),e.onChange(a)},onMount:(e,t)=>{y.current=e,e.addCommand(t.KeyMod.CtrlCmd|t.KeyCode.KeyS,a)},options:{minimap:{enabled:!1}}})),n.createElement(m.A,{error:!0,visible:!!s.submitError},s.submitError)))))),n.createElement(Be.A.Group,{className:"receipts-client-js-templates-___Editor-module__buttons___L50a6"},n.createElement(Ge.FinalSubmitButton,{label:p.Translate.string("Save"),disabledUntilChange:!s}),n.createElement(d.Link,{to:We(r),className:"ui button"},n.createElement(p.Translate,null,"Cancel"))))))}Je.propTypes={template:j.isRequired,onChange:o().func.isRequired,onSubmit:o().func.isRequired,editorHeight:o().number.isRequired,targetLocator:w.isRequired,loading:o().bool,add:o().bool},Je.defaultProps={loading:!1,add:!1};var Qe=a(50081);const Xe=c.default.bind(null,{endpoint:"receipts.images",rules:[{args:["event_id"],converters:{event_id:"IntegerConverter"},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1},{data:"images",isDynamic:!1}]}]},"/"),Ze=c.default.bind(null,{endpoint:"receipts.template_live_preview",rules:[{args:["event_id","object_type"],converters:{event_id:"IntegerConverter"},defaults:{object_type:"event"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1},{data:"live-preview",isDynamic:!1}]},{args:["category_id","object_type"],converters:{category_id:"IntegerConverter"},defaults:{object_type:"category"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1},{data:"live-preview",isDynamic:!1}]}]},"/");function et({template:e,onSubmit:t,targetLocator:a,editorHeight:i,add:r,loading:c}){const[s,o]=(0,n.useState)({});return(0,n.useEffect)((()=>{o({title:e.title,...v().pick(e,["html","css","yaml"])})}),[e]),n.createElement(n.Fragment,null,n.createElement(u.ManagementPageSubTitle,{title:r?p.Translate.string("Add document template"):p.Translate.string("Edit document template")}),n.createElement(k.A,{columns:2,divided:!0},n.createElement(k.A.Row,null,n.createElement(k.A.Column,null,n.createElement(Je,{onSubmit:t,template:e,editorHeight:i,targetLocator:a,onChange:o,loading:c,add:r})),n.createElement(k.A.Column,null,s.html&&s.html.length>=3?n.createElement(Qe.A,{url:Ze(a),data:s,fetchImagesURL:"event_id"in a?Xe(a):null}):n.createElement(x.A,{placeholder:!0},n.createElement(q.A,{icon:!0},n.createElement(h.A,{name:"eye"}),n.createElement(p.Translate,null,"Start writing a template to see the preview here...")))))))}et.propTypes={onSubmit:o().func.isRequired,template:j,targetLocator:w.isRequired,editorHeight:o().number,add:o().bool,loading:o().bool},et.defaultProps={template:{html:"",css:"",yaml:""},editorHeight:800,add:!1,loading:!1};const tt=c.default.bind(null,{endpoint:"receipts.add_default_template",rules:[{args:["event_id","object_type","template_name"],converters:{event_id:"IntegerConverter"},defaults:{object_type:"event"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1},{data:"add",isDynamic:!1},{data:"/",isDynamic:!1},{data:"template_name",isDynamic:!0}]},{args:["category_id","object_type","template_name"],converters:{category_id:"IntegerConverter"},defaults:{object_type:"category"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1},{data:"add",isDynamic:!1},{data:"/",isDynamic:!1},{data:"template_name",isDynamic:!0}]}]},"/"),at=c.default.bind(null,{endpoint:"receipts.add_template",rules:[{args:["event_id","object_type"],converters:{event_id:"IntegerConverter"},defaults:{object_type:"event"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1},{data:"add",isDynamic:!1}]},{args:["category_id","object_type"],converters:{category_id:"IntegerConverter"},defaults:{object_type:"category"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1},{data:"add",isDynamic:!1}]}]},"/"),nt=c.default.bind(null,{endpoint:"receipts.edit_template",rules:[{args:["event_id","object_type","template_id"],converters:{event_id:"IntegerConverter",template_id:"IntegerConverter"},defaults:{object_type:"event"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1},{data:"template_id",isDynamic:!0},{data:"/",isDynamic:!1}]},{args:["category_id","object_type","template_id"],converters:{category_id:"IntegerConverter",template_id:"IntegerConverter"},defaults:{object_type:"category"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1},{data:"template_id",isDynamic:!0},{data:"/",isDynamic:!1}]}]},"/"),it=c.default.bind(null,{endpoint:"receipts.get_default_template",rules:[{args:["template_name"],converters:{},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1},{data:"default-templates",isDynamic:!1},{data:"/",isDynamic:!1},{data:"template_name",isDynamic:!0}]}]},"/"),rt=c.default.bind(null,{endpoint:"receipts.template",rules:[{args:["event_id","object_type","template_id"],converters:{event_id:"IntegerConverter",template_id:"IntegerConverter"},defaults:{object_type:"event"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1},{data:"template_id",isDynamic:!0},{data:"/",isDynamic:!1}]},{args:["category_id","object_type","template_id"],converters:{category_id:"IntegerConverter",template_id:"IntegerConverter"},defaults:{object_type:"category"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1},{data:"template_id",isDynamic:!0},{data:"/",isDynamic:!1}]}]},"/"),ct=c.default.bind(null,{endpoint:"receipts.template_list",rules:[{args:["event_id","object_type"],converters:{event_id:"IntegerConverter"},defaults:{object_type:"event"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event",isDynamic:!1},{data:"/",isDynamic:!1},{data:"event_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1}]},{args:["category_id","object_type"],converters:{category_id:"IntegerConverter"},defaults:{object_type:"category"},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category",isDynamic:!1},{data:"/",isDynamic:!1},{data:"category_id",isDynamic:!0},{data:"/",isDynamic:!1},{data:"manage",isDynamic:!1},{data:"/",isDynamic:!1},{data:"receipts",isDynamic:!1},{data:"/",isDynamic:!1}]}]},"/"),st=o().shape({event_id:o().number,category_id:o().number});function ot(e,t){switch(t.type){case"ADD_TEMPLATE":return{...e,ownTemplates:[...e.ownTemplates,t.template],message:p.Translate.string('Template "{title}" was added',{title:t.template.title})};case"UPDATE_TEMPLATE":return{...e,ownTemplates:e.ownTemplates.map((e=>e.id===t.id?{...e,...t.changes}:e)),message:p.Translate.string('Template "{title}" was updated',{title:t.changes.title})};case"DELETE_TEMPLATE":return{...e,ownTemplates:e.ownTemplates.filter((e=>e.id!==t.id)),message:p.Translate.string("Template deleted")};case"RESET_MESSAGE":return{...e,message:null};default:return e}}function lt({templates:e,dispatch:t,targetLocator:a}){const i=(0,g.Uf)("template_id");return n.createElement(n.Fragment,null,n.createElement(u.ManagementPageBackButton,{url:ct(a)}),n.createElement(et,{targetLocator:a,template:e.find((e=>e.id===i)),onSubmit:async e=>{try{await f.indicoAxios.patch(nt({template_id:i,...a}),e),t({type:"UPDATE_TEMPLATE",id:i,changes:e})}catch({response:{data:{webargs_errors:e}}}){return e}}}))}function dt({dispatch:e,targetLocator:t,defaultTemplate:a}){const i=(0,l.useHistory)(),{data:r,loading:c}=(0,y.Ku)({url:a&&it({template_name:a})},{manual:!a});return n.createElement(n.Fragment,null,n.createElement(u.ManagementPageBackButton,{url:ct(t)}),n.createElement(et,{onSubmit:async a=>{try{const{data:n}=await f.indicoAxios.post(at(t),a);e({type:"ADD_TEMPLATE",template:n}),i.push(ct(t))}catch({response:{data:{webargs_errors:e}}}){return e}},targetLocator:t,template:r||void 0,loading:c,add:!0}))}function mt({initialState:e,defaultTemplates:t,targetLocator:a}){const[i,c]=(0,n.useReducer)(ot,e),s=Object.keys(a);return(0,n.useEffect)((()=>{i.message&&setTimeout((()=>c({type:"RESET_MESSAGE"})),2500)}),[i.message]),n.createElement(n.Fragment,null,i.message&&n.createElement(m.A,{success:!0},n.createElement(m.A.Content,null,i.message)),n.createElement(d.BrowserRouter,null,n.createElement(l.Switch,null,n.createElement(l.Route,{exact:!0,path:(0,g.kA)(at,s),render:()=>n.createElement(dt,{dispatch:c,targetLocator:a})}),n.createElement(l.Route,{exact:!0,path:(0,g.kA)(tt,[...s,"template_name"]),render:({match:{params:{template_name:e}}})=>n.createElement(dt,{dispatch:c,targetLocator:a,defaultTemplate:e})}),n.createElement(l.Route,{exact:!0,path:[(0,g.kA)(rt,[...s,"template_id"])],render:()=>n.createElement(lt,{templates:i.ownTemplates,dispatch:c,targetLocator:a})}),n.createElement(l.Route,{exact:!0,path:(0,g.kA)(ct,s),render:()=>n.createElement(S,(0,r.A)({dispatch:c,defaultTemplates:t,targetLocator:a},i))}))))}lt.propTypes={dispatch:o().func.isRequired,targetLocator:st.isRequired,templates:o().arrayOf(j).isRequired},dt.propTypes={dispatch:o().func.isRequired,targetLocator:st.isRequired,defaultTemplate:o().string},dt.defaultProps={defaultTemplate:""},mt.propTypes={initialState:o().shape({ownTemplates:o().arrayOf(j),inheritedTemplates:o().arrayOf(j)}).isRequired,defaultTemplates:o().objectOf(T).isRequired,targetLocator:st.isRequired},window.setupReceiptTemplateList=function(e,t,a,r,c,s){document.addEventListener("DOMContentLoaded",(()=>{i.render(n.createElement(mt,{initialState:{ownTemplates:t,inheritedTemplates:a,otherTemplates:r},defaultTemplates:c,targetLocator:s}),e)}))}}},e=>{e.O(0,[4644,4394,8502,2076],(()=>{return t=37168,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=module_receipts.admin.d4d6113e.bundle.js.map