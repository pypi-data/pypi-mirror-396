"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[98],{67069:(e,t,a)=>{var n=a(86326),r=a(35623),l=a(58591),s=a(29079),i=a(97598),c=a.n(i),o=a(23507),m=a(35813),u=a(87597),d=a(49138),p=a(52379),g=a(54219),_=a(91185),h=a(29481),E=a(96478),y=a(24372),f=a(18606),v=a(77940),R=a(30397),A=a(57427),q=a(53225),b=a(33971),D=a(66073),P=a(94900);function T({component:e,page:t,numPages:a,pageNav:r,data:l,loading:s,onPageChange:i,showCategoryPath:c}){const{isWideScreen:o}=(0,P.useResponsive)();return n.createElement(n.Fragment,null,n.createElement(A.A,{id:"search-results",role:"tabpanel"},n.createElement(q.A,{divided:!0,relaxed:!0,stylename:"space"},s?n.createElement(b.A,null,n.createElement(b.A.Paragraph,null,n.createElement(b.A.Line,null),n.createElement(b.A.Line,null),n.createElement(b.A.Line,null)),n.createElement(b.A.Paragraph,null,n.createElement(b.A.Line,null),n.createElement(b.A.Line,null),n.createElement(b.A.Line,null)),n.createElement(b.A.Paragraph,null,n.createElement(b.A.Line,null),n.createElement(b.A.Line,null),n.createElement(b.A.Line,null))):l.map((t=>n.createElement(q.A.Item,{key:(0,R.Ak)()},n.createElement(q.A.Content,null,n.createElement(e,(0,v.A)({},t,{showCategoryPath:c})))))))),!r||null===r.next&&null===r.prev?a>1?n.createElement("div",{className:"search-client-js-components-___ResultList-module__pagination___Kr79i"},n.createElement(D.A,{activePage:t,onPageChange:(e,{activePage:t})=>i(t),totalPages:a,boundaryRange:o?1:0,siblingRange:o?2:1})):null:n.createElement("div",{className:"search-client-js-components-___ResultList-module__pagination___Kr79i"},n.createElement(m.A,{pagination:!0},n.createElement(m.A.Item,{disabled:null===r.prev,onClick:()=>i(r.prev)},n.createElement(E.Translate,null,"⟨ Previous page")),n.createElement(m.A.Item,{disabled:null===r.next,onClick:()=>i(r.next)},n.createElement(E.Translate,null,"Next page ⟩")))))}T.propTypes={component:c().elementType.isRequired,page:c().number.isRequired,numPages:c().number.isRequired,pageNav:c().shape({prev:c().number,next:c().number}),data:c().arrayOf(c().object).isRequired,loading:c().bool.isRequired,onPageChange:c().func.isRequired,showCategoryPath:c().bool.isRequired},T.defaultProps={pageNav:null};var N=a(47279),k=a(11052),C=a(8589);const j=c().arrayOf(c().shape({type:c().string.isRequired,id:c().number.isRequired,title:c().string.isRequired,url:c().string.isRequired}));function I({path:e}){const t=e.map((e=>({key:`${e.type}-${e.id}`,href:e.url,content:e.title})));return n.createElement("span",{className:"search-client-js-components-results-___Path-module__path___YUygc"},n.createElement(N.A,{name:"sitemap"}),n.createElement(C.A,{divider:"»",sections:t}))}function L({persons:e}){return e=[...new Map(e.map((e=>[e.name+e.affiliation,e]))).values()],n.createElement(n.Fragment,null,e.length>1?n.createElement(N.A,{name:"users"}):n.createElement(N.A,{name:"user"}),n.createElement("ul",null,e.slice(0,2).map((e=>n.createElement("li",{key:e.name+e.affiliation},e.name,n.createElement("span",{className:"search-client-js-components-___ResultList-module__muted___YZpGu"},e.affiliation?` (${e.affiliation})`:"")))),e.length>2&&n.createElement("li",null,n.createElement(E.Translate,null,"et al."))))}I.propTypes={path:j.isRequired},L.propTypes={persons:c().array.isRequired};const M=e=>{switch(e?.split(".").pop()){case"doc":case"docx":return{color:"blue",name:"file word outline"};case"md":case"txt":return{color:"blue",name:"file alternate outline"};case"zip":return{color:"yellow",name:"file archive outline"};case"ppt":case"pptx":case"key":return{color:"red",name:"file powerpoint outline"};case"xls":case"xlsx":return{color:"green",name:"file excel outline"};case"pdf":return{color:"red",name:"file pdf outline"};default:return{name:"file outline"}}};function S({title:e,url:t,attachmentType:a,filename:r,modifiedDt:l,user:s,categoryPath:i,eventPath:c,showCategoryPath:o}){const m=o?[...i,...c]:c;return n.createElement("div",{className:"search-client-js-components-___ResultList-module__item___ccOEL"},n.createElement(q.A.Header,{className:"search-client-js-components-___ResultList-module__header___HIssv"},n.createElement(N.A,(0,v.A)({size:"large"},"file"===a?M(r):{name:"linkify"})),n.createElement("a",{href:t},e)),n.createElement(q.A.Description,{className:"search-client-js-components-___ResultList-module__description___62ycR"},s&&n.createElement(q.A.Item,null,n.createElement(L,{persons:[s]})),n.createElement(q.A.Item,null,n.createElement(N.A,{name:"calendar alternate outline"}),(0,k.serializeDate)((0,k.toMoment)(l),"DD MMMM YYYY HH:mm")),0!==m.length&&n.createElement(q.A.Item,null,n.createElement(q.A.Description,null,n.createElement(I,{path:m})))))}function x({title:e,categoryPath:t,url:a}){return n.createElement("div",{className:"search-client-js-components-___ResultList-module__item___ccOEL"},n.createElement(q.A.Header,{className:"search-client-js-components-___ResultList-module__header___HIssv"},n.createElement("a",{href:a},e)),0!==t.length&&n.createElement("div",{className:"search-client-js-components-___ResultList-module__description___62ycR"},n.createElement(q.A.Description,null,n.createElement(I,{path:t}))))}function w({text:e,highlight:t}){return t?.length?n.createElement("div",{className:"search-client-js-components-___ResultList-module__summary___nh9-c"},t.slice(0,3).map(((e,t)=>n.createElement("div",{key:e+t,dangerouslySetInnerHTML:{__html:e}})))):e?n.createElement("div",{className:"search-client-js-components-___ResultList-module__summary___nh9-c"},e.slice(0,240)):null}S.propTypes={title:c().string.isRequired,url:c().string.isRequired,attachmentType:c().oneOf(["file","link"]).isRequired,filename:c().string,modifiedDt:c().string.isRequired,user:c().shape({name:c().string.isRequired,affiliation:c().string}),categoryPath:j.isRequired,eventPath:j.isRequired,showCategoryPath:c().bool.isRequired},S.defaultProps={filename:void 0,user:null},x.propTypes={title:c().string.isRequired,categoryPath:j.isRequired,url:c().string.isRequired},w.propTypes={text:c().string.isRequired,highlight:c().arrayOf(c().string)},w.defaultProps={highlight:[]};var Y=a(16520);const O=c().shape({address:c().string.isRequired,roomName:c().string.isRequired,venueName:c().string.isRequired});function H({location:{address:e,roomName:t,venueName:a}}){let r=null;return t&&a?r=`${t} (${a})`:(t||a)&&(r=t||a),r&&e&&(r=n.createElement(Y.A,{content:n.createElement("span",{style:{whiteSpace:"pre-line"}},e),trigger:n.createElement("span",null,r)})),r&&n.createElement(q.A.Item,null,n.createElement(N.A,{name:"map pin"}),r)}function z({url:e,title:t,description:a,highlight:r,startDt:l,persons:s,categoryPath:i,eventPath:c,location:o,showCategoryPath:m}){const u=m?[...i,...c]:c;return n.createElement("div",{className:"search-client-js-components-___ResultList-module__item___ccOEL"},n.createElement(q.A.Header,{className:"search-client-js-components-___ResultList-module__header___HIssv"},n.createElement("a",{href:e},t)),n.createElement(q.A.Description,{className:"search-client-js-components-___ResultList-module__description___62ycR"},n.createElement(w,{text:a,highlight:r.description}),0!==s.length&&n.createElement(q.A.Item,null,n.createElement(L,{persons:s})),l&&n.createElement(q.A.Item,null,n.createElement(N.A,{name:"calendar alternate outline"}),(0,k.serializeDate)((0,k.toMoment)(l),"DD MMMM YYYY HH:mm")),n.createElement(H,{location:o}),0!==u.length&&n.createElement(q.A.Item,null,n.createElement(q.A.Description,null,n.createElement(I,{path:u})))))}H.propTypes={location:O.isRequired},z.propTypes={title:c().string.isRequired,description:c().string.isRequired,url:c().string.isRequired,startDt:c().string,persons:c().arrayOf(c().shape({name:c().string.isRequired,affiliation:c().string})).isRequired,location:O.isRequired,highlight:c().shape({description:c().array}).isRequired,categoryPath:j.isRequired,eventPath:j.isRequired,showCategoryPath:c().bool.isRequired},z.defaultProps={startDt:null};var B=a(14867),$=a.n(B);const K=(e,t)=>$()(e).isSame($()(t),"day")?n.createElement(q.A.Item,null,n.createElement(N.A,{name:"calendar alternate outline"}),(0,k.serializeDate)((0,k.toMoment)(e),"DD MMMM YYYY HH:mm")):n.createElement(q.A.Item,null,n.createElement(N.A,{name:"calendar alternate outline"}),`${(0,k.serializeDate)((0,k.toMoment)(e),"DD MMMM YYYY")} -\n         ${(0,k.serializeDate)((0,k.toMoment)(t),"DD MMMM YYYY")}`);function G({eventType:e,url:t,title:a,description:r,highlight:l,categoryPath:s,startDt:i,endDt:c,persons:o,location:m}){return n.createElement("div",{className:"search-client-js-components-___ResultList-module__item___ccOEL"},n.createElement(q.A.Header,{className:"search-client-js-components-___ResultList-module__header___HIssv"},n.createElement("a",{href:t},a)),n.createElement(q.A.Description,{className:"search-client-js-components-___ResultList-module__description___62ycR"},n.createElement(w,{text:r,highlight:l.description}),["lecture","meeting"].includes(e)&&0!==o.length&&n.createElement(q.A.Item,null,n.createElement(L,{persons:o})),K(i,c),n.createElement(H,{location:m}),0!==s.length&&n.createElement(q.A.Item,null,n.createElement(q.A.Description,null,n.createElement(I,{path:s})))))}G.propTypes={title:c().string.isRequired,description:c().string.isRequired,url:c().string.isRequired,eventType:c().oneOf(["lecture","meeting","conference"]).isRequired,startDt:c().string.isRequired,endDt:c().string.isRequired,categoryPath:j.isRequired,persons:c().arrayOf(c().shape({name:c().string.isRequired,affiliation:c().string})).isRequired,location:O.isRequired,highlight:c().shape({description:c().array}).isRequired};const F=({title:e,url:t,content:a,modifiedDt:r,highlight:l,categoryPath:s,eventPath:i})=>n.createElement("div",{className:"search-client-js-components-___ResultList-module__item___ccOEL"},n.createElement(q.A.Header,{className:"search-client-js-components-___ResultList-module__header___HIssv"},n.createElement("a",{href:t},e," (",n.createElement(E.Translate,null,"Notes"),")")),n.createElement(q.A.Description,{className:"search-client-js-components-___ResultList-module__description___62ycR"},n.createElement(w,{text:a,highlight:l.content}),n.createElement(q.A.Item,null,n.createElement(N.A,{name:"calendar alternate outline"}),(0,k.serializeDate)((0,k.toMoment)(r),"DD MMMM YYYY HH:mm")),0!==s.length&&n.createElement(q.A.Item,null,n.createElement(q.A.Description,null,n.createElement(I,{path:[...s,...i]})))));F.propTypes={title:c().string.isRequired,content:c().string.isRequired,url:c().string.isRequired,modifiedDt:c().string.isRequired,highlight:c().shape({content:c().array}),categoryPath:j.isRequired,eventPath:j.isRequired},F.defaultProps={highlight:{}};const U=F;var Z=a(6423),J=a(50431);const W=({title:e,label:t})=>n.createElement("span",{className:"search-client-js-components-___SearchBar-module__placeholder___aEK57"},n.createElement(g.A,{content:e,className:"search-client-js-components-___SearchBar-module__label___TkNsV"})," ",t);function V({onSearch:e,searchTerm:t,placeholders:a}){const[r,l]=(0,n.useState)(t),[s,i]=(0,n.useState)(null),[c,o]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{l(t)}),[t]),(0,n.useEffect)((()=>{i(a)}),[a]),n.createElement(Z.A,{onSubmit:t=>{t.preventDefault(),o(!1),r.trim()&&e(r.trim())}},n.createElement("label",{className:"search-client-js-components-___SearchBar-module__search-field___ZwsZa"},n.createElement(E.Translate,{as:"span"},"Search Indico"),n.createElement(J.A,{input:{fluid:!0},placeholder:E.Translate.string("Enter your search term"),results:s?.map((e=>({title:e.key,label:e.label}))),value:r,open:c,showNoResults:!1,onResultSelect:(e,t)=>{const a=t.value.split(/\s+/).slice(0,-1);a.push(`${t.result.title}:`),l(a.join(" "))},onSearchChange:(e,t)=>{const n=t.value.split(/\s+/),r=n[n.length-1];i(a.filter((e=>!r||e.key.startsWith(r)))),o(!0),l(t.value)},resultRenderer:W,onFocus:()=>o(!0),onBlur:()=>o(!1),fluid:!0})))}V.propTypes={onSearch:c().func.isRequired,searchTerm:c().string.isRequired,placeholders:c().arrayOf(c().shape({key:c().string,label:c().string}))},V.defaultProps={placeholders:[]};var Q=a(6841);function X({query:e,aggregations:t,onChange:a}){const r=(t,n)=>a&&a(e[t]===n?void 0:n,t);return Object.entries(t).filter((([,{buckets:e}])=>e&&e.length)).map((([t,{label:a,buckets:l}])=>n.createElement(ee,{key:t,name:t,title:a,items:l,query:e,onChange:r})))}function ee({name:e,title:t,items:a,query:r,onChange:l}){return(a=a.filter((e=>e.key)).map((({key:e,filter:t,count:a})=>({key:t,label:e.charAt(0).toUpperCase()+e.slice(1),count:a})))).length?n.createElement(Q.A,{fixed:!0,singleLine:!0,celled:!0,padded:!0,unstackable:!0},n.createElement(Q.A.Header,null,n.createElement(Q.A.Row,null,n.createElement(Q.A.HeaderCell,{className:"search-client-js-components-___SideBar-module__capitalize___3GF1U"},t))),n.createElement(Q.A.Body,null,a.map((({key:t,label:a,count:s})=>n.createElement(Q.A.Row,{key:t},n.createElement(Q.A.Cell,null,n.createElement(_.A,{className:"search-client-js-components-___SideBar-module__checkbox___BlfU+",label:`${a} (${s})`,checked:r[e]===t,onChange:()=>l(e,t)}))))))):null}ee.propTypes={name:c().string.isRequired,title:c().string.isRequired,items:c().array.isRequired,query:c().object.isRequired,onChange:c().func.isRequired},X.propTypes={query:c().object,aggregations:c().object,onChange:c().func},X.defaultProps={query:{},aggregations:{},onChange:void 0};const te=s.default.bind(null,{endpoint:"search.api_search",rules:[{args:[],converters:{},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"search",isDynamic:!1},{data:"/",isDynamic:!1},{data:"api",isDynamic:!1},{data:"/",isDynamic:!1},{data:"search",isDynamic:!1}]}]},"/"),ae=s.default.bind(null,{endpoint:"search.api_search_options",rules:[{args:[],converters:{},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"search",isDynamic:!1},{data:"/",isDynamic:!1},{data:"api",isDynamic:!1},{data:"/",isDynamic:!1},{data:"options",isDynamic:!1}]}]},"/"),ne=s.default.bind(null,{endpoint:"search.search",rules:[{args:[],converters:{},defaults:{},trace:[{data:"|",isDynamic:!1},{data:"/",isDynamic:!1},{data:"search",isDynamic:!1},{data:"/",isDynamic:!1}]}]},"/"),re=e=>Object.entries(e).reduce(((e,[t,a])=>({...e,[t]:(0,y.camelizeKeys)(a)})),{});function le(e,t,a,r={}){const[l,s]=(0,n.useState)(void 0),{data:i,error:c,loading:o,lastData:m}=(0,h.Ku)({url:e,params:{...t,type:a,page:l,...r}},{manual:!t?.q});return(0,n.useEffect)((()=>{s(void 0)}),[t]),[(0,n.useMemo)((()=>({page:l||1,pageNav:i?.pagenav,pages:i?.pages||1,total:i?.total||0,data:(0,y.camelizeKeys)(i?.results||[]),aggregations:re(i?.aggregations||m?.aggregations||{}),loading:o||t.q&&!i&&!c})),[l,i,c,m,o,t.q]),s]}function se({index:e,active:t,title:a,total:r,loading:l,onClick:s}){let i=null;l?i=n.createElement(o.A,{active:!0,inline:!0,size:"tiny",style:{zIndex:"unset"}}):-1!==r&&(i=` (${r})`);let c=a;return l?c=E.Translate.string("{title} (loading results)",{title:a}):r||(c=E.Translate.string("{title} (no results)",{title:a})),n.createElement(m.A.Item,{as:"button",role:"tab","aria-controls":"search-results","aria-selected":t,"aria-disabled":l||!r,"aria-label":c,index:e,active:t,onClick:s,disabled:l||!r},a,i)}function ie({query:e,hasResults:t,categoryTitle:a}){const r=!a;return e||t?e&&!t?n.createElement(u.A,{warning:!!e},n.createElement(u.A.Header,null,n.createElement(E.Translate,null,"No Results")),r?n.createElement(E.Translate,null,"Your search - ",n.createElement(E.Param,{name:"query",value:e})," - did not match any results."):n.createElement(E.Translate,null,"Your search - ",n.createElement(E.Param,{name:"query",value:e})," - did not match any results. You could try"," ",n.createElement(E.Param,{name:"link",wrapper:n.createElement("a",{href:ne({q:e})})},"searching all of Indico instead"),".")):t&&!r?n.createElement(u.A,null,"Showing results inside"," ",n.createElement(E.Param,{name:"categoryTitle",value:a,wrapper:n.createElement("strong",null)})," category. You can"," ",n.createElement(E.Param,{name:"link",wrapper:n.createElement("a",{href:ne({q:e})})},"search all of Indico instead"),"."):null:n.createElement(u.A,null,r?n.createElement(E.Translate,null,"Enter a term above to begin searching."):n.createElement(E.Translate,null,"Enter a term above to begin searching inside the"," ",n.createElement(E.Param,{name:"categoryTitle",value:a,wrapper:n.createElement("strong",null)})," category. You can"," ",n.createElement(E.Param,{name:"link",wrapper:n.createElement("a",{href:ne()})},"search all of Indico instead"),"."))}function ce({sort:e,sortOptions:t,onSortChange:a}){if(!t.length)return null;const r=t.find((t=>t.key===e))||t[0];return n.createElement("div",{className:"search-client-js-components-___SearchApp-module__search-options___-2SiG"},n.createElement(d.A,{text:E.Translate.string("Sort by: {value}",{value:r.label}),onChange:(e,t)=>a(t.value),options:t.map((e=>({value:e.key,text:e.label}))),selectOnNavigation:!1,selectOnBlur:!1,value:r.key}))}function oe({category:e,eventId:t,isAdmin:a}){const r=null!==t,[l,s]=(0,h.sq)(),[i,c]=(0,n.useState)(void 0),{q:o,sort:u,admin_override_enabled:d="false",...y}=l,v=a&&JSON.parse(d);v||delete l.admin_override_enabled;const{data:R}=(0,h.Ku)(ae(),{camelize:!0});let A={};null!==t?A={event_id:t}:null!==e&&(A={category_id:e.id});const[q,b]=le(te(),r?{q:null}:l,"category",A),[D,P]=le(te(),r?{q:null}:l,"event",A),[N,k]=le(te(),l,["contribution","subcontribution"],A),[C,j]=le(te(),l,"attachment",A),[I,L]=le(te(),r?{q:null}:l,"event_note",A),M=(0,f.getPluginObjects)("search_result_types").map((([e,t,a])=>[e,le(te(),l,t,A),a])),w=r?[[E.Translate.string("Contributions"),N,k,z],[E.Translate.string("Materials"),C,j,S]]:[[E.Translate.string("Events"),D,P,G],[E.Translate.string("Contributions"),N,k,z],[E.Translate.string("Materials"),C,j,S],[E.Translate.string("Notes"),I,L,U],[E.Translate.string("Categories"),q,b,x],...M.map((([e,[t,a],n])=>[e,t,a,n]))],Y=i||Math.max(0,w.findIndex((e=>e[1].loading||e[1].total))),[,O,H,B]=w[Y],$=w.some((e=>e[1].loading)),K=(e,t="q")=>s(t,e,"q"===t);return n.createElement(p.A,{columns:2,doubling:!0,padded:!r,className:"search-client-js-components-___SearchApp-module__grid___ABa3S"},!r&&Object.keys(O.aggregations).length>0&&n.createElement(p.A.Column,{width:3,only:"large screen"},n.createElement(X,{query:y,aggregations:O.aggregations,onChange:K})),n.createElement(p.A.Column,{width:r?16:7},n.createElement(V,{onSearch:K,searchTerm:o||"",placeholders:r?[]:R?.placeholders||[]}),(0,f.renderPluginComponents)("search-app-below-input",{category:e,eventId:t,isAdmin:a}),a&&n.createElement("div",{className:"search-client-js-components-___SearchApp-module__admin-search-container___yS08K"},n.createElement(g.A,{content:E.Translate.string("ADMIN"),size:"small",color:"red"}),n.createElement(_.A,{id:"checkbox-admin-search",label:E.Translate.string("Skip access checks"),checked:v,onChange:(e,{checked:t})=>{K(!!t||void 0,"admin_override_enabled")},className:"search-client-js-components-___SearchApp-module__admin-search-checkbox___G-hau"})),n.createElement(m.A,{role:"tablist",pointing:!0,secondary:!0,className:"search-client-js-components-___SearchApp-module__menu___AxGKB"},w.map((([e,t],a)=>n.createElement(se,{key:e,index:a,active:Y===a,title:e,total:t.total,loading:t.loading,onClick:(e,{index:t})=>c(t)})))),n.createElement(ce,{sort:u,sortOptions:R?.sortOptions||[],onSortChange:e=>K(e,"sort")}),n.createElement("div",{"aria-live":"polite"},!$&&n.createElement(ie,{query:o,hasResults:!!O.total,categoryTitle:e?.title})),o&&(0!==O.total||$)&&n.createElement(T,{component:B,page:O.page,numPages:O.pages,pageNav:O.pageNav,data:O.data,onPageChange:H,loading:O.loading,showCategoryPath:!r})))}se.propTypes={index:c().number.isRequired,title:c().string.isRequired,active:c().bool,total:c().number,loading:c().bool,onClick:c().func},se.defaultProps={total:0,active:!1,loading:!1,onClick:void 0},ie.propTypes={hasResults:c().bool,query:c().string,categoryTitle:c().string},ie.defaultProps={hasResults:!1,query:void 0,categoryTitle:void 0},ce.propTypes={sort:c().string,sortOptions:c().arrayOf(c().shape({key:c().string,label:c().string})),onSortChange:c().func.isRequired},ce.defaultProps={sort:void 0,sortOptions:void 0},oe.propTypes={category:c().shape({id:c().number.isRequired,title:c().string.isRequired}),eventId:c().number,isAdmin:c().bool.isRequired},oe.defaultProps={category:null,eventId:null},document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector("#search-root");if(e){const t=e.dataset.category?JSON.parse(e.dataset.category):null,a=void 0!==e.dataset.eventId?parseInt(e.dataset.eventId,10):null,s=void 0!==e.dataset.isAdmin;r.render(n.createElement(l.BrowserRouter,null,n.createElement(oe,{category:t,eventId:a,isAdmin:s})),e)}}))}},e=>{e.O(0,[4644,4394,2076],(()=>{return t=67069,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=module_search.89fd57b1.bundle.js.map