{"version":3,"file":"js/module_events.display.e0c0cd1b.bundle.js","mappings":"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","sources":["webpack:///indico/modules/events/client/js/favorite.jsx","webpack:///indico/modules/events/client/js/display.js"],"sourcesContent":["// This file is part of Indico.\n// Copyright (C) 2002 - 2025 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport {Favorite} from 'indico/react/components';\nimport {Translate} from 'indico/react/i18n';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const favoriteContainer = document.querySelector('#favorite-link');\n\n  if (!favoriteContainer) {\n    return;\n  }\n\n  const eventId = favoriteContainer.dataset.eventId;\n  const favorited = favoriteContainer.dataset.favorited !== undefined;\n\n  ReactDOM.render(\n    <Favorite\n      type=\"event\"\n      id={eventId}\n      favorited={favorited}\n      setFavText={Translate.string('Add event to favorites')}\n      deleteFavText={Translate.string('Delete event from favorites')}\n    />,\n    favoriteContainer\n  );\n});\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2025 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\n/* global ajaxDialog:false */\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport {ManageNotes} from 'indico/react/components';\n\nimport './util/list_generator';\nimport './util/static_filters';\nimport './favorite';\n\n(function() {\n  function setupEventDisplay() {\n    function openAjaxDialog($element) {\n      ajaxDialog({\n        title: $element.data('title'),\n        subtitle: $element.data('subtitle'),\n        url: $element.data('href'),\n        confirmCloseUnsaved: true,\n        onClose(data, customData) {\n          if (data || customData) {\n            location.reload();\n          }\n        },\n      });\n    }\n\n    const containers = document.querySelectorAll('.manage-notes-container');\n    containers.forEach(container => {\n      ReactDOM.render(\n        React.createElement(ManageNotes, {\n          icon: container.dataset.icon !== undefined,\n          title: container.dataset.title,\n          compile: container.CDATA_SECTION_NODE.icon !== undefined,\n          apiURL: container.dataset.apiUrl,\n          imageUploadURL: container.dataset.imageUploadUrl,\n          getNoteURL: container.dataset.getNoteUrl,\n          modalTitle: container.dataset.modalTitle,\n        }),\n        container\n      );\n    });\n\n    $('.js-go-to-day')\n      .dropdown({\n        always_listen: true,\n      })\n      .find('li a')\n      .on('menu_select', function() {\n        const anchor = $(this).attr('href');\n        $('body, html').animate(\n          {\n            scrollTop: $(anchor).offset().top,\n          },\n          {\n            duration: 700,\n            complete() {\n              location.href = anchor;\n            },\n          }\n        );\n        return false;\n      });\n\n    const selectors = [\n      '.notes-compile',\n      '.contribution-edit',\n      '.subcontribution-edit',\n      '.subcontributions-edit',\n    ].join(', ');\n    $('body').on('click', selectors, function(e) {\n      e.preventDefault();\n      openAjaxDialog($(this));\n      return false;\n    });\n\n    $(document).ready(() => {\n      $('h1, .item-description, .timetable-title').mathJax();\n    });\n  }\n\n  function toggleNote(element, visible, immediate) {\n    // Note for event\n    let note = element.closest('.event-note-section');\n    // Note for other elements\n    if (note.length === 0) {\n      note = element.closest('li').find('.note-area-wrapper');\n    }\n    const content = note.hasClass('togglable') ? note : note.find('.togglable');\n    if (immediate) {\n      content.toggle(visible);\n    } else {\n      content[visible === undefined ? 'slideToggle' : visible ? 'slideDown' : 'slideUp']();\n    }\n  }\n\n  $(document).ready(() => {\n    $('.event-service-row > .trigger').on('click', function() {\n      const toggler = $(this);\n      toggler.siblings('.event-service-details').slideToggle({\n        start() {\n          toggler.toggleClass('icon-expand icon-collapse');\n        },\n        duration: 'fast',\n      });\n    });\n\n    $('.event-service-row-toggle').on('click', function(e) {\n      e.preventDefault();\n      const toggler = $(this);\n      const togglerButton = $(this).parent().siblings('.trigger');\n      toggler\n        .parent()\n        .siblings('.event-service-details')\n        .slideToggle({\n          start() {\n            togglerButton.toggleClass('icon-expand icon-collapse');\n          },\n          duration: 'fast',\n        });\n    });\n\n    const threeRowsHeight = 70;\n    $('.participant-list-wrapper').toggleClass(\n      'collapsible collapsed transparent-overlay',\n      $('.participant-list').height() > threeRowsHeight\n    );\n    const initialHeight = $('.participant-list-wrapper').height();\n\n    $('.participant-list-wrapper.transparent-overlay').on('click', () => {\n      const toggler = $('.participant-list-wrapper > .trigger');\n      const participantList = toggler.siblings('.participant-list');\n      const wrapper = participantList.parent();\n      if (wrapper.hasClass('collapsed')) {\n        const newHeight = participantList.height();\n        participantList.height(initialHeight);\n        wrapper.removeClass('collapsed transparent-overlay');\n        wrapper.animate(\n          {\n            height: newHeight,\n          },\n          {\n            duration: 'fast',\n            start() {\n              toggler.addClass('icon-collapse').removeClass('icon-expand');\n            },\n            complete() {\n              participantList.height(newHeight);\n            },\n          }\n        );\n      } else {\n        wrapper.addClass('transparent-overlay');\n        wrapper.animate(\n          {\n            height: initialHeight,\n          },\n          {\n            duration: 'fast',\n            start() {\n              toggler.removeClass('icon-collapse').addClass('icon-expand');\n            },\n            complete() {\n              wrapper.addClass('collapsed');\n            },\n          }\n        );\n      }\n    });\n\n    $('a.js-show-note-toggle').on('click', function(e) {\n      e.preventDefault();\n      toggleNote($(this));\n    });\n\n    $('input.js-toggle-note-cb').on('change', function(e, immediate) {\n      toggleNote($(this), this.checked, immediate);\n    });\n\n    $('input.js-toggle-note-cb').trigger('change', [true]);\n\n    setupEventDisplay();\n  });\n})();\n"],"names":["document","addEventListener","favoriteContainer","querySelector","eventId","dataset","favorited","undefined","ReactDOM","React","Favorite","type","id","setFavText","Translate","string","deleteFavText","setupEventDisplay","querySelectorAll","forEach","container","ManageNotes","icon","title","compile","CDATA_SECTION_NODE","apiURL","apiUrl","imageUploadURL","imageUploadUrl","getNoteURL","getNoteUrl","modalTitle","$","dropdown","always_listen","find","on","anchor","this","attr","animate","scrollTop","offset","top","duration","complete","location","href","selectors","join","e","$element","preventDefault","ajaxDialog","data","subtitle","url","confirmCloseUnsaved","onClose","customData","reload","ready","mathJax","toggleNote","element","visible","immediate","note","closest","length","content","hasClass","toggle","toggler","siblings","slideToggle","start","toggleClass","togglerButton","parent","height","initialHeight","participantList","wrapper","newHeight","removeClass","addClass","checked","trigger"],"sourceRoot":""}