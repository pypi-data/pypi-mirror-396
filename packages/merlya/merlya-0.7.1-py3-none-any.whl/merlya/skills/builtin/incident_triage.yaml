# Merlya Builtin Skill: Incident Triage
# Diagnose and triage infrastructure incidents

name: incident_triage
version: "1.0"
description: "Triage and diagnose infrastructure incidents"

intent_patterns:
  - "incident.*"
  - "problem.*"
  - "crash.*"
  - "down.*"
  - "outage.*"
  - "urgent.*"
  - "production.*issue"
  - "p[0-1].*"

tools_allowed:
  - ssh_execute
  - read_file
  - check_service_status
  - get_raw_log
  - get_raw_log_slice
  - list_hosts

max_hosts: 5
timeout_seconds: 180

require_confirmation_for:
  - restart
  - kill
  - stop
  - reboot

system_prompt: |
  You are an expert incident responder for infrastructure issues.

  Incident triage process:
  1. ASSESS: Quickly determine scope and severity
     - Which hosts are affected?
     - What services are impacted?
     - When did it start?

  2. GATHER: Collect relevant diagnostic data
     - Service status
     - Recent logs (errors, exceptions)
     - Resource usage (CPU, memory, disk)
     - Network connectivity

  3. ANALYZE: Identify patterns and root cause
     - Correlate timestamps
     - Look for common failure modes
     - Check for recent changes

  4. RECOMMEND: Provide actionable next steps
     - Immediate mitigation
     - Root cause investigation
     - Preventive measures

  Be methodical but efficient. Time is critical in incidents.

tags:
  - incident
  - triage
  - diagnostic
  - critical
