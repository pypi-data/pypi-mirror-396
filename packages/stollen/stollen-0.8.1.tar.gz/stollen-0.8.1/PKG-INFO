Metadata-Version: 2.4
Name: stollen
Version: 0.8.1
Summary: An asynchronous framework to easily build a client-side API
Project-URL: Source, https://github.com/py-stollen/stollen
Project-URL: Issues, https://github.com/py-stollen/stollen/issues
Author-email: wakaree <nullmatawasoradesu@gmail.com>
Maintainer-email: wakaree <nullmatawasoradesu@gmail.com>
License-Expression: MIT
License-File: LICENSE
Keywords: api,asyncio,client,framework,wrapper
Classifier: Development Status :: 4 - Beta
Classifier: Environment :: Console
Classifier: Framework :: AsyncIO
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Classifier: Typing :: Typed
Requires-Python: >=3.9
Requires-Dist: aiofiles<26.0,>=23.2.1
Requires-Dist: aiohttp<3.15,>=3.9.0
Requires-Dist: certifi>=2023.7.22
Requires-Dist: pydantic<2.15,>=2.4.1
Requires-Dist: typing-extensions<=5.0,>=4.7.0
Provides-Extra: dev
Requires-Dist: mypy~=1.10.0; extra == 'dev'
Requires-Dist: pre-commit~=3.6; extra == 'dev'
Requires-Dist: ruff~=0.6.0; extra == 'dev'
Requires-Dist: types-aiofiles>=24.1.0.20240626; extra == 'dev'
Requires-Dist: types-xmltodict>=1.0.1.20250920; extra == 'dev'
Provides-Extra: proxy
Requires-Dist: aiohttp-socks<0.10,>=0.8; extra == 'proxy'
Description-Content-Type: text/x-rst


#######
stollen
#######

.. image:: https://img.shields.io/pypi/l/stollen.svg?style=flat-square
    :target: https://opensource.org/licenses/MIT
    :alt: MIT License

.. image:: https://img.shields.io/pypi/status/stollen.svg?style=flat-square
    :target: https://pypi.python.org/pypi/stollen
    :alt: PyPi status

.. image:: https://img.shields.io/pypi/v/stollen.svg?style=flat-square
    :target: https://pypi.python.org/pypi/stollen
    :alt: PyPi Package Version

.. image:: https://img.shields.io/pypi/dm/stollen.svg?style=flat-square
    :target: https://pypistats.org/packages/stollen
    :alt: Downloads

.. image:: https://img.shields.io/pypi/pyversions/stollen.svg?style=flat-square
    :target: https://pypi.python.org/pypi/stollen
    :alt: Supported python versions

**Stollen** is an asynchronous framework designed to streamline the process
of building API clients, written in Python 3.9+ using
`aiohttp <https://github.com/aio-libs/aiohttp>`_ and
`pydantic <https://docs.pydantic.dev/latest/>`_.
With a declarative approach, Stollen allows developers
to define API methods, handle responses, and manage errors
in a structured way, focusing on clarity and scalability.

Installation
------------

..  code-block:: bash

    pip install -U stollen

Example
-------

.. code-block:: python

    from __future__ import annotations

    import asyncio
    import logging

    from stollen import Stollen, StollenMethod, StollenObject
    from stollen.enums import HTTPMethod
    from stollen.exceptions import StollenAPIError


    class CoingeckoAPIError(StollenAPIError):
        pass


    class RateLimitError(CoingeckoAPIError):
        pass


    class Coingecko(Stollen):
        def __init__(self) -> None:
            super().__init__(
                base_url="https://api.coingecko.com/api/v3",
                error_message_key=["status", "error_message"],
                general_error_class=CoingeckoAPIError,
                error_codes={429: RateLimitError},
                stringify_detailed_errors=False,
            )

        async def ping(self) -> GeckoSays:
            call: Ping = Ping()
            return await self(call)


    class GeckoSays(StollenObject[Coingecko]):
        gecko_says: str


    class Ping(
        StollenMethod[GeckoSays, Coingecko],
        http_method=HTTPMethod.GET,
        api_method="/ping",
        returning=GeckoSays,
    ):
        pass


    async def main() -> None:
        logging.basicConfig(level=logging.DEBUG)
        async with Coingecko() as coingecko:
            gecko_says: GeckoSays = await coingecko.ping()
            logging.info(gecko_says)


    if __name__ == "__main__":
        asyncio.run(main())
