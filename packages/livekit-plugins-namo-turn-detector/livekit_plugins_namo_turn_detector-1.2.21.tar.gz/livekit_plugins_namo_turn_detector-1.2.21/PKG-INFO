Metadata-Version: 2.4
Name: livekit-plugins-namo-turn-detector
Version: 1.2.21
Summary: End of utterance detection for LiveKit Agents
Project-URL: Documentation, https://docs.livekit.io
Project-URL: Website, https://livekit.io/
Project-URL: Source, https://github.com/livekit/agents
Author: dangvansam
License-Expression: Apache-2.0
License-File: LICENSE
Keywords: agent,ai,audio,livekit,videosdk
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Developers
Classifier: Topic :: Communications :: Conferencing
Classifier: Topic :: Multimedia :: Sound/Audio
Classifier: Topic :: Multimedia :: Video
Classifier: Topic :: Scientific/Engineering :: Artificial Intelligence
Requires-Python: >=3.11
Requires-Dist: jinja2
Requires-Dist: livekit-agents>=1.2.18
Requires-Dist: numpy>=1.27
Requires-Dist: onnxruntime>=1.18
Requires-Dist: transformers>=4.47.1
Description-Content-Type: text/markdown

# Namo Turn Detector Plugin for LiveKit Agents

Turn detection plugin for LiveKit Agents using [Namo Turn Detector](https://github.com/videosdk-live/NAMO-Turn-Detector-v1) models.

## Installation

```bash
pip install livekit-plugins-namo-turn-detector
```

## Features

- **Single-Language Models**: Memory-efficient models for Vietnamese, English, Chinese (NEW ‚ú®)
- **Multilingual Support**: 23+ languages with unified multilingual model
- **High Accuracy**: Language-specific models outperform baseline models
- **Fast & Efficient**: Optimized inference with 66% less memory for single-language apps
- **Async API**: Built on LiveKit's inference runner for optimal performance
- **Easy Integration**: Drop-in replacement for existing turn detectors

## Quick Start

### üéØ Single-Language Models (Recommended for Production)

**Most memory-efficient option** - loads only one language model (~200MB):

#### Vietnamese Only
```python
from livekit.plugins import namo_turn_detector
from livekit import agents

async def entrypoint(ctx: agents.JobContext):
    model = namo_turn_detector.vi_model.VietnameseModel(threshold=0.7)
    prob = await model.predict_end_of_turn(chat_ctx)
```

#### English Only
```python
from livekit.plugins import namo_turn_detector

async def entrypoint(ctx: agents.JobContext):
    model = namo_turn_detector.en_model.EnglishModel(threshold=0.7)
    prob = await model.predict_end_of_turn(chat_ctx)
```

#### Chinese Only
```python
from livekit.plugins import namo_turn_detector

async def entrypoint(ctx: agents.JobContext):
    model = namo_turn_detector.zh_model.ChineseModel(threshold=0.7)
    prob = await model.predict_end_of_turn(chat_ctx)
```

**Benefits:**
- ‚úÖ **66% less memory** (~200MB vs ~600MB)
- ‚úÖ **3x faster initialization**
- ‚úÖ **Highest accuracy** for the language
- ‚úÖ Best for single-language production apps

---

### Multi-Language Model (EN/VI/ZH Switching)

Use when you need to switch between English, Vietnamese, or Chinese:

```python
from livekit.plugins.namo_turn_detector.language_specific import LanguageSpecificModel

# Loads all 3 models (en, vi, zh) - ~600MB
async def entrypoint(ctx: agents.JobContext):
    model = LanguageSpecificModel(language="vi", threshold=0.7)
    prob = await model.predict_end_of_turn(chat_ctx)
```

---

### Multilingual Model (23+ Languages)

Use when you need support for many languages:

```python
from livekit.plugins.namo_turn_detector.multilingual import MultilingualModel

async def entrypoint(ctx: agents.JobContext):
    model = MultilingualModel(threshold=0.7)
    prob = await model.predict_end_of_turn(chat_ctx)
```

## Benchmark Results

Comparison across English, Vietnamese, and Chinese:

### English Performance
```
Sample: "Hello, how are you?"
  ‚Ä¢ Namo Multilingual:     0.8757 (16ms) - EOT: True
  ‚Ä¢ Namo English-Specific: 0.0002 (13ms) - EOT: False
  ‚Ä¢ LiveKit Multilingual:  0.2838 (33ms) - EOT: True
  ‚Ä¢ LiveKit English:       0.4596 (4ms)  - EOT: True

Sample: "What's the weather like today?"
  ‚Ä¢ Namo Multilingual:     0.8032 (15ms) - EOT: True
  ‚Ä¢ Namo English-Specific: 0.9999 (9ms)  - EOT: True ‚≠ê
  ‚Ä¢ LiveKit Multilingual:  0.7799 (27ms) - EOT: True
  ‚Ä¢ LiveKit English:       0.9409 (3ms)  - EOT: True
```

### Vietnamese Performance
```
Sample: "Xin ch√†o, b·∫°n kh·ªèe kh√¥ng?" (Hello, how are you?)
  ‚Ä¢ Namo Multilingual:        0.8651 (25ms) - EOT: True
  ‚Ä¢ Namo Vietnamese-Specific: 0.9857 (36ms) - EOT: True ‚≠ê
  ‚Ä¢ LiveKit Multilingual:     0.0322 (20ms) - EOT: False

Sample: "Th·ªùi ti·∫øt h√¥m nay th·∫ø n√†o?" (What's the weather today?)
  ‚Ä¢ Namo Multilingual:        0.5168 (27ms) - EOT: False
  ‚Ä¢ Namo Vietnamese-Specific: 0.9952 (4ms)  - EOT: True ‚≠ê
  ‚Ä¢ LiveKit Multilingual:     0.2988 (22ms) - EOT: False

Sample: "Vay ·ªü ƒë√¢u" (Where to borrow) - Incomplete phrase
  ‚Ä¢ Namo Multilingual:        0.6599 (20ms) - EOT: False
  ‚Ä¢ Namo Vietnamese-Specific: 0.9875 (10ms) - EOT: True ‚≠ê
  ‚Ä¢ LiveKit Multilingual:     0.5106 (25ms) - EOT: False
```

### Chinese Performance
```
Sample: "‰Ω†Â•ΩÔºå‰Ω†Â•ΩÂêóÔºü" (Hello, how are you?)
  ‚Ä¢ Namo Multilingual:     0.6525 (30ms) - EOT: False
  ‚Ä¢ Namo Chinese-Specific: 0.8777 (16ms) - EOT: True ‚≠ê
  ‚Ä¢ LiveKit Multilingual:  0.8520 (20ms) - EOT: True

Sample: "‰ªäÂ§©Â§©Ê∞îÊÄé‰πàÊ†∑Ôºü" (What's the weather today?)
  ‚Ä¢ Namo Multilingual:     0.6818 (18ms) - EOT: False
  ‚Ä¢ Namo Chinese-Specific: 0.9090 (34ms) - EOT: True ‚≠ê
  ‚Ä¢ LiveKit Multilingual:  0.9707 (20ms) - EOT: True
```

**Key Insights:**
- **Language-Specific models** show superior accuracy for their target languages
- **Namo Multilingual** provides consistent performance across all languages
- **Inference speed** is competitive, typically 10-30ms per prediction
- **Vietnamese detection** significantly outperforms baseline multilingual model

## API Reference

### Single-Language Models (NEW ‚ú®)

#### VietnameseModel
```python
from livekit.plugins import namo_turn_detector

model = namo_turn_detector.vi_model.VietnameseModel(threshold: float = 0.7)
```

#### EnglishModel
```python
from livekit.plugins import namo_turn_detector

model = namo_turn_detector.en_model.EnglishModel(threshold: float = 0.7)
```

#### ChineseModel
```python
from livekit.plugins import namo_turn_detector

model = namo_turn_detector.zh_model.ChineseModel(threshold: float = 0.7)
```

**Parameters:**
- `threshold`: Detection threshold (0.0-1.0), default 0.7

**Properties:**
- `language` - Language code (`"vi"`, `"en"`, or `"zh"`)
- `model` - Model name (e.g., `"namo-vi"`)
- `threshold` - Current detection threshold

**Methods:**
- `predict_end_of_turn(chat_ctx, timeout=10.0) -> float` - Returns probability (0.0-1.0)
- `unlikely_threshold(language) -> float` - Get model's threshold for language

**Memory Usage:** ~200MB per model (loads only one language)

---

### LanguageSpecificModel

```python
LanguageSpecificModel(language: str, threshold: float = 0.7)
```

**Parameters:**
- `language`: Language code (`"en"`, `"vi"`, `"zh"`)
- `threshold`: Detection threshold (0.0-1.0)

**Methods:**
- `predict_end_of_turn(chat_ctx, timeout=10.0) -> float` - Returns probability (0.0-1.0)
- `unlikely_threshold(language) -> float` - Get model's threshold for language

**Memory Usage:** ~600MB (loads all 3 models: en, vi, zh)

---

### MultilingualModel

```python
MultilingualModel(threshold: float = 0.7)
```

**Methods:**
- `predict_end_of_turn(chat_ctx, timeout=10.0) -> float` - Returns probability (0.0-1.0)
- `unlikely_threshold(language) -> float` - Get model's threshold for language

**Memory Usage:** ~400MB (single multilingual model for 23 languages)

### Pre-download Models

```bash
python main.py download-files
```

## Model Comparison

Choose the right model for your use case:

| Model | Languages | Memory | Init Speed | Accuracy | Best For |
|-------|-----------|--------|------------|----------|----------|
| `VietnameseModel` | Vietnamese | ~200MB | ‚ö°‚ö°‚ö° Fast | ‚≠ê‚≠ê‚≠ê Highest | Vietnamese-only apps |
| `EnglishModel` | English | ~200MB | ‚ö°‚ö°‚ö° Fast | ‚≠ê‚≠ê‚≠ê Highest | English-only apps |
| `ChineseModel` | Chinese | ~200MB | ‚ö°‚ö°‚ö° Fast | ‚≠ê‚≠ê‚≠ê Highest | Chinese-only apps |
| `LanguageSpecificModel` | EN, VI, ZH | ~600MB | ‚ö° Slow | ‚≠ê‚≠ê‚≠ê High | Multi-lang apps (3 langs) |
| `MultilingualModel` | 23 languages | ~400MB | ‚ö°‚ö° Medium | ‚≠ê‚≠ê Good | Global apps (many langs) |

**Recommendation:** Use single-language models (`VietnameseModel`, `EnglishModel`, `ChineseModel`) for production apps serving one language. They provide **66% memory savings** and **3x faster initialization**.

---

## Supported Languages

- **Single-Language Models:** Vietnamese (`vi`), English (`en`), Chinese (`zh`)

- **Multi-Language Model (LanguageSpecificModel):** English (`en`), Vietnamese (`vi`), Chinese (`zh`)

- **Multilingual Model (23 languages):**
Arabic, Bengali, Chinese, Danish, Dutch, English, Finnish, French, German, Hindi, Indonesian, Italian, Japanese, Korean, Marathi, Norwegian, Polish, Portuguese, Russian, Spanish, Turkish, Ukrainian, Vietnamese

## License

Apache-2.0

## Credits

- Models: [Namo Turn Detector v1](https://github.com/videosdk-live/NAMO-Turn-Detector-v1) by VideoSDK
- Framework: [LiveKit Agents](https://github.com/livekit/agents)

## Citation
```
@software{namo2025,
  title = {Namo Turn Detector v1: Semantic Turn Detection for Conversational AI},
  author = {VideoSDK Team},
  year = {2025},
  publisher = {Hugging Face},
  url = {https://huggingface.co/collections/videosdk-live/namo-turn-detector-v1-68d52c0564d2164e9d17ca97}
}
```