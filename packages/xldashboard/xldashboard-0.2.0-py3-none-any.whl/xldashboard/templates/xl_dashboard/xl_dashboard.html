<!-- xl_dashboard/templates/xl_dashboard/xl_dashboard.html -->

{% load static %}
<div class="xl-dashboard">
    <div class="fr flex-wrap" style="gap: .7rem">
        {% for section_name, items, section_background in sections %}
            <section class="xl-section p-2 maxw-250px"
                     style="background: {{ section_background }}; border-radius: .3rem;">
                {% if section_name %}<h5 class="mb-1 pb-1" style="opacity: 92%; white-space: break-spaces;">{{ section_name }}</h5>{% endif %}
                <ul class="fr flex-wrap" style="gap: .4rem">
                    {% for item_name, link, item_background, item_icon in items %}
                        <a class="xl-dashboard-btn-link hover-scale-3" href="{{ link }}">
                            <h5 class="mb-0 py-1 px-2" 
                                style="width: fit-content; border-radius: .3rem; background: {% if item_background %}{{ item_background }}{% else %}rgba(255, 255, 255, 0.1){% endif %};">
                                {% if item_icon %}
                                    <img src="{{ item_icon }}" alt="" style="width: 16px; height: 16px; margin-right: 8px; vertical-align: middle;">
                                {% endif %}
                                <span style="white-space: normal">{{ item_name }}</span>
                            </h5>
                        </a>
                    {% endfor %}
                </ul>
            </section>
        {% endfor %}
    </div>

    <!-- Экшены (кнопки) -->
    {% if actions %}
        <section class="xl-actions mt-3">
            <h5>Actions</h5>
            <ul>
                {% for action_name, func in actions.items %}
                    <li>
                        <form method="POST"
                              action="{% url 'xl_dashboard:dashboard_action' action_name=action_name %}"
                              style="display:inline;">
                            {% csrf_token %}
                            <button type="submit" class="border-0 rounded-3"
                                    style="background: #0003; border-radius: .3rem; ">{{ action_name }}</button>
                        </form>
                    </li>
                {% endfor %}
            </ul>
        </section>
    {% endif %}
</div>
