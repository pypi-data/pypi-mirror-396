import{d as P,e as N,f as _,h as p,aR as Ke,I as G,aS as Ue,U as De,C as ie,A as me,b as te,r as D,a3 as fe,F as X,L as J,aT as We,a7 as U,W as Se,l as e,V as re,w as n,i as t,v as Fe,t as d,j as se,s as b,a6 as K,ak as Le,aj as qe,a9 as ve,af as ge,aI as Ie,B as he,aU as He,k as Ge,m as Je,N as ae,n as Ye,c as Xe,am as ze,E as ne,a2 as ce,J as Qe,aw as je,a5 as Ae,a8 as V,aF as Ze,aH as et,R as tt,aG as ot,aV as nt,aW as Ee,aX as mt,aM as xt,K as vt,aY as Z,aN as pe,an as st,ax as gt,a0 as ht,ag as $e,aZ as lt,a_ as Ne}from"./index-BHd9xypC.js";import{u as Q}from"./expList-CJz1HprR.js";import{_ as rt,a as at,H as it,E as yt,D as bt}from"./ExpsTpl-BXBwBsJ-.js";import{d as Oe,m as kt,e as wt,r as Et,f as Ct,h as $t,i as Nt,R as Dt,t as St}from"./RecordStop24Regular-Qo7SzBWJ.js";import{_ as Ft,a as Lt}from"./Checkbox-DKKtBMeF.js";import{_ as ct}from"./Tree-Cepurzzi.js";import{F as dt}from"./Folder-C04LPKmd.js";import{o as It}from"./index-BVShyVl-.js";import{E as Mt}from"./ExitOutline-D-2SJMMp.js";import{F as Tt}from"./FolderAdd28Regular-C9Fwet-W.js";import{A as Rt}from"./Add-CMAgnUAh.js";import{_ as jt}from"./ConfirmModal.vue_vue_type_script_setup_true_lang-DiT3B8JT.js";import{D as Ot,_ as ut}from"./Delete24Regular-EYjDC_C_.js";import{s as qt,g as zt,a as Bt}from"./exp-VCEEBlLK.js";import{u as Ut}from"./groupDetail-DFK7jpc0.js";import{u as At}from"./useInterval-B2bios_E.js";import{c as pt}from"./index-Due476Fm.js";import{S as _e,u as Vt,_ as Pt}from"./index-Bt-L4tP8.js";import{P as _t}from"./Pulse-Bu-0R6sD.js";import{S as Kt}from"./StarOutline-DZsvjM58.js";import{_ as Wt,N as Ht}from"./Image-D3gvlp1C.js";import"./DynamicForm.vue_vue_type_script_setup_true_lang-jtwxeB2H.js";import"./json-editor-vue-DXYCBDpP.js";import"./InputNumber-Bb1z8BQ5.js";import"./Switch-t-7rbxnR.js";import"./download-C2161hUv.js";const Gt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Jt=P({name:"Eye",render:function(g,a){return _(),N("svg",Gt,a[0]||(a[0]=[p("circle",{cx:"256",cy:"256",r:"64",fill:"currentColor"},null,-1),p("path",{d:"M490.84 238.6c-26.46-40.92-60.79-75.68-99.27-100.53C349 110.55 302 96 255.66 96c-42.52 0-84.33 12.15-124.27 36.11c-40.73 24.43-77.63 60.12-109.68 106.07a31.92 31.92 0 0 0-.64 35.54c26.41 41.33 60.4 76.14 98.28 100.65C162 402 207.9 416 255.66 416c46.71 0 93.81-14.43 136.2-41.72c38.46-24.77 72.72-59.66 99.08-100.92a32.2 32.2 0 0 0-.1-34.76zM256 352a96 96 0 1 1 96-96a96.11 96.11 0 0 1-96 96z",fill:"currentColor"},null,-1)]))}}),Yt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Xt=P({name:"Move",render:function(g,a){return _(),N("svg",Yt,a[0]||(a[0]=[Ke('<path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M176 112l80-80l80 80"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M255.98 32l.02 448"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M176 400l80 80l80-80"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M400 176l80 80l-80 80"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M112 176l-80 80l80 80"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M32 256h448"></path>',6)]))}}),Qt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Zt=P({name:"ArrowBarRight",render:function(g,a){return _(),N("svg",Qt,a[0]||(a[0]=[Ke('<g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 12H10"></path><path d="M20 12l-4 4"></path><path d="M20 12l-4-4"></path><path d="M4 4v16"></path></g>',1)]))}}),eo={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},to=P({name:"ArrowMove24Regular",render:function(g,a){return _(),N("svg",eo,a[0]||(a[0]=[p("g",{fill:"none"},[p("path",{d:"M15.28 6.03a.75.75 0 0 1-1.06 0l-1.47-1.47v3.69a.75.75 0 0 1-1.5 0V4.56L9.78 6.03a.75.75 0 0 1-1.06-1.06l2.75-2.75a.75.75 0 0 1 1.06 0l2.75 2.75a.75.75 0 0 1 0 1.06zm-9.25 8.19a.75.75 0 1 1-1.06 1.06l-2.75-2.75a.75.75 0 0 1 0-1.06l2.75-2.75a.75.75 0 0 1 1.06 1.06l-1.47 1.47h3.69a.75.75 0 0 1 0 1.5H4.56l1.47 1.47zm11.94 1.06a.75.75 0 0 1 0-1.06l1.47-1.47h-3.69a.75.75 0 0 1 0-1.5h3.69l-1.47-1.47a.75.75 0 0 1 1.06-1.06l2.75 2.75a.75.75 0 0 1 0 1.06l-2.75 2.75a.75.75 0 0 1-1.06 0zm-2.69 2.69a.75.75 0 0 0-1.06 0l-1.47 1.47v-3.69a.75.75 0 0 0-1.5 0v3.69l-1.47-1.47a.75.75 0 0 0-1.06 1.06l2.75 2.75a.75.75 0 0 0 1.06 0l2.75-2.75a.75.75 0 0 0 0-1.06z",fill:"currentColor"})],-1)]))}}),oo={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},no=P({name:"DriveFileRenameOutlineFilled",render:function(g,a){return _(),N("svg",oo,a[0]||(a[0]=[p("path",{d:"M18.41 5.8L17.2 4.59c-.78-.78-2.05-.78-2.83 0l-2.68 2.68L3 15.96V20h4.04l8.74-8.74l2.63-2.63c.79-.78.79-2.05 0-2.83zM6.21 18H5v-1.21l8.66-8.66l1.21 1.21L6.21 18zM11 20l4-4h6v4H11z",fill:"currentColor"},null,-1)]))}}),Ve=(R,g)=>{var m;if(!R.length)return;const a=document.createEvent("MouseEvents");a.initEvent("click",!0,!0);const o=R.map(v=>G(Wt,{width:100,src:v}));let f=document.querySelector("#preview-image");if(!f){const v=document.createElement("div");v.id="preview-image",document.body.appendChild(v),f=v}o.length>1?Ue(G(Ht,{},[G(De,{},o)]),f):Ue(o[0],f),(m=f==null?void 0:f.querySelectorAll(".n-image img")[g])==null||m.dispatchEvent(a)},so={class:"text-center text-lg"},lo={class:"flex"},ro={class:"flex-1"},ao={class:"flex justify-center items-center mx-2"},io={class:"flex-1 min-h-[300px]"},co=P({__name:"BatchModal",setup(R,{expose:g}){const a=ie(),o=me(),{t:f}=te(),m=D(!1),v=Q(),k=()=>{m.value=!1,I.value=["root"],O.value=!1,h.value=!1,$.value=[],y.value=[]};g({open:()=>{m.value=!0},close:k});const w=D(),q=D(!1),I=D(["root"]),j=({option:r})=>G("div",{className:r.keys==="root"?"font-extrabold w-full":"flex justify-between w-full"},G("div",{className:"flex justify-between items-center gap-1 w-full"},[G("span",r.label)])),M=(r,i,s)=>{w.value=s.action==="unselect"||s==null?void 0:s.node},T=r=>{I.value=r},O=D(!1),h=D(!1),E=D(!1),y=D(),S=async()=>{var s,c;if(E.value)return;E.value=!0;const[r,i]=await Oe({device_group_name:a.query.device_group_name,task_id:+(a.query.task_id||""),exp_folder_id:(s=v.curNode)==null?void 0:s.exp_folder_id,limit:999999999,before_exp_id:null});E.value=!1,!r&&(i==null?void 0:i.status)===0&&(y.value=i.data.list,h.value&&($.value=(c=i.data.list)==null?void 0:c.map(F=>F.exp_id)))};fe(h,r=>{var i,s;r&&(O.value=!0),r&&X(y.value)&&S(),r&&!X(y)&&($.value=(i=y.value)==null?void 0:i.map(c=>c.exp_id)),!r&&O.value&&($.value=(s=v.curExpList)==null?void 0:s.map(c=>c.exp_id)),!r&&!O.value&&($.value=[])}),fe(O,r=>{var i,s;r&&h.value&&($.value=(i=y.value)==null?void 0:i.map(c=>c.exp_id)),r&&!h.value&&($.value=v.curExpList.map(c=>c.exp_id)),!r&&h.value&&($.value=(s=y.value)==null?void 0:s.map(c=>c.exp_id)),!r&&!h.value&&($.value=[])}),fe(m,r=>{r||k()});const z=J(()=>h.value?y.value:(O.value,v.curExpList)),$=D(),C=async()=>{var s;const[r,i]=await kt({task_id:+(a.query.task_id||""),sub_process_ids:$.value||[],target_exp_folder_id:(s=w.value)==null?void 0:s.exp_folder_id});!r&&(i==null?void 0:i.status)===0&&(k(),v.refreshExpList=!0)},l=J(()=>{const r=JSON.parse(JSON.stringify(v.tree||[]));return We(r),r});return(r,i)=>{const s=se,c=Ft,F=Ie,u=Lt,x=qe,L=Le,H=he,oe=ct,Y=Fe,W=Se;return _(),U(W,{show:e(m),"onUpdate:show":i[3]||(i[3]=A=>re(m)?m.value=A:null)},{default:n(()=>[t(Y,{style:{width:"1000px"}},{default:n(()=>[p("div",so,d(e(f)("groupDetail.exps.batchMove")),1),t(s,{class:"!my-3"}),p("div",lo,[p("div",ro,[p("div",null,[t(c,{checked:e(O),"onUpdate:checked":i[0]||(i[0]=A=>re(O)?O.value=A:null)},{default:n(()=>[b(d(e(f)("groupDetail.exps.selectedCurPage")),1)]),_:1},8,["checked"]),t(c,{checked:e(h),"onUpdate:checked":i[1]||(i[1]=A=>re(h)?h.value=A:null)},{default:n(()=>[b(d(e(f)("groupDetail.exps.selectedAllExps")),1)]),_:1},8,["checked"])]),p("div",{style:K({backgroundColor:e(o).baseColor}),class:"rounded-xl p-2"},[t(L,{show:e(E)},{default:n(()=>[t(x,{style:{height:"500px"}},{default:n(()=>[t(u,{value:e($),"onUpdate:value":i[2]||(i[2]=A=>re($)?$.value=A:null)},{default:n(()=>[(_(!0),N(ve,null,ge(e(z),A=>(_(),N("div",{key:A.exp_id},[t(c,{value:A.exp_id},{default:n(()=>[t(F,{"line-clamp":1},{default:n(()=>[b(d(A.exp_id)+" "+d(A.description),1)]),_:2},1024)]),_:2},1032,["value"])]))),128))]),_:1},8,["value"])]),_:1})]),_:1},8,["show"])],4)]),p("div",ao,[t(H,{disabled:e(X)(e(w)),type:"primary",onClick:C},{icon:n(()=>[t(e(Zt))]),_:1},8,["disabled"])]),p("div",io,[p("div",null,d(e(f)("groupDetail.exps.selecteTargetFolder")),1),p("div",{style:K({backgroundColor:e(o).baseColor}),class:"rounded-xl p-2"},[t(x,{style:{"max-height":"500px"}},{default:n(()=>[t(oe,{"block-line":"","show-line":"",selectable:"",disabled:e(q),"render-label":j,"expanded-keys":e(I),data:e(l),onUpdateExpandedKeys:T,"onUpdate:selectedKeys":M},null,8,["disabled","expanded-keys","data"])]),_:1})],4)])])]),_:1})]),_:1},8,["show"])}}}),uo={class:"text-xl text-center mb-4 font-bold"},po={key:0},_o={key:1},ft=P({__name:"FolderEdit",props:{type:{}},setup(R,{expose:g}){const a=R,o=Q(),f=ie(),{t:m}=te(),v=D(!1),k=D(),w=D({exp_folder_name:void 0,exp_folder_description:void 0,exp_folder_id:void 0}),q={exp_folder_name:{required:!0,message:m("groupDetail.exps.folderNameTips"),trigger:"blur"}},I=D(!1),j=y=>{y||M()},M=()=>{I.value=!1,w.value={exp_folder_description:void 0,exp_folder_name:void 0,exp_folder_id:void 0}},T=async()=>{var y;v.value||(v.value=!0,(y=k.value)==null||y.validate(async S=>{var C;if(S){v.value=!1;return}const[z,$]=await wt({task_id:Number(f.query.task_id||""),...w.value,parent_exp_folder_id:(C=o.curNode)==null?void 0:C.exp_folder_id});v.value=!1,!z&&($==null?void 0:$.status)===0&&(M(),o.refreshExpFolderTree=!0)}))},O=async()=>{var y;v.value||(v.value=!0,(y=k.value)==null||y.validate(async S=>{if(S||!w.value.exp_folder_id){v.value=!1;return}const[z,$]=await Et({exp_folder_id:w.value.exp_folder_id,new_exp_folder_name:w.value.exp_folder_name||"",new_exp_folder_description:w.value.exp_folder_description||""});v.value=!1,!z&&($==null?void 0:$.status)===0&&(M(),o.refreshExpFolderTree=!0)}))},h=()=>{a.type==="create"?T():O()},E=J(()=>{var y;return He(o.tree||[],((y=o.curNode)==null?void 0:y.exp_folder_id)||null)});return g({open:()=>I.value=!0,close:M,setData:(y={})=>w.value={...w.value||{},...y}}),(y,S)=>{const z=se,$=ae,C=at,l=rt,r=Je,i=Ye,s=Ge,c=he,F=De,u=Fe,x=Se;return _(),U(x,{show:e(I),"onUpdate:show":S[2]||(S[2]=L=>re(I)?I.value=L:null),"on-update:show":j},{default:n(()=>[t(u,{style:{width:"800px"},size:"huge",bordered:!1},{default:n(()=>[p("div",uo,[y.type==="create"?(_(),N("span",po,d(e(m)("groupDetail.exps.newFolder")),1)):(_(),N("span",_o,d(e(m)("groupDetail.exps.rename")),1))]),t(z),t(s,{ref_key:"formRef",ref:k,model:e(w),rules:q},{default:n(()=>[t(r,{label:e(m)("groupDetail.exps.targetPath")},{default:n(()=>[t(l,null,{default:n(()=>[(_(!0),N(ve,null,ge(e(E),(L,H)=>(_(),U(C,{clickable:!1,separator:">",key:L.exp_folder_id},{default:n(()=>[H===0?(_(),U($,{key:0,component:e(it)},null,8,["component"])):(_(),U($,{key:1,component:e(dt)},null,8,["component"])),b(" "+d(L.exp_folder_name),1)]),_:2},1024))),128))]),_:1})]),_:1},8,["label"]),t(r,{label:e(m)("groupDetail.exps.folderName"),path:"exp_folder_name"},{default:n(()=>[t(i,{value:e(w).exp_folder_name,"onUpdate:value":S[0]||(S[0]=L=>e(w).exp_folder_name=L)},null,8,["value"])]),_:1},8,["label"]),t(r,{label:e(m)("groupDetail.exps.folderDesc"),path:"description"},{default:n(()=>[t(i,{type:"textarea",value:e(w).exp_folder_description,"onUpdate:value":S[1]||(S[1]=L=>e(w).exp_folder_description=L)},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model"]),t(F,{justify:"end"},{default:n(()=>[t(c,{onClick:M},{default:n(()=>[b(d(e(m)("groupDetail.exps.cancel")),1)]),_:1}),t(c,{type:"primary",onClick:h,loading:e(v)},{default:n(()=>[b(d(e(m)("common.OK")),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["show"])}}}),fo={class:"flex justify-between items-center"},mo={class:"flex gap-2 items-center"},xo={class:"font-bold text-lg flex items-center gap-2"},vo={class:"flex items-center gap-2"},go=P({__name:"ExpTitleBar",setup(R){const g=Q(),{t:a}=te(),o=ie(),f=Xe(),m=()=>{v.value&&v.value.length>1?k(v.value[v.value.length-2],!0):f.push({name:"taskList",query:{device_group_name:o.query.device_group_name}})},v=J(()=>{var h;return He(g.tree||[],((h=g.curNode)==null?void 0:h.exp_folder_id)||null)}),k=({exp_folder_id:h},E)=>{if(!E)return;const y=It(o.query,"fid");h&&(y.fid=h),g.curNode=void 0,g.loadingCurNode=!0,g.curExpList=[],g.curExpNode=void 0,g.curFolderNode=void 0,ne(()=>{f.push({name:"experimentList",query:y}).then(()=>{g.curNode={exp_folder_id:h}})})},w=D(),q=()=>{var h;(h=w.value)==null||h.open()},I=D(),j=D(),M=()=>{var h;(h=I.value)==null||h.open()},T=()=>{var h;(h=j.value)==null||h.open()},O=J(()=>!X(g.curExpList));return(h,E)=>{var r;const y=ae,S=he,z=ze,$=se,C=at,l=rt;return _(),N("div",null,[p("div",fo,[p("div",mo,[t(S,{type:"primary",onClick:m,class:"!rotate-180 !mr-5",size:"small"},{icon:n(()=>[t(y,null,{default:n(()=>[t(e(Mt))]),_:1})]),_:1}),p("div",xo,[t(z,{bordered:!1,color:{color:"#b63636",textColor:"#fff"},class:"!rounded"},{default:n(()=>[b(d(e(a)("groupDetail.exps.task"))+" "+d(e(o).query.task_id),1)]),_:1}),b(" "+d(e(o).query.task_title),1)]),t($,{vertical:""}),t(l,null,{default:n(()=>[(_(!0),N(ve,null,ge(e(v),(i,s)=>(_(),U(C,{clickable:s<=e(v).length-1,onClick:()=>k(i,s<e(v).length-1),separator:">",key:i.exp_folder_id},{default:n(()=>[s===0?(_(),U(y,{key:0,component:e(it)},null,8,["component"])):(_(),U(y,{key:1,component:e(dt)},null,8,["component"])),b(" "+d(i.exp_folder_name),1)]),_:2},1032,["clickable","onClick"]))),128))]),_:1})]),p("div",vo,[t(S,{type:"primary",onClick:T,disabled:!e(O)},{icon:n(()=>[t(e(to))]),default:n(()=>[b(" "+d(e(a)("groupDetail.exps.move")),1)]),_:1},8,["disabled"]),t(S,{type:"primary",onClick:q},{icon:n(()=>[t(e(Tt))]),default:n(()=>[b(" "+d(e(a)("groupDetail.exps.newFolder")),1)]),_:1}),t(S,{type:"primary",onClick:M},{icon:n(()=>[t(e(Rt))]),default:n(()=>[b(" "+d(e(a)("groupDetail.exps.createFromTemplate")),1)]),_:1})])]),t($,{class:"!mt-5 !mb-2"}),t(ft,{type:"create",ref_key:"folderEditRef",ref:w},null,512),t(yt,{ref_key:"expsTplRef",ref:I,fid:((r=e(g).curNode)==null?void 0:r.exp_folder_id)||"root"},null,8,["fid"]),t(co,{ref_key:"batchModalRef",ref:j},null,512)])}}}),ho={class:"text-center text-lg"},yo={class:"flex-1 min-h-[300px]"},bo=P({__name:"FolderMove",setup(R,{expose:g}){const a=D(),o=me(),{t:f}=te(),m=D(!1),v=Q(),k=()=>{m.value=!1,I.value=["root"]};g({open:()=>{m.value=!0},close:k,setData:E=>{a.value=E.id}});const w=D(),q=D(!1),I=D(["root"]),j=({option:E})=>G("div",{className:E.keys==="root"?"font-extrabold w-full":"flex justify-between w-full"},G("div",{className:"flex justify-between items-center gap-1 w-full"},[G("span",E.label)])),M=(E,y,S)=>{w.value=S.action==="unselect"||S==null?void 0:S.node},T=E=>{I.value=E};fe(m,E=>{E||k()});const O=async()=>{const[E,y]=await Ct({exp_folder_id:a.value,target_parent_exp_folder_id:w.value.exp_folder_id});!E&&(y==null?void 0:y.status)===0&&(k(),ne(()=>{v.refreshExpFolderTree=!0}))},h=J(()=>{const E=JSON.parse(JSON.stringify(v.tree||[]));return We(E),E});return(E,y)=>{const S=se,z=ct,$=qe,C=he,l=De,r=Fe,i=Se;return _(),U(i,{show:e(m),"onUpdate:show":y[0]||(y[0]=s=>re(m)?m.value=s:null)},{default:n(()=>[t(r,{style:{width:"500px"}},{default:n(()=>[p("div",ho,d(e(f)("groupDetail.exps.moveFolder")),1),t(S,{class:"!my-3"}),p("div",yo,[p("div",null,d(e(f)("groupDetail.exps.selecteTargetFolder")),1),p("div",{style:K({backgroundColor:e(o).baseColor}),class:"rounded-xl p-2"},[t($,{style:{"max-height":"500px"}},{default:n(()=>[t(z,{"block-line":"","show-line":"",selectable:"",disabled:e(q),"render-label":j,"expanded-keys":e(I),data:e(h),onUpdateExpandedKeys:T,"onUpdate:selectedKeys":M},null,8,["disabled","expanded-keys","data"])]),_:1})],4)]),t(l,{justify:"end"},{default:n(()=>[t(C,{onClick:k},{default:n(()=>[b(d(e(f)("common.cancel")),1)]),_:1}),t(C,{disabled:e(X)(e(w)),type:"primary",onClick:O},{default:n(()=>[b(d(e(f)("common.OK")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["show"])}}}),ko={class:"folder-icon"},wo=P({__name:"FolderItem",props:{count:{}},setup(R){return(g,a)=>(_(),N("div",ko))}}),Eo=ce(wo,[["__scopeId","data-v-98d54097"]]),Co=["onDblclick","onClick","onContextmenu"],$o=P({__name:"ExpFolders",setup(R){Qe(s=>({e4594578:e(a).cardColor}));const{t:g}=te(),a=me(),o=Q(),f=Xe(),m=ie(),v=D(!1),k=async()=>{var u,x;if(!+(((u=m.query)==null?void 0:u.task_id)||"")||v.value||(v.value=!0,!m.query.device_group_name))return;const[c,F]=await $t({task_id:+(((x=m.query)==null?void 0:x.task_id)||""),include_experiments:!1});v.value=!1,!c&&F&&F.status===0&&(Array.isArray(F.data.folder_tree)||(F.data.folder_tree=[F.data.folder_tree]),o.tree=F.data.folder_tree,o.refreshExpFolderTree&&(o.refreshExpFolderTree=!1),m.query.fid&&ne(()=>{o.curNode=Ae(o.tree||[],+(m.query.fid||""),"exp_folder_id")}))};je(()=>{k()}),fe(()=>o.refreshExpFolderTree,s=>{s&&k()});const w=J(()=>{var s,c;return(c=Ae(o.tree||[],(s=o.curNode)==null?void 0:s.exp_folder_id,"exp_folder_id"))==null?void 0:c.children}),q=s=>{o.curNode=void 0,o.loadingCurNode=!0,o.curExpList=[],o.curExpNode=void 0,o.curFolderNode=void 0,ne(()=>{f.push({name:"experimentList",query:{...m.query,fid:s.exp_folder_id}}).then(()=>{o.curNode=s})})},I=J(()=>X(w.value)&&X(o.curExpList)),j=s=>()=>G(ae,null,{default:()=>G(s)}),M=[{label:g("groupDetail.exps.delete"),key:"delete",icon:j(Ot)},{label:g("groupDetail.exps.rename"),key:"rename",icon:j(no)},{label:g("groupDetail.exps.moveFolder"),key:"move",icon:j(Xt)}],T=D(),O=D(!1),h=D(),E=D(),y=async()=>{var s,c;if((s=E.value)!=null&&s.exp_folder_id){const[F,u]=await Nt({exp_folder_id:E.value.exp_folder_id});!F&&(u==null?void 0:u.status)===0&&((c=h.value)==null||c.close(),E.value=void 0,o.refreshExpFolderTree=!0)}},S=(s,c)=>{s.preventDefault(),E.value=c,T.value={x:s.clientX,y:s.clientY},O.value=!0},z=()=>{O.value=!1,T.value=void 0},$=D(),C=D(),l=s=>{var c,F,u,x,L;s==="delete"?(c=h.value)==null||c.open():s=="rename"?((F=$.value)==null||F.open(),(u=$.value)==null||u.setData({exp_folder_id:E.value.exp_folder_id,exp_folder_name:E.value.exp_folder_name,exp_folder_description:E.value.exp_folder_description})):s==="move"&&((x=C.value)==null||x.open(),(L=C.value)==null||L.setData({id:E.value.exp_folder_id}))},r=s=>{s||(E.value=void 0)},i=s=>{o.curFolderNode=s,o.curExpNode=void 0};return(s,c)=>{var oe,Y;const F=Ze,u=Ie,x=et,L=ot,H=nt;return _(),N("div",null,[e(I)?(_(),U(F,{key:0,class:"mt-40"})):V("",!0),t(L,{"x-gap":16,"y-gap":16,cols:"6 1200:8 1600:8",class:"mb-4"},{default:n(()=>[(_(!0),N(ve,null,ge(e(w),W=>(_(),U(x,{key:W.exp_folder_id,class:"rounded cursor-pointer"},{default:n(()=>[p("div",{class:"flex justify-center flex-col items-center exp-folder-card",onDblclick:()=>q(W),onClick:()=>i(W),onContextmenu:tt(A=>S(A,W),["prevent"])},[t(Eo,{count:W.experiment_count},null,8,["count"]),p("div",null,[t(u,{"line-clamp":1},{default:n(()=>[b(d(W.exp_folder_name),1)]),_:2},1024)])],40,Co)]),_:2},1024))),128))]),_:1}),t(ft,{type:"edit",ref_key:"folderEditRef",ref:$},null,512),t(bo,{ref_key:"folderMoveRef",ref:C},null,512),e(O)?(_(),U(H,{key:1,placement:"bottom-start",show:!0,options:M,x:(oe=e(T))==null?void 0:oe.x,y:(Y=e(T))==null?void 0:Y.y,onClickoutside:z,onSelect:l},{default:n(()=>c[0]||(c[0]=[p("div",null,null,-1)])),_:1},8,["x","y"])):V("",!0),t(jt,{ref_key:"confirmRef",ref:h,onOk:y,onChange:r},null,512)])}}}),No=ce($o,[["__scopeId","data-v-e5b120cf"]]);var Re,Pe;function Do(){if(Pe)return Re;Pe=1;var R="Expected a function",g=NaN,a="[object Symbol]",o=/^\s+|\s+$/g,f=/^[-+]0x[0-9a-f]+$/i,m=/^0b[01]+$/i,v=/^0o[0-7]+$/i,k=parseInt,w=typeof Ee=="object"&&Ee&&Ee.Object===Object&&Ee,q=typeof self=="object"&&self&&self.Object===Object&&self,I=w||q||Function("return this")(),j=Object.prototype,M=j.toString,T=Math.max,O=Math.min,h=function(){return I.Date.now()};function E(l,r,i){var s,c,F,u,x,L,H=0,oe=!1,Y=!1,W=!0;if(typeof l!="function")throw new TypeError(R);r=C(r)||0,S(i)&&(oe=!!i.leading,Y="maxWait"in i,F=Y?T(C(i.maxWait)||0,r):F,W="trailing"in i?!!i.trailing:W);function A(B){var le=s,xe=c;return s=c=void 0,H=B,u=l.apply(xe,le),u}function Me(B){return H=B,x=setTimeout(de,r),oe?A(B):u}function ye(B){var le=B-L,xe=B-H,Be=r-le;return Y?O(Be,F-xe):Be}function be(B){var le=B-L,xe=B-H;return L===void 0||le>=r||le<0||Y&&xe>=F}function de(){var B=h();if(be(B))return ke(B);x=setTimeout(de,ye(B))}function ke(B){return x=void 0,W&&s?A(B):(s=c=void 0,u)}function Te(){x!==void 0&&clearTimeout(x),H=0,s=L=c=x=void 0}function we(){return x===void 0?u:ke(h())}function ue(){var B=h(),le=be(B);if(s=arguments,c=this,L=B,le){if(x===void 0)return Me(L);if(Y)return x=setTimeout(de,r),A(L)}return x===void 0&&(x=setTimeout(de,r)),u}return ue.cancel=Te,ue.flush=we,ue}function y(l,r,i){var s=!0,c=!0;if(typeof l!="function")throw new TypeError(R);return S(i)&&(s="leading"in i?!!i.leading:s,c="trailing"in i?!!i.trailing:c),E(l,r,{leading:s,maxWait:r,trailing:c})}function S(l){var r=typeof l;return!!l&&(r=="object"||r=="function")}function z(l){return!!l&&typeof l=="object"}function $(l){return typeof l=="symbol"||z(l)&&M.call(l)==a}function C(l){if(typeof l=="number")return l;if($(l))return g;if(S(l)){var r=typeof l.valueOf=="function"?l.valueOf():l;l=S(r)?r+"":r}if(typeof l!="string")return l===0?l:+l;l=l.replace(o,"");var i=m.test(l);return i||v.test(l)?k(l.slice(2),i?2:8):f.test(l)?g:+l}return Re=y,Re}var So=Do();const Fo=mt(So),Lo={key:0,class:"absolute right-1 top-0.5 z-10"},Io={key:1,class:"file-triangle"},Mo={class:"flex justify-center absolute left-[2px] top-[2px] rounded z-10"},To={class:"file-title"},Ro=["src"],jo={key:3,class:"mt-10 text-center opacity-40"},Oo={key:4,class:"absolute text-center whitespace-pre-line file-text flex flex-col gap-1 items-center opacity-40 text-xs"},qo={key:5,class:"absolute right-1 bottom-2 !w-5 !h-5 rounded-full"},zo={class:"mt-1 text-xs text-center"},Bo={class:"text-xl mb-4 font-bold"},Uo=P({__name:"ExpFile",props:{exp:{}},setup(R){Qe(u=>({"382be4ad":e(v).cardColor,"23969f2c":e(pe)[u.exp.status].color}));const g={STOP:"stop",DUPLICATE:"duplicate",PREVIEW:"preview",FAVORITY:"favority"},a=R,o=xt(),f=vt(),m=Q(),v=me(),{t:k}=te(),w=ie(),q=J(()=>{var L;if(a.exp.progress==="0%")return 0;const[u,x]=(L=a.exp.progress)==null?void 0:L.split("/");return+x==0?0:+u/+x}),I=J(()=>[Z.SERVICE_QUEUING,Z.RUNNING,Z.HOST_DOWNLOADED].includes(a.exp.status)),j=()=>{m.curFolderNode=void 0,m.curExpNode=a.exp},M=u=>()=>G(ae,null,{default:()=>G(u)}),T=D(!1),O=J(()=>pt([{label:k("groupDetail.exps.stop"),key:"stop",icon:M(Dt),disabled:![Z.SERVICE_QUEUING,Z.RUNNING,Z.HOST_DOWNLOADED].includes(a.exp.status)},{label:k("expInfo.duplicate"),key:"duplicate",icon:M(bt)},{label:k("groupDetail.exps.preview"),key:"preview",icon:M(Jt)},a.exp.is_marked?{label:k("groupDetail.exps.unfavority"),key:"favority",icon:M(Kt)}:{label:k("groupDetail.exps.favority"),key:"favority",icon:M(_e)}])),h=D(),E=u=>{u.preventDefault(),h.value={x:u.clientX+5,y:u.clientY+5},T.value=!0},y=()=>{T.value=!1,h.value=void 0},S=(u={})=>{var L;const x=new URLSearchParams({device_group_name:w.query.device_group_name,task_id:w.query.task_id,task_title:w.query.task_title,space_id:w.query.space_id,exp_id:String(a.exp.exp_id),...u,fid:String(((L=m.curNode)==null?void 0:L.exp_folder_id)||"root")});window.open(`/experiment/expSettings?${x.toString()}`,o.expOpenForm)},z=D(!1),$=async()=>{z.value=!0;const[u,x]=await qt({exp_id:a.exp.exp_id});z.value=!1,!u&&(x==null?void 0:x.status)===0&&(f.success(k("groupDetail.exps.stopSuccess")),m.refreshExpList=!0)},C=async()=>{const[u,x]=await St({exp_id:a.exp.exp_id,is_marked:!a.exp.is_marked,mark_note:i.value.mark_note});!u&&(x==null?void 0:x.status)===0&&(m.refreshExpList=!0,c())},l=u=>{u===g.STOP?$():u===g.DUPLICATE?S({dup:"1"}):u===g.PREVIEW?S():u===g.FAVORITY&&(a.exp.is_marked?C():s.value=!0),y()},r=D(),i=D({mark_note:void 0}),s=D(!1),c=()=>{s.value=!1,i.value={mark_note:void 0}},F=u=>{u||c()};return(u,x)=>{const L=ut,H=Ie,oe=nt,Y=se,W=Ye,A=Je,Me=Ge,ye=he,be=De,de=Fe,ke=Se,Te=Le;return _(),U(Te,{show:e(z)},{default:n(()=>{var we,ue;return[p("div",{class:"flex items-center flex-col file-wraper px-0 py-4 rounded-xl box-border",onClick:j,onDblclick:x[0]||(x[0]=()=>S()),onContextmenu:tt(E,["prevent"])},[p("div",{class:"rounded file-card shadow-2xl relative",style:K({borderColor:e(v).dividerColor,backgroundColor:e(v).cardColor})},[u.exp.is_marked?(_(),N("div",Lo,[t(e(ae),{component:e(_e),color:"#fadb14",size:"16"},null,8,["component"])])):(_(),N("div",Io,x[3]||(x[3]=[p("div",null,null,-1)]))),p("div",Mo,[p("div",To,"#"+d(u.exp.exp_id),1)]),u.exp.img?(_(),N("img",{key:2,src:u.exp.img,class:"w-[120px] h-[120px] absolute top-0 left-0",alt:""},null,8,Ro)):u.exp.img===void 0?(_(),N("div",jo,d(e(k)("common.loading")),1)):u.exp.img===null?(_(),N("div",Oo,[t(e(ae),{component:e(_t),size:"30"},null,8,["component"]),b(" "+d(e(k)("groupDetail.exps.expNoResult")),1)])):V("",!0),p("div",{class:"text-center absolute bottom-0 w-full left-0 text-xs",style:K({background:"rgba(255, 255, 255, 0.5 )",borderBottom:`4px solid ${e(pe)[u.exp.status].color}`})},[p("div",{style:K({background:`rgba(255, 255, 255, ${e(q)} )`}),class:"h-full opacity-60"},null,4)],4),e(q)!==1?(_(),N("div",qo,[t(L,{type:"circle",processing:e(I),percentage:e(q)*100,"show-indicator":!1,class:"!w-5 !h-5","stroke-width":16},null,8,["processing","percentage"])])):V("",!0)],4),p("div",zo,[t(H,{"line-clamp":2},{default:n(()=>[b(d(u.exp.title),1)]),_:1})]),e(T)?(_(),U(oe,{key:0,placement:"bottom-start",show:!0,options:e(O),x:(we=e(h))==null?void 0:we.x,y:(ue=e(h))==null?void 0:ue.y,onClickoutside:y,onSelect:l},{default:n(()=>x[4]||(x[4]=[p("div",null,null,-1)])),_:1},8,["options","x","y"])):V("",!0)],32),t(ke,{show:e(s),"onUpdate:show":x[2]||(x[2]=B=>re(s)?s.value=B:null),onUpdateShow:F},{default:n(()=>[t(de,{style:{width:"500px"}},{default:n(()=>[p("div",Bo,[b(d(e(k)("groupDetail.exps.favorityTitle"))+" Exp-"+d(u.exp.exp_id)+" :: ",1),p("span",null,'"'+d(u.exp.title)+'"',1)]),t(Y),t(Me,{ref_key:"formRef",ref:r,model:e(i)},{default:n(()=>[t(A,{label:e(k)("groupDetail.exps.favorityNote"),path:"exp_folder_name"},{default:n(()=>[t(W,{type:"textarea",value:e(i).mark_note,"onUpdate:value":x[1]||(x[1]=B=>e(i).mark_note=B)},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model"]),t(be,{justify:"end"},{default:n(()=>[t(ye,{onClick:c},{default:n(()=>[b(d(e(k)("common.cancel")),1)]),_:1}),t(ye,{type:"primary",onClick:C,loading:e(z)},{default:n(()=>[b(d(e(k)("common.OK")),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["show"])]}),_:1},8,["show"])}}}),Ao=ce(Uo,[["__scopeId","data-v-e5064830"]]),Vo=P({__name:"ExpFiles",setup(R,{expose:g}){const a=st({per_page:48,total:0}),o=ie(),f=Q(),m=Ut(),v=D(!1),k=D({}),w=D([]),q=D(!1),I=C=>[Z.COMPLETE,Z.ERROR,Z.CANCELED,Z.HOST_DOWNLOADED].includes(C),j=async(C,l)=>{var s;const[r,i]=await zt({exp_ids:C,group_name:o.query.device_group_name,create_timestamps:l,org_id:(s=m.groupInfo)==null?void 0:s.organization_id});!r&&(i==null?void 0:i.status)===0&&ht(i.data,(c,F)=>{var x;const u=(x=f.curExpList)==null?void 0:x.find(L=>F===String(L.exp_id));u&&(I(u==null?void 0:u.status)?(u.img=c,k.value={...k.value,[F]:c||null}):w.value.push({exp_id:F,create_timestamp:u.create_timestamp}))})},M=async()=>{var C,l,r,i;X(w.value)||(await j((l=(C=w.value)==null?void 0:C.map(s=>s.exp_id))==null?void 0:l.join(","),(i=(r=w.value)==null?void 0:r.map(s=>s.create_timestamp))==null?void 0:i.join(",")),ne(()=>{S()}))},T=async()=>{var r;if(!+(o.query.task_id||""))return;const[C,l]=await Oe({device_group_name:o.query.device_group_name,task_id:+(o.query.task_id||""),exp_folder_id:(r=f.curNode)==null?void 0:r.exp_folder_id,limit:a.per_page,before_exp_id:null});if(!C&&(l==null?void 0:l.status)===0){const i=JSON.parse(JSON.stringify(f.curExpList));l.data.list.reverse().forEach(s=>{const c=i.findIndex(F=>F.exp_id===s.exp_id);c<0?i.unshift(s):i.splice(c,1,{...s,img:i[c].img})}),f.curExpList=i,f.curExpCounts=l.data.count,ne(()=>{var F,u;const s=f.curExpList.find(x=>{var L;return x.exp_id==((L=f.curExpNode)==null?void 0:L.exp_id)});s&&(f.curExpNode=s);const c=y(l.data.list||[]);X(c)||j((F=c==null?void 0:c.map(x=>x.exp_id))==null?void 0:F.join(","),(u=c==null?void 0:c.map(x=>x.create_timestamp))==null?void 0:u.join(","))})}},{start:O,stop:h,runing:E}=At(()=>{M(),T()},{delay:!0,isManual:!0});je(()=>{E.value?h():O()}),gt(()=>{h()});const y=C=>pt(C.map(l=>k.value[l.exp_id]===void 0?l:void 0)),S=()=>{const C=[];w.value.forEach(l=>{k.value[l.exp_id]===void 0&&C.push(l)}),w.value=C},z=async()=>{var i,s;if(!+(o.query.task_id||"")||v.value)return;v.value=!0;const C=f.curExpList,[l,r]=await Oe({device_group_name:o.query.device_group_name,task_id:+(o.query.task_id||""),exp_folder_id:(i=f.curNode)==null?void 0:i.exp_folder_id,limit:a.per_page,before_exp_id:((s=C[C.length-1])==null?void 0:s.exp_id)||null});v.value=!1,f.loadingCurNode&&(f.loadingCurNode=!1),!l&&(r==null?void 0:r.status)===0&&(ne(()=>{var F,u;const c=y(r.data.list||[]);X(c)||j((F=c==null?void 0:c.map(x=>x.exp_id))==null?void 0:F.join(","),(u=c==null?void 0:c.map(x=>x.create_timestamp))==null?void 0:u.join(","))}),f.curExpList=Vt([...f.curExpList||[],...r.data.list],"exp_id"),a.total=r.data.count,f.curExpCounts=r.data.count,ne(()=>{var c;q.value=a.total===((c=f.curExpList)==null?void 0:c.length)}),f.refreshExpList&&(f.refreshExpList=!1))};je(()=>{a.total=0,f.curExpCounts=0,f.curExpList=[],k.value={},w.value=[],o.query.fid&&(f.curNode={exp_folder_id:+o.query.fid}),ne(()=>{z()})}),fe(()=>f.refreshExpList,C=>{C&&(f.curExpList=[],k.value={},z())},{immediate:!0});const $=Fo(()=>{q.value||z()},500);return g({loadMore:$}),(C,l)=>{const r=et,i=ot;return _(),U(i,{class:"!max-[1600px]","x-gap":"8",cols:"6 1200:8 1600:8"},{default:n(()=>[(_(!0),N(ve,null,ge(e(f).curExpList,s=>(_(),U(r,{key:s.exp_id},{default:n(()=>[t(Ao,{exp:s},null,8,["exp"])]),_:2},1024))),128))]),_:1})}}}),Po={class:"text-xs opacity-70"},Ko={class:"text-xs"},ee=P({__name:"InfoItem",setup(R){const g=me();return(a,o)=>(_(),N("div",{class:"flex justify-between items-center py-2 border-b",style:K({borderColor:e(g).dividerColor})},[p("div",Po,[$e(a.$slots,"label")]),p("div",Ko,[$e(a.$slots,"default")])],4))}}),Wo={key:0,class:"flex items-center flex-col w-full"},Ho={key:0,class:"relative flex-none"},Go=["src"],Jo={key:0,class:"absolute right-1 top-6 z-10"},Yo={class:"flex justify-center absolute left-[2px] top-[2px] rounded z-10"},Xo={class:"file-title"},Qo={key:0,class:"absolute right-1 top-1 z-10"},Zo={key:1,class:"file-triangle",style:{background:"rgba(255, 255, 255, 0.25)"}},en={key:2,class:"absolute right-1 bottom-2 !w-5 !h-5 rounded-full"},tn={class:"inline-flex flex-col items-center gap-1 opacity-40"},on={class:"flex justify-center absolute left-[2px] top-[2px] rounded z-10"},nn={class:"file-title"},sn={key:0,class:"absolute right-1 top-1 z-10"},ln={key:2,class:"absolute right-1 bottom-2 !w-5 !h-5 rounded-full"},rn={class:"opacity-40"},an={class:"text-lg font-bold w-full"},cn={class:"mt-4 opacity-70 text-xs text-left w-full"},dn={class:"w-full flex flex-col"},un={class:"break-all inline-block whitespace-pre-line"},pn={class:"text-xs opacity-70 min-w-18 flex items-center gap-1"},_n={class:"italic"},fn={class:"text-xs"},mn=P({__name:"ExpInfo",setup(R){const g=ie(),a=Q(),{curExpNode:o}=lt(a),f=me(),{t:m}=te(),v=D(),k=st({}),w=async I=>{if(k[String(I.exp_id)]){Ve([k[String(I.exp_id)]],0);return}v.value=I.exp_id;const[j,M]=await Bt({exp_id:I.exp_id,device_group_name:g.query.device_group_name,space_id:g.query.space_id});v.value=void 0,!j&&(M==null?void 0:M.status)===0&&(Ve([M.data.big_picture_url],0),k[String(I.exp_id)]=M.data.big_picture_url)},q=J(()=>{var M,T;if(!o.value||o.value.progress==="0%")return 0;const[I,j]=(T=(M=o.value)==null?void 0:M.progress)==null?void 0:T.split("/");return+j==0?0:+I/+j});return(I,j)=>{var z,$,C;const M=Le,T=ae,O=ut,h=se,E=ze,y=Ie,S=qe;return e(o)?(_(),N("div",Wo,[e(o).img?(_(),N("div",Ho,[t(M,{show:e(v)===e(o).exp_id},{default:n(()=>[p("img",{class:"w-[160px] h-[160px] my-5 cursor-pointer",src:e(o).img,alt:"",onClick:j[0]||(j[0]=()=>w(e(o)))},null,8,Go)]),_:1},8,["show"]),(z=e(o))!=null&&z.is_marked?(_(),N("div",Jo,[t(T,{component:e(_e),color:"#fadb14",size:"20"},null,8,["component"])])):V("",!0)])):e(o).img===null?(_(),N("div",{key:1,class:"!w-[160px] file-card relative shadow-2xl flex-none whitespace-pre-line !h-[160px] my-5 rounded text-center leading-4 text-xs flex items-center justify-center text-white",style:K({borderColor:e(f).dividerColor,backgroundColor:e(f).cardColor})},[p("div",Yo,[p("div",Xo,"#"+d(e(o).exp_id),1)]),($=e(o))!=null&&$.is_marked?(_(),N("div",Qo,[t(T,{component:e(_e),color:"#fadb14",size:"20"},null,8,["component"])])):(_(),N("div",Zo)),p("div",{class:"text-center absolute bottom-0 w-full left-0 text-xs",style:K({background:"rgba(255, 255, 255, 0.5 )",borderBottom:`4px solid ${e(pe)[e(o).status].color}`})},[p("div",{style:K({background:`rgba(255, 255, 255, ${e(q)} )`}),class:"h-full opacity-60"},null,4)],4),e(q)!==1?(_(),N("div",en,[t(O,{type:"circle",percentage:e(q)*100,"show-indicator":!1,class:"!w-5 !h-5","stroke-width":16},null,8,["percentage"])])):V("",!0),p("span",tn,[t(T,{component:e(_t),size:"40"},null,8,["component"]),b(" "+d(e(m)("groupDetail.exps.expNoResult")),1)])],4)):(_(),N("div",{key:2,class:"!w-[160px] flex-none file-card relative shadow-2xl whitespace-pre-line !h-[160px] my-5 rounded text-center leading-4 text-xs flex items-center justify-center text-white",style:K({borderColor:e(f).dividerColor,backgroundColor:e(f).cardColor})},[p("div",on,[p("div",nn,"#"+d(e(o).exp_id),1)]),(C=e(o))!=null&&C.is_marked?(_(),N("div",sn,[t(T,{component:e(_e),color:"#fadb14",size:"20"},null,8,["component"])])):(_(),N("div",{key:1,class:"file-triangle",style:K({background:e(o).is_marked?"#fadb14":"rgba(255, 255, 255, 0.25)"})},null,4)),p("div",{class:"text-center absolute bottom-0 w-full left-0 text-xs",style:K({background:"rgba(255, 255, 255, 0.5 )",borderBottom:`4px solid ${e(pe)[e(o).status].color}`})},[p("div",{style:K({background:`rgba(255, 255, 255, ${e(q)} )`}),class:"h-full opacity-60"},null,4)],4),e(q)!==1?(_(),N("div",ln,[t(O,{type:"circle",percentage:e(q)*100,"show-indicator":!1,class:"!w-5 !h-5","stroke-width":16},null,8,["percentage"])])):V("",!0),p("span",rn,d(e(m)("common.loading")),1)],4)),p("div",an,[p("span",null," Exp "+d(e(o).exp_id)+"  -  ",1),p("span",null,d(e(o).title),1)]),p("div",cn,d(e(o).description),1),t(h),t(S,{style:{"max-height":"calc(100vh - 300px)"}},{default:n(()=>[p("div",dn,[t(ee,null,{label:n(()=>[b(d(e(m)("groupDetail.exps.status")),1)]),default:n(()=>{var l;return[(l=e(o))!=null&&l.status?(_(),U(E,{key:0,color:{color:e(pe)[e(o).status].color,textColor:"#fff"},bordered:!1,size:"small",class:"min-w-[100px] flex justify-center"},{default:n(()=>[b(d(e(m)(e(pe)[e(o).status].text)),1)]),_:1},8,["color"])):V("",!0)]}),_:1}),t(ee,null,{label:n(()=>[b(d(e(m)("groupDetail.exps.progress")),1)]),default:n(()=>[t(E,{size:"small",type:"info",class:"flex justify-center items-center min-w-[100px]"},{default:n(()=>{var l;return[b(d((l=e(o))==null?void 0:l.progress),1)]}),_:1})]),_:1}),t(ee,null,{label:n(()=>[b(d(e(m)("groupDetail.exps.source")),1)]),default:n(()=>[t(E,{size:"small",type:"info",class:"flex justify-center items-center min-w-[100px]"},{default:n(()=>{var l;return[b(d((l=e(o))==null?void 0:l.source),1)]}),_:1})]),_:1}),t(ee,null,{label:n(()=>[b(d(e(m)("groupDetail.exps.tpl")),1)]),default:n(()=>[t(E,{type:"warning",size:"small",class:"!break-all flex justify-center items-center min-w-[100px]"},{default:n(()=>{var l,r;return[p("span",un,d(((l=e(o))==null?void 0:l.template_name)==="-"?"No Template":(r=e(o))==null?void 0:r.template_name),1)]}),_:1})]),_:1}),t(ee,null,{label:n(()=>[b(d(e(m)("groupDetail.exps.createTime")),1)]),default:n(()=>{var l;return[b(" "+d((l=e(o))==null?void 0:l.create_time),1)]}),_:1}),t(ee,null,{label:n(()=>[b(d(e(m)("groupDetail.exps.creator")),1)]),default:n(()=>{var l;return[b(" "+d((l=e(o))==null?void 0:l.user_name),1)]}),_:1}),e(o).is_marked?(_(),N("div",{key:0,class:"flex justify-between items-center py-2 border-b",style:K({borderColor:e(f).dividerColor})},[p("div",pn,[t(T,{size:"18",color:"#fadb14",component:e(_e)},null,8,["component"]),p("span",_n,d(e(m)("groupDetail.exps.markNote")),1)]),p("div",fn,[t(y,{"line-clamp":2},{default:n(()=>[b(d(e(o).mark_note||"-"),1)]),_:1})])],4)):V("",!0)])]),_:1})])):V("",!0)}}}),xn=ce(mn,[["__scopeId","data-v-adddf89b"]]),vn={key:0,class:"flex items-center flex-col w-full"},gn={class:"text-lg font-bold w-full text-center"},hn={key:0,class:"mt-4 opacity-70 text-xs text-left w-full"},yn={class:"w-full flex flex-col"},bn=P({__name:"FolderInfo",setup(R){const g=Q(),{curFolderNode:a}=lt(g),{t:o}=te();return(f,m)=>{const v=se;return e(a)?(_(),N("div",vn,[m[0]||(m[0]=p("div",{class:"folder-icon"},null,-1)),p("div",gn,d(e(a).exp_folder_name),1),e(a).exp_folder_description?(_(),N("div",hn,d(e(a).exp_folder_description),1)):V("",!0),t(v),p("div",yn,[t(ee,null,{label:n(()=>[b(d(e(o)("groupDetail.exps.expFolderId")),1)]),default:n(()=>[b(" "+d(e(a).exp_folder_id),1)]),_:1}),t(ee,null,{label:n(()=>[b(d(e(o)("groupDetail.exps.createTime")),1)]),default:n(()=>[b(" "+d(e(Ne)(e(a).create_time)),1)]),_:1}),t(ee,null,{label:n(()=>[b(d(e(o)("groupDetail.exps.updateTime")),1)]),default:n(()=>[b(" "+d(e(Ne)(e(a).update_time)||"-"),1)]),_:1}),t(ee,null,{label:n(()=>[b(d(e(o)("groupDetail.exps.creator")),1)]),default:n(()=>[b(" "+d(e(a).create_user_name),1)]),_:1})])])):V("",!0)}}}),kn=ce(bn,[["__scopeId","data-v-1dcd9b41"]]),wn={},En={class:"flex items-center gap-1"},Cn={class:"opacity-70"};function $n(R,g){return _(),N("div",En,[p("span",Cn,[$e(R.$slots,"label"),g[0]||(g[0]=b(":  "))]),p("span",null,[$e(R.$slots,"default")])])}const Ce=ce(wn,[["render",$n]]),Nn={key:0},Dn={class:"flex justify-between items-center text-xs px-2"},Sn={class:"flex items-center gap-10"},Fn={key:0},Ln=P({__name:"InfoBar",setup(R){const g=Q(),{t:a}=te(),o=J(()=>g.curNode);return(f,m)=>{const v=se,k=ze;return e(X)(e(o))?V("",!0):(_(),N("div",Nn,[t(v,{class:"!mt-0 !mb-2"}),p("div",Dn,[p("div",Sn,[e(o).create_time?(_(),U(Ce,{key:0},{label:n(()=>[b(d(e(a)("groupDetail.exps.createTime")),1)]),default:n(()=>[b(" "+d(e(Ne)(e(o).create_time)),1)]),_:1})):V("",!0),e(o).update_time?(_(),U(Ce,{key:1},{label:n(()=>[b(d(e(a)("groupDetail.exps.updateTime")),1)]),default:n(()=>[b(" "+d(e(Ne)(e(o).update_time)),1)]),_:1})):V("",!0),e(o).create_user_name?(_(),U(Ce,{key:2},{label:n(()=>[b(d(e(a)("groupDetail.exps.creator")),1)]),default:n(()=>[b(" "+d(e(o).create_user_name||"-"),1)]),_:1})):V("",!0)]),e(g).curExpCounts?(_(),N("div",Fn,[t(Ce,null,{label:n(()=>[b(d(e(a)("groupDetail.exps.expCount")),1)]),default:n(()=>[t(k,{type:"primary",round:"",size:"tiny"},{default:n(()=>[b(d(e(g).curExpCounts),1)]),_:1})]),_:1})])):V("",!0)])]))}}}),In={class:"flex"},Mn={class:"flex-1"},Tn={class:"flex w-[320px]",style:{height:"calc(100vh - 245px)"}},Rn={key:2,class:"w-full flex justify-center items-center"},jn=P({__name:"ExperimentList",setup(R){const{t:g}=te(),a=Q(),o=D(),f=()=>{var m;(m=o.value)==null||m.loadMore()};return(m,v)=>{const k=Pt,w=se,q=Ze,I=Le;return _(),U(I,{show:e(a).loadingCurNode},{default:n(()=>[t(go),p("div",In,[p("div",Mn,[t(k,{style:{height:"calc(100vh - 245px)"},distance:50,onLoad:f},{default:n(()=>[t(No),t(Vo,{ref_key:"expFilesRef",ref:o},null,512)]),_:1}),t(Ln)]),p("div",Tn,[t(w,{vertical:"",class:"!h-full !mr-5 !ml-0"}),e(a).curExpNode?(_(),U(xn,{key:0})):e(a).curFolderNode?(_(),U(kn,{key:1})):(_(),N("div",Rn,[t(q,{description:e(g)("groupDetail.exps.expInfoEmpty")},null,8,["description"])]))])])]),_:1},8,["show"])}}}),cs=ce(jn,[["__scopeId","data-v-f5aa4e5b"]]);export{cs as default};
