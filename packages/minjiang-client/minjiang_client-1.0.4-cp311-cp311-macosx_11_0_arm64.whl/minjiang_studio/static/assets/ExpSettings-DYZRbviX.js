import{u as B}from"./exp-BmX6R77-.js";import{d as N,A as P,e as U,f as t,af as R,i as r,w as p,a7 as m,a8 as i,l as a,b$ as u,au as j,s as D,t as O,p as J,c0 as L,S as z,n as C,m as S,a9 as A,aZ as M,C as Z,r as G,b as H,L as w,aT as K,v as Q,k as W,aj as X,h as Y,V as g,ak as ee}from"./index-BHd9xypC.js";import{i as ae}from"./json-editor-vue-DXYCBDpP.js";import{N as le}from"./InputNumber-Bb1z8BQ5.js";import{N as oe}from"./Switch-t-7rbxnR.js";import{_ as te}from"./Cascader-DKDMVqFv.js";import"./index.browser-OxPLOBIU.js";import"./Checkbox-DKKtBMeF.js";const ne=N({__name:"DynamicFormItem",props:{paramsCfg:{},formValue:{},pathPrefix:{},disabled:{type:Boolean}},setup(q){const _=P();return(l,d)=>{const y=j,f=J,c=C,n=le,V=oe,h=S;return t(!0),U(A,null,R(l.paramsCfg,(e,s)=>(t(),U("div",{key:s},[r(h,{label:e.dtype===a(u).text?"":e.title,path:`${l.pathPrefix?l.pathPrefix+".":""}${e.field}`},{default:p(()=>[e.dtype===a(u).text?(t(),m(y,{key:0,class:"w-full",type:"info","show-icon":!1},{default:p(()=>[D(O(e==null?void 0:e.title),1)]),_:2},1024)):i("",!0),e.dtype===a(u).enum&&e.options?(t(),m(f,{key:1,value:l.formValue[e.field],"onUpdate:value":o=>l.formValue[e.field]=o,options:a(L)(e.options),clearable:"",filterable:"",multiple:e.multi_choose},null,8,["value","onUpdate:value","options","multiple"])):i("",!0),e.dtype===a(u).dict||e.dtype===a(u).list?(t(),m(a(ae),{key:2,class:z(["w-full",[a(_).baseColor==="#000"?"jse-theme-dark":""]]),modelValue:l.formValue[e.field],"onUpdate:modelValue":o=>l.formValue[e.field]=o,mode:"text"},null,8,["class","modelValue","onUpdate:modelValue"])):i("",!0),e.dtype===a(u).str&&e.multi_line?(t(),m(c,{key:3,value:l.formValue[e.field],"onUpdate:value":o=>l.formValue[e.field]=o,clearable:"",maxlength:e.max_length,type:"textarea"},null,8,["value","onUpdate:value","maxlength"])):e.dtype===a(u).str?(t(),m(c,{key:4,value:l.formValue[e.field],"onUpdate:value":o=>l.formValue[e.field]=o,clearable:"",maxlength:e.max_length},null,8,["value","onUpdate:value","maxlength"])):i("",!0),e.dtype===a(u).int?(t(),m(n,{key:5,min:e.min,max:e.max,precision:0,class:"w-full",value:l.formValue[e.field],"onUpdate:value":o=>l.formValue[e.field]=o},null,8,["min","max","value","onUpdate:value"])):i("",!0),e.dtype===a(u).float?(t(),m(n,{key:6,min:e.min,max:e.max,value:l.formValue[e.field],"onUpdate:value":o=>l.formValue[e.field]=o,class:"w-full"},null,8,["min","max","value","onUpdate:value"])):i("",!0),e.dtype===a(u).bool?(t(),m(V,{key:7,value:l.formValue[e.field],"onUpdate:value":o=>l.formValue[e.field]=o},null,8,["value","onUpdate:value"])):i("",!0)]),_:2},1032,["label","path"])]))),128)}}}),fe=N({__name:"ExpSettings",setup(q){const _=B(),{expOptions:l,running:d,showPlotParamsModal:y,expFolderId:f}=M(_);Z();const c=G(),{t:n}=H(),V=w(()=>{const e={title:{required:!0,message:n("common.required")},desc:{required:!0,message:n("common.required")},options:{required:!0,message:n("common.required")}};return Object.keys(l.value||[]).forEach(s=>{e[s]={required:!0,message:n("common.required")}}),e}),h=w(()=>{const e=JSON.parse(JSON.stringify(_.expFolderTree||[]));return K(e),e});return(e,s)=>{const o=C,x=S,I=te,T=X,E=W,F=Q,$=ee;return t(),m($,{show:a(y)},{default:p(()=>[r(F,{style:{width:"800px"}},{default:p(()=>{var b,k;return[r(E,{model:a(d).formValue,rules:a(V),ref_key:"formRef",ref:c,class:"min-w-[340px]",disabled:!!((k=(b=a(_))==null?void 0:b.expInfo)!=null&&k.exp_id)},{default:p(()=>[r(T,{style:{"max-height":"calc(100vh - 300px)","padding-right":"12px"}},{default:p(()=>[Y("div",null,[r(x,{label:a(n)("expInfo.expTitle"),path:"title"},{default:p(()=>[r(o,{value:a(d).formValue.title,"onUpdate:value":s[0]||(s[0]=v=>a(d).formValue.title=v)},null,8,["value"])]),_:1},8,["label"]),r(x,{label:a(n)("expInfo.expDesc"),path:"desc"},{default:p(()=>[r(o,{type:"textarea",value:a(d).formValue.desc,"onUpdate:value":s[1]||(s[1]=v=>a(d).formValue.desc=v)},null,8,["value"])]),_:1},8,["label"]),r(x,{label:a(n)("expInfo.expFolder")},{default:p(()=>[r(I,{value:a(f),"onUpdate:value":s[2]||(s[2]=v=>g(f)?f.value=v:null),options:a(h),"value-field":"key","check-strategy":"child",cascade:!1},null,8,["value","options"])]),_:1},8,["label"])]),a(l)?(t(),m(ne,{key:0,paramsCfg:a(l),"form-value":a(d).formValue},null,8,["paramsCfg","form-value"])):i("",!0)]),_:1})]),_:1},8,["model","rules","disabled"])]}),_:1})]),_:1},8,["show"])}}});export{fe as default};
