import{y as Sa,p as Ht,F as _t,e as o,v as Ct,l as F,g as e,m as h,H as k,b as ka,i as St,f as S,k as d,w as R,t as x,c as kt,n as p,r as v,S as j,Q as it,I as _,J as ie,U as be,Z as wt,Y as U,R as Pt,N as ue,_ as se,G as $}from"../chunks/B2f41zB7.js";import{_ as Ia}from"../chunks/PPVm8Dsz.js";import{w as It,h as Ra,f as Ea}from"../chunks/BhLg-KJu.js";import{D as Da}from"../chunks/DlkK8I-2.js";import{P as Ta}from"../chunks/Cs5iii9O.js";const La=()=>({title:"Lithology & Porosity",subtitle:"Lithology and porosity estimations for the selected well"}),ro=Object.freeze(Object.defineProperty({__proto__:null,load:La},Symbol.toStringTag,{value:"Module"}));var Oa=S('<div class="text-sm text-red-500 mb-2"> </div>'),Ma=S('<div class="text-xs text-green-600 mt-2"> </div>'),Va=S('<div class="text-xs text-muted-foreground mt-2"> </div>'),ja=S('<div class="w-full h-[220px]"></div>'),Aa=S('<div class="flex items-center justify-center h-full text-sm text-gray-500">No lithology data available. Click "Estimate Lithology" first.</div>'),Ba=S('<div class="text-xs text-green-600 mt-2"> </div>'),Fa=S('<div class="w-full h-[220px]"></div>'),$a=S('<div class="flex items-center justify-center h-full text-sm text-gray-500">No porosity data available. Click "Estimate Porosity" first.</div>'),za=S('<div class="text-xs text-green-600 mt-2"> </div>'),qa=S("<div><strong>Calculated PHIT:</strong> </div>"),Ya=S("<div><strong>Calculated PHIT:</strong> No data</div>"),Ua=S('<div><strong>Core Porosity (CPORE):</strong> <span class="inline-block w-2 h-2 bg-red-600 rounded-full"></span> </div>'),Wa=S('<div class="text-gray-500">No core porosity data (CPORE) found</div>'),Ja=S('<div class="bg-panel rounded p-3"><div class="grid grid-cols-2 gap-2 mb-3"><div><label class="text-xs" for="dry-sand-nphi">Dry sand (NPHI)</label> <input id="dry-sand-nphi" class="input" type="number" step="any"/></div> <div><label class="text-xs" for="dry-sand-rhob">Dry sand (RHOB)</label> <input id="dry-sand-rhob" class="input" type="number" step="any"/></div> <div><label class="text-xs" for="dry-clay-nphi">Dry clay (NPHI)</label> <input id="dry-clay-nphi" class="input" type="number" step="any"/></div> <div><label class="text-xs" for="dry-clay-rhob">Dry clay (RHOB)</label> <input id="dry-clay-rhob" class="input" type="number" step="any"/></div> <div><label class="text-xs" for="fluid-nphi">Fluid (NPHI)</label> <input id="fluid-nphi" class="input" type="number" step="any"/></div> <div><label class="text-xs" for="fluid-rhob">Fluid (RHOB)</label> <input id="fluid-rhob" class="input" type="number" step="any"/></div> <div><label class="text-xs" for="silt-line-angle">Silt line angle</label> <input id="silt-line-angle" class="input" type="number" step="1"/></div></div> <!> <div class="space-y-3"><div><div><div class="font-medium text-sm mb-1">NPHI - RHOB Crossplot</div> <div class="bg-surface rounded p-2"><div class="w-full max-w-[600px] h-[500px] mx-auto"></div></div></div> <div class="px-2 py-2 border-t border-border/50 mt-2"><div class="font-medium text-sm mb-3 mt-4">Hydrocarbon Correction</div> <div class="bg-surface rounded p-2"><div class="grid grid-cols-2 gap-2 mb-3"><div><label class="text-xs" for="hc-corr-angle">HC Correction Angle (Â°)</label> <input id="hc-corr-angle" class="input" type="number" step="0.1"/></div> <div><label class="text-xs" for="hc-buffer">HC Buffer</label> <input id="hc-buffer" class="input" type="number" step="0.001"/></div></div> <div class="flex gap-2 mb-3"><button class="btn px-3 py-1 text-sm font-medium rounded-md bg-blue-600 text-white hover:bg-blue-700 shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-blue-500" aria-label="Apply HC correction" title="Apply hydrocarbon correction to NPHI/RHOB data"><!></button> <button class="btn px-3 py-1 text-sm font-medium rounded-md bg-emerald-700 text-white hover:bg-emerald-600 shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-emerald-600" aria-label="Save HC corrected data" title="Save corrected NPHI_HC and RHOB_HC to database"><!></button></div> <div class="flex items-center"><input type="checkbox" id="use-hc-corrected" class="mr-2"/> <label for="use-hc-corrected">Use HC corrected NPHI/RHOB for lithology and porosity estimation</label></div> <!> <!></div></div> <div class="px-2 py-2 border-t border-border/50 mt-2"><div class="font-medium text-sm mb-1">Lithology (VSAND / VSILT / VCLAY)</div> <div class="bg-surface rounded p-2"><button class="btn px-3 py-1 text-sm font-semibold rounded-md bg-gray-900 text-white hover:bg-gray-800 shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-gray-700" aria-label="Run lithology classification" title="Run lithology classification">Estimate Lithology</button> <button class="btn px-3 py-1 text-sm font-medium rounded-md bg-emerald-700 text-white hover:bg-emerald-600 shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-emerald-600" aria-label="Save lithology" title="Save lithology results to database"><!></button> <div class="h-[220px] w-full overflow-hidden"><!></div> <!></div></div> <div><div class="font-medium text-sm mb-1">Porosity (PHIT)</div> <div class="bg-surface rounded p-2"><button class="btn px-3 py-1 text-sm font-medium rounded-md bg-gray-800 text-gray-100 hover:bg-gray-700 shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-gray-600" aria-label="Estimate porosity" title="Estimate porosity">Estimate Porosity</button> <button class="btn px-3 py-1 text-sm font-medium rounded-md bg-emerald-700 text-white hover:bg-emerald-600 shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-emerald-600" aria-label="Save porosity" title="Save porosity results to database"><!></button> <div class="flex items-center ml-2"><input type="checkbox" id="depth-matching-poro" class="mr-2"/> <label for="depth-matching-poro">Depth Matching</label></div> <div class="h-[220px] w-full overflow-hidden"><!></div> <!></div> <div class="text-xs text-muted-foreground space-y-1 mt-2"><!> <!></div></div></div></div></div>'),Ka=S('<div class="text-sm">Select a well.</div>'),Za=S('<div class="ws-lithology"><div class="mb-2"><div class="text-sm mb-2">Tools for lithology and porosity estimations.</div></div> <!> <!></div>');function Ga(je,ye){Ht(ye,!1);const W=h(),L=h(),z=h(),A=h(),J=h();let P=_t(ye,"projectId",8),C=_t(ye,"wellName",8);const q="http://localhost:6312";let O=h({enabled:!1,minDepth:null,maxDepth:null}),ge=h({enabled:!1,zones:[]}),Y=h([]),g=h(!1),b=h(null),D=h(null),xe=h(!1),Ne=h(!1),_e=h(null),we=h(null),K=h(-.02),Z=h(2.65),G=h(.35),Q=h(2.71),X=h(1),ee=h(1),te=h(117),pe=h(!1),Ae=h(50),Be=h(.01),B=h(!1),I=h([]),Fe=h(!1),Pe=h(!1),He=h(null),Ce=h([]),De=[],Se=[],ae=h([]),E=h([]),M=h([]),ne=h(null),$e=null,oe=h(null),re=h(null);async function ze(){if(!$e){const t=await Ia(()=>import("../chunks/BJMC0GYJ.js").then(r=>r.p),[],import.meta.url);$e=t?.default??t}return $e}function Rt(t,r){const[[s,i],[u,l]]=t,[[f,c],[N,m]]=r,H=(s-u)*(c-m)-(i-l)*(f-N);if(Math.abs(H)<1e-10)return null;const y=((s-f)*(c-m)-(i-c)*(f-N))/H,T=-((s-u)*(i-c)-(i-l)*(s-f))/H;return y>=0&&y<=1&&T>=0&&T<=1?[s+y*(u-s),i+y*(l-i)]:[s+y*(u-s),i+y*(l-i)]}async function st(){if(!e(ne))return;const t=await ze(),r=[Number(e(K)),Number(e(Z))],s=[Number(e(G)),Number(e(Q))],i=[Number(e(X)),Number(e(ee))],u=[Number(e(W)),2.68],l=[];let f=[],c=[];if(e(Ce)&&e(Ce).length>0&&(f=Te(),f.length>0))for(let m=0;m<f.length;m++){const H=[f[m].nphi,f[m].rhob],y=Rt([r,s],[i,H]);y&&c.push(y)}f.length>0&&l.push({x:f.map(m=>m.nphi),y:f.map(m=>m.rhob),mode:"markers",type:"scatter",name:"Data",marker:{color:Array.from({length:f.length},(m,H)=>H),colorscale:"Rainbow",showscale:!1,size:6},hovertemplate:"NPHI: %{x}<br>RHOB: %{y}<extra></extra>"}),e(B)&&e(I)&&e(I).length>0&&l.push({x:e(I).map(m=>m.nphi),y:e(I).map(m=>m.rhob),mode:"markers",type:"scatter",name:"HC Corrected Data",marker:{color:"red",size:6,symbol:"diamond",opacity:.7},hovertemplate:"NPHI (HC): %{x}<br>RHOB (HC): %{y}<extra></extra>"}),l.push({x:[i[0],r[0]],y:[i[1],r[1]],mode:"lines",type:"scatter",name:"Mineral 1 Line",line:{color:"blue",width:2},showlegend:!0}),l.push({x:[i[0],s[0]],y:[i[1],s[1]],mode:"lines",type:"scatter",name:"Clay Line",line:{color:"gray",width:2},showlegend:!0}),l.push({x:[r[0],s[0]],y:[r[1],s[1]],mode:"lines",type:"scatter",name:"Rock Line",line:{color:"black",width:2},showlegend:!0}),l.push({x:[i[0],u[0]],y:[i[1],u[1]],mode:"lines",type:"scatter",name:"Silt Line",line:{color:"green",width:2},showlegend:!0}),c.length>0&&l.push({x:c.map(m=>m[0]),y:c.map(m=>m[1]),mode:"markers",type:"scatter",name:"Projected Point",marker:{color:"purple",size:4},showlegend:!0}),l.push({x:[r[0]],y:[r[1]],mode:"markers",type:"scatter",name:`Mineral Point (${r[0]}, ${r[1]})`,marker:{color:"yellow",size:9,line:{color:"black",width:1}},showlegend:!0}),l.push({x:[s[0]],y:[s[1]],mode:"markers",type:"scatter",name:`Dry Clay (${s[0]}, ${s[1]})`,marker:{color:"black",size:9},showlegend:!0}),l.push({x:[u[0]],y:[u[1]],mode:"markers",type:"scatter",name:"Dry Silt Point",marker:{color:"orange",size:8},showlegend:!0}),l.push({x:[i[0]],y:[i[1]],mode:"markers",type:"scatter",name:`Fluid (${i[0]}, ${i[1]})`,marker:{color:"blue",size:9},showlegend:!0});const N={title:"NPHI-RHOB Crossplot",xaxis:{title:"NPHI",range:[-.1,1],tickformat:".2f"},yaxis:{title:"RHOB",autorange:!1,range:[3,0],tickformat:".2f"},legend:{orientation:"v",yanchor:"top",y:.99,xanchor:"left",x:.01,bgcolor:"rgba(255,255,255,0.8)"},template:"plotly_white",margin:{l:40,r:10,t:40,b:40},height:500,autosize:!0,hovermode:"closest"};try{t.react(e(ne),l,N,{responsive:!0})}catch{t.newPlot(e(ne),l,N,{responsive:!0})}}async function Et(){if(!e(oe))return;const t=await ze();if(!e(L)||e(L).length===0){t.purge(e(oe));return}const r=e(L).map(c=>c.x),s=e(L).map(c=>c.vclay),i=e(L).map(c=>c.vsilt),u=e(L).map(c=>c.vsand),l=[{x:r,y:s,name:"VCLAY",mode:"lines",line:{color:"#949494"},fill:"tozeroy"},{x:r,y:i,name:"VSILT",mode:"lines",line:{color:"#FE9800"},fill:"tonexty"},{x:r,y:u,name:"VSAND",mode:"lines",line:{color:"#F6F674"},fill:"tonexty"}],f={height:220,margin:{l:60,r:20,t:20,b:40},dragmode:"zoom",xaxis:{title:"Depth",tickformat:",.0f",fixedrange:!1},yaxis:{title:"Volume Fraction",range:[0,1],tickformat:".1f",fixedrange:!0},showlegend:!1};try{t.react(e(oe),l,f,{responsive:!0})}catch{t.newPlot(e(oe),l,f,{responsive:!0})}}async function Dt(){if(!e(re))return;const t=await ze();if((!e(z)||e(z).length===0)&&(!e(J)||e(J).length===0)){t.purge(e(re));return}const r=[];if(e(z)&&e(z).length>0){const i=e(z).map(l=>l.x),u=e(z).map(l=>l.y);r.push({x:i,y:u,name:"PHIT",mode:"lines",line:{color:"#000000",width:2},xaxis:"x",yaxis:"y"})}if(e(A)&&e(A).length>0){const i=e(A).map(l=>l.x),u=e(A).map(l=>l.y);r.push({x:i,y:u,name:"PHIE",mode:"lines",line:{color:"#2563eb",width:1,dash:"dot"},fill:"tozeroy",fillcolor:"rgba(37,99,235,0.3)",xaxis:"x",yaxis:"y"})}e(J)&&e(J).length>0&&r.push({x:e(J).map(i=>i.x),y:e(J).map(i=>i.y),name:"CPORE",mode:"markers",marker:{color:"#dc2626",size:8,line:{color:"white",width:1}},xaxis:e(pe)?"x2":"x",yaxis:"y"});const s={height:220,margin:{l:60,r:20,t:50,b:40},dragmode:"zoom",xaxis:{title:"Log Depth",titlefont:{color:"#2563eb"},tickfont:{color:"#2563eb"},tickformat:",.0f",side:"bottom"},xaxis2:{title:"Core Depth",titlefont:{color:"#dc2626"},tickfont:{color:"#dc2626"},tickformat:",.0f",overlaying:"x",side:"top",fixedrange:e(pe)},yaxis:{title:"Porosity (fraction)",range:[0,.5],tickformat:".2f",fixedrange:!0},showlegend:!0,legend:{x:0,y:1,bgcolor:"rgba(255,255,255,0.8)",bordercolor:"rgba(0,0,0,0.2)",borderwidth:1}};try{t.react(e(re),r,s,{responsive:!0})}catch{t.newPlot(e(re),r,s,{responsive:!0})}}async function Tt(){if(!(!P()||!C())){o(g,!0),o(b,null);try{const t=await fetch(`${q}/quick_pp/database/projects/${P()}/wells/${encodeURIComponent(String(C()))}/merged`);if(!t.ok)throw new Error(await t.text());const r=await t.json(),s=r&&r.data?r.data:r;if(!Array.isArray(s))throw new Error("Unexpected data format from backend");o(Ce,s)}catch(t){console.warn("Failed to load well data",t),o(b,String(t?.message??t))}finally{o(g,!1)}}}function Te(){const t=e(Y),r=[];if(e(Fe)&&e(I)&&e(I).length>0)return e(I);for(const s of t){const i=Number(s.nphi??s.NPHI??s.Nphi??NaN),u=Number(s.rhob??s.RHOB??s.Rhob??NaN);!isNaN(i)&&!isNaN(u)&&r.push({nphi:i,rhob:u})}return r}function Lt(){const t=e(Y),r=[];for(const s of t){const i=Number(s.depth??s.DEPTH??NaN),u=Number(s.cpore??s.CPORE??s.Cpore??s.KPORE??s.kpore??NaN);!isNaN(i)&&!isNaN(u)&&u>0&&r.push({depth:i,CPORE:u})}return r.sort((s,i)=>s.depth-i.depth)}async function Ot(){const t=Te();if(!t.length){o(b,"No NPHI/RHOB data available in well rows");return}o(g,!0),o(b,null);try{const r={dry_sand_point:[Number(e(K)),Number(e(Z))],dry_clay_point:[Number(e(G)),Number(e(Q))],water_point:[Number(e(X)),Number(e(ee))],corr_angle:Number(e(Ae)),buffer:Number(e(Be)),data:t},s=await fetch(`${q}/quick_pp/qaqc/hc_correction`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!s.ok)throw new Error(await s.text());o(I,await s.json()),o(B,!0),o(b,null),st()}catch(r){console.warn("HC correction error",r),o(b,String(r?.message??r)),o(B,!1)}finally{o(g,!1)}}async function Mt(){if(!P()||!C()){o(b,"Project and well must be selected before saving");return}if(!e(I)||e(I).length===0){o(b,"No HC corrected data to save");return}o(Pe,!0),o(He,null),o(b,null);try{const t=e(Y),r=[];let s=0;for(const c of t){const N=Number(c.nphi??c.NPHI??c.Nphi??NaN),m=Number(c.rhob??c.RHOB??c.Rhob??NaN);if(!(!isNaN(N)&&!isNaN(m)))continue;const y=e(I)[s++]??{nphi:N,rhob:m},T={DEPTH:Number(c.depth??c.DEPTH??NaN),NPHI_HC:Number(y.nphi??N),RHOB_HC:Number(y.rhob??m)};r.push(T)}if(!r.length)throw new Error("No rows prepared for save");const i={data:r},u=`${q}/quick_pp/database/projects/${P()}/wells/${encodeURIComponent(String(C()))}/data`,l=await fetch(u,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!l.ok)throw new Error(await l.text());const f=await l.json().catch(()=>null);o(He,f&&f.message?String(f.message):"HC corrected data saved");try{window.dispatchEvent(new CustomEvent("qpp:data-updated",{detail:{projectId:P(),wellName:C(),kind:"hc-correction"}}))}catch{}}catch(t){console.warn("Save HC correction error",t),o(He,null),o(b,String(t?.message??t))}finally{o(Pe,!1)}}async function Vt(){const t=Te();if(!t.length){o(b,"No NPHI/RHOB data available in well rows");return}o(g,!0),o(b,null);try{const r={dry_sand_point:[Number(e(K)),Number(e(Z))],fluid_point:[Number(e(X)),Number(e(ee))],dry_clay_point:[Number(e(G)),Number(e(Q))],method:"default",silt_line_angle:Number(e(te)),data:t},s=await fetch(`${q}/quick_pp/lithology/ssc`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!s.ok)throw new Error(await s.text());De=await s.json(),Ft()}catch(r){console.warn("SSC error",r),o(b,String(r?.message??r))}finally{o(g,!1)}}async function jt(){if(!P()||!C()){o(b,"Project and well must be selected before saving");return}if(!De||De.length===0){o(b,"No lithology results to save");return}o(xe,!0),o(_e,null),o(b,null);try{const t=e(ae).map(l=>({DEPTH:l.depth,VSAND:Math.min(Math.max(Number(l.VSAND??0),0),1),VSILT:Math.min(Math.max(Number(l.VSILT??0),0),1),VCLAY:Math.min(Math.max(Number(l.VCLAY??0),0),1)}));if(!t.length)throw new Error("No rows prepared for save");const r={data:t},s=`${q}/quick_pp/database/projects/${P()}/wells/${encodeURIComponent(String(C()))}/data`,i=await fetch(s,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!i.ok)throw new Error(await i.text());const u=await i.json().catch(()=>null);o(_e,u&&u.message?String(u.message):"Lithology saved");try{window.dispatchEvent(new CustomEvent("qpp:data-updated",{detail:{projectId:P(),wellName:C(),kind:"lithology"}}))}catch{}}catch(t){console.warn("Save lithology error",t),o(_e,null),o(b,String(t?.message??t))}finally{o(xe,!1)}}async function At(){const t=Te();if(!t.length){o(b,"No NPHI/RHOB data available in well rows");return}o(g,!0),o(b,null);try{const r={dry_sand_point:[Number(e(K)),Number(e(Z))],fluid_point:[Number(e(X)),Number(e(ee))],dry_clay_point:[Number(e(G)),Number(e(Q))],silt_line_angle:Number(e(te)),method:"ssc",data:t},s=await fetch(`${q}/quick_pp/porosity/neu_den`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!s.ok)throw new Error(await s.text());Se=await s.json(),$t()}catch(r){console.warn("Poro error",r),o(b,String(r?.message??r))}finally{o(g,!1)}}async function Bt(){if(!P()||!C()){o(b,"Project and well must be selected before saving");return}if(!Se||Se.length===0){o(b,"No porosity results to save");return}o(Ne,!0),o(we,null),o(b,null);try{const t=e(Y),r=[];let s=0;for(const c of t){const N=Number(c.nphi??c.NPHI??c.Nphi??NaN),m=Number(c.rhob??c.RHOB??c.Rhob??NaN);if(!(!isNaN(N)&&!isNaN(m)))continue;const y=Se[s++]??{},T=Math.min(Math.max(Number(y.PHIT??0),0),1),le=y.PHIE!==void 0?Number(y.PHIE):y.PHIE??null,ve=le!==null&&!isNaN(Number(le))?Math.min(Math.max(Number(le),0),1):null,ke={DEPTH:Number(c.depth??c.DEPTH??NaN),PHIT:T,PHIE:ve};ve!==null&&(ke.PHIE=ve),r.push(ke)}if(!r.length)throw new Error("No rows prepared for save");const i={data:r},u=`${q}/quick_pp/database/projects/${P()}/wells/${encodeURIComponent(String(C()))}/data`,l=await fetch(u,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!l.ok)throw new Error(await l.text());const f=await l.json().catch(()=>null);o(we,f&&f.message?String(f.message):"Porosity saved");try{window.dispatchEvent(new CustomEvent("qpp:data-updated",{detail:{projectId:P(),wellName:C(),kind:"porosity"}}))}catch{}}catch(t){console.warn("Save porosity error",t),o(we,null),o(b,String(t?.message??t))}finally{o(Ne,!1)}}function Ft(){const t=e(Y),r=[];let s=0;for(const i of t){const u=Number(i.depth??i.DEPTH??NaN);if(isNaN(u))continue;const l=Number(i.nphi??i.NPHI??i.Nphi??NaN),f=Number(i.rhob??i.RHOB??i.Rhob??NaN);if(!isNaN(l)&&!isNaN(f)){const N=De[s++]??{VSAND:null,VSILT:null,VCLAY:null},m=Math.min(Math.max(Number(N.VSAND??0),0),1),H=Math.min(Math.max(Number(N.VSILT??0),0),1),y=Math.min(Math.max(Number(N.VCLAY??0),0),1);r.push({depth:u,VSAND:m,VSILT:H,VCLAY:y})}}r.sort((i,u)=>i.depth-u.depth),o(ae,r)}function $t(){const t=e(Y),r=[];let s=0;for(const i of t){const u=Number(i.depth??i.DEPTH??NaN);if(isNaN(u))continue;const l=Number(i.nphi??i.NPHI??i.Nphi??NaN),f=Number(i.rhob??i.RHOB??i.Rhob??NaN);if(!isNaN(l)&&!isNaN(f)){const N=Se[s++]??{PHIT:null,PHIE:null},m=Math.min(Math.max(Number(N.PHIT??0),0),1),H=N.PHIE!==void 0?Number(N.PHIE):N.PHIE??null,y=H!==null&&!isNaN(Number(H))?Math.min(Math.max(Number(H),0),1):null,T={depth:u,PHIT:m};y!==null&&(T.PHIE=y),r.push(T)}}r.sort((i,u)=>i.depth-u.depth),o(E,r),o(M,Lt())}const zt=It.subscribe(t=>{t?.depthFilter&&o(O,{...t.depthFilter}),t?.zoneFilter&&o(ge,{...t.zoneFilter})});Ct(()=>{zt()});let qe=h("");F(()=>e(te),()=>{o(W,1-1.68*Math.tan((e(te)-90)*Math.PI/180))}),F(()=>e(ae),()=>{o(L,e(ae).map(t=>({x:t.depth,vclay:t.VCLAY,vsilt:t.VCLAY+t.VSILT,vsand:t.VCLAY+t.VSILT+t.VSAND})))}),F(()=>e(E),()=>{o(z,e(E).map(t=>({x:t.depth,y:t.PHIT})))}),F(()=>e(E),()=>{o(A,e(E).map(t=>({x:t.depth,y:t.PHIE})).filter(t=>t.y!==void 0&&t.y!==null&&!isNaN(Number(t.y))))}),F(()=>e(M),()=>{o(J,e(M).map(t=>({x:t.depth,y:t.CPORE})))}),F(()=>(e(Ce),e(O),e(ge)),()=>{o(Y,(()=>{let t=e(Ce)||[];return t=Ra(t,e(O)),t=Ea(t,e(ge)),t})())}),F(()=>(k(P()),k(C()),e(qe)),()=>{const t=`${P()}_${C()}`;P()&&C()&&t!==e(qe)&&(o(qe,t),Tt())}),F(()=>(e(ne),e(Y),e(K),e(Z),e(G),e(Q),e(W),e(X),e(ee),e(te),e(O),e(ge),e(B),e(I),e(D)),()=>{e(ne)&&(e(Y)||e(K)!==void 0||e(Z)!==void 0||e(G)!==void 0||e(Q)!==void 0||e(W)!==void 0||e(X)!==void 0||e(ee)!==void 0||e(te)!==void 0||e(O)||e(ge)||e(B)||e(I))&&(e(D)&&clearTimeout(e(D)),o(D,setTimeout(()=>st(),150)))}),F(()=>(e(oe),e(ae),e(O),e(D)),()=>{e(oe)&&(e(ae)||e(O))&&(e(D)&&clearTimeout(e(D)),o(D,setTimeout(()=>Et(),150)))}),F(()=>(e(re),e(E),e(M),e(O),e(pe),e(D)),()=>{e(re)&&(e(E)||e(M)||e(O)||e(pe)!==void 0)&&(e(D)&&clearTimeout(e(D)),o(D,setTimeout(()=>Dt(),150)))}),ka(),St();var Ye=Za(),nt=d(p(Ye),2);Da(nt,{});var qt=d(nt,2);{var Yt=t=>{var r=Ja(),s=p(r),i=p(s),u=d(p(i),2);j(u),v(i);var l=d(i,2),f=d(p(l),2);j(f),v(l);var c=d(l,2),N=d(p(c),2);j(N),v(c);var m=d(c,2),H=d(p(m),2);j(H),v(m);var y=d(m,2),T=d(p(y),2);j(T),v(y);var le=d(y,2),ve=d(p(le),2);j(ve),v(le);var ke=d(le,2),lt=d(p(ke),2);j(lt),v(ke),v(s);var dt=d(s,2);{var Wt=a=>{var n=Oa(),w=p(n);v(n),ie(()=>ue(w,`Error: ${e(b)??""}`)),x(a,n)};R(dt,a=>{e(b)&&a(Wt)})}var ct=d(dt,2),ut=p(ct),Ue=p(ut),pt=d(p(Ue),2),Jt=p(pt);it(Jt,a=>o(ne,a),()=>e(ne)),v(pt),v(Ue);var We=d(Ue,2),vt=d(p(We),2),Je=p(vt),Ke=p(Je),ht=d(p(Ke),2);j(ht),v(Ke);var mt=d(Ke,2),ft=d(p(mt),2);j(ft),v(mt),v(Je);var Ze=d(Je,2),he=p(Ze);he.__click=Ot;var Kt=p(he);{var Zt=a=>{var n=se("Applying...");x(a,n)},Gt=a=>{var n=se("Apply HC Correction");x(a,n)};R(Kt,a=>{e(g)?a(Zt):a(Gt,!1)})}v(he);var Ie=d(he,2);Ie.__click=Mt;var Qt=p(Ie);{var Xt=a=>{var n=se("Saving...");x(a,n)},ea=a=>{var n=se("Save HC Data");x(a,n)};R(Qt,a=>{e(Pe)?a(Xt):a(ea,!1)})}v(Ie),v(Ze);var Ge=d(Ze,2),Le=p(Ge);j(Le);var ta=d(Le,2);v(Ge);var bt=d(Ge,2);{var aa=a=>{var n=Ma(),w=p(n,!0);v(n),ie(()=>ue(w,e(He))),x(a,n)};R(bt,a=>{e(He)&&a(aa)})}var oa=d(bt,2);{var ra=a=>{var n=Va(),w=p(n);v(n),ie(()=>ue(w,`HC correction applied. ${e(I),_(()=>e(I).length)??""} points corrected. Red diamond markers show corrected data in plot above.`)),x(a,n)};R(oa,a=>{e(B)&&a(ra)})}v(vt),v(We);var Qe=d(We,2),yt=d(p(Qe),2),Oe=p(yt);Oe.__click=Vt;var me=d(Oe,2);me.__click=jt;var ia=p(me);{var sa=a=>{var n=se("Saving...");x(a,n)},na=a=>{var n=se("Save Lithology");x(a,n)};R(ia,a=>{e(xe)?a(sa):a(na,!1)})}v(me);var Xe=d(me,2),la=p(Xe);{var da=a=>{var n=ja();it(n,w=>o(oe,w),()=>e(oe)),x(a,n)},ca=a=>{var n=Aa();x(a,n)};R(la,a=>{e(ae),_(()=>e(ae).length>0)?a(da):a(ca,!1)})}v(Xe);var ua=d(Xe,2);{var pa=a=>{var n=Ba(),w=p(n,!0);v(n),ie(()=>ue(w,e(_e))),x(a,n)};R(ua,a=>{e(_e)&&a(pa)})}v(yt),v(Qe);var gt=d(Qe,2),et=d(p(gt),2),Me=p(et);Me.__click=At;var fe=d(Me,2);fe.__click=Bt;var va=p(fe);{var ha=a=>{var n=se("Saving...");x(a,n)},ma=a=>{var n=se("Save Porosity");x(a,n)};R(va,a=>{e(Ne)?a(ha):a(ma,!1)})}v(fe);var tt=d(fe,2),Ve=p(tt);j(Ve);var fa=d(Ve,2);v(tt);var at=d(tt,2),ba=p(at);{var ya=a=>{var n=Fa();it(n,w=>o(re,w),()=>e(re)),x(a,n)},ga=a=>{var n=$a();x(a,n)};R(ba,a=>{e(E),e(M),_(()=>e(E).length>0||e(M).length>0)?a(ya):a(ga,!1)})}v(at);var xa=d(at,2);{var Na=a=>{var n=za(),w=p(n,!0);v(n),ie(()=>ue(w,e(we))),x(a,n)};R(xa,a=>{e(we)&&a(Na)})}v(et);var xt=d(et,2),Nt=p(xt);{var _a=a=>{const n=$(()=>(e(E),_(()=>e(E).map(V=>V.PHIT)))),w=$(()=>(k(e(n)),_(()=>e(n).reduce((V,ce)=>V+ce,0)/e(n).length))),Re=$(()=>(k(e(n)),_(()=>Math.min(...e(n))))),Ee=$(()=>(k(e(n)),_(()=>Math.max(...e(n)))));var de=qa(),ot=d(p(de));v(de),ie((V,ce,rt)=>ue(ot,` Avg: ${V??""} | Min: ${ce??""} | Max: ${rt??""} | Count: ${k(e(n)),_(()=>e(n).length)??""}`),[()=>(k(e(w)),_(()=>e(w).toFixed(3))),()=>(k(e(Re)),_(()=>e(Re).toFixed(3))),()=>(k(e(Ee)),_(()=>e(Ee).toFixed(3)))]),x(a,de)},wa=a=>{var n=Ya();x(a,n)};R(Nt,a=>{e(E),_(()=>e(E).length>0)?a(_a):a(wa,!1)})}var Pa=d(Nt,2);{var Ha=a=>{const n=$(()=>(e(M),_(()=>e(M).map(V=>V.CPORE)))),w=$(()=>(k(e(n)),_(()=>e(n).reduce((V,ce)=>V+ce,0)/e(n).length))),Re=$(()=>(k(e(n)),_(()=>Math.min(...e(n))))),Ee=$(()=>(k(e(n)),_(()=>Math.max(...e(n)))));var de=Ua(),ot=d(p(de),3);v(de),ie((V,ce,rt)=>ue(ot,` Avg: ${V??""} | Min: ${ce??""} | Max: ${rt??""} | Count: ${k(e(n)),_(()=>e(n).length)??""}`),[()=>(k(e(w)),_(()=>e(w).toFixed(3))),()=>(k(e(Re)),_(()=>e(Re).toFixed(3))),()=>(k(e(Ee)),_(()=>e(Ee).toFixed(3)))]),x(a,de)},Ca=a=>{var n=Wa();x(a,n)};R(Pa,a=>{e(M),_(()=>e(M).length>0)?a(Ha):a(Ca,!1)})}v(xt),v(gt),v(ut),v(ct),v(r),ie(()=>{he.disabled=e(g),be(he,e(g)?"opacity:0.5; pointer-events:none;":""),Ie.disabled=e(g)||e(Pe)||!e(B),be(Ie,e(g)||e(Pe)||!e(B)?"opacity:0.5; pointer-events:none;":""),Le.disabled=e(g)||!e(B),wt(ta,1,`text-sm cursor-pointer ${e(g)||!e(B)?"opacity-50":""}`),Oe.disabled=e(g),be(Oe,e(g)?"opacity:0.5; pointer-events:none;":""),me.disabled=e(g)||e(xe),be(me,e(g)||e(xe)?"opacity:0.5; pointer-events:none;":""),Me.disabled=e(g),be(Me,e(g)?"opacity:0.5; pointer-events:none;":""),fe.disabled=e(g)||e(Ne),be(fe,e(g)||e(Ne)?"opacity:0.5; pointer-events:none;":""),Ve.disabled=e(g),wt(fa,1,`text-sm cursor-pointer ${e(g)?"opacity-50":""}`)}),U(u,()=>e(K),a=>o(K,a)),U(f,()=>e(Z),a=>o(Z,a)),U(N,()=>e(G),a=>o(G,a)),U(H,()=>e(Q),a=>o(Q,a)),U(T,()=>e(X),a=>o(X,a)),U(ve,()=>e(ee),a=>o(ee,a)),U(lt,()=>e(te),a=>o(te,a)),U(ht,()=>e(Ae),a=>o(Ae,a)),U(ft,()=>e(Be),a=>o(Be,a)),Pt(Le,()=>e(Fe),a=>o(Fe,a)),Pt(Ve,()=>e(pe),a=>o(pe,a)),x(t,r)},Ut=t=>{var r=Ka();x(t,r)};R(qt,t=>{C()?t(Yt):t(Ut,!1)})}v(Ye),x(je,Ye),kt()}Sa(["click"]);var Qa=S('<div slot="left"><!></div>');function io(je,ye){Ht(ye,!1);let W=h(null),L=h(null);const z=It.subscribe(A=>{o(W,A?.project??null),o(L,A?.selectedWell??null)});Ct(()=>z()),St(),Ta(je,{get selectedWell(){return e(L)},get project(){return e(W)},$$slots:{left:(A,J)=>{var P=Qa(),C=p(P);{let q=$(()=>e(W)?.project_id??""),O=$(()=>e(L)?.name??"");Ga(C,{get projectId(){return e(q)},get wellName(){return e(O)}})}v(P),x(A,P)}}}),kt()}export{io as component,ro as universal};
