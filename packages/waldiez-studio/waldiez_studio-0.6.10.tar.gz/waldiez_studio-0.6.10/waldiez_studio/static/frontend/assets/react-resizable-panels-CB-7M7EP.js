import{r as e,e as n}from"./react-DzmM-WAl.js";const t=e.createContext(null);t.displayName="PanelGroupContext";const r="data-panel-group",o="data-panel-group-direction",a="data-panel-group-id",l="data-panel",i="data-panel-collapsible",u="data-panel-id",s="data-panel-size",c="data-resize-handle",d="data-resize-handle-active",f="data-panel-resize-handle-enabled",p="data-panel-resize-handle-id",g="data-resize-handle-state",m=e.useLayoutEffect,y=n["useId".toString()],h="function"==typeof y?y:()=>null;let v=0;function b(n=null){const t=h(),r=e.useRef(n||t||null);return null===r.current&&(r.current=""+v++),null!=n?n:r.current}function z({children:n,className:r="",collapsedSize:o,collapsible:c,defaultSize:d,forwardedRef:f,id:p,maxSize:g,minSize:y,onCollapse:h,onExpand:v,onResize:z,order:x,style:S,tagName:w="div",...C}){const E=e.useContext(t);if(null===E)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:I,expandPanel:P,getPanelSize:k,getPanelStyle:A,groupId:D,isPanelCollapsed:R,reevaluatePanelConstraints:L,registerPanel:$,resizePanel:M,unregisterPanel:N}=E,F=b(p),H=e.useRef({callbacks:{onCollapse:h,onExpand:v,onResize:z},constraints:{collapsedSize:o,collapsible:c,defaultSize:d,maxSize:g,minSize:y},id:F,idIsFromProps:void 0!==p,order:x});e.useRef({didLogMissingDefaultSizeWarning:!1}),m(()=>{const{callbacks:e,constraints:n}=H.current,t={...n};H.current.id=F,H.current.idIsFromProps=void 0!==p,H.current.order=x,e.onCollapse=h,e.onExpand=v,e.onResize=z,n.collapsedSize=o,n.collapsible=c,n.defaultSize=d,n.maxSize=g,n.minSize=y,t.collapsedSize===n.collapsedSize&&t.collapsible===n.collapsible&&t.maxSize===n.maxSize&&t.minSize===n.minSize||L(H.current,t)}),m(()=>{const e=H.current;return $(e),()=>{N(e)}},[x,F,$,N]),e.useImperativeHandle(f,()=>({collapse:()=>{I(H.current)},expand:e=>{P(H.current,e)},getId:()=>F,getSize:()=>k(H.current),isCollapsed:()=>R(H.current),isExpanded:()=>!R(H.current),resize:e=>{M(H.current,e)}}),[I,P,k,R,F,M]);const G=A(H.current,d);return e.createElement(w,{...C,children:n,className:r,id:F,style:{...G,...S},[a]:D,[l]:"",[i]:c||void 0,[u]:F,[s]:parseFloat(""+G.flexGrow).toFixed(1)})}const x=e.forwardRef((n,t)=>e.createElement(z,{...n,forwardedRef:t}));z.displayName="Panel",x.displayName="forwardRef(Panel)";let S=null,w=-1,C=null;function E(e,n,t){var r,o;const a=function(e,n){const t=0!==(n&B),r=0!==(n&O);if(n){if(0!==(n&H))return t?"se-resize":r?"ne-resize":"e-resize";if(0!==(n&G))return t?"sw-resize":r?"nw-resize":"w-resize";if(t)return"s-resize";if(r)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}(e,n);if(S!==a){var l;if(S=a,null===C&&(C=document.createElement("style"),document.head.appendChild(C)),w>=0)null===(l=C.sheet)||void 0===l||l.removeRule(w);w=null!==(r=null===(o=C.sheet)||void 0===o?void 0:o.insertRule(`*{cursor: ${a} !important;}`))&&void 0!==r?r:-1}}function I(e){return"keydown"===e.type}function P(e){return e.type.startsWith("pointer")}function k(e){return e.type.startsWith("mouse")}function A(e){if(P(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(k(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}function D(e,n,t){return e.x<n.x+n.width&&e.x+e.width>n.x&&e.y<n.y+n.height&&e.y+e.height>n.y}const R=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function L(e){const n=getComputedStyle(e);return"fixed"===n.position||(!("auto"===n.zIndex||"static"===n.position&&!function(e){var n;const t=getComputedStyle(null!==(n=F(e))&&void 0!==n?n:e).display;return"flex"===t||"inline-flex"===t}(e))||(+n.opacity<1||("transform"in n&&"none"!==n.transform||("webkitTransform"in n&&"none"!==n.webkitTransform||("mixBlendMode"in n&&"normal"!==n.mixBlendMode||("filter"in n&&"none"!==n.filter||("webkitFilter"in n&&"none"!==n.webkitFilter||("isolation"in n&&"isolate"===n.isolation||(!!R.test(n.willChange)||"touch"===n.webkitOverflowScrolling)))))))))}function $(e){let n=e.length;for(;n--;){const t=e[n];if(re(t,"Missing node"),L(t))return t}return null}function M(e){return e&&Number(getComputedStyle(e).zIndex)||0}function N(e){const n=[];for(;e;)n.push(e),e=F(e);return n}function F(e){const{parentNode:n}=e;return n&&n instanceof ShadowRoot?n.host:n}const H=1,G=2,B=4,O=8,T="coarse"===function(){if("function"==typeof matchMedia)return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}();let j=[],U=!1,V=new Map,W=new Map;const J=new Set;function q(e){const{target:n}=e,{x:t,y:r}=A(e);U=!0,Q({target:n,x:t,y:r}),ne(),j.length>0&&(te("down",e),_(),e.preventDefault(),Y(n)||e.stopImmediatePropagation())}function K(e){const{x:n,y:t}=A(e);if(U&&"pointerleave"!==e.type&&0===e.buttons&&(U=!1,te("up",e)),!U){const{target:r}=e;Q({target:r,x:n,y:t})}te("move",e),_(),j.length>0&&e.preventDefault()}function X(e){const{target:n}=e,{x:t,y:r}=A(e);W.clear(),U=!1,j.length>0&&(e.preventDefault(),Y(n)||e.stopImmediatePropagation()),te("up",e),Q({target:n,x:t,y:r}),_(),ne()}function Y(e){let n=e;for(;n;){if(n.hasAttribute(c))return!0;n=n.parentElement}return!1}function Q({target:e,x:n,y:t}){j.splice(0);let r=null;(e instanceof HTMLElement||e instanceof SVGElement)&&(r=e),J.forEach(e=>{const{element:o,hitAreaMargins:a}=e,l=o.getBoundingClientRect(),{bottom:i,left:u,right:s,top:c}=l,d=T?a.coarse:a.fine;if(n>=u-d&&n<=s+d&&t>=c-d&&t<=i+d){if(null!==r&&document.contains(r)&&o!==r&&!o.contains(r)&&!r.contains(o)&&function(e,n){if(e===n)throw new Error("Cannot compare node with itself");const t={a:N(e),b:N(n)};let r;for(;t.a.at(-1)===t.b.at(-1);)e=t.a.pop(),n=t.b.pop(),r=e;re(r,"Stacking order can only be calculated for elements with a common ancestor");const o=M($(t.a)),a=M($(t.b));if(o===a){const e=r.childNodes,n={a:t.a.at(-1),b:t.b.at(-1)};let o=e.length;for(;o--;){const t=e[o];if(t===n.a)return 1;if(t===n.b)return-1}}return Math.sign(o-a)}(r,o)>0){let e=r,n=!1;for(;e&&!e.contains(o);){if(D(e.getBoundingClientRect(),l)){n=!0;break}e=e.parentElement}if(n)return}j.push(e)}})}function Z(e,n){W.set(e,n)}function _(){let e=!1,n=!1;j.forEach(t=>{const{direction:r}=t;"horizontal"===r?e=!0:n=!0});let t=0;W.forEach(e=>{t|=e}),e&&n?E("intersection",t):e?E("horizontal",t):n?E("vertical",t):null!==C&&(document.head.removeChild(C),S=null,C=null,w=-1)}let ee;function ne(){var e;null===(e=ee)||void 0===e||e.abort(),ee=new AbortController;const n={capture:!0,signal:ee.signal};J.size&&(U?(j.length>0&&V.forEach((e,t)=>{const{body:r}=t;e>0&&(r.addEventListener("contextmenu",X,n),r.addEventListener("pointerleave",K,n),r.addEventListener("pointermove",K,n))}),V.forEach((e,t)=>{const{body:r}=t;r.addEventListener("pointerup",X,n),r.addEventListener("pointercancel",X,n)})):V.forEach((e,t)=>{const{body:r}=t;e>0&&(r.addEventListener("pointerdown",q,n),r.addEventListener("pointermove",K,n))}))}function te(e,n){J.forEach(t=>{const{setResizeHandlerState:r}=t,o=j.includes(t);r(e,o,n)})}function re(e,n){if(!e)throw Error(n)}function oe(e,n,t=10){return e.toFixed(t)===n.toFixed(t)?0:e>n?1:-1}function ae(e,n,t=10){return 0===oe(e,n,t)}function le(e,n,t){return 0===oe(e,n,t)}function ie({panelConstraints:e,panelIndex:n,size:t}){const r=e[n];re(null!=r,`Panel constraints not found for index ${n}`);let{collapsedSize:o=0,collapsible:a,maxSize:l=100,minSize:i=0}=r;if(oe(t,i)<0)if(a){t=oe(t,(o+i)/2)<0?o:i}else t=i;return t=Math.min(l,t),t=parseFloat(t.toFixed(10))}function ue({delta:e,initialLayout:n,panelConstraints:t,pivotIndices:r,prevLayout:o,trigger:a}){if(le(e,0))return n;const l=[...n],[i,u]=r;re(null!=i,"Invalid first pivot index"),re(null!=u,"Invalid second pivot index");let s=0;if("keyboard"===a){{const r=e<0?u:i,o=t[r];re(o,`Panel constraints not found for index ${r}`);const{collapsedSize:a=0,collapsible:l,minSize:s=0}=o;if(l){const t=n[r];if(re(null!=t,`Previous layout not found for panel index ${r}`),le(t,a)){const n=s-t;oe(n,Math.abs(e))>0&&(e=e<0?0-n:n)}}}{const r=e<0?i:u,o=t[r];re(o,`No panel constraints found for index ${r}`);const{collapsedSize:a=0,collapsible:l,minSize:s=0}=o;if(l){const t=n[r];if(re(null!=t,`Previous layout not found for panel index ${r}`),le(t,s)){const n=t-a;oe(n,Math.abs(e))>0&&(e=e<0?0-n:n)}}}}{const r=e<0?1:-1;let o=e<0?u:i,a=0;for(;;){const e=n[o];re(null!=e,`Previous layout not found for panel index ${o}`);if(a+=ie({panelConstraints:t,panelIndex:o,size:100})-e,o+=r,o<0||o>=t.length)break}const l=Math.min(Math.abs(e),Math.abs(a));e=e<0?0-l:l}{let r=e<0?i:u;for(;r>=0&&r<t.length;){const o=Math.abs(e)-Math.abs(s),a=n[r];re(null!=a,`Previous layout not found for panel index ${r}`);const i=ie({panelConstraints:t,panelIndex:r,size:a-o});if(!le(a,i)&&(s+=a-i,l[r]=i,s.toFixed(3).localeCompare(Math.abs(e).toFixed(3),void 0,{numeric:!0})>=0))break;e<0?r--:r++}}if(function(e,n,t){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(!le(e[r],n[r],t))return!1;return!0}(o,l))return o;{const r=e<0?u:i,o=n[r];re(null!=o,`Previous layout not found for panel index ${r}`);const a=o+s,c=ie({panelConstraints:t,panelIndex:r,size:a});if(l[r]=c,!le(c,a)){let n=a-c;let r=e<0?u:i;for(;r>=0&&r<t.length;){const o=l[r];re(null!=o,`Previous layout not found for panel index ${r}`);const a=ie({panelConstraints:t,panelIndex:r,size:o+n});if(le(o,a)||(n-=a-o,l[r]=a),le(n,0))break;e>0?r--:r++}}}return le(l.reduce((e,n)=>n+e,0),100)?l:o}function se({layout:e,panelsArray:n,pivotIndices:t}){let r=0,o=100,a=0,l=0;const i=t[0];re(null!=i,"No pivot index found"),n.forEach((e,n)=>{const{constraints:t}=e,{maxSize:u=100,minSize:s=0}=t;n===i?(r=s,o=u):(a+=s,l+=u)});return{valueMax:Math.min(o,100-a),valueMin:Math.max(r,100-l),valueNow:e[i]}}function ce(e,n=document){return Array.from(n.querySelectorAll(`[${p}][data-panel-group-id="${e}"]`))}function de(e,n,t=document){const r=ce(e,t).findIndex(e=>e.getAttribute(p)===n);return null!=r?r:null}function fe(e,n,t){const r=de(e,n,t);return null!=r?[r,r+1]:[-1,-1]}function pe(e,n=document){if(((t=n)instanceof HTMLElement||"object"==typeof t&&null!==t&&"tagName"in t&&"getAttribute"in t)&&n.dataset.panelGroupId==e)return n;var t;const r=n.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`);return r||null}function ge(e,n=document){const t=n.querySelector(`[${p}="${e}"]`);return t||null}function me({committedValuesRef:n,eagerValuesRef:t,groupId:r,layout:o,panelDataArray:a,panelGroupElement:l,setLayout:i}){e.useRef({didWarnAboutMissingResizeHandle:!1}),m(()=>{if(!l)return;const e=ce(r,l);for(let n=0;n<a.length-1;n++){const{valueMax:t,valueMin:r,valueNow:l}=se({layout:o,panelsArray:a,pivotIndices:[n,n+1]}),i=e[n];if(null==i);else{const e=a[n];re(e,`No panel data found for index "${n}"`),i.setAttribute("aria-controls",e.id),i.setAttribute("aria-valuemax",""+Math.round(t)),i.setAttribute("aria-valuemin",""+Math.round(r)),i.setAttribute("aria-valuenow",null!=l?""+Math.round(l):"")}}return()=>{e.forEach((e,n)=>{e.removeAttribute("aria-controls"),e.removeAttribute("aria-valuemax"),e.removeAttribute("aria-valuemin"),e.removeAttribute("aria-valuenow")})}},[r,o,a,l]),e.useEffect(()=>{if(!l)return;const e=t.current;re(e,"Eager values not found");const{panelDataArray:n}=e;re(null!=pe(r,l),`No group found for id "${r}"`);const a=ce(r,l);re(a,`No resize handles found for group id "${r}"`);const u=a.map(e=>{const t=e.getAttribute(p);re(t,"Resize handle element has no handle id attribute");const[a,u]=function(e,n,t,r=document){var o,a,l,i;const u=ge(n,r),s=ce(e,r),c=u?s.indexOf(u):-1;return[null!==(o=null===(a=t[c])||void 0===a?void 0:a.id)&&void 0!==o?o:null,null!==(l=null===(i=t[c+1])||void 0===i?void 0:i.id)&&void 0!==l?l:null]}(r,t,n,l);if(null==a||null==u)return()=>{};const s=e=>{if(!e.defaultPrevented)switch(e.key){case"Enter":{e.preventDefault();const u=n.findIndex(e=>e.id===a);if(u>=0){const e=n[u];re(e,`No panel data found for index ${u}`);const a=o[u],{collapsedSize:s=0,collapsible:c,minSize:d=0}=e.constraints;if(null!=a&&c){const e=ue({delta:le(a,s)?d-s:s-a,initialLayout:o,panelConstraints:n.map(e=>e.constraints),pivotIndices:fe(r,t,l),prevLayout:o,trigger:"keyboard"});o!==e&&i(e)}}break}}};return e.addEventListener("keydown",s),()=>{e.removeEventListener("keydown",s)}});return()=>{u.forEach(e=>e())}},[l,n,t,r,o,a,i])}function ye(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!==n[t])return!1;return!0}function he(e,n){const t="horizontal"===e,{x:r,y:o}=A(n);return t?r:o}function ve(e,n,t,r,o,l){if(I(e)){const n="horizontal"===t;let r=0;r=e.shiftKey?100:null!=o?o:10;let a=0;switch(e.key){case"ArrowDown":a=n?0:r;break;case"ArrowLeft":a=n?-r:0;break;case"ArrowRight":a=n?r:0;break;case"ArrowUp":a=n?0:-r;break;case"End":a=100;break;case"Home":a=-100}return a}return null==r?0:function(e,n,t,r,o){const l="horizontal"===t,i=ge(n,o);re(i,`No resize handle element found for id "${n}"`);const u=i.getAttribute(a);re(u,"Resize handle element has no group id attribute");let{initialCursorPosition:s}=r;const c=he(t,e),d=pe(u,o);re(d,`No group element found for id "${u}"`);const f=d.getBoundingClientRect();return(c-s)/(l?f.width:f.height)*100}(e,n,t,r,l)}function be(e,n,t){n.forEach((n,r)=>{const o=e[r];re(o,`Panel data not found for index ${r}`);const{callbacks:a,constraints:l,id:i}=o,{collapsedSize:u=0,collapsible:s}=l,c=t[i];if(null==c||n!==c){t[i]=n;const{onCollapse:e,onExpand:r,onResize:o}=a;o&&o(n,c),s&&(e||r)&&(!r||null!=c&&!ae(c,u)||ae(n,u)||r(),!e||null!=c&&ae(c,u)||!ae(n,u)||e())}})}function ze(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!=n[t])return!1;return!0}function xe(e){try{if("undefined"==typeof localStorage)throw new Error("localStorage not supported in this environment");e.getItem=e=>localStorage.getItem(e),e.setItem=(e,n)=>{localStorage.setItem(e,n)}}catch(n){e.getItem=()=>null,e.setItem=()=>{}}}function Se(e){return`react-resizable-panels:${e}`}function we(e){return e.map(e=>{const{constraints:n,id:t,idIsFromProps:r,order:o}=e;return r?t:o?`${o}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((e,n)=>e.localeCompare(n)).join(",")}function Ce(e,n){try{const t=Se(e),r=n.getItem(t);if(r){const e=JSON.parse(r);if("object"==typeof e&&null!=e)return e}}catch(t){}return null}function Ee(e,n,t,r,o){var a;const l=Se(e),i=we(n),u=null!==(a=Ce(e,o))&&void 0!==a?a:{};u[i]={expandToSizes:Object.fromEntries(t.entries()),layout:r};try{o.setItem(l,JSON.stringify(u))}catch(s){}}function Ie({layout:e,panelConstraints:n}){const t=[...e],r=t.reduce((e,n)=>e+n,0);if(t.length!==n.length)throw Error(`Invalid ${n.length} panel layout: ${t.map(e=>`${e}%`).join(", ")}`);if(!le(r,100)&&t.length>0)for(let a=0;a<n.length;a++){const e=t[a];re(null!=e,`No layout data found for index ${a}`);const n=100/r*e;t[a]=n}let o=0;for(let a=0;a<n.length;a++){const e=t[a];re(null!=e,`No layout data found for index ${a}`);const r=ie({panelConstraints:n,panelIndex:a,size:e});e!=r&&(o+=e-r,t[a]=r)}if(!le(o,0))for(let a=0;a<n.length;a++){const e=t[a];re(null!=e,`No layout data found for index ${a}`);const r=ie({panelConstraints:n,panelIndex:a,size:e+o});if(e!==r&&(o-=r-e,t[a]=r,le(o,0)))break}return t}const Pe={getItem:e=>(xe(Pe),Pe.getItem(e)),setItem:(e,n)=>{xe(Pe),Pe.setItem(e,n)}},ke={};function Ae({autoSaveId:n=null,children:l,className:i="",direction:u,forwardedRef:s,id:c=null,onLayout:d=null,keyboardResizeBy:f=null,storage:p=Pe,style:g,tagName:y="div",...h}){const v=b(c),z=e.useRef(null),[x,S]=e.useState(null),[w,C]=e.useState([]),E=function(){const[n,t]=e.useState(0);return e.useCallback(()=>t(e=>e+1),[])}(),A=e.useRef({}),D=e.useRef(new Map),R=e.useRef(0),L=e.useRef({autoSaveId:n,direction:u,dragState:x,id:v,keyboardResizeBy:f,onLayout:d,storage:p}),$=e.useRef({layout:w,panelDataArray:[],panelDataArrayChanged:!1});e.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),e.useImperativeHandle(s,()=>({getId:()=>L.current.id,getLayout:()=>{const{layout:e}=$.current;return e},setLayout:e=>{const{onLayout:n}=L.current,{layout:t,panelDataArray:r}=$.current,o=Ie({layout:e,panelConstraints:r.map(e=>e.constraints)});ye(t,o)||(C(o),$.current.layout=o,n&&n(o),be(r,o,A.current))}}),[]),m(()=>{L.current.autoSaveId=n,L.current.direction=u,L.current.dragState=x,L.current.id=v,L.current.onLayout=d,L.current.storage=p}),me({committedValuesRef:L,eagerValuesRef:$,groupId:v,layout:w,panelDataArray:$.current.panelDataArray,setLayout:C,panelGroupElement:z.current}),e.useEffect(()=>{const{panelDataArray:e}=$.current;if(n){if(0===w.length||w.length!==e.length)return;let t=ke[n];null==t&&(t=function(e,n=10){let t=null;return(...r)=>{null!==t&&clearTimeout(t),t=setTimeout(()=>{e(...r)},n)}}(Ee,100),ke[n]=t);const r=[...e],o=new Map(D.current);t(n,r,o,w,p)}},[n,w,p]),e.useEffect(()=>{});const M=e.useCallback(e=>{const{onLayout:n}=L.current,{layout:t,panelDataArray:r}=$.current;if(e.constraints.collapsible){const o=r.map(e=>e.constraints),{collapsedSize:a=0,panelSize:l,pivotIndices:i}=Le(r,e,t);if(re(null!=l,`Panel size not found for panel "${e.id}"`),!ae(l,a)){D.current.set(e.id,l);const u=ue({delta:Re(r,e)===r.length-1?l-a:a-l,initialLayout:t,panelConstraints:o,pivotIndices:i,prevLayout:t,trigger:"imperative-api"});ze(t,u)||(C(u),$.current.layout=u,n&&n(u),be(r,u,A.current))}}},[]),N=e.useCallback((e,n)=>{const{onLayout:t}=L.current,{layout:r,panelDataArray:o}=$.current;if(e.constraints.collapsible){const a=o.map(e=>e.constraints),{collapsedSize:l=0,panelSize:i=0,minSize:u=0,pivotIndices:s}=Le(o,e,r),c=null!=n?n:u;if(ae(i,l)){const n=D.current.get(e.id),l=null!=n&&n>=c?n:c,u=ue({delta:Re(o,e)===o.length-1?i-l:l-i,initialLayout:r,panelConstraints:a,pivotIndices:s,prevLayout:r,trigger:"imperative-api"});ze(r,u)||(C(u),$.current.layout=u,t&&t(u),be(o,u,A.current))}}},[]),F=e.useCallback(e=>{const{layout:n,panelDataArray:t}=$.current,{panelSize:r}=Le(t,e,n);return re(null!=r,`Panel size not found for panel "${e.id}"`),r},[]),T=e.useCallback((e,n)=>{const{panelDataArray:t}=$.current,r=Re(t,e);return function({defaultSize:e,dragState:n,layout:t,panelData:r,panelIndex:o,precision:a=3}){const l=t[o];let i;return i=null==l?null!=e?e.toFixed(a):"1":1===r.length?"1":l.toFixed(a),{flexBasis:0,flexGrow:i,flexShrink:1,overflow:"hidden",pointerEvents:null!==n?"none":void 0}}({defaultSize:n,dragState:x,layout:w,panelData:t,panelIndex:r})},[x,w]),j=e.useCallback(e=>{const{layout:n,panelDataArray:t}=$.current,{collapsedSize:r=0,collapsible:o,panelSize:a}=Le(t,e,n);return re(null!=a,`Panel size not found for panel "${e.id}"`),!0===o&&ae(a,r)},[]),U=e.useCallback(e=>{const{layout:n,panelDataArray:t}=$.current,{collapsedSize:r=0,collapsible:o,panelSize:a}=Le(t,e,n);return re(null!=a,`Panel size not found for panel "${e.id}"`),!o||oe(a,r)>0},[]),V=e.useCallback(e=>{const{panelDataArray:n}=$.current;n.push(e),n.sort((e,n)=>{const t=e.order,r=n.order;return null==t&&null==r?0:null==t?-1:null==r?1:t-r}),$.current.panelDataArrayChanged=!0,E()},[E]);m(()=>{if($.current.panelDataArrayChanged){$.current.panelDataArrayChanged=!1;const{autoSaveId:e,onLayout:n,storage:t}=L.current,{layout:r,panelDataArray:o}=$.current;let a=null;if(e){const n=function(e,n,t){var r,o;return null!==(o=(null!==(r=Ce(e,t))&&void 0!==r?r:{})[we(n)])&&void 0!==o?o:null}(e,o,t);n&&(D.current=new Map(Object.entries(n.expandToSizes)),a=n.layout)}null==a&&(a=function({panelDataArray:e}){const n=Array(e.length),t=e.map(e=>e.constraints);let r=0,o=100;for(let a=0;a<e.length;a++){const e=t[a];re(e,`Panel constraints not found for index ${a}`);const{defaultSize:l}=e;null!=l&&(r++,n[a]=l,o-=l)}for(let a=0;a<e.length;a++){const l=t[a];re(l,`Panel constraints not found for index ${a}`);const{defaultSize:i}=l;if(null!=i)continue;const u=o/(e.length-r);r++,n[a]=u,o-=u}return n}({panelDataArray:o}));const l=Ie({layout:a,panelConstraints:o.map(e=>e.constraints)});ye(r,l)||(C(l),$.current.layout=l,n&&n(l),be(o,l,A.current))}}),m(()=>{const e=$.current;return()=>{e.layout=[]}},[]);const W=e.useCallback(e=>{let n=!1;const t=z.current;if(t){"rtl"===window.getComputedStyle(t,null).getPropertyValue("direction")&&(n=!0)}return function(t){t.preventDefault();const r=z.current;if(!r)return()=>null;const{direction:o,dragState:a,id:l,keyboardResizeBy:i,onLayout:u}=L.current,{layout:s,panelDataArray:c}=$.current,{initialLayout:d}=null!=a?a:{},f=fe(l,e,r);let p=ve(t,e,o,a,i,r);const g="horizontal"===o;g&&n&&(p=-p);const m=ue({delta:p,initialLayout:null!=d?d:s,panelConstraints:c.map(e=>e.constraints),pivotIndices:f,prevLayout:s,trigger:I(t)?"keyboard":"mouse-or-touch"}),y=!ze(s,m);(P(t)||k(t))&&R.current!=p&&(R.current=p,Z(e,y||0===p?0:g?p<0?H:G:p<0?B:O)),y&&(C(m),$.current.layout=m,u&&u(m),be(c,m,A.current))}},[]),J=e.useCallback((e,n)=>{const{onLayout:t}=L.current,{layout:r,panelDataArray:o}=$.current,a=o.map(e=>e.constraints),{panelSize:l,pivotIndices:i}=Le(o,e,r);re(null!=l,`Panel size not found for panel "${e.id}"`);const u=ue({delta:Re(o,e)===o.length-1?l-n:n-l,initialLayout:r,panelConstraints:a,pivotIndices:i,prevLayout:r,trigger:"imperative-api"});ze(r,u)||(C(u),$.current.layout=u,t&&t(u),be(o,u,A.current))},[]),q=e.useCallback((e,n)=>{const{layout:t,panelDataArray:r}=$.current,{collapsedSize:o=0,collapsible:a}=n,{collapsedSize:l=0,collapsible:i,maxSize:u=100,minSize:s=0}=e.constraints,{panelSize:c}=Le(r,e,t);null!=c&&(a&&i&&ae(c,o)?ae(o,l)||J(e,l):c<s?J(e,s):c>u&&J(e,u))},[J]),K=e.useCallback((e,n)=>{const{direction:t}=L.current,{layout:r}=$.current;if(!z.current)return;const o=ge(e,z.current);re(o,`Drag handle element not found for id "${e}"`);const a=he(t,n);S({dragHandleId:e,dragHandleRect:o.getBoundingClientRect(),initialCursorPosition:a,initialLayout:r})},[]),X=e.useCallback(()=>{S(null)},[]),Y=e.useCallback(e=>{const{panelDataArray:n}=$.current,t=Re(n,e);t>=0&&(n.splice(t,1),delete A.current[e.id],$.current.panelDataArrayChanged=!0,E())},[E]),Q=e.useMemo(()=>({collapsePanel:M,direction:u,dragState:x,expandPanel:N,getPanelSize:F,getPanelStyle:T,groupId:v,isPanelCollapsed:j,isPanelExpanded:U,reevaluatePanelConstraints:q,registerPanel:V,registerResizeHandle:W,resizePanel:J,startDragging:K,stopDragging:X,unregisterPanel:Y,panelGroupElement:z.current}),[M,x,u,N,F,T,v,j,U,q,V,W,J,K,X,Y]),_={display:"flex",flexDirection:"horizontal"===u?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return e.createElement(t.Provider,{value:Q},e.createElement(y,{...h,children:l,className:i,id:c,ref:z,style:{..._,...g},[r]:"",[o]:u,[a]:v}))}const De=e.forwardRef((n,t)=>e.createElement(Ae,{...n,forwardedRef:t}));function Re(e,n){return e.findIndex(e=>e===n||e.id===n.id)}function Le(e,n,t){const r=Re(e,n),o=r===e.length-1?[r-1,r]:[r,r+1],a=t[r];return{...n.constraints,panelSize:a,pivotIndices:o}}function $e({children:n=null,className:r="",disabled:l=!1,hitAreaMargins:i,id:u,onBlur:s,onClick:y,onDragging:h,onFocus:v,onPointerDown:z,onPointerUp:x,style:S={},tabIndex:w=0,tagName:C="div",...E}){var I,P;const k=e.useRef(null),A=e.useRef({onClick:y,onDragging:h,onPointerDown:z,onPointerUp:x});e.useEffect(()=>{A.current.onClick=y,A.current.onDragging=h,A.current.onPointerDown=z,A.current.onPointerUp=x});const D=e.useContext(t);if(null===D)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:R,groupId:L,registerResizeHandle:$,startDragging:M,stopDragging:N,panelGroupElement:F}=D,H=b(u),[G,B]=e.useState("inactive"),[O,T]=e.useState(!1),[U,q]=e.useState(null),K=e.useRef({state:G});m(()=>{K.current.state=G}),e.useEffect(()=>{if(l)q(null);else{const e=$(H);q(()=>e)}},[l,H,$]);const X=null!==(I=null==i?void 0:i.coarse)&&void 0!==I?I:15,Y=null!==(P=null==i?void 0:i.fine)&&void 0!==P?P:5;e.useEffect(()=>{if(l||null==U)return;const e=k.current;re(e,"Element ref not attached");let n=!1;return function(e,n,t,r,o){var a;const{ownerDocument:l}=n,i={direction:t,element:n,hitAreaMargins:r,setResizeHandlerState:o},u=null!==(a=V.get(l))&&void 0!==a?a:0;return V.set(l,u+1),J.add(i),ne(),function(){var n;W.delete(e),J.delete(i);const t=null!==(n=V.get(l))&&void 0!==n?n:1;if(V.set(l,t-1),ne(),1===t&&V.delete(l),j.includes(i)){const e=j.indexOf(i);e>=0&&j.splice(e,1),_(),o("up",!0,null)}}}(H,e,R,{coarse:X,fine:Y},(e,t,r)=>{if(t)switch(e){case"down":{B("drag"),n=!1,re(r,'Expected event to be defined for "down" action'),M(H,r);const{onDragging:e,onPointerDown:t}=A.current;null==e||e(!0),null==t||t();break}case"move":{const{state:e}=K.current;n=!0,"drag"!==e&&B("hover"),re(r,'Expected event to be defined for "move" action'),U(r);break}case"up":{B("hover"),N();const{onClick:e,onDragging:t,onPointerUp:r}=A.current;null==t||t(!1),null==r||r(),n||null==e||e();break}}else B("inactive")})},[X,R,l,Y,$,H,U,M,N]),function({disabled:n,handleId:t,resizeHandler:r,panelGroupElement:o}){e.useEffect(()=>{if(n||null==r||null==o)return;const e=ge(t,o);if(null==e)return;const l=n=>{if(!n.defaultPrevented)switch(n.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":n.preventDefault(),r(n);break;case"F6":{n.preventDefault();const r=e.getAttribute(a);re(r,`No group element found for id "${r}"`);const l=ce(r,o),i=de(r,t,o);re(null!==i,`No resize element found for id "${t}"`),l[n.shiftKey?i>0?i-1:l.length-1:i+1<l.length?i+1:0].focus();break}}};return e.addEventListener("keydown",l),()=>{e.removeEventListener("keydown",l)}},[o,n,t,r])}({disabled:l,handleId:H,resizeHandler:U,panelGroupElement:F});return e.createElement(C,{...E,children:n,className:r,id:u,onBlur:()=>{T(!1),null==s||s()},onFocus:()=>{T(!0),null==v||v()},ref:k,role:"separator",style:{touchAction:"none",userSelect:"none",...S},tabIndex:w,[o]:R,[a]:L,[c]:"",[d]:"drag"===G?"pointer":O?"keyboard":void 0,[f]:!l,[p]:H,[g]:G})}Ae.displayName="PanelGroup",De.displayName="forwardRef(PanelGroup)",$e.displayName="PanelResizeHandle";export{De as P,x as a,$e as b};
