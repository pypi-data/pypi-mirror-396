[build-system]
requires = ["hatchling>=1.26"]
build-backend = "hatchling.build"

[project]
name = "mpneuralnetwork"
version = "1.2.0-beta.1"
description = "A fully vectorized Deep Learning framework built from scratch using only NumPy."
readme = "README.md"
requires-python = ">=3.10"
license = { file = "LICENSE" }
authors = [
  { name="Maxime Pires", email="maximepires4@gmail.com" },
]
keywords = ["deep-learning", "neural-network", "numpy", "education", "ai", "machine-learning"]
classifiers = [
  "Development Status :: 5 - Production/Stable",
  "Intended Audience :: Developers",
  "Intended Audience :: Education",
  "Intended Audience :: Science/Research",
  "License :: OSI Approved :: MIT License",
  "Programming Language :: Python :: 3",
  "Programming Language :: Python :: 3.10",
  "Programming Language :: Python :: 3.11",
  "Programming Language :: Python :: 3.12",
  "Operating System :: OS Independent",
  "Topic :: Scientific/Engineering :: Artificial Intelligence",
  "Topic :: Scientific/Engineering :: Mathematics",
]
dependencies = [
  "numpy>=1.21",
]

[project.urls]
Homepage = "https://pypi.org/project/mpneuralnetwork/"
Repository = "https://github.com/maximepires4/mp-neural-network"
Issues = "https://github.com/maximepires4/mp-neural-network/issues"
Documentation = "https://maximepires4.github.io/mp-neural-network/"

[project.optional-dependencies]
build = [
  "build",
  "twine",
  "python-semantic-release",
]
example = [
  "pandas>=1.5.0",
]
test = [
  "pytest>=7.0",
  "pytest-cov>=4.0",
]
dev = [
  "ruff==0.14.5",
  "mypy>=1.9.0",
  "pre-commit>=3.5.0",
  "types-setuptools",
]
profile = [
  "snakeviz",
  "memray",
]
docs = [
  "mkdocs-material",
  "mkdocstrings[python]",
]

[tool.hatch.build.targets.sdist]
include = [
    "/src",
    "/tests",
    "LICENSE",
    "README.md",
    "pyproject.toml",
]

[tool.ruff]
line-length = 150
target-version = "py310"

[tool.ruff.lint]
# E: pycodestyle errors
# F: Pyflakes
# I: isort
# B: flake8-bugbear
# UP: pyupgrade (modernize syntax)
# SIM: flake8-simplify
# PL: Pylint
# RUF: Ruff-specific rules
# N: pep8-naming
select = ["E", "F", "I", "B", "UP"]
ignore = []

[tool.ruff.lint.isort]
known-first-party = ["mpneuralnetwork"]
combine-as-imports = true

[tool.mypy]
python_version = "3.10"
files = ["src/mpneuralnetwork"]
exclude = "(tests|example|benchmark)/"
warn_return_any = true
warn_unused_configs = true
explicit_package_bases = true
disallow_untyped_defs = true
check_untyped_defs = true
ignore_missing_imports = true

[tool.pytest.ini_options]
minversion = "7.0"
addopts = "-ra --cov=mpneuralnetwork --cov-report=term-missing"
testpaths = ["tests"]
python_files = ["test_*.py"]

[tool.coverage.run]
source = ["mpneuralnetwork"]
branch = true
omit = ["tests/*", "example/*", "benchmark/*"]

[tool.coverage.report]
exclude_lines = [
    "pragma: no cover",
    "def __repr__",
    "if __name__ == .__main__.:",
    "raise NotImplementedError",
    "if TYPE_CHECKING:",
]

[tool.semantic_release]
version_toml = ["pyproject.toml:project.version"]
build_command = "python -m build"

[tool.semantic_release.commit]
commit_message = "{version}\n\nAutomatically generated by python-semantic-release"

[tool.semantic_release.branches.main]
match = "^main$"
prerelease = false

[tool.semantic_release.branches.develop]
match = "^develop$"
prerelease = true
prerelease_token = "beta"

[tool.semantic_release.publish]
upload_to_pypi = false
upload_to_release = true

[tool.semantic_release.changelog]
exclude_commit_patterns = ["^chore"]
