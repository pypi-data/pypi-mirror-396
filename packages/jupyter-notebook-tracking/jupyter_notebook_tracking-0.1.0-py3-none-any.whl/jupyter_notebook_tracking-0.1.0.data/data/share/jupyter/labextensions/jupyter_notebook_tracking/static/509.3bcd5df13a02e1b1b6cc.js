"use strict";(self.webpackChunkjupyter_notebook_tracking=self.webpackChunkjupyter_notebook_tracking||[]).push([[509],{509:(t,e,s)=>{s.r(e),s.d(e,{default:()=>r});var o=s(228),i=s(597);const n="tracking";class a{constructor(t){this._sessionStartTime=null,this._onSaveState=(t,e)=>{"started"===e&&null!==this._sessionStartTime&&this._updateEditTime()},this._panel=t,t.context.ready.then(()=>{this._startSession()}),t.context.saveState.connect(this._onSaveState,this),t.disposed.connect(()=>{t.context.saveState.disconnect(this._onSaveState,this)})}_startSession(){this._sessionStartTime=Date.now()}_updateEditTime(){if(null===this._sessionStartTime)return;const t=this._panel.context.model;if(!t)return;const e=Date.now(),s=Math.floor((e-this._sessionStartTime)/1e3),o=t.sharedModel.metadata[n]||{total_edit_time_seconds:0,editors:{},history:[]};o.total_edit_time_seconds+=s;const a=i.PageConfig.getOption("hubUser");if(a){o.last_edit_by=a;const t=o.editors[a]||0;o.editors[a]=t+s}const r=JSON.stringify(t.sharedModel.toJSON()),c=(new TextEncoder).encode(r).length,d={timestamp:(new Date).toISOString(),user:a||"unknown",bytes:c,edit_time_seconds:s};o.history.push(d),t.sharedModel.setMetadata(n,o),this._sessionStartTime=e}}const r={id:"jupyter_notebook_tracking:plugin",description:"Track total editing time in Jupyter notebooks",autoStart:!0,requires:[o.INotebookTracker],activate:(t,e)=>{console.log("JupyterLab extension jupyter_notebook_tracking is activated!"),e.widgetAdded.connect((t,e)=>{new a(e)})}}}}]);