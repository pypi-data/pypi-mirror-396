{"version":3,"file":"index.js","sources":["../src/tangram_airports/AirportSearchWidget.vue","../src/tangram_airports/index.ts"],"sourcesContent":["<template>\n  <div class=\"airport-search\">\n    <input\n      v-model=\"query\"\n      type=\"text\"\n      placeholder=\"Search for airports...\"\n      @click=\"($event.target as HTMLInputElement).select()\"\n      @input=\"onInput\"\n    />\n    <ul v-if=\"results.length\" class=\"search-results\">\n      <li\n        v-for=\"airport in results\"\n        :key=\"airport.icao\"\n        @click=\"selectAirport(airport)\"\n      >\n        {{ airport.name }} ({{ airport.iata }} | {{ airport.icao }})\n      </li>\n    </ul>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, inject } from \"vue\";\nimport type { TangramApi } from \"@open-aviation/tangram-core/api\";\nimport { airport_information } from \"rs1090-wasm\";\n\ninterface Airport {\n  lat: number;\n  lon: number;\n  name: string;\n  iata: string;\n  icao: string;\n}\n\nconst tangramApi = inject<TangramApi>(\"tangramApi\");\nif (!tangramApi) {\n  throw new Error(\"assert: tangram api not provided\");\n}\nconst query = ref(\"\");\nconst results = ref<Airport[]>([]);\nconst timeoutId = ref<number | null>(null);\n\nconst onInput = () => {\n  if (timeoutId.value) {\n    clearTimeout(timeoutId.value);\n  }\n  if (query.value.length >= 3) {\n    timeoutId.value = window.setTimeout(() => {\n      searchAirports();\n    }, 300);\n  } else {\n    results.value = [];\n  }\n};\n\nconst searchAirports = () => {\n  results.value = airport_information(query.value);\n};\n\nconst selectAirport = (airport: Airport) => {\n  tangramApi.map.getMapInstance().flyTo({\n    center: [airport.lon, airport.lat],\n    zoom: 13,\n    speed: 1.2\n  });\n  query.value = \"\";\n  results.value = [];\n};\n</script>\n\n<style scoped>\n.airport-search {\n  position: absolute;\n  width: 300px;\n  z-index: 1000;\n  top: 10px;\n  right: 10px;\n}\n\n.airport-search input {\n  width: 100%;\n  padding: 8px 12px;\n  border: 1px solid #ccc;\n  border-radius: 10px;\n  font-family: \"B612\", sans-serif;\n  box-sizing: border-box;\n}\n\n.search-results {\n  position: absolute;\n  top: 100%;\n  left: 0;\n  right: 0;\n  padding: 0;\n  margin: 4px 0 0 0;\n  list-style: none;\n  background: #fff;\n  border: 1px solid #ccc;\n  z-index: 1001;\n  max-height: 200px;\n  overflow-y: auto;\n  font-family: \"B612\", sans-serif;\n}\n\n.search-results li {\n  padding: 5px 10px;\n  cursor: pointer;\n}\n\n.search-results li:hover {\n  background-color: #eee;\n}\n</style>\n","import type { TangramApi } from \"@open-aviation/tangram-core/api\";\nimport AirportSearchWidget from \"./AirportSearchWidget.vue\";\n\nexport function install(api: TangramApi) {\n  api.ui.registerWidget(\"airport-search-widget\", \"MapOverlay\", AirportSearchWidget);\n}\n"],"names":["tangramApi","inject","query","ref","results","timeoutId","onInput","searchAirports","airport_information","selectAirport","airport","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","$event","_cache","_hoisted_2","_Fragment","_renderList","_toDisplayString","_hoisted_3","install","api","AirportSearchWidget"],"mappings":";;;;;;;;AAkCA,UAAMA,IAAaC,EAAmB,YAAY;AAClD,QAAI,CAACD;AACH,YAAM,IAAI,MAAM,kCAAkC;AAEpD,UAAME,IAAQC,EAAI,EAAE,GACdC,IAAUD,EAAe,EAAE,GAC3BE,IAAYF,EAAmB,IAAI,GAEnCG,IAAU,MAAM;AACpB,MAAID,EAAU,SACZ,aAAaA,EAAU,KAAK,GAE1BH,EAAM,MAAM,UAAU,IACxBG,EAAU,QAAQ,OAAO,WAAW,MAAM;AACxC,QAAAE,EAAA;AAAA,MACF,GAAG,GAAG,IAENH,EAAQ,QAAQ,CAAA;AAAA,IAEpB,GAEMG,IAAiB,MAAM;AAC3B,MAAAH,EAAQ,QAAQI,EAAoBN,EAAM,KAAK;AAAA,IACjD,GAEMO,IAAgB,CAACC,MAAqB;AAC1C,MAAAV,EAAW,IAAI,eAAA,EAAiB,MAAM;AAAA,QACpC,QAAQ,CAACU,EAAQ,KAAKA,EAAQ,GAAG;AAAA,QACjC,MAAM;AAAA,QACN,OAAO;AAAA,MAAA,CACR,GACDR,EAAM,QAAQ,IACdE,EAAQ,QAAQ,CAAA;AAAA,IAClB;sBAlEEO,EAAA,GAAAC,EAiBM,OAjBNC,GAiBM;AAAA,QAhBJC,EAME,SAAA;AAAA,sDALSZ,EAAK,QAAAa;AAAA,QACd,MAAK;AAAA,QACL,aAAY;AAAA,QACX,SAAKC,EAAA,CAAA,MAAAA,EAAA,CAAA,IAAA,CAAAD,MAAGA,EAAO,OAA4B,OAAA;AAAA,QAC3C,SAAAT;AAAA,MAAA;YAJQJ,EAAA,KAAK;AAAA,MAAA;MAMNE,EAAA,MAAQ,UAAlBO,KAAAC,EAQK,MARLK,GAQK;AAAA,gBAPHL,EAMKM,GAAA,MAAAC,EALef,EAAA,OAAO,CAAlBM,YADTE,EAMK,MAAA;AAAA,UAJF,KAAKF,EAAQ;AAAA,UACb,SAAK,CAAAK,MAAEN,EAAcC,CAAO;AAAA,QAAA,GAE1BU,EAAAV,EAAQ,IAAI,IAAG,SAAKA,EAAQ,IAAI,IAAG,QAAGU,EAAGV,EAAQ,IAAI,IAAG,MAC7D,GAAAW,CAAA;;;;;;;;;;ACbC,SAASC,EAAQC,GAAiB;AACvC,EAAAA,EAAI,GAAG,eAAe,yBAAyB,cAAcC,CAAmB;AAClF;"}