{
  "$id": "https://raw.githubusercontent.com/civic-interconnect/civic-interconnect/main/schemas/core/cep.entity.schema.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "CEP Entity Record",
  "description": "Record describing an entity (organization, person, district, etc.) in CEP.",
  "type": "object",
  "allOf": [
    {
      "$ref": "https://raw.githubusercontent.com/civic-interconnect/civic-interconnect/main/schemas/core/cep.record-envelope.schema.json"
    },
    {
      "type": "object",
      "properties": {
        "recordKind": {
          "const": "entity"
        },
        "jurisdictionIso": {
          "type": "string",
          "description": "ISO-style jurisdiction code (e.g. US-IL)."
        },
        "legalName": {
          "type": "string",
          "minLength": 1
        },
        "legalNameNormalized": {
          "type": ["string", "null"],
          "minLength": 1
        },
        "shortName": {
          "type": "string"
        },
        "identifiers": {
          "type": "array",
          "description": "A list of standardized identifiers for the entity, using schemes defined in the Civic Interconnect Vocabulary.",
          "items": {
            "type": "object",
            "properties": {
              "schemeUri": {
                "type": "string",
                "format": "uri",
                "x-cep-scheme": "https://raw.githubusercontent.com/civic-interconnect/civic-interconnect/main/schemas/core/cep.entity.identifier-scheme.schema.json",
                "description": "The URI defining the identifier scheme, restricted to the CEP Identifier Scheme Vocabulary."
              },
              "identifier": {
                "type": "string",
                "description": "The unique identifier value within the context of the schemeUri."
              },
              "sourceReference": {
                "type": "string",
                "description": "Optional reference to the original source document or system for this identifier."
              }
            },
            "required": ["schemeUri", "identifier"],
            "additionalProperties": false
          }
        },
        "inceptionDate": {
          "type": ["string", "null"],
          "format": "date"
        },
        "dissolutionDate": {
          "type": ["string", "null"],
          "format": "date"
        },
        "statusTerminationDate": {
          "type": ["string", "null"],
          "format": "date",
          "description": "Date when the entity ceased operations or the current status effectively ended, if applicable."
        },
        "successorEntityId": {
          "type": ["string", "null"],
          "description": "VerifiableId of the successor entity when this entity is merged, acquired, or otherwise continued under a new identity."
        }
      },
      "required": ["jurisdictionIso", "legalName"],
      "additionalProperties": true
    }
  ]
}
