import{b as y,j as e,B as S,ab as w,a6 as u,H as x,r as b,q as i,t as c,s as d,D as C,e as P,aj as T,ak as p,al as h,ad as R}from"./material-react-table-B5vcPysv.js";import{N as A}from"./useRecent-nqDOCkEd.js";import{N as D}from"./NavItem-BloxgtRl.js";import{R as M}from"./RecentNav-Dgp8dfVb.js";import{D as v,C as V,b as _,c as z,h as L,f as k,L as N,e as I,P as F,a as K}from"./index-Ch6wx3XL.js";import{P as n}from"./PlaceholderAction-pLqkJ47d.js";import{P as U}from"./ProcessStatus-Bdvktp4U.js";import{V as E}from"./Visibility-D5hmS0H8.js";import{R as O}from"./RoutingTable-BBWeRvTz.js";import{V as B,C as H}from"./CopyToClipboard-pq4dp3BD.js";import{D as W}from"./Datetime-C5IF8FhX.js";import{T as $,I as q}from"./Id-DVcvTkpi.js";import{u as j}from"./useSearchParameter-Bm_U9-M-.js";import"./@mapbox/rehype-prism-vXukC30A.js";import"./msw-CLcXU_4U.js";import"./ControlledDataTable-DvZXjuQB.js";import"./useLocalState-DdvWN1Wu.js";const G=y(e.jsx("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm-1 4 6 6v10c0 1.1-.9 2-2 2H7.99C6.89 23 6 22.1 6 21l.01-14c0-1.1.89-2 1.99-2zm-1 7h5.5L14 6.5z"}),"FileCopy"),Y=y(e.jsx("path",{d:"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8"}),"Replay"),J=y(e.jsx("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92"}),"Share");function Q({sx:o}){return e.jsxs(S,{sx:{display:"flex",justifyContent:"flex-start",flexWrap:"wrap",gap:1,...o},children:[e.jsx(n,{component:w,variant:"contained",color:"primary",description:e.jsx("div",{children:"This will open a dialog and ask for some key metadata, e.g. like the project name, before creating the project."}),children:"Create New Project"}),e.jsx(n,{component:w,variant:"outlined",description:e.jsx("div",{children:"This will open a dialog and ask for some key metadata, e.g. like the project name. It will also offer a selection of preconfigured example projects to choose from."}),children:"Add Example Project"})]})}function X({table:o}){const s=()=>{const r=o.getSelectedRowModel.length;confirm(`Are you sure you want to delete ${r} projects?`)},a=()=>{confirm("Are you sure you want to share the selected projects?")};return e.jsxs(e.Fragment,{children:[e.jsx(u,{arrow:!0,title:"Delete project",children:e.jsx(x,{onClick:s,color:"inherit",children:e.jsx(v,{})})}),e.jsx(u,{arrow:!0,title:"Share project",children:e.jsx(x,{onClick:a,color:"inherit",children:e.jsx(J,{})})})]})}function Z({table:o}){const s=()=>{const r=o.getSelectedRowModel().rows.length;confirm(`Num rows: ${r}: API model`)},a=()=>{confirm("Reload")};return e.jsxs(e.Fragment,{children:[e.jsx(u,{arrow:!0,title:"API",children:e.jsx(x,{onClick:s,children:e.jsx(V,{})})}),e.jsx(u,{arrow:!0,title:"Reload the projects",children:e.jsx(x,{onClick:a,children:e.jsx(Y,{})})})]})}function ee(){const{navigate:o,url:s}=_(),a=z(L),{isPage:r}=k(),m=b.useMemo(()=>Object.keys(a).filter(t=>t!=="m_response").map(t=>a[t]),[a]),f=b.useMemo(()=>[{accessorKey:"upload_name",header:"Name",grow:!0,Cell:({cell:t})=>e.jsx($,{value:t.getValue(),fullWidth:!0})},{accessorKey:"upload_id",header:"ID",enableSorting:!1,size:150,Cell:({cell:t})=>e.jsxs(B,{value:t.getValue(),fullWidth:!0,children:[e.jsx(q,{abbreviated:!0}),e.jsx(H,{})]})},{accessorKey:"upload_create_time",header:"Create Time",enableSorting:!0,size:190,Cell:({cell:t})=>e.jsx(W,{value:t.getValue(),variant:"datetime"})},{accessorKey:"published",header:"Visibility",enableSorting:!1,size:100,center:!0,Cell:({row:t})=>e.jsx(E,{upload:t.original,variant:"icon"})},{accessorKey:"process_status",header:"Status",size:150,center:!0,Cell:({row:t})=>e.jsx(U,{entity:t.original,variant:"icon"})}],[]),g=b.useCallback(t=>[e.jsxs(i,{component:N,to:s({path:t.upload_id}),children:[e.jsx(c,{}),e.jsx(d,{children:"Open"})]},"open"),e.jsx(C,{},"divider"),e.jsxs(n,{component:i,description:e.jsx("div",{children:"This will open a dialog and allow to rename a project. It will also check if the project can be safely renamed without breaking any references."}),children:[e.jsx(c,{children:e.jsx(P,{fontSize:"small"})}),e.jsx(d,{children:"Rename"})]},"edit"),e.jsxs(n,{component:i,description:e.jsx("div",{children:"This will open a dialog and allow to copy the project under a new title."}),children:[e.jsx(c,{children:e.jsx(G,{fontSize:"small"})}),e.jsx(d,{children:"Copy"})]},"edit"),e.jsxs(n,{component:i,description:e.jsx("div",{children:"This will open a confirm dialog and allow to delete a project. It will also check if the project can be safely renamed without breaking any references."}),children:[e.jsx(c,{children:e.jsx(v,{fontSize:"small"})}),e.jsx(d,{children:"Delete"})]},"delete")],[s]);return e.jsx(O,{paginationType:"page",entityLabel:"project",getRowId:t=>t.upload_id,onRowClick:t=>{typeof t.upload_id=="string"&&o(r?{path:t.upload_id}:{path:`${t.upload_id}/files`})},columns:f,data:m,rowContextMenuItems:r?g:void 0,toolbarActions:t=>e.jsx(Z,{table:t}),toolbarSelectActions:r?t=>e.jsx(X,{table:t}):void 0})}function te(){const[o,s]=j("owned",!0),[a,r]=j("shared",!0),[m,f]=j("editable_only",!1),[g,t]=j("processing",!1);return e.jsx(I,{children:e.jsxs(T,{row:!0,children:[e.jsx(p,{control:e.jsx(h,{checked:o,onChange:l=>s(l.target.checked)}),label:"created by you"}),e.jsx(p,{sx:{mr:4},control:e.jsx(h,{checked:a,onChange:l=>r(l.target.checked)}),label:"shared with you"}),e.jsx(p,{control:e.jsx(h,{checked:m,onChange:l=>f(l.target.checked)}),label:"only editable"}),e.jsx(p,{control:e.jsx(h,{checked:g,onChange:l=>t(l.target.checked)}),label:"only failed or processing"})]})})}function be(){const{isPage:o,pageVariant:s}=k();return e.jsxs(F,{variant:s,navigation:e.jsxs(A,{children:[e.jsx(D,{label:"projects",selected:!0}),e.jsx(C,{}),e.jsx(M,{label:"Recently viewed projects",scope:"global",storageKey:"uploads"})]}),children:[o&&e.jsx(K,{title:"Projects",subtitle:"You can manage your projects here. A project is a container for your files and data. Projects can be shared with other users."}),o&&e.jsx(I,{leftActions:e.jsx(Q,{}),rightActions:e.jsx(R,{sx:{width:400},size:"small",label:"Search or filter projects",variant:"outlined"})}),e.jsx(te,{}),e.jsx(ee,{})]})}export{be as default};
