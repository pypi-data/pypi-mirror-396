import{r,j as e,a5 as g,n as f,aU as h,aV as b,aW as x}from"./material-react-table-CoLKVKmx.js";import{az as j,aq as v,aA as R,as as w,aB as y,aC as C}from"./index-Bzcp6Isa.js";import{D as O}from"./Download-BLwTLAkE.js";import"./rehype-prism-plus-Ct2a49xA.js";import"./msw-DptHyBtO.js";import"./plotly.js-dist-min-Bl-VrBG9.js";const d={DEBUG:"#4caf50",INFO:"#2196f3",WARNING:"#ff9800",ERROR:"#f44336",CRITICAL:"#d32f2f"},T=15,D=y();function E(n){const{data:o,globalFilter:i}=n,s=r.useMemo(()=>[...new Set(o.flatMap(t=>Object.keys(t)).sort())],[o]),a=r.useMemo(()=>h(),[]),l=r.useMemo(()=>[a.accessor("level",{header:"Level",filterVariant:"multi-select",filterSelectOptions:Object.keys(d),size:110,grow:!1,Cell:({cell:t})=>{const c=t.getValue(),p=d[c]||"#999999";return e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:p,marginRight:"8px"}}),c]})}}),a.accessor("event",{header:"Event",grow:!0}),a.accessor("timestamp",{header:"Timestamp",sortingFn:"datetime",grow:!1}),...s.filter(t=>!["level","event","timestamp"].includes(t)).map(t=>a.accessor(t,{header:t[0].toUpperCase()+t.slice(1).replace(/_/g," "),grow:!1}))],[s,a]),u=r.useMemo(()=>({columnVisibility:{...Object.fromEntries(s.map(t=>[t,!1])),level:!0,event:!0,timestamp:!0},pagination:{pageIndex:0,pageSize:T},density:"compact",sorting:[{id:"timestamp",desc:!1}],showGlobalFilter:!1}),[s]),m=b({...D,columns:l,data:o,initialState:u,state:{globalFilter:i},enableRowNumbers:!0,renderDetailPanel:({row:t})=>e.jsx(C,{value:t.original,hasDefaultValueTypes:!1})});return e.jsx(x,{table:m})}function L(n){const o=n.data,i=()=>{const s=new Blob([JSON.stringify(o,null,2)],{type:"application/json"}),a=URL.createObjectURL(s),l=document.createElement("a");l.href=a,l.download="processing_logs.json",document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(a)};return e.jsx(g,{title:"Download logs (JSON)",children:e.jsx(f,{variant:"outlined",onClick:i,children:e.jsx(O,{})})})}function N(){const[n,o]=r.useState(""),s=j()?.archive?.processing_logs;return e.jsxs(e.Fragment,{children:[e.jsx(v,{title:e.jsx(w,{title:"Entry logs",sx:{mt:0,mb:0}}),secondaryActions:e.jsx(L,{data:s}),search:e.jsx(R,{placeholder:"Search logs",value:n,onChange:a=>o(a.target.value),onClear:()=>o("")})}),e.jsx(E,{data:s,globalFilter:n})]})}export{N as default};
