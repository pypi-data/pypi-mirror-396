import{j as r,B as c,ab as p,r as l,aj as d,ak as m,al as g}from"./material-react-table-B5vcPysv.js";import{u as f,b as x,c as h,g as b,d as j,e as i,f as w,P as y}from"./index-Ch6wx3XL.js";import{P as C}from"./PlaceholderAction-pLqkJ47d.js";import{R as v}from"./RoutingTable-BBWeRvTz.js";import{T as o,I as R}from"./Id-DVcvTkpi.js";import{u as k}from"./useSearchParameter-Bm_U9-M-.js";import"./@mapbox/rehype-prism-vXukC30A.js";import"./msw-CLcXU_4U.js";import"./ControlledDataTable-DvZXjuQB.js";import"./useLocalState-DdvWN1Wu.js";function P({sx:s}){return r.jsx(c,{sx:{display:"flex",justifyContent:"flex-start",flexWrap:"wrap",gap:1,...s},children:r.jsx(C,{component:p,variant:"contained",color:"primary",description:r.jsx("div",{children:"This will open a dialog and ask for some key metadata, e.g. like the group name, before creating the group."}),children:"Create New Group"})})}function _(s,a){return s?.owner?.user_id===a?"Owner":s?.members?.some(t=>t.user_id===a)?"Member":null}function G(){const{user:s}=f(),{navigate:a}=x(),t=h(b),u=l.useMemo(()=>Object.keys(t).filter(e=>e!=="m_response").map(e=>t[e]),[t]),n=l.useMemo(()=>[{accessorKey:"group_name",header:"Name",Cell:({cell:e})=>r.jsx(o,{value:e.getValue(),fullWidth:!0}),grow:!0},{accessorKey:"owner.name",header:"Owner",Cell:({cell:e})=>r.jsx(o,{value:e.getValue()}),grow:!0},{header:"Role",accessorFn:e=>_(e,s?.profile.sub),Cell:({cell:e})=>r.jsx(o,{value:e.getValue()}),grow:!0},{id:"members",accessorFn:e=>e?.members?.length||"0",header:"Members",Cell:({cell:e})=>r.jsx(o,{value:e.getValue()}),center:!0,grow:!0,foo:"bar"},{accessorKey:"group_id",header:"ID",Cell:({cell:e})=>r.jsx(R,{value:e.getValue(),abbreviated:!0}),grow:!0}],[s?.profile.sub]);return r.jsx(v,{paginationType:"page",entityLabel:"group",getRowId:e=>e.group_id,onRowClick:e=>{a({path:e.group_id})},columns:n,data:u})}function M(){const{user:s}=j(),a=s?.profile.sub??"",[t,u]=k("user_id",a);return r.jsx(i,{children:r.jsx(d,{row:!0,children:r.jsx(m,{control:r.jsx(g,{disabled:!s,checked:!!s&&t===a,onChange:n=>{u(n.target.checked?a:"")}}),label:"My groups"})})})}function E(){const{pageVariant:s}=w();return r.jsxs(y,{variant:s,title:"Groups",subtitle:"Manage your user groups here. Projects can also be shared with groups instead of single users.",children:[r.jsx(i,{leftActions:r.jsx(P,{})}),r.jsx(M,{}),r.jsx(G,{})]})}export{E as default};
