import"./DsnmJJEf.js";import{i as sa}from"./DxX3FukI.js";import{p as ra,ac as la,g as e,P as T,T as c,aj as ta,e as ha,ak as _a,j as g,m as s,n as t,l as v,i as ia,af as Z,k as W,s as l,t as R,o as _,b as i,al as He,ao as $a,am as Je,ah as ca}from"./WOjXuHiA.js";import{p as qe,i as b}from"./BizFt_BK.js";import{s as ba,r as Ca,k as va}from"./CCvFwjU_.js";import{h as aa,t as We,f as pa,i as ma,e as xa,l as Oa,r as Fa,m as Ia,n as Aa,d as ka}from"./DE2oonYt.js";import{_ as Ta,b as Sa}from"./C47y_Rze.js";import{o as ga,g as Pa,a as Pe,b as Xe,c as da}from"./DjpPRx00.js";const na={getAvailable(V){return aa(`/api/visualize/available/${V}`)},getConfusionMatrix(V){return aa(`/api/visualize/confusion-matrix/${V}`)},getCrossValidation(V){return aa(`/api/visualize/cross-validation/${V}`)},getTrainingHistory(V){return aa(`/api/visualize/training-history/${V}`)},getTuningStatistics(V){return aa(`/api/visualize/tuning-statistics/${V}`)},getPcaAnalysis(V){return aa(`/api/visualize/pca-analysis?pca_file_path=${encodeURIComponent(V)}`)},getExtractionSummary(V){return aa(`/api/visualize/extraction-summary/${V}`)},getPredictionProbability(V){return aa(`/api/visualize/prediction-probability/${V}`)},getGrowingWindows(V){return aa(`/api/visualize/growing-windows/${V}`)}};async function za(V,I,u={}){const{scale:G=2}=u;try{const a=(await Ta(async()=>{const{default:f}=await import("./B0tyYwQk.js");return{default:f}},[],import.meta.url)).default,n=console.error;let k;try{console.error=(...f)=>{const j=String(f[0]||"");j.includes("'caller', 'callee', and 'arguments'")||j.includes("Invalid regular expression")||j.includes("Cannot read properties of null")||j.includes("Cannot add property 0, object is not extensible")||n.apply(console,f)},k=await a(V,{scale:G,backgroundColor:"#ffffff",logging:!1,useCORS:!0,allowTaint:!1})}finally{console.error=n}const m=await new Promise(f=>k.toBlob(j=>f(j),"image/png")),h=await Da(m);window.showSaveFilePicker?await Ra(h,I,"png"):Va(h,I,"png")}catch(a){if(a instanceof Error&&a.name==="AbortError"){console.log("User cancelled save dialog");return}const n=a instanceof Error?a.message:String(a);throw console.error("Failed to export DOM element:",a),new Error(`Failed to export visualization: ${n}`)}}function Da(V){return new Promise((I,u)=>{const G=new FileReader;G.onload=()=>I(G.result),G.onerror=u,G.readAsDataURL(V)})}async function Ze(V,I,u={}){const{width:G=1200,height:a=800,format:n="png"}=u;try{const k=await window.Plotly.toImage(V,{format:n,width:G,height:a});window.showSaveFilePicker?await Ra(k,I,n):Va(k,I,n)}catch(k){if(k instanceof Error&&k.name==="AbortError"){console.log("User cancelled save dialog");return}const m=k instanceof Error?k.message:String(k);throw console.error("Failed to export plot:",k),new Error(`Failed to export visualization: ${m}`)}}async function Ra(V,I,u){const a=await(await window.showSaveFilePicker({suggestedName:`${I}.${u}`,types:[{description:`${u.toUpperCase()} Image`,accept:{[`image/${u}`]:[`.${u}`]}}]})).createWritable(),n=V.split(",")[1],k=atob(n),m=Uint8Array.from(k,f=>f.charCodeAt(0)),h=new Blob([m],{type:`image/${u}`});await a.write(h),await a.close()}function Va(V,I,u){const G=document.createElement("a");G.href=V,G.download=`${I}.${u}`,document.body.appendChild(G),G.click(),document.body.removeChild(G)}let wa=null;async function fa(){if(wa)return wa;if(typeof window>"u")throw new Error("Plotly can only be loaded in the browser");return wa=Ta(()=>import("./5TX5mmG4.js").then(V=>V.p),[],import.meta.url).then(V=>V.default),wa}var Na=g('<div class="loading svelte-1r9304k"><div class="spinner svelte-1r9304k"></div> <p>Loading cross-validation results...</p></div>'),La=g('<div class="error svelte-1r9304k"><h4 class="svelte-1r9304k">‚ö†Ô∏è Unable to load visualization</h4> <p> </p></div>'),ja=g('<tr class="svelte-1r9304k"><td class="fold-num svelte-1r9304k"> </td><td class="svelte-1r9304k"> </td><td class="svelte-1r9304k"> </td><td class="svelte-1r9304k"> </td><td class="svelte-1r9304k"> </td><td class="svelte-1r9304k"> </td></tr>'),Ua=g('<div class="viz-content svelte-1r9304k"><div class="plot-wrapper"><div class="plot-header svelte-1r9304k"><button class="btn btn-sm btn-secondary save-plot-btn svelte-1r9304k" title="Save Cross-Validation Results as PNG">üíæ Save</button></div> <div class="plot-container svelte-1r9304k"></div></div> <div class="fold-evolution-plot svelte-1r9304k"><h4 class="svelte-1r9304k">Metric Evolution Across Folds</h4> <div class="plot-wrapper"><div class="plot-header svelte-1r9304k"><button class="btn btn-sm btn-secondary save-plot-btn svelte-1r9304k" title="Save Visualizations as PNG">üíæ Save All</button></div> <div class="plot-container svelte-1r9304k"></div></div></div> <div class="fold-details svelte-1r9304k"><h4 class="svelte-1r9304k"> </h4> <table class="fold-table svelte-1r9304k"><thead><tr><th class="svelte-1r9304k">Fold</th><th class="svelte-1r9304k">Accuracy</th><th class="svelte-1r9304k">AUC</th><th class="svelte-1r9304k">Recall</th><th class="svelte-1r9304k">F-Score</th><th class="svelte-1r9304k">Precision</th></tr></thead><tbody class="svelte-1r9304k"><!><tr class="summary-row mean-row svelte-1r9304k"><td class="summary-label svelte-1r9304k">Mean</td><td class="svelte-1r9304k"> </td><td class="svelte-1r9304k"> </td><td class="svelte-1r9304k"> </td><td class="svelte-1r9304k"> </td><td class="svelte-1r9304k"> </td></tr><tr class="summary-row std-row svelte-1r9304k"><td class="summary-label svelte-1r9304k">œÉ</td><td class="svelte-1r9304k"> </td><td class="svelte-1r9304k"> </td><td class="svelte-1r9304k"> </td><td class="svelte-1r9304k"> </td><td class="svelte-1r9304k"> </td></tr></tbody></table></div></div>'),Ma=g('<div class="cv-viz svelte-1r9304k"><!></div>');function Ha(V,I){ra(I,!1);let u=qe(I,"jobId",8),G=qe(I,"registerSaveHandler",8),a=T(null),n=T(!0),k=T(null),m=T(),h=T(null),f=T(!1),j=null,ce=T(null);async function Re(){c(n,!0),c(k,null);try{c(a,await na.getCrossValidation(u()))}catch(r){const o=r instanceof Error?r.message:String(r);c(k,o),console.error("Failed to load CV data:",r)}finally{c(n,!1)}}async function ze(){if(!e(a)||!e(m)||!e(h))return;const r=["accuracy","auc","recall","fscore","precision"],o=Pa(),z={accuracy:o[0],auc:Pe("--chart-negative"),recall:Pe("--chart-positive"),fscore:Pe("--chart-septenary"),precision:o[1]},F=r.map(x=>{const w=e(a).fold_results.map(P=>P[x]),$=e(a).fold_results.map(P=>`Fold ${P.fold}: ${P[x].toFixed(4)}`);return{y:w,type:"box",name:x.charAt(0).toUpperCase()+x.slice(1),marker:{color:z[x],size:8},boxpoints:"all",jitter:0,pointpos:0,boxmean:!0,text:$,hovertemplate:"%{text}<extra></extra>"}}),E=Xe({title:{text:`${e(a).model.toUpperCase()} Cross-Validation Results`},yaxis:{title:"Score",range:[0,1]},showlegend:!1,height:400,margin:{t:50,b:50,l:60,r:30}}),y=da();await e(h).newPlot(e(m),F,E,y)}let Se=T();async function je(){if(!e(a)||!e(Se)||!e(h))return;const r=["accuracy","auc","recall","fscore","precision"],o=Pa(),z={accuracy:o[0],auc:Pe("--chart-negative"),recall:Pe("--chart-positive"),fscore:Pe("--chart-septenary"),precision:o[1]},F=e(a).fold_results.map(w=>w.fold),E=r.map(w=>{const $=e(a).fold_results.map(P=>P[w]);return{x:F,y:$,type:"scatter",mode:"lines+markers",name:w.charAt(0).toUpperCase()+w.slice(1),line:{color:z[w],width:2},marker:{color:z[w],size:8},hovertemplate:`${w.charAt(0).toUpperCase()+w.slice(1)}<br>Fold %{x}: %{y:.4f}<extra></extra>`}}),y=Xe({title:{text:"Metric Evolution Across Folds"},xaxis:{title:"Fold",tickmode:"linear",dtick:1},yaxis:{title:"Score",range:[0,1]},hovermode:"closest",showlegend:!0,legend:{x:1.02,y:1,xanchor:"left",yanchor:"top"},height:400,margin:{t:50,b:50,l:60,r:120}}),x=da();await e(h).newPlot(e(Se),E,y,x)}async function N(){c(f,!0);try{await Ze(e(m),`crossvalidation_boxplot_${u()}`),await Ze(e(Se),`crossvalidation_evolution_${u()}`)}catch(r){const o=r instanceof Error?r.message:String(r);o&&We.error(`No se pudo guardar la visualizaci√≥n: ${o}`)}finally{c(f,!1)}}async function C(){await N()}la(()=>((async()=>{c(h,await fa()),await Re(),j=ga(()=>{e(a)&&e(h)&&(ze(),je())})})(),()=>{j?.(),e(ce)?.()})),ta(()=>(e(a),e(m),e(h),e(ce),ha(G())),()=>{e(a)&&e(m)&&e(h)&&(ze(),e(ce)?.(),c(ce,G()?.(C)??null))}),ta(()=>(e(a),e(Se),e(h)),()=>{e(a)&&e(Se)&&e(h)&&je()}),_a(),sa();var U=Ma(),Ne=s(U);{var D=r=>{var o=Na();v(r,o)},d=r=>{var o=Z(),z=W(o);{var F=y=>{var x=La(),w=l(s(x),2),$=s(w,!0);t(w),t(x),R(()=>_($,e(k))),v(y,x)},E=y=>{var x=Z(),w=W(x);{var $=P=>{var Q=Ua(),ee=s(Q),be=s(ee),ie=s(be);t(be);var pe=l(be,2);Sa(pe,B=>c(m,B),()=>e(m)),t(ee);var me=l(ee,2),ge=l(s(me),2),he=s(ge),xe=s(he);t(he);var ke=l(he,2);Sa(ke,B=>c(Se,B),()=>e(Se)),t(ge),t(me);var te=l(me,2),X=s(te),se=s(X);t(X);var ne=l(X,2),fe=l(s(ne)),J=s(fe);pa(J,1,()=>(e(a),i(()=>e(a).fold_results)),ma,(B,O)=>{var re=ja(),Fe=s(re),Oe=s(Fe);t(Fe);var ae=l(Fe),Me=s(ae,!0);t(ae);var Ee=l(ae),Ie=s(Ee,!0);t(Ee);var Be=l(Ee),A=s(Be,!0);t(Be);var L=l(Be),Te=s(L,!0);t(L);var Ge=l(L),Qe=s(Ge,!0);t(Ge),t(re),R((ua,ea,Ye,Ke,ya)=>{_(Oe,`#${e(O),i(()=>e(O).fold)??""}`),_(Me,ua),_(Ie,ea),_(A,Ye),_(Te,Ke),_(Qe,ya)},[()=>(e(O),i(()=>e(O).accuracy.toFixed(4))),()=>(e(O),i(()=>e(O).auc.toFixed(4))),()=>(e(O),i(()=>e(O).recall.toFixed(4))),()=>(e(O),i(()=>e(O).fscore.toFixed(4))),()=>(e(O),i(()=>e(O).precision.toFixed(4)))]),v(B,re)});var S=l(J),M=l(s(S)),le=s(M,!0);t(M);var oe=l(M),p=s(oe,!0);t(oe);var K=l(oe),ye=s(K,!0);t(K);var de=l(K),De=s(de,!0);t(de);var ve=l(de),Ae=s(ve,!0);t(ve),t(S);var ue=l(S),q=l(s(ue)),Y=s(q,!0);t(q);var H=l(q),_e=s(H,!0);t(H);var we=l(H),Ve=s(we,!0);t(we);var Ce=l(we),Le=s(Ce,!0);t(Ce);var $e=l(Ce),Ue=s($e,!0);t($e),t(ue),t(fe),t(ne),t(te),t(Q),R((B,O,re,Fe,Oe,ae,Me,Ee,Ie,Be)=>{ie.disabled=e(f),xe.disabled=e(f),_(se,`Cross-Validation Results (${e(a),i(()=>e(a).n_folds)??""} folds)`),_(le,B),_(p,O),_(ye,re),_(De,Fe),_(Ae,Oe),_(Y,ae),_(_e,Me),_(Ve,Ee),_(Le,Ie),_(Ue,Be)},[()=>(e(a),i(()=>e(a).mean_metrics.accuracy?.toFixed(4)||"N/A")),()=>(e(a),i(()=>e(a).mean_metrics.auc?.toFixed(4)||"N/A")),()=>(e(a),i(()=>e(a).mean_metrics.recall?.toFixed(4)||"N/A")),()=>(e(a),i(()=>e(a).mean_metrics.fscore?.toFixed(4)||"N/A")),()=>(e(a),i(()=>e(a).mean_metrics.precision?.toFixed(4)||"N/A")),()=>(e(a),i(()=>e(a).std_metrics?.accuracy?.toFixed(4)||"0.0000")),()=>(e(a),i(()=>e(a).std_metrics?.auc?.toFixed(4)||"0.0000")),()=>(e(a),i(()=>e(a).std_metrics?.recall?.toFixed(4)||"0.0000")),()=>(e(a),i(()=>e(a).std_metrics?.fscore?.toFixed(4)||"0.0000")),()=>(e(a),i(()=>e(a).std_metrics?.precision?.toFixed(4)||"0.0000"))]),He("click",ie,N),He("click",xe,N),v(P,Q)};b(w,P=>{e(a)&&P($)},!0)}v(y,x)};b(z,y=>{e(k)?y(F):y(E,!1)},!0)}v(r,o)};b(Ne,r=>{e(n)?r(D):r(d,!1)})}t(U),v(V,U),ia()}var Ga=g('<div class="loading svelte-1k000ya"><div class="spinner svelte-1k000ya"></div> <p>Loading confusion matrix...</p></div>'),qa=g('<div class="error svelte-1k000ya"><h4 class="svelte-1k000ya">‚ö†Ô∏è Unable to load confusion matrix</h4> <p> </p></div>'),Ba=g('<div class="info-banner svelte-1k000ya"><strong>‚ÑπÔ∏è Note:</strong> </div>'),Wa=g('<div class="metric-card svelte-1k000ya"><span class="metric-label svelte-1k000ya">AUROC</span> <span class="metric-value svelte-1k000ya"> </span></div>'),Ja=g(`<span class="optimized-indicator svelte-1k000ya" title="Optimized using Youden's J statistic (maximizing TPR - FPR) during training">‚úì</span>`),Ya=g('<span class="threshold-note svelte-1k000ya">Optimized from training</span>'),Ka=g('<div class="metric-card threshold-card svelte-1k000ya"><span class="metric-label svelte-1k000ya">Classification Threshold <!></span> <span class="metric-value svelte-1k000ya"> </span> <!></div>'),Qa=g('<div class="matrix-breakdown svelte-1k000ya"><h4 class="svelte-1k000ya">Confusion Matrix Breakdown</h4> <table class="svelte-1k000ya"><thead><tr><th class="svelte-1k000ya"></th><th class="svelte-1k000ya">Predicted Positive</th><th class="svelte-1k000ya">Predicted Negative</th></tr></thead><tbody><tr><th class="svelte-1k000ya">Actual Positive</th><td class="tp svelte-1k000ya"><strong class="svelte-1k000ya"> </strong> <span class="label svelte-1k000ya">True Positive</span></td><td class="fp svelte-1k000ya"><strong class="svelte-1k000ya"> </strong> <span class="label svelte-1k000ya">False Positive</span></td></tr><tr><th class="svelte-1k000ya">Actual Negative</th><td class="fn svelte-1k000ya"><strong class="svelte-1k000ya"> </strong> <span class="label svelte-1k000ya">False Negative</span></td><td class="tn svelte-1k000ya"><strong class="svelte-1k000ya"> </strong> <span class="label svelte-1k000ya">True Negative</span></td></tr></tbody></table></div> <div class="metrics-summary svelte-1k000ya"><h4 class="svelte-1k000ya">Classification Metrics</h4> <div class="metrics-grid svelte-1k000ya"><div class="metric-card svelte-1k000ya"><span class="metric-label svelte-1k000ya">Accuracy</span> <span class="metric-value svelte-1k000ya"> </span></div> <div class="metric-card svelte-1k000ya"><span class="metric-label svelte-1k000ya">Precision</span> <span class="metric-value svelte-1k000ya"> </span></div> <div class="metric-card svelte-1k000ya"><span class="metric-label svelte-1k000ya">Recall</span> <span class="metric-value svelte-1k000ya"> </span></div> <div class="metric-card svelte-1k000ya"><span class="metric-label svelte-1k000ya">F1 Score</span> <span class="metric-value svelte-1k000ya"> </span></div> <!> <div class="metric-card svelte-1k000ya"><span class="metric-label svelte-1k000ya">Specificity</span> <span class="metric-value svelte-1k000ya"> </span></div> <div class="metric-card svelte-1k000ya"><span class="metric-label svelte-1k000ya">Total Samples</span> <span class="metric-value svelte-1k000ya"> </span></div> <!></div></div>',1),Xa=g('<div class="viz-content svelte-1k000ya"><div class="plot-header svelte-1k000ya"><button class="btn btn-sm btn-secondary save-plot-btn svelte-1k000ya" title="Save Confusion Matrix as PNG">üíæ Save</button></div> <div id="confusion-matrix-container"><!> <!></div></div>'),Za=g('<div class="confusion-matrix-viz svelte-1k000ya"><!></div>');function et(V,I){ra(I,!1);const u=T();let G=qe(I,"jobId",8),a=qe(I,"registerSaveHandler",8),n=T(null),k=T(!0),m=T(null),h=T(!1);async function f(){c(h,!0);try{const C=document.getElementById("confusion-matrix-container");if(!C)throw new Error("Chart element not found");await za(C,`confusion_matrix_${G()}`,{scale:2})}catch(C){const U=C instanceof Error?C.message:String(C);U&&We.error(`No se pudo guardar la visualizaci√≥n: ${U}`)}finally{c(h,!1)}}async function j(){await f()}let ce=null;la(()=>{Re().then(()=>{ce=a()?.(j)??null})}),$a(()=>{ce?.()});async function Re(){c(k,!0),c(m,null);try{c(n,await na.getConfusionMatrix(G()))}catch(C){const U=C instanceof Error?C.message:String(C);c(m,U)}finally{c(k,!1)}}ta(()=>e(n),()=>{c(u,e(n)?.metrics?(()=>{const[[C,U],[Ne,D]]=e(n).matrix,d=C/(C+U)||0;return{accuracy:(e(n).metrics.accuracy*100).toFixed(2),precision:(e(n).metrics.precision*100).toFixed(2),recall:(e(n).metrics.recall*100).toFixed(2),f1:(e(n).metrics.fscore*100).toFixed(2),auroc:(e(n).metrics.auroc*100).toFixed(2),specificity:(d*100).toFixed(2),total:D+C+U+Ne}})():e(n)?.matrix?(()=>{const[[C,U],[Ne,D]]=e(n).matrix,d=(C+D)/(C+D+U+Ne)*100,r=C/(C+U)||0,o=C/(C+Ne)||0,z=2*r*o/(r+o)||0,F=D/(D+U)||0;return{accuracy:d.toFixed(2),precision:(r*100).toFixed(2),recall:(o*100).toFixed(2),f1:(z*100).toFixed(2),specificity:(F*100).toFixed(2),total:C+D+U+Ne}})():null)}),_a(),sa();var ze=Za(),Se=s(ze);{var je=C=>{var U=Ga();v(C,U)},N=C=>{var U=Z(),Ne=W(U);{var D=r=>{var o=qa(),z=l(s(o),2),F=s(z,!0);t(z),t(o),R(()=>_(F,e(m))),v(r,o)},d=r=>{var o=Z(),z=W(o);{var F=E=>{var y=Xa(),x=s(y),w=s(x);t(x);var $=l(x,2),P=s($);{var Q=ie=>{var pe=Ba(),me=l(s(pe));t(pe),R(()=>_(me,` ${e(n),i(()=>e(n).note)??""}`)),v(ie,pe)};b(P,ie=>{e(n),i(()=>e(n).note)&&ie(Q)})}var ee=l(P,2);{var be=ie=>{var pe=Qa(),me=W(pe),ge=l(s(me),2),he=l(s(ge)),xe=s(he),ke=l(s(xe)),te=s(ke),X=s(te,!0);t(te),Je(2),t(ke);var se=l(ke),ne=s(se),fe=s(ne,!0);t(ne),Je(2),t(se),t(xe);var J=l(xe),S=l(s(J)),M=s(S),le=s(M,!0);t(M),Je(2),t(S);var oe=l(S),p=s(oe),K=s(p,!0);t(p),Je(2),t(oe),t(J),t(he),t(ge),t(me);var ye=l(me,2),de=l(s(ye),2),De=s(de),ve=l(s(De),2),Ae=s(ve);t(ve),t(De);var ue=l(De,2),q=l(s(ue),2),Y=s(q);t(q),t(ue);var H=l(ue,2),_e=l(s(H),2),we=s(_e);t(_e),t(H);var Ve=l(H,2),Ce=l(s(Ve),2),Le=s(Ce);t(Ce),t(Ve);var $e=l(Ve,2);{var Ue=Ie=>{var Be=Wa(),A=l(s(Be),2),L=s(A);t(A),t(Be),R(()=>_(L,`${e(u),i(()=>e(u).auroc)??""}%`)),v(Ie,Be)};b($e,Ie=>{e(u),i(()=>e(u).auroc)&&Ie(Ue)})}var B=l($e,2),O=l(s(B),2),re=s(O);t(O),t(B);var Fe=l(B,2),Oe=l(s(Fe),2),ae=s(Oe,!0);t(Oe),t(Fe);var Me=l(Fe,2);{var Ee=Ie=>{var Be=Ka(),A=s(Be),L=l(s(A));{var Te=Ye=>{var Ke=Ja();v(Ye,Ke)};b(L,Ye=>{e(n),i(()=>Math.abs(e(n).threshold*100-50)>1)&&Ye(Te)})}t(A);var Ge=l(A,2),Qe=s(Ge);t(Ge);var ua=l(Ge,2);{var ea=Ye=>{var Ke=Ya();v(Ye,Ke)};b(ua,Ye=>{e(n),i(()=>Math.abs(e(n).threshold*100-50)>1)&&Ye(ea)})}t(Be),R(Ye=>_(Qe,`${Ye??""}%`),[()=>(e(n),i(()=>(e(n).threshold*100).toFixed(2)))]),v(Ie,Be)};b(Me,Ie=>{e(n),i(()=>e(n).threshold!==void 0)&&Ie(Ee)})}t(de),t(ye),R(()=>{_(X,(e(n),i(()=>e(n).matrix[0][0]))),_(fe,(e(n),i(()=>e(n).matrix[0][1]))),_(le,(e(n),i(()=>e(n).matrix[1][0]))),_(K,(e(n),i(()=>e(n).matrix[1][1]))),_(Ae,`${e(u),i(()=>e(u).accuracy)??""}%`),_(Y,`${e(u),i(()=>e(u).precision)??""}%`),_(we,`${e(u),i(()=>e(u).recall)??""}%`),_(Le,`${e(u),i(()=>e(u).f1)??""}%`),_(re,`${e(u),i(()=>e(u).specificity)??""}%`),_(ae,(e(u),i(()=>e(u).total)))}),v(ie,pe)};b(ee,ie=>{e(u)&&ie(be)})}t($),t(y),R(()=>w.disabled=e(h)),He("click",w,f),v(E,y)};b(z,E=>{e(n)&&E(F)},!0)}v(r,o)};b(Ne,r=>{e(m)?r(D):r(d,!1)},!0)}v(C,U)};b(Se,C=>{e(k)?C(je):C(N,!1)})}t(ze),v(V,ze),ia()}var at=g('<div class="loading svelte-1b6lxrt"><div class="spinner svelte-1b6lxrt"></div> <p>Loading training history...</p></div>'),tt=g(`<div class="info-box svelte-1b6lxrt"><p><strong>Note:</strong> Training history is only available for models
            trained with history tracking enabled. Older models may not have this
            data.</p></div>`),st=g('<div class="error svelte-1b6lxrt"><h4 class="svelte-1b6lxrt">‚ö†Ô∏è Unable to load training history</h4> <p> </p> <!></div>'),rt=g('<div class="summary-cards svelte-1b6lxrt"><div class="summary-card svelte-1b6lxrt"><span class="card-label svelte-1b6lxrt">Total Epochs</span> <span class="card-value svelte-1b6lxrt"> </span></div> <div class="summary-card highlight svelte-1b6lxrt"><span class="card-label svelte-1b6lxrt">Best AUROC</span> <span class="card-value svelte-1b6lxrt"> </span> <span class="card-hint svelte-1b6lxrt"> </span></div> <div class="summary-card svelte-1b6lxrt"><span class="card-label svelte-1b6lxrt">Minimum Loss</span> <span class="card-value svelte-1b6lxrt"> </span></div> <div class="summary-card svelte-1b6lxrt"><span class="card-label svelte-1b6lxrt">Final AUROC</span> <span class="card-value svelte-1b6lxrt"> </span></div> <div class="summary-card svelte-1b6lxrt"><span class="card-label svelte-1b6lxrt">Final Loss</span> <span class="card-value svelte-1b6lxrt"> </span></div> <div class="summary-card svelte-1b6lxrt"><span class="card-label svelte-1b6lxrt">Final LR</span> <span class="card-value svelte-1b6lxrt"> </span></div></div>'),lt=g('<div class="viz-content svelte-1b6lxrt"><!> <div class="plots-grid svelte-1b6lxrt"><div class="plot-container svelte-1b6lxrt"><div class="plot-header svelte-1b6lxrt"><button class="btn btn-sm btn-secondary save-plot-btn svelte-1b6lxrt" title="Save Training Loss as PNG">üíæ Save</button></div> <div id="loss-plot"></div></div> <div class="plot-container svelte-1b6lxrt"><div class="plot-header svelte-1b6lxrt"><button class="btn btn-sm btn-secondary save-plot-btn svelte-1b6lxrt" title="Save Validation AUROC as PNG">üíæ Save</button></div> <div id="auroc-plot"></div></div> <div class="plot-container svelte-1b6lxrt"><div class="plot-header svelte-1b6lxrt"><button class="btn btn-sm btn-secondary save-plot-btn svelte-1b6lxrt" title="Save Learning Rate as PNG">üíæ Save</button></div> <div id="lr-plot"></div></div></div></div>'),it=g('<div class="training-history-viz svelte-1b6lxrt"><!></div>');function nt(V,I){ra(I,!1);const u=T();let G=qe(I,"jobId",8),a=qe(I,"registerSaveHandler",8),n=T(null),k=T(!0),m=T(null),h=null,f=T(!1),j=null,ce=null;la(()=>((async()=>{try{h=await fa(),await Re(),j=ga(()=>{e(n)&&h&&C()})}catch(o){const z=o instanceof Error?o.message:String(o);c(m,`Failed to load Plotly: ${z}`),c(k,!1)}})(),()=>{j?.(),ce?.()}));async function Re(){c(k,!0),c(m,null);try{c(n,await na.getTrainingHistory(G())),e(n)&&h&&(setTimeout(()=>{C()},0),ce?.(),ce=a()?.(N)??null)}catch(r){const o=r instanceof Error?r.message:String(r);c(m,o)}finally{c(k,!1)}}async function ze(){c(f,!0);try{const r=document.getElementById("loss-plot");if(!r)throw new Error("Chart element not found");await Ze(r,`training_loss_${G()}`)}catch(r){const o=r instanceof Error?r.message:String(r);o&&We.error(`No se pudo guardar la visualizaci√≥n: ${o}`)}finally{c(f,!1)}}async function Se(){c(f,!0);try{const r=document.getElementById("auroc-plot");if(!r)throw new Error("Chart element not found");await Ze(r,`training_auroc_${G()}`)}catch(r){const o=r instanceof Error?r.message:String(r);o&&We.error(`No se pudo guardar la visualizaci√≥n: ${o}`)}finally{c(f,!1)}}async function je(){c(f,!0);try{const r=document.getElementById("lr-plot");if(!r)throw new Error("Chart element not found");await Ze(r,`training_lr_${G()}`)}catch(r){const o=r instanceof Error?r.message:String(r);o&&We.error(`No se pudo guardar la visualizaci√≥n: ${o}`)}finally{c(f,!1)}}async function N(){c(f,!0);try{await ze(),await new Promise(r=>setTimeout(r,500)),await Se(),await new Promise(r=>setTimeout(r,500)),await je(),We.success("Todas las visualizaciones se guardaron correctamente.")}catch(r){const o=r instanceof Error?r.message:String(r);o&&We.error(`No se pudieron guardar las visualizaciones: ${o}`)}finally{c(f,!1)}}async function C(){if(!e(n)||!h)return;const r=e(n).model?.toUpperCase()||"Model",o=da(),z=[{x:e(n).epochs,y:e(n).train_loss,type:"scatter",mode:"lines+markers",name:"Training Loss",line:{color:Pe("--chart-negative"),width:2},marker:{size:4}}],F=Xe({title:{text:`${r} Training Loss`,font:{size:16}},xaxis:{title:"Epoch"},yaxis:{title:"Loss"},hovermode:"closest",margin:{l:60,r:30,t:50,b:50}}),E=[{x:e(n).epochs,y:e(n).val_auroc,type:"scatter",mode:"lines+markers",name:"Validation AUROC",line:{color:Pe("--chart-positive"),width:2},marker:{size:4}}],y=Xe({title:{text:`${r} Validation AUROC`,font:{size:16}},xaxis:{title:"Epoch"},yaxis:{title:"AUROC",range:[0,1]},hovermode:"closest",margin:{l:60,r:30,t:50,b:50}}),x=[{x:e(n).epochs,y:e(n).val_lr,type:"scatter",mode:"lines+markers",name:"Learning Rate",line:{color:Pe("--chart-primary"),width:2},marker:{size:4}}],w=Xe({title:{text:`${r} Learning Rate`,font:{size:16}},xaxis:{title:"Epoch"},yaxis:{title:"Learning Rate",type:"log"},hovermode:"closest",margin:{l:60,r:30,t:50,b:50}});try{await h.newPlot("loss-plot",z,F,o),await h.newPlot("auroc-plot",E,y,o),await h.newPlot("lr-plot",x,w,o)}catch($){const P=$ instanceof Error?$.message:String($);c(m,`Failed to create plots: ${P}`)}}ta(()=>e(n),()=>{c(u,e(n)?(()=>{const r=Math.min(...e(n).train_loss).toFixed(4),o=Math.max(...e(n).val_auroc).toFixed(4),z=e(n).train_loss[e(n).train_loss.length-1].toFixed(4),F=e(n).val_auroc[e(n).val_auroc.length-1].toFixed(4),E=e(n).val_lr[e(n).val_lr.length-1].toExponential(2),y=e(n).epochs.length,x=e(n).val_auroc.indexOf(Math.max(...e(n).val_auroc)),w=e(n).epochs[x];return{minLoss:r,maxAuroc:o,finalLoss:z,finalAuroc:F,finalLr:E,totalEpochs:y,bestAurocEpoch:w}})():null)}),_a(),sa();var U=it(),Ne=s(U);{var D=r=>{var o=at();v(r,o)},d=r=>{var o=Z(),z=W(o);{var F=y=>{var x=st(),w=l(s(x),2),$=s(w,!0);t(w);var P=l(w,2);{var Q=ee=>{var be=tt();v(ee,be)};b(P,ee=>{e(m),i(()=>e(m).includes("not available")||e(m).includes("not implemented"))&&ee(Q)})}t(x),R(()=>_($,e(m))),v(y,x)},E=y=>{var x=Z(),w=W(x);{var $=P=>{var Q=lt(),ee=s(Q);{var be=ne=>{var fe=rt(),J=s(fe),S=l(s(J),2),M=s(S,!0);t(S),t(J);var le=l(J,2),oe=l(s(le),2),p=s(oe,!0);t(oe);var K=l(oe,2),ye=s(K);t(K),t(le);var de=l(le,2),De=l(s(de),2),ve=s(De,!0);t(De),t(de);var Ae=l(de,2),ue=l(s(Ae),2),q=s(ue,!0);t(ue),t(Ae);var Y=l(Ae,2),H=l(s(Y),2),_e=s(H,!0);t(H),t(Y);var we=l(Y,2),Ve=l(s(we),2),Ce=s(Ve,!0);t(Ve),t(we),t(fe),R(()=>{_(M,(e(u),i(()=>e(u).totalEpochs))),_(p,(e(u),i(()=>e(u).maxAuroc))),_(ye,`at epoch ${e(u),i(()=>e(u).bestAurocEpoch)??""}`),_(ve,(e(u),i(()=>e(u).minLoss))),_(q,(e(u),i(()=>e(u).finalAuroc))),_(_e,(e(u),i(()=>e(u).finalLoss))),_(Ce,(e(u),i(()=>e(u).finalLr)))}),v(ne,fe)};b(ee,ne=>{e(u)&&ne(be)})}var ie=l(ee,2),pe=s(ie),me=s(pe),ge=s(me);t(me),Je(2),t(pe);var he=l(pe,2),xe=s(he),ke=s(xe);t(xe),Je(2),t(he);var te=l(he,2),X=s(te),se=s(X);t(X),Je(2),t(te),t(ie),t(Q),R(()=>{ge.disabled=e(f),ke.disabled=e(f),se.disabled=e(f)}),He("click",ge,ze),He("click",ke,Se),He("click",se,je),v(P,Q)};b(w,P=>{e(n)&&P($)},!0)}v(y,x)};b(z,y=>{e(m)?y(F):y(E,!1)},!0)}v(r,o)};b(Ne,r=>{e(k)?r(D):r(d,!1)})}t(U),v(V,U),ia()}var ot=g('<div class="loading svelte-1cfkmr7"><div class="spinner svelte-1cfkmr7"></div> <p>Loading tuning progress...</p></div>'),vt=g(`<div class="info-box svelte-1cfkmr7"><p><strong>Note:</strong> Tuning statistics are only available for tuning
            jobs run with statistics tracking enabled. Older tuning jobs may not
            have this data.</p></div>`),ct=g('<div class="error svelte-1cfkmr7"><h4 class="svelte-1cfkmr7">‚ö†Ô∏è Unable to load tuning progress</h4> <p> </p> <!></div>'),dt=g('<div class="summary-cards svelte-1cfkmr7"><div class="summary-card svelte-1cfkmr7"><span class="card-label svelte-1cfkmr7">Total Trials</span> <span class="card-value svelte-1cfkmr7"> </span></div> <div class="summary-card highlight svelte-1cfkmr7"><span class="card-label svelte-1cfkmr7">Best AUROC</span> <span class="card-value svelte-1cfkmr7"> </span></div> <div class="summary-card svelte-1cfkmr7"><span class="card-label svelte-1cfkmr7">Average AUROC</span> <span class="card-value svelte-1cfkmr7"> </span></div> <div class="summary-card svelte-1cfkmr7"><span class="card-label svelte-1cfkmr7">Worst AUROC</span> <span class="card-value svelte-1cfkmr7"> </span></div> <div class="summary-card success svelte-1cfkmr7"><span class="card-label svelte-1cfkmr7">Improvement</span> <span class="card-value svelte-1cfkmr7"> </span> <span class="card-hint svelte-1cfkmr7">from first trial</span></div></div>'),ut=g('<th class="svelte-1cfkmr7">Iteration</th>'),_t=g('<td class="iteration svelte-1cfkmr7"> </td>'),pt=g('<tr><td class="rank svelte-1cfkmr7"><!></td><td class="trial-id svelte-1cfkmr7"> </td><td class="auroc svelte-1cfkmr7"> </td><!></tr>'),mt=g('<div class="top-trials svelte-1cfkmr7"><h4 class="svelte-1cfkmr7">üèÜ Top Performing Trials</h4> <div class="trials-table-wrapper svelte-1cfkmr7"><table class="svelte-1cfkmr7"><thead class="svelte-1cfkmr7"><tr class="svelte-1cfkmr7"><th class="svelte-1cfkmr7">Rank</th><th class="svelte-1cfkmr7">Trial ID</th><th class="svelte-1cfkmr7">AUROC</th><!></tr></thead><tbody></tbody></table></div></div>'),gt=g('<div class="viz-content svelte-1cfkmr7"><!> <div class="plot-container svelte-1cfkmr7"><div class="plot-header svelte-1cfkmr7"><button class="btn btn-sm btn-secondary save-plot-btn svelte-1cfkmr7" title="Save Tuning Progress as PNG">üíæ Save</button></div> <div id="tuning-auroc-plot"></div></div> <!></div>'),ft=g('<div class="tuning-progress-viz svelte-1cfkmr7"><!></div>');function yt(V,I){ra(I,!1);const u=T();let G=qe(I,"jobId",8),a=qe(I,"registerSaveHandler",8),n=T(null),k=T(!0),m=T(null),h=T(null),f=T(!1),j=null,ce=T(null);la(()=>((async()=>{try{c(h,await fa()),await Re(),j=ga(()=>{e(n)&&e(h)&&ze()})}catch(d){const r=d instanceof Error?d.message:String(d);c(m,`Failed to load Plotly: ${r}`),c(k,!1)}})(),()=>{j?.(),e(ce)?.()}));async function Re(){c(k,!0),c(m,null);try{c(n,await na.getTuningStatistics(G())),e(n)&&e(h)&&setTimeout(()=>{ze()},0)}catch(D){const d=D instanceof Error?D.message:String(D);c(m,d)}finally{c(k,!1)}}async function ze(){if(!e(n)||!e(h))return;const D=e(n).model?.toUpperCase()||"Model",d=da(),r=[{x:e(n).iterations,y:e(n).auroc,type:"scatter",mode:"markers",name:"Trial AUROC",marker:{color:Pe("--chart-neutral"),size:6,opacity:.6},hovertemplate:"Trial %{x}<br>AUROC: %{y:.4f}<extra></extra>"},{x:e(n).iterations,y:e(n).auroc_smooth,type:"scatter",mode:"lines",name:"Best AUROC (cumulative)",line:{color:Pe("--chart-positive"),width:3},hovertemplate:"Trial %{x}<br>Best so far: %{y:.4f}<extra></extra>"}],o=Xe({title:{text:`${D} Hyperparameter Tuning Progress`,font:{size:16}},xaxis:{title:"Trial Iteration"},yaxis:{title:"AUROC",range:[Math.max(0,Math.min(...e(n).auroc)-.05),Math.min(1,Math.max(...e(n).auroc)+.05)]},hovermode:"closest",showlegend:!0,legend:{x:.02,y:.98,xanchor:"left",yanchor:"top"},margin:{l:60,r:30,t:80,b:50}});try{await e(h).newPlot("tuning-auroc-plot",r,o,d)}catch(z){const F=z instanceof Error?z.message:String(z);c(m,`Failed to create plot: ${F}`)}}async function Se(){c(f,!0);try{const D=document.getElementById("tuning-auroc-plot");if(!D)throw new Error("Chart element not found");await Ze(D,`tuning_progress_${G()}`,{width:1200,height:600})}catch(D){const d=D instanceof Error?D.message:String(D);d&&We.error(`No se pudo guardar la visualizaci√≥n: ${d}`)}finally{c(f,!1)}}async function je(){await Se()}ta(()=>e(n),()=>{c(u,e(n)?(()=>{const D=e(n).num_trials||e(n).iterations.length,d=e(n).best_score||Math.max(...e(n).auroc),r=(e(n).auroc.reduce((F,E)=>F+E,0)/e(n).auroc.length).toFixed(4),o=Math.min(...e(n).auroc).toFixed(4),z=(d-e(n).auroc[0])/e(n).auroc[0]*100;return{totalTrials:D,bestScore:d.toFixed(4),avgScore:r,worstScore:o,improvement:z.toFixed(1)}})():null)}),ta(()=>(e(n),e(h),e(ce),ha(a())),()=>{e(n)&&e(h)&&(e(ce)?.(),c(ce,a()?.(je)??null))}),_a(),sa();var N=ft(),C=s(N);{var U=D=>{var d=ot();v(D,d)},Ne=D=>{var d=Z(),r=W(d);{var o=F=>{var E=ct(),y=l(s(E),2),x=s(y,!0);t(y);var w=l(y,2);{var $=P=>{var Q=vt();v(P,Q)};b(w,P=>{e(m),i(()=>e(m).includes("not available")||e(m).includes("not implemented"))&&P($)})}t(E),R(()=>_(x,e(m))),v(F,E)},z=F=>{var E=Z(),y=W(E);{var x=w=>{var $=gt(),P=s($);{var Q=ge=>{var he=dt(),xe=s(he),ke=l(s(xe),2),te=s(ke,!0);t(ke),t(xe);var X=l(xe,2),se=l(s(X),2),ne=s(se,!0);t(se),t(X);var fe=l(X,2),J=l(s(fe),2),S=s(J,!0);t(J),t(fe);var M=l(fe,2),le=l(s(M),2),oe=s(le,!0);t(le),t(M);var p=l(M,2),K=l(s(p),2),ye=s(K);t(K),Je(2),t(p),t(he),R(de=>{_(te,(e(u),i(()=>e(u).totalTrials))),_(ne,(e(u),i(()=>e(u).bestScore))),_(S,(e(u),i(()=>e(u).avgScore))),_(oe,(e(u),i(()=>e(u).worstScore))),_(ye,`${de??""}${e(u),i(()=>e(u).improvement)??""}%`)},[()=>(e(u),i(()=>parseFloat(e(u).improvement)>0?"+":""))]),v(ge,he)};b(P,ge=>{e(u)&&ge(Q)})}var ee=l(P,2),be=s(ee),ie=s(be);t(be),Je(2),t(ee);var pe=l(ee,2);{var me=ge=>{var he=mt(),xe=l(s(he),2),ke=s(xe),te=s(ke),X=s(te),se=l(s(X),3);{var ne=J=>{var S=ut();v(J,S)};b(se,J=>{e(n),i(()=>e(n).top_trials[0]?.iteration!==void 0)&&J(ne)})}t(X),t(te);var fe=l(te);pa(fe,5,()=>(e(n),i(()=>e(n).top_trials.slice(0,10))),ma,(J,S)=>{var M=pt();let le;var oe=s(M),p=s(oe);{var K=Y=>{var H=ca("ü•á");v(Y,H)},ye=Y=>{var H=Z(),_e=W(H);{var we=Ce=>{var Le=ca("ü•à");v(Ce,Le)},Ve=Ce=>{var Le=Z(),$e=W(Le);{var Ue=O=>{var re=ca("ü•â");v(O,re)},B=O=>{var re=ca();R(()=>_(re,(e(S),i(()=>e(S).rank)))),v(O,re)};b($e,O=>{e(S),i(()=>e(S).rank===3)?O(Ue):O(B,!1)},!0)}v(Ce,Le)};b(_e,Ce=>{e(S),i(()=>e(S).rank===2)?Ce(we):Ce(Ve,!1)},!0)}v(Y,H)};b(p,Y=>{e(S),i(()=>e(S).rank===1)?Y(K):Y(ye,!1)})}t(oe);var de=l(oe),De=s(de,!0);t(de);var ve=l(de),Ae=s(ve,!0);t(ve);var ue=l(ve);{var q=Y=>{var H=_t(),_e=s(H,!0);t(H),R(()=>_(_e,(e(S),i(()=>e(S).iteration)))),v(Y,H)};b(ue,Y=>{e(S),i(()=>e(S).iteration!==void 0)&&Y(q)})}t(M),R((Y,H)=>{le=xa(M,1,"svelte-1cfkmr7",null,le,Y),_(De,(e(S),i(()=>e(S).trial_id||"N/A"))),_(Ae,H)},[()=>({best:e(S).rank===1}),()=>(e(S),i(()=>e(S).auroc?.toFixed(4)||"N/A"))]),v(J,M)}),t(fe),t(ke),t(xe),t(he),v(ge,he)};b(pe,ge=>{e(n),i(()=>e(n).top_trials&&e(n).top_trials.length>0)&&ge(me)})}t($),R(()=>ie.disabled=e(f)),He("click",ie,Se),v(w,$)};b(y,w=>{e(n)&&w(x)},!0)}v(F,E)};b(r,F=>{e(m)?F(o):F(z,!1)},!0)}v(D,d)};b(C,D=>{e(k)?D(U):D(Ne,!1)})}t(N),v(V,N),ia()}var bt=g('<div class="loading svelte-y4kwy9"><div class="spinner svelte-y4kwy9"></div> <p>Loading PCA analysis...</p></div>'),ht=g('<div class="error svelte-y4kwy9"><h4 class="svelte-y4kwy9">‚ö†Ô∏è Unable to load PCA analysis</h4> <p> </p></div>'),xt=g('<div class="variance-bar-row svelte-y4kwy9"><span class="component-label svelte-y4kwy9"> </span> <div class="bar-container svelte-y4kwy9"><div class="bar svelte-y4kwy9"></div> <span class="percentage svelte-y4kwy9"> </span></div></div>'),kt=g('<div class="viz-content svelte-y4kwy9"><div class="summary-section svelte-y4kwy9"><h4 class="svelte-y4kwy9">PCA Summary</h4> <div class="summary-grid svelte-y4kwy9"><div class="summary-item svelte-y4kwy9"><span class="label svelte-y4kwy9">Components</span> <span class="value svelte-y4kwy9"> </span></div> <div class="summary-item svelte-y4kwy9"><span class="label svelte-y4kwy9">Features</span> <span class="value svelte-y4kwy9"> </span></div> <div class="summary-item highlight svelte-y4kwy9"><span class="label svelte-y4kwy9">Total Variance Explained</span> <span class="value svelte-y4kwy9"> </span></div></div></div> <div class="variance-table-section svelte-y4kwy9" id="variance-chart"><div class="variance-header svelte-y4kwy9"><h4 class="svelte-y4kwy9">Explained Variance by Component</h4> <button class="btn btn-sm btn-secondary save-plot-btn svelte-y4kwy9" title="Save Explained Variance Chart as PNG">üíæ Save</button></div> <div class="variance-bars svelte-y4kwy9"></div></div> <div class="heatmaps-grid svelte-y4kwy9"><div class="plot-container svelte-y4kwy9"><div class="plot-header svelte-y4kwy9"><button class="btn btn-sm btn-secondary save-plot-btn svelte-y4kwy9" title="Save Component Loadings as PNG">üíæ Save</button></div> <div id="components-heatmap"></div></div> <div class="plot-container svelte-y4kwy9"><div class="plot-header svelte-y4kwy9"><button class="btn btn-sm btn-secondary save-plot-btn svelte-y4kwy9" title="Save Correlation Matrix as PNG">üíæ Save</button></div> <div id="correlation-heatmap"></div></div></div></div>'),wt=g('<div class="pca-analysis-viz svelte-y4kwy9"><!></div>');function St(V,I){ra(I,!1);let u=qe(I,"jobId",8),G=qe(I,"registerSaveHandler",8),a=T(null),n=T(!0),k=T(null),m=null,h=T(!1),f=null,j=null;la(()=>((async()=>{try{m=await fa(),await ce(),f=ga(()=>{e(a)&&m&&N()})}catch(r){const o=r instanceof Error?r.message:String(r);c(k,`Failed to load Plotly: ${o}`),c(n,!1)}})(),()=>{f?.(),j?.()}));async function ce(){c(n,!0),c(k,null);try{const d=await Oa.getJobStatus(u()),r=d.result&&typeof d.result=="object"?d.result:void 0;if(!r||!r.file_paths||!r.file_paths.pca_object)throw new Error("PCA file path not found in job results");const o=r.file_paths.pca_object;c(a,await na.getPcaAnalysis(o)),e(a)&&m&&setTimeout(()=>{N()},0),j?.(),j=G()?.(je)??null}catch(d){const r=d instanceof Error?d.message:String(d);c(k,r)}finally{c(n,!1)}}async function Re(){c(h,!0);try{const d=document.getElementById("components-heatmap");if(!d||!e(a))throw new Error("Chart element not found");await Ze(d,`pca_component_loadings_${u()}`,{width:1400,height:Math.max(800,e(a).n_features*30)})}catch(d){const r=d instanceof Error?d.message:String(d);We.error(`No se pudo guardar la visualizaci√≥n: ${r}`)}finally{c(h,!1)}}async function ze(){c(h,!0);try{const d=document.getElementById("correlation-heatmap");if(!d||!e(a))throw new Error("Chart element not found");await Ze(d,`pca_correlation_matrix_${u()}`,{width:1400,height:Math.max(800,e(a).n_features*30)})}catch(d){const r=d instanceof Error?d.message:String(d);We.error(`No se pudo guardar la visualizaci√≥n: ${r}`)}finally{c(h,!1)}}async function Se(){c(h,!0);try{const d=document.getElementById("variance-chart");if(!d)throw new Error("Chart element not found");await za(d,`pca_explained_variance_${u()}`,{scale:2})}catch(d){const r=d instanceof Error?d.message:String(d);We.error(`No se pudo guardar la visualizaci√≥n: ${r}`)}finally{c(h,!1)}}async function je(){c(h,!0);try{await Se(),await new Promise(d=>setTimeout(d,500)),await Re(),await new Promise(d=>setTimeout(d,500)),await ze(),We.success("Todas las visualizaciones se guardaron correctamente.")}catch(d){const r=d instanceof Error?d.message:String(d);We.error(`No se pudieron guardar las visualizaciones: ${r}`)}finally{c(h,!1)}}async function N(){if(!e(a)||!m)return;const d=da(),r=[{z:e(a).components_matrix,x:e(a).component_labels,y:e(a).feature_names,type:"heatmap",colorscale:[[0,"#d73027"],[.25,"#f46d43"],[.5,"#ffffff"],[.75,"#74add1"],[1,"#4575b4"]],zmid:0,hoverongaps:!1,hovertemplate:"Feature: %{y}<br>Component: %{x}<br>Loading: %{z:.4f}<extra></extra>",reversescale:!1}],o=Xe({title:{text:"Principal Component Loadings (Feature Contributions)",font:{size:16}},xaxis:{title:"Principal Components",side:"bottom"},yaxis:{title:"Features",autorange:"reversed"},height:Math.max(600,e(a).n_features*25),margin:{l:150,r:80,t:80,b:80}}),z=[{z:e(a).correlation_matrix,x:e(a).feature_names,y:e(a).feature_names,type:"heatmap",colorscale:[[0,"#d73027"],[.25,"#fc8d59"],[.5,"#ffffbf"],[.75,"#91bfdb"],[1,"#4575b4"]],zmid:0,hoverongaps:!1,hovertemplate:"Feature 1: %{y}<br>Feature 2: %{x}<br>Correlation: %{z:.4f}<extra></extra>",reversescale:!1}],F=Xe({title:{text:"Feature Correlation Matrix",font:{size:16}},xaxis:{title:"Features",side:"bottom",tickangle:-45},yaxis:{title:"Features",autorange:"reversed"},height:Math.max(700,e(a).n_features*25),margin:{l:150,r:80,t:80,b:150}});try{await m.newPlot("components-heatmap",r,o,d),await m.newPlot("correlation-heatmap",z,F,d)}catch(E){const y=E instanceof Error?E.message:String(E);c(k,`Failed to create plots: ${y}`)}}sa();var C=wt(),U=s(C);{var Ne=d=>{var r=bt();v(d,r)},D=d=>{var r=Z(),o=W(r);{var z=E=>{var y=ht(),x=l(s(y),2),w=s(x,!0);t(x),t(y),R(()=>_(w,e(k))),v(E,y)},F=E=>{var y=Z(),x=W(y);{var w=$=>{var P=kt(),Q=s(P),ee=l(s(Q),2),be=s(ee),ie=l(s(be),2),pe=s(ie,!0);t(ie),t(be);var me=l(be,2),ge=l(s(me),2),he=s(ge,!0);t(ge),t(me);var xe=l(me,2),ke=l(s(xe),2),te=s(ke);t(ke),t(xe),t(ee),t(Q);var X=l(Q,2),se=s(X),ne=l(s(se),2);t(se);var fe=l(se,2);pa(fe,5,()=>(e(a),i(()=>e(a).explained_variance_ratio)),ma,(ye,de,De)=>{var ve=xt(),Ae=s(ve),ue=s(Ae,!0);t(Ae);var q=l(Ae,2),Y=s(q),H=l(Y,2),_e=s(H);t(H),t(q),t(ve),R(we=>{_(ue,(e(a),i(()=>e(a).component_labels[De]))),ba(Y,`width: ${e(de)*100}%; background: hsl(${240-De*15}, 70%, 50%)`),_(_e,`${we??""}%`)},[()=>(e(de),i(()=>(e(de)*100).toFixed(2)))]),v(ye,ve)}),t(fe),t(X);var J=l(X,2),S=s(J),M=s(S),le=s(M);t(M),Je(2),t(S);var oe=l(S,2),p=s(oe),K=s(p);t(p),Je(2),t(oe),t(J),t(P),R(ye=>{_(pe,(e(a),i(()=>e(a).n_components))),_(he,(e(a),i(()=>e(a).n_features))),_(te,`${ye??""}%`),ne.disabled=e(h),le.disabled=e(h),K.disabled=e(h)},[()=>(e(a),i(()=>(e(a).total_variance_explained*100).toFixed(2)))]),He("click",ne,Se),He("click",le,Re),He("click",K,ze),v($,P)};b(x,$=>{e(a)&&$(w)},!0)}v(E,y)};b(o,E=>{e(k)?E(z):E(F,!1)},!0)}v(d,r)};b(U,d=>{e(n)?d(Ne):d(D,!1)})}t(C),v(V,C),ia()}var Et=g('<div class="loading svelte-er9esg"><div class="spinner svelte-er9esg"></div> <p>Loading stock data...</p></div>'),Pt=g('<div class="error svelte-er9esg"><h4 class="svelte-er9esg">‚ö†Ô∏è Unable to load stock data</h4> <p> </p></div>'),zt=g('<div class="info-item svelte-er9esg"><strong class="svelte-er9esg">Companies:</strong> </div>'),Ct=g('<div class="info-item svelte-er9esg"><span class="badge warning svelte-er9esg"> </span></div>'),Ft=g('<label class="company-checkbox sector-average svelte-er9esg"><input type="checkbox" value="__SECTOR_AVERAGE__" class="svelte-er9esg"/> <span class="svelte-er9esg"> </span> <span class="badge average svelte-er9esg">Average</span></label>'),At=g('<span class="badge primary svelte-er9esg">Target</span>'),$t=g('<label><input type="checkbox" class="svelte-er9esg"/> <span class="svelte-er9esg"> </span> <!></label>'),Tt=g('<div class="company-selector svelte-er9esg"><div class="selector-header svelte-er9esg"><strong class="svelte-er9esg">Select Companies to Display:</strong> <div class="selector-actions svelte-er9esg"><button type="button" class="btn-small svelte-er9esg">Select All</button> <button type="button" class="btn-small svelte-er9esg"> </button></div></div> <div class="company-checkboxes svelte-er9esg"><!> <!></div></div>'),Rt=g('<div class="viz-content svelte-er9esg"><div class="info-banner svelte-er9esg"><div class="info-item svelte-er9esg"><strong class="svelte-er9esg">Source:</strong> </div> <div class="info-item svelte-er9esg"><strong class="svelte-er9esg">Date Range:</strong> </div> <!> <!></div> <!> <div class="chart-container svelte-er9esg"><div class="plot-header svelte-er9esg"><button class="btn btn-sm btn-secondary save-plot-btn svelte-er9esg" title="Save current view as PNG">üíæ Save</button></div> <div class="plot svelte-er9esg"></div></div></div>'),Vt=g('<div class="extraction-viz svelte-er9esg"><!></div>');function Ot(V,I){ra(I,!1);let u=qe(I,"jobId",8),G=qe(I,"registerSaveHandler",8),a=T(null),n=T(!0),k=T(null),m=T(),h=T(null),f=T([]),j=T(!1),ce=null,Re=null;async function ze(){c(j,!0);try{await Ze(e(m),`extraction_${e(a)?.ticker||"data"}_${u()}`)}catch(r){const o=r instanceof Error?r.message:String(r);o&&We.error(`No se pudo guardar la visualizaci√≥n: ${o}`)}finally{c(j,!1)}}async function Se(){c(j,!0);try{const r=[...e(f)];if(e(a)?.company_data&&Object.keys(e(a).company_data).length>0){const o=Object.keys(e(a).company_data);e(a).industry_avg_close&&e(a).industry_avg_dates?c(f,["__SECTOR_AVERAGE__",...o]):c(f,o),await new Promise(z=>setTimeout(z,100)),await N()}await Ze(e(m),`extraction_all_companies_${u()}`),c(f,r),await N()}catch(r){const o=r instanceof Error?r.message:String(r);o&&We.error(`No se pudo guardar la visualizaci√≥n: ${o}`)}finally{c(j,!1)}}la(()=>((async()=>{c(h,await fa()),await je(),ce=ga(()=>{e(a)&&e(h)&&N()})})(),()=>{ce?.(),Re?.()}));async function je(){c(n,!0),c(k,null);try{if(c(a,await na.getExtractionSummary(u())),e(a)?.company_data&&Object.keys(e(a).company_data).length>0&&(c(f,Object.keys(e(a).company_data)),e(a).industry_avg_close&&e(a).industry_avg_dates&&c(f,["__SECTOR_AVERAGE__",...e(f)]),e(a)&&e(a).ticker&&e(f).includes(e(a).ticker))){const r=e(f).filter(z=>z!==e(a).ticker&&z!=="__SECTOR_AVERAGE__"),o=e(f).includes("__SECTOR_AVERAGE__");c(f,o?["__SECTOR_AVERAGE__",e(a).ticker,...r]:[e(a).ticker,...r])}await new Promise(r=>setTimeout(r,0)),await N(),Re?.(),Re=G()?.(Se)??null}catch(r){const o=r instanceof Error?r.message:String(r);c(k,o)}finally{c(n,!1)}}async function N(){const r=e(a),o=e(m),z=e(h);if(!r||!o||!z)return;const F=[];if(r.company_data&&Object.keys(r.company_data).length>0){const x=e(f).filter($=>$!=="__SECTOR_AVERAGE__"),w=C(x.length);e(f).includes("__SECTOR_AVERAGE__")&&r.industry_avg_close&&r.industry_avg_dates&&F.push({x:r.industry_avg_dates,y:r.industry_avg_close,type:"scatter",mode:"lines",name:`${r.industry||"Sector"} Average`,line:{color:Pe("--chart-septenary"),width:3,dash:"dash"},opacity:1,hovertemplate:"<b>Sector Average</b><br>%{x}<br>Close: $%{y:.2f}<extra></extra>"}),e(f).forEach($=>{if($==="__SECTOR_AVERAGE__")return;const P=r.company_data?.[$];if(!P||!P.dates||!P.close)return;const Q=r.ticker===$,ee=x.indexOf($);F.push({x:P.dates,y:P.close,type:"scatter",mode:"lines",name:$,line:{color:w[ee],width:Q?3:1.5},opacity:Q?1:.6,hovertemplate:`<b>${$}</b><br>%{x}<br>Close: $%{y:.2f}<extra></extra>`})})}else{const x=r.open&&r.open.length>0,w=r.close&&r.close.length>0;if(!x&&!w){c(k,"No price data available in dataset");return}x&&F.push({x:r.dates,y:r.open,type:"scatter",mode:"lines",name:r.ticker?`${r.ticker} Open`:"Open Price",line:{color:Pe("--chart-primary"),width:2},hovertemplate:"<b>%{x}</b><br>Open: $%{y:.2f}<extra></extra>"}),w&&F.push({x:r.dates,y:r.close,type:"scatter",mode:"lines",name:r.ticker?`${r.ticker} Close`:"Close Price",line:{color:Pe("--chart-secondary"),width:2},hovertemplate:"<b>%{x}</b><br>Close: $%{y:.2f}<extra></extra>"})}const E=Xe({title:{text:r.ticker?`${r.ticker} Stock Price`+(r.company_count&&r.company_count>1?` (${r.company_count} companies)`:""):r.industry?`${r.industry} Industry Stock Prices`:"Stock Price",font:{size:18}},xaxis:{title:"Date"},yaxis:{title:"Price ($)"},hovermode:"closest",showlegend:!0,legend:{orientation:"v",yanchor:"top",y:1,xanchor:"left",x:1.02},margin:{l:60,r:200,t:80,b:60}}),y=da();await z.newPlot(o,F,E,y)}function C(r){const o=Pa();if(r<=o.length)return o.slice(0,r);const z=[...o],F=360/(r-o.length);for(let E=o.length;E<r;E++){const y=E*F%360;z.push(`hsl(${y}, 70%, 50%)`)}return z}ta(()=>(e(f),e(a),e(m),e(h)),()=>{e(f)&&e(f).length>0&&e(a)&&e(m)&&e(h)&&N()}),_a(),sa();var U=Vt(),Ne=s(U);{var D=r=>{var o=Et();v(r,o)},d=r=>{var o=Z(),z=W(o);{var F=y=>{var x=Pt(),w=l(s(x),2),$=s(w,!0);t(w),t(x),R(()=>_($,e(k))),v(y,x)},E=y=>{var x=Z(),w=W(x);{var $=P=>{var Q=Rt(),ee=s(Q),be=s(ee),ie=l(s(be));t(be);var pe=l(be,2),me=l(s(pe));t(pe);var ge=l(pe,2);{var he=S=>{var M=zt(),le=l(s(M));t(M),R(()=>_(le,` ${e(a),i(()=>e(a).company_count)??""}`)),v(S,M)};b(ge,S=>{e(a),i(()=>e(a).company_count)&&S(he)})}var xe=l(ge,2);{var ke=S=>{var M=Ct(),le=s(M),oe=s(le);t(le),t(M),R((p,K)=>_(oe,`Downsampled: ${p??""} ‚Üí ${K??""}
              points`),[()=>(e(a),i(()=>e(a).original_rows?.toLocaleString())),()=>(e(a),i(()=>e(a).rows?.toLocaleString()))]),v(S,M)};b(xe,S=>{e(a),i(()=>e(a).downsampled)&&S(ke)})}t(ee);var te=l(ee,2);{var X=S=>{var M=Tt(),le=s(M),oe=l(s(le),2),p=s(oe),K=l(p,2),ye=s(K,!0);t(K),t(oe),t(le);var de=l(le,2),De=s(de);{var ve=ue=>{var q=Ft(),Y=s(q);Fa(Y);var H=l(Y,2),_e=s(H);t(H),Je(2),t(q),R(we=>{Aa(Y,we),_(_e,`${e(a),i(()=>e(a).industry||"Sector")??""} Average`)},[()=>(e(f),i(()=>e(f).includes("__SECTOR_AVERAGE__")))]),He("change",Y,we=>{we.target.checked?c(f,["__SECTOR_AVERAGE__",...e(f)]):c(f,e(f).filter(Ce=>Ce!=="__SECTOR_AVERAGE__"))}),v(ue,q)};b(De,ue=>{e(a),i(()=>e(a).industry_avg_close&&e(a).industry_avg_dates)&&ue(ve)})}var Ae=l(De,2);pa(Ae,1,()=>(e(a),i(()=>Object.keys(e(a).company_data).sort())),ma,(ue,q)=>{var Y=$t();let H;var _e=s(Y);Fa(_e);var we=l(_e,2),Ve=s(we,!0);t(we);var Ce=l(we,2);{var Le=$e=>{var Ue=At();v($e,Ue)};b(Ce,$e=>{e(q),e(a),i(()=>e(q)===e(a).ticker)&&$e(Le)})}t(Y),R(($e,Ue)=>{H=xa(Y,1,"company-checkbox svelte-er9esg",null,H,$e),Ia(_e,e(q)),Aa(_e,Ue),_(Ve,e(q))},[()=>({highlighted:e(q)===e(a).ticker}),()=>(e(f),e(q),i(()=>e(f).includes(e(q))))]),He("change",_e,$e=>{$e.target.checked?c(f,[...e(f),e(q)]):c(f,e(f).filter(B=>B!==e(q)))}),v(ue,Y)}),t(de),t(M),R(()=>_(ye,(e(a),i(()=>e(a).ticker?`Only ${e(a).ticker}`:"Only Average")))),He("click",p,()=>{const ue=Object.keys(e(a).company_data);c(f,e(a).industry_avg_close?["__SECTOR_AVERAGE__",...ue]:ue)}),He("click",K,()=>{e(a).ticker?c(f,["__SECTOR_AVERAGE__",e(a).ticker]):c(f,["__SECTOR_AVERAGE__"])}),v(S,M)};b(te,S=>{e(a),i(()=>e(a).company_data&&Object.keys(e(a).company_data).length>0)&&S(X)})}var se=l(te,2),ne=s(se),fe=s(ne);t(ne);var J=l(ne,2);Sa(J,S=>c(m,S),()=>e(m)),t(se),t(Q),R(()=>{_(ie,` ${e(a),i(()=>e(a).ticker||e(a).industry||"Unknown")??""}`),_(me,` ${e(a),i(()=>e(a).dates&&e(a).dates.length>0?`${e(a).dates[0]} to ${e(a).dates[e(a).dates.length-1]}`:"N/A")??""}`),fe.disabled=e(j)}),He("click",fe,ze),v(P,Q)};b(w,P=>{e(a)&&P($)},!0)}v(y,x)};b(z,y=>{e(k)?y(F):y(E,!1)},!0)}v(r,o)};b(Ne,r=>{e(n)?r(D):r(d,!1)})}t(U),v(V,U),ia()}var It=g('<div class="loading svelte-1trbkmy"><div class="spinner svelte-1trbkmy"></div> <p>Loading prediction data...</p></div>'),Dt=g('<div class="error svelte-1trbkmy"><h4 class="svelte-1trbkmy">Unable to load prediction data</h4> <p> </p></div>'),Nt=g('<div class="industry-info svelte-1trbkmy"><span class="label svelte-1trbkmy">Industry:</span> <span class="value svelte-1trbkmy"> </span></div>'),Lt=g('<div class="prediction-result multi-day svelte-1trbkmy"><div class="prediction-label svelte-1trbkmy"> </div> <div class="forecast-range svelte-1trbkmy"> </div> <div class="forecast-summary svelte-1trbkmy"> </div></div>'),jt=g('<span class="arrow up svelte-1trbkmy">‚ñ≤</span> <span>Price Increase Expected</span>',1),Ut=g('<span class="arrow down svelte-1trbkmy">‚ñº</span> <span>Price Decrease Expected</span>',1),Mt=g('<div><div class="prediction-label svelte-1trbkmy"> </div> <div class="prediction-value svelte-1trbkmy"> </div> <div class="prediction-direction svelte-1trbkmy"><!></div></div>'),Ht=g('<span class="threshold-note svelte-1trbkmy" title="Optimized threshold based on ROC analysis during training">(Optimized)</span>'),Gt=g(`<span class="optimized-badge svelte-1trbkmy" title="This threshold was optimized using Youden's J statistic (maximizing TPR - FPR) during model training to achieve the best classification performance.">‚úì Optimized</span>`),qt=g('<div class="info-item svelte-1trbkmy"><span class="info-label svelte-1trbkmy">Test Samples:</span> <span class="info-value svelte-1trbkmy"> </span></div>'),Bt=g('<div class="info-item svelte-1trbkmy"><span class="info-label svelte-1trbkmy">Prediction Date:</span> <span class="info-value svelte-1trbkmy"> </span></div>'),Wt=g('<div class="viz-content svelte-1trbkmy"><div class="summary-header svelte-1trbkmy"><h3 class="svelte-1trbkmy">Next Trading Day Prediction</h3> <div class="prediction-card svelte-1trbkmy"><div class="prediction-main svelte-1trbkmy"><div class="ticker-info svelte-1trbkmy"><span class="label svelte-1trbkmy">Asset:</span> <span class="value svelte-1trbkmy"> </span></div> <!> <div><span class="label svelte-1trbkmy">Mode:</span> <span class="value svelte-1trbkmy"> </span></div></div> <!> <div class="threshold-info svelte-1trbkmy"><span class="label svelte-1trbkmy">Decision Threshold:</span> <span class="value svelte-1trbkmy"> </span> <!></div></div></div> <div class="chart-section svelte-1trbkmy"><div class="chart-header svelte-1trbkmy"><h4 class="svelte-1trbkmy"><!></h4> <button class="btn btn-sm btn-secondary save-plot-btn svelte-1trbkmy" title="Save Prediction Chart as PNG">üíæ Save</button></div> <div class="chart svelte-1trbkmy"></div> <p class="chart-help svelte-1trbkmy"><!></p></div> <div class="model-info svelte-1trbkmy"><h4 class="svelte-1trbkmy">Model Information</h4> <div class="info-grid svelte-1trbkmy"><div class="info-item svelte-1trbkmy"><span class="info-label svelte-1trbkmy">Model Type:</span> <span class="info-value svelte-1trbkmy"> </span></div> <div class="info-item svelte-1trbkmy"><span class="info-label svelte-1trbkmy">Threshold:</span> <span class="info-value svelte-1trbkmy"> <!></span></div> <!> <div class="info-item svelte-1trbkmy"><span class="info-label svelte-1trbkmy">Confidence:</span> <span class="info-value svelte-1trbkmy"> </span></div></div></div></div>'),Jt=g('<div class="prediction-viz svelte-1trbkmy"><!></div>');function Yt(V,I){ra(I,!1);let u=qe(I,"jobId",8),G=qe(I,"registerSaveHandler",8),a=T(null),n=T(!0),k=T(null),m=T(),h=T(null),f=T(!1),j=null,ce=T(null);la(()=>((async()=>{try{c(h,await fa())}catch(o){console.error("Failed to load Plotly:",o),c(k,"Failed to load visualization library"),c(n,!1);return}await Re(),j=ga(()=>{e(a)&&e(h)&&ze()})})(),()=>{j?.(),e(ce)?.()}));async function Re(){c(n,!0),c(k,null);try{c(a,await na.getPredictionProbability(u())),await new Promise(r=>setTimeout(r,0)),await ze()}catch(r){const o=r instanceof Error?r.message:String(r);c(k,o),console.error("Failed to load prediction data:",r)}finally{c(n,!1)}}async function ze(){if(!(!e(a)||!e(m)||!e(h)))try{e(a).mode==="forecast"&&e(a).dates&&e(a).dates.length>1?await je():e(a).mode==="forecast"?await Se():c(k,"Evaluation mode visualization has been moved to Confusion Matrix view")}catch(r){const o=r instanceof Error?r.message:String(r);console.error("Failed to render chart:",r),c(k,`Failed to render chart: ${o}`)}}async function Se(){const r=e(a).tomorrow_probability,o=e(a).threshold,z=r>o,F=[{type:"indicator",mode:"gauge+number+delta",value:r,title:{text:`<b>${e(a).model}</b> Prediction<br>${e(a).tomorrow_date}`,font:{size:20}},delta:{reference:o,increasing:{color:Pe("--chart-positive")},decreasing:{color:Pe("--chart-negative")}},gauge:{axis:{range:[0,100],tickwidth:1,tickcolor:Pe("--chart-primary")},bar:{color:z?Pe("--chart-positive"):Pe("--chart-negative")},bgcolor:Pe("--bg-primary"),borderwidth:2,bordercolor:Pe("--border-default"),steps:[{range:[0,o],color:Pe("--status-error-bg")},{range:[o,100],color:Pe("--status-success-bg")}],threshold:{line:{color:Pe("--chart-negative"),width:4},thickness:.75,value:o}}}],E=Xe({height:400,margin:{t:100,r:25,l:25,b:25}}),y=da();await e(h).react(e(m),F,E,y)}async function je(){const r=e(a).dates||[],o=e(a).probabilities||[],z=e(a).predictions||[],F=e(a).threshold||50,E=z.map(P=>P==="UP"?Pe("--chart-positive"):Pe("--chart-negative")),y={x:r,y:o,type:"bar",name:"Predicted Probability",marker:{color:E,line:{color:Pe("--border-default"),width:1}},text:o.map(P=>`${P.toFixed(2)}%`),textposition:"outside",hovertemplate:"<b>%{x}</b><br>Probability: %{y:.2f}%<br>Prediction: %{customdata}<br><extra></extra>",customdata:z},x={x:r,y:Array(r.length).fill(F),type:"scatter",mode:"lines",name:`Threshold (${F}%)`,line:{color:Pe("--chart-negative"),width:3,dash:"dash"},hovertemplate:`<b>Threshold</b><br>${F}%<extra></extra>`},w=Xe({title:{text:`<b>${e(a).model||"Model"} Multi-Day Forecast</b><br><sub>${e(a).ticker||e(a).industry||""}</sub>`,font:{size:20}},xaxis:{title:"Forecast Date",tickangle:-45,type:"category"},yaxis:{title:"Probability of Price Increase (%)",range:[0,100]},showlegend:!0,legend:{x:1,xanchor:"right",y:1},height:500,margin:{t:100,r:50,l:70,b:120}}),$=da();await e(h).react(e(m),[y,x],w,$)}async function N(){c(f,!0);try{if(!e(m))throw new Error("Chart not available");const r=e(a).dates&&e(a).dates.length>1?"multi_day_forecast":"single_day_forecast";await Ze(e(m),`prediction_${r}_${u()}`,{width:1200,height:600})}catch(r){const o=r instanceof Error?r.message:String(r);o&&We.error(`No se pudo guardar la visualizaci√≥n: ${o}`)}finally{c(f,!1)}}async function C(){await N()}ta(()=>(e(m),e(a),e(h),e(ce),ha(G())),()=>{e(m)&&e(a)&&e(h)&&(ze(),e(ce)?.(),c(ce,G()?.(C)??null))}),_a(),sa();var U=Jt(),Ne=s(U);{var D=r=>{var o=It();v(r,o)},d=r=>{var o=Z(),z=W(o);{var F=y=>{var x=Dt(),w=l(s(x),2),$=s(w,!0);t(w),t(x),R(()=>_($,e(k))),v(y,x)},E=y=>{var x=Z(),w=W(x);{var $=P=>{var Q=Wt(),ee=s(Q),be=l(s(ee),2),ie=s(be),pe=s(ie),me=l(s(pe),2),ge=s(me,!0);t(me),t(pe);var he=l(pe,2);{var xe=A=>{var L=Nt(),Te=l(s(L),2),Ge=s(Te,!0);t(Te),t(L),R(()=>_(Ge,(e(a),i(()=>e(a).industry)))),v(A,L)};b(he,A=>{e(a),i(()=>e(a).industry)&&A(xe)})}var ke=l(he,2),te=l(s(ke),2),X=s(te,!0);t(te),t(ke),t(ie);var se=l(ie,2);{var ne=A=>{var L=Lt(),Te=s(L),Ge=s(Te);t(Te);var Qe=l(Te,2),ua=s(Qe);t(Qe);var ea=l(Qe,2),Ye=s(ea);t(ea),t(L),R((Ke,ya)=>{_(Ge,`${e(a),i(()=>e(a).dates.length)??""}-Day Forecast`),_(ua,`${e(a),i(()=>e(a).dates[0])??""} to ${e(a),i(()=>e(a).dates[e(a).dates.length-1])??""}`),_(Ye,`${Ke??""} days predicted
                UP,
                ${ya??""} days
                predicted DOWN`)},[()=>(e(a),i(()=>(e(a).predictions||[]).filter(Ke=>Ke==="UP").length)),()=>(e(a),i(()=>(e(a).predictions||[]).filter(Ke=>Ke==="DOWN").length))]),v(A,L)},fe=A=>{var L=Mt(),Te=s(L),Ge=s(Te,!0);t(Te);var Qe=l(Te,2),ua=s(Qe);t(Qe);var ea=l(Qe,2),Ye=s(ea);{var Ke=oa=>{var Ea=jt();Je(2),v(oa,Ea)},ya=oa=>{var Ea=Ut();Je(2),v(oa,Ea)};b(Ye,oa=>{e(a),i(()=>e(a).prediction==="increase")?oa(Ke):oa(ya,!1)})}t(ea),t(L),R(oa=>{xa(L,1,`prediction-result ${e(a),i(()=>e(a).prediction)??""}`,"svelte-1trbkmy"),_(Ge,(e(a),i(()=>e(a).tomorrow_date))),_(ua,`${oa??""}%`)},[()=>(e(a),i(()=>(e(a).tomorrow_probability||0).toFixed(2)))]),v(A,L)};b(se,A=>{e(a),i(()=>e(a).dates&&e(a).dates.length>1)?A(ne):A(fe,!1)})}var J=l(se,2),S=l(s(J),2),M=s(S);t(S);var le=l(S,2);{var oe=A=>{var L=Ht();v(A,L)};b(le,A=>{e(a),i(()=>Math.abs(e(a).threshold-50)>1)&&A(oe)})}t(J),t(be),t(ee);var p=l(ee,2),K=s(p),ye=s(K),de=s(ye);{var De=A=>{var L=ca("Multi-Day Forecast");v(A,L)},ve=A=>{var L=ca("Probability Gauge");v(A,L)};b(de,A=>{e(a),i(()=>e(a).dates&&e(a).dates.length>1)?A(De):A(ve,!1)})}t(ye);var Ae=l(ye,2);t(K);var ue=l(K,2);Sa(ue,A=>c(m,A),()=>e(m));var q=l(ue,2),Y=s(q);{var H=A=>{var L=ca();R(Te=>_(L,`Each bar represents the predicted probability of a price increase
            for that trading day. Green bars indicate predictions above the
            threshold (${Te??""}%, dashed line), while red
            bars indicate predictions below the threshold.`),[()=>(e(a),i(()=>e(a).threshold.toFixed(1)))]),v(A,L)},_e=A=>{var L=ca();R(Te=>_(L,`The gauge shows the predicted probability of a price increase.
            Values above the threshold (red line at ${Te??""}%) indicate an expected increase.`),[()=>(e(a),i(()=>e(a).threshold.toFixed(1)))]),v(A,L)};b(Y,A=>{e(a),i(()=>e(a).dates&&e(a).dates.length>1)?A(H):A(_e,!1)})}t(q),t(p);var we=l(p,2),Ve=l(s(we),2),Ce=s(Ve),Le=l(s(Ce),2),$e=s(Le,!0);t(Le),t(Ce);var Ue=l(Ce,2),B=l(s(Ue),2),O=s(B),re=l(O);{var Fe=A=>{var L=Gt();v(A,L)};b(re,A=>{e(a),i(()=>Math.abs(e(a).threshold-50)>1)&&A(Fe)})}t(B),t(Ue);var Oe=l(Ue,2);{var ae=A=>{var L=qt(),Te=l(s(L),2),Ge=s(Te,!0);t(Te),t(L),R(()=>_(Ge,(e(a),i(()=>e(a).dates.length)))),v(A,L)},Me=A=>{var L=Bt(),Te=l(s(L),2),Ge=s(Te,!0);t(Te),t(L),R(()=>_(Ge,(e(a),i(()=>e(a).tomorrow_date)))),v(A,L)};b(Oe,A=>{e(a),i(()=>e(a).mode==="eval"&&e(a).dates)?A(ae):A(Me,!1)})}var Ee=l(Oe,2),Ie=l(s(Ee),2),Be=s(Ie);t(Ie),t(Ee),t(Ve),t(we),t(Q),R((A,L,Te,Ge)=>{_(ge,(e(a),i(()=>e(a).ticker))),xa(ke,1,`mode-badge ${e(a),i(()=>e(a).mode)??""}`,"svelte-1trbkmy"),_(X,(e(a),i(()=>e(a).mode==="eval"?"Evaluation":"Forecast"))),_(M,`${A??""}%`),Ae.disabled=e(f),_($e,(e(a),i(()=>e(a).model))),_(O,`${L??""} (${Te??""}%) `),_(Be,`${Ge??""}% above threshold`)},[()=>(e(a),i(()=>e(a).threshold.toFixed(2))),()=>(e(a),i(()=>e(a).threshold.toFixed(4))),()=>(e(a),i(()=>e(a).threshold.toFixed(2))),()=>(e(a),i(()=>Math.abs((e(a).tomorrow_probability||0)-e(a).threshold).toFixed(2)))]),He("click",Ae,N),v(P,Q)};b(w,P=>{e(a)&&P($)},!0)}v(y,x)};b(z,y=>{e(k)?y(F):y(E,!1)},!0)}v(r,o)};b(Ne,r=>{e(n)?r(D):r(d,!1)})}t(U),v(V,U),ia()}var Kt=g('<div class="loading svelte-tg4ds7"><div class="spinner svelte-tg4ds7"></div> <p>Loading data splits visualization...</p></div>'),Qt=g('<div class="error svelte-tg4ds7"><h4 class="svelte-tg4ds7">Unable to load visualization</h4> <p> </p></div>'),Xt=g('<br/><small class="svelte-tg4ds7"> </small>',1),Zt=g('<span class="segment-label svelte-tg4ds7">Train<br/> <!></span>'),es=g('<br/><small class="svelte-tg4ds7"> </small>',1),as=g('<span class="segment-label svelte-tg4ds7">Val<br/> <!></span>'),ts=g('<span class="segment-label unused-label svelte-tg4ds7">Unused<br/> </span>'),ss=g('<div class="segment unused svelte-tg4ds7"><!></div>'),rs=g('<br/><small class="svelte-tg4ds7"> </small>',1),ls=g('<span class="segment-label svelte-tg4ds7">Test<br/> <!></span>'),is=g('<div class="window-row svelte-tg4ds7"><div class="window-label svelte-tg4ds7"> </div> <div class="window-bar svelte-tg4ds7"><div class="segment train svelte-tg4ds7"><!></div> <div class="segment val svelte-tg4ds7"><!></div> <!> <div class="segment test svelte-tg4ds7"><!></div></div> <div class="window-size svelte-tg4ds7"> </div></div>'),ns=g(`<div class="viz-content svelte-tg4ds7"><div class="plot-header svelte-tg4ds7"><button class="btn btn-sm btn-secondary save-plot-btn svelte-tg4ds7" title="Save Growing Windows Diagram as PNG">üíæ Save</button></div> <div id="growing-windows-container"><div class="header svelte-tg4ds7"><h3 class="svelte-tg4ds7">Growing Windows Cross-Validation</h3> <p class="description svelte-tg4ds7"> </p></div> <div class="config-info svelte-tg4ds7"><div class="config-item svelte-tg4ds7"><span class="label svelte-tg4ds7">Test Size:</span> <span class="value svelte-tg4ds7"> </span></div> <div class="config-item svelte-tg4ds7"><span class="label svelte-tg4ds7">Val Size:</span> <span class="value svelte-tg4ds7"> </span></div></div> <div class="windows-container svelte-tg4ds7"></div> <div class="legend svelte-tg4ds7"><div class="legend-item svelte-tg4ds7"><div class="legend-color train svelte-tg4ds7"></div> <span class="svelte-tg4ds7">Training Data (grows)</span></div> <div class="legend-item svelte-tg4ds7"><div class="legend-color val svelte-tg4ds7"></div> <span class="svelte-tg4ds7">Validation Data (grows)</span></div> <div class="legend-item svelte-tg4ds7"><div class="legend-color test svelte-tg4ds7"></div> <span class="svelte-tg4ds7"> </span></div> <div class="legend-item svelte-tg4ds7"><div class="legend-color unused svelte-tg4ds7"></div> <span class="svelte-tg4ds7">Unused Data</span></div></div> <div class="explanation svelte-tg4ds7"><h4 class="svelte-tg4ds7">About Growing Windows</h4> <p class="svelte-tg4ds7">The <strong>growing windows</strong> method progressively increases the
            training data size across folds while keeping the test set constant.
            This helps evaluate how model performance improves with more training
            data.</p> <ul class="svelte-tg4ds7"><li class="svelte-tg4ds7"><strong>Test set</strong> </li> <li class="svelte-tg4ds7"><strong>Training + Validation</strong> </li> <li class="svelte-tg4ds7"><strong>Each fold</strong>: Uses a progressively larger window of
              historical data</li></ul></div></div></div>`),os=g('<div class="growing-windows-viz svelte-tg4ds7"><!></div>');function vs(V,I){ra(I,!1);let u=qe(I,"jobId",8),G=qe(I,"registerSaveHandler",8),a=T(null),n=T(!0),k=T(null),m=T(!1);async function h(){c(n,!0),c(k,null);try{c(a,await na.getGrowingWindows(u()))}catch(N){const C=N instanceof Error?N.message:String(N);c(k,C),console.error("Failed to load growing windows data:",N)}finally{c(n,!1)}}async function f(){c(m,!0);try{const N=document.getElementById("growing-windows-container");if(!N)throw new Error("Chart element not found");await za(N,`growing_windows_${u()}`,{scale:2})}catch(N){const C=N instanceof Error?N.message:String(N);C&&We.error(`No se pudo guardar la visualizaci√≥n: ${C}`)}finally{c(m,!1)}}async function j(){await f()}let ce=null;la(()=>{h(),ce=G()?.(j)??null}),$a(()=>{ce?.()}),sa();var Re=os(),ze=s(Re);{var Se=N=>{var C=Kt();v(N,C)},je=N=>{var C=Z(),U=W(C);{var Ne=d=>{var r=Qt(),o=l(s(r),2),z=s(o,!0);t(o),t(r),R(()=>_(z,e(k))),v(d,r)},D=d=>{var r=Z(),o=W(r);{var z=F=>{var E=ns(),y=s(E),x=s(y);t(y);var w=l(y,2),$=s(w),P=l(s($),2),Q=s(P);t(P),t($);var ee=l($,2),be=s(ee),ie=l(s(be),2),pe=s(ie);t(ie),t(be);var me=l(be,2),ge=l(s(me),2),he=s(ge);t(ge),t(me),t(ee);var xe=l(ee,2);pa(xe,5,()=>(e(a),i(()=>e(a).windows)),ma,(oe,p)=>{var K=is(),ye=s(K),de=s(ye);t(ye);var De=l(ye,2),ve=s(De),Ae=s(ve);{var ue=B=>{var O=Zt(),re=l(s(O),2),Fe=l(re);{var Oe=ae=>{var Me=Xt(),Ee=l(W(Me)),Ie=s(Ee,!0);t(Ee),R(()=>_(Ie,(e(p),i(()=>e(p).train_samples)))),v(ae,Me)};b(Fe,ae=>{e(p),i(()=>e(p).train_samples)&&ae(Oe)})}t(O),R(ae=>_(re,`${ae??""}% `),[()=>(e(p),i(()=>e(p).train_percent.toFixed(1)))]),v(B,O)};b(Ae,B=>{e(p),i(()=>e(p).train_percent>10)&&B(ue)})}t(ve);var q=l(ve,2),Y=s(q);{var H=B=>{var O=as(),re=l(s(O),2),Fe=l(re);{var Oe=ae=>{var Me=es(),Ee=l(W(Me)),Ie=s(Ee,!0);t(Ee),R(()=>_(Ie,(e(p),i(()=>e(p).val_samples)))),v(ae,Me)};b(Fe,ae=>{e(p),i(()=>e(p).val_samples)&&ae(Oe)})}t(O),R(ae=>_(re,`${ae??""}% `),[()=>(e(p),i(()=>e(p).val_percent.toFixed(1)))]),v(B,O)};b(Y,B=>{e(p),i(()=>e(p).val_percent>5)&&B(H)})}t(q);var _e=l(q,2);{var we=B=>{var O=ss(),re=s(O);{var Fe=Oe=>{var ae=ts(),Me=l(s(ae),2);t(ae),R(Ee=>_(Me,`${Ee??""}%`),[()=>(e(p),i(()=>(100-e(p).used_percent).toFixed(1)))]),v(Oe,ae)};b(re,Oe=>{e(p),i(()=>100-e(p).used_percent>10)&&Oe(Fe)})}t(O),R(Oe=>{ba(O,`width: ${e(p),i(()=>100-e(p).used_percent)??""}%`),ka(O,"title",`Unused: ${Oe??""}% (not used in this fold)`)},[()=>(e(p),i(()=>(100-e(p).used_percent).toFixed(1)))]),v(B,O)};b(_e,B=>{e(p),i(()=>100-e(p).used_percent>.1)&&B(we)})}var Ve=l(_e,2),Ce=s(Ve);{var Le=B=>{var O=ls(),re=l(s(O),2),Fe=l(re);{var Oe=ae=>{var Me=rs(),Ee=l(W(Me)),Ie=s(Ee,!0);t(Ee),R(()=>_(Ie,(e(p),i(()=>e(p).test_samples)))),v(ae,Me)};b(Fe,ae=>{e(p),i(()=>e(p).test_samples)&&ae(Oe)})}t(O),R(ae=>_(re,`${ae??""}% `),[()=>(e(p),i(()=>e(p).test_percent.toFixed(1)))]),v(B,O)};b(Ce,B=>{e(p),i(()=>e(p).test_percent>5)&&B(Le)})}t(Ve),t(De);var $e=l(De,2),Ue=s($e);t($e),t(K),R((B,O,re,Fe)=>{_(de,`Fold ${e(p),i(()=>e(p).fold)??""}`),ba(ve,`width: ${e(p),i(()=>e(p).train_percent)??""}%`),ka(ve,"title",`Train: ${B??""}% ${e(p),i(()=>e(p).train_samples?"("+e(p).train_samples+" samples)":"")??""}`),ba(q,`width: ${e(p),i(()=>e(p).val_percent)??""}%`),ka(q,"title",`Val: ${O??""}% ${e(p),i(()=>e(p).val_samples?"("+e(p).val_samples+" samples)":"")??""}`),ba(Ve,`width: ${e(p),i(()=>e(p).test_percent)??""}%`),ka(Ve,"title",`Test: ${re??""}% ${e(p),i(()=>e(p).test_samples?"("+e(p).test_samples+" samples)":"")??""} - Always from END of dataset`),_(Ue,`Used: ${Fe??""}%`)},[()=>(e(p),i(()=>e(p).train_percent.toFixed(1))),()=>(e(p),i(()=>e(p).val_percent.toFixed(1))),()=>(e(p),i(()=>e(p).test_percent.toFixed(1))),()=>(e(p),i(()=>e(p).used_percent.toFixed(1)))]),v(oe,K)}),t(xe);var ke=l(xe,2),te=l(s(ke),4),X=l(s(te),2),se=s(X);t(X),t(te),Je(2),t(ke);var ne=l(ke,2),fe=l(s(ne),4),J=s(fe),S=l(s(J));t(J);var M=l(J,2),le=l(s(M));t(M),Je(2),t(fe),t(ne),t(w),t(E),R((oe,p,K,ye)=>{x.disabled=e(m),_(Q,`Data splits across ${e(a),i(()=>e(a).n_folds)??""} folds (${e(a),i(()=>e(a).model)??""} model)`),_(pe,`${oe??""}%`),_(he,`${p??""}%`),_(se,`Test Data (constant ${K??""}%)`),_(S,`: Fixed at ${ye??""}% across all folds (always from the end of the
              dataset)`),_(le,`: Grows from 1/${e(a),i(()=>e(a).n_folds)??""}
              to
              ${e(a),i(()=>e(a).n_folds)??""}/${e(a),i(()=>e(a).n_folds)??""} of available data`)},[()=>(e(a),i(()=>(e(a).test_size_config*100).toFixed(1))),()=>(e(a),i(()=>(e(a).val_size_config*100).toFixed(1))),()=>(e(a),i(()=>(e(a).test_size_config*100).toFixed(1))),()=>(e(a),i(()=>(e(a).test_size_config*100).toFixed(1)))]),He("click",x,f),v(F,E)};b(o,F=>{e(a)&&F(z)},!0)}v(d,r)};b(U,d=>{e(k)?d(Ne):d(D,!1)},!0)}v(N,C)};b(ze,N=>{e(n)?N(Se):N(je,!1)})}t(Re),v(V,Re),ia()}var cs=g('<div class="loading svelte-1y0qcoi"><div class="spinner svelte-1y0qcoi"></div> <p>Loading available visualizations...</p></div>'),ds=g('<div class="error svelte-1y0qcoi"><h4 class="svelte-1y0qcoi">‚ö†Ô∏è Unable to load visualizations</h4> <p> </p></div>'),us=g(`<div class="no-viz svelte-1y0qcoi"><p>No visualizations available for this job.</p> <p class="hint svelte-1y0qcoi">Visualizations are available for completed extraction (time series),
        PCA, cross-validation, training, and tuning jobs.</p></div>`),_s=g('<button type="button"> </button>'),ps=g('<div class="placeholder svelte-1y0qcoi"><p class="svelte-1y0qcoi">Select a visualization from the tabs above</p></div>'),ms=g('<div class="panel-content svelte-1y0qcoi"><div class="viz-tabs svelte-1y0qcoi"></div> <div class="viz-container svelte-1y0qcoi"><!></div></div>'),gs=g('<div class="visualization-panel svelte-1y0qcoi"><div class="panel-header svelte-1y0qcoi"><h3 class="svelte-1y0qcoi"> </h3> <button type="button" class="close-btn svelte-1y0qcoi">‚úï</button></div> <!></div>');function Es(V,I){ra(I,!1);let u=qe(I,"jobId",8),G=qe(I,"onClose",8,()=>{}),a=T(null),n=T(!0),k=T(null),m=T(null);const h=new Set;async function f(){c(n,!0),c(k,null);try{c(a,await na.getAvailable(u())),e(a)&&e(a).available_visualizations.length>0&&c(m,e(a).available_visualizations[0].type)}catch(d){const r=d instanceof Error?d.message:String(d);c(k,r),console.error("Failed to load available visualizations:",d)}finally{c(n,!1)}}function j(d){return h.add(d),()=>h.delete(d)}async function ce(){for(const d of h)await d()}let Re=T(null);la(()=>()=>{e(Re)?.(),h.clear()}),ta(()=>(ha(u()),e(Re),Ca),()=>{u()&&(e(Re)?.(),c(Re,Ca(u(),ce)),f())}),_a(),sa();var ze=gs(),Se=s(ze),je=s(Se),N=s(je);t(je);var C=l(je,2);t(Se);var U=l(Se,2);{var Ne=d=>{var r=cs();v(d,r)},D=d=>{var r=Z(),o=W(r);{var z=E=>{var y=ds(),x=l(s(y),2),w=s(x,!0);t(x),t(y),R(()=>_(w,e(k))),v(E,y)},F=E=>{var y=Z(),x=W(y);{var w=P=>{var Q=us();v(P,Q)},$=P=>{var Q=Z(),ee=W(Q);{var be=ie=>{var pe=ms(),me=s(pe);pa(me,5,()=>(e(a),i(()=>e(a).available_visualizations)),ma,(te,X)=>{var se=_s();let ne;var fe=s(se,!0);t(se),R(J=>{ne=xa(se,1,"tab-btn svelte-1y0qcoi",null,ne,J),_(fe,(e(X),i(()=>e(X).title)))},[()=>({active:e(m)===e(X).type})]),He("click",se,()=>c(m,e(X).type)),v(te,se)}),t(me);var ge=l(me,2),he=s(ge);{var xe=te=>{var X=Z(),se=W(X);va(se,u,ne=>{Yt(ne,{get jobId(){return u()},registerSaveHandler:j})}),v(te,X)},ke=te=>{var X=Z(),se=W(X);{var ne=J=>{var S=Z(),M=W(S);va(M,u,le=>{Ha(le,{get jobId(){return u()},registerSaveHandler:j})}),v(J,S)},fe=J=>{var S=Z(),M=W(S);{var le=p=>{var K=Z(),ye=W(K);va(ye,u,de=>{et(de,{get jobId(){return u()},registerSaveHandler:j})}),v(p,K)},oe=p=>{var K=Z(),ye=W(K);{var de=ve=>{var Ae=Z(),ue=W(Ae);va(ue,u,q=>{nt(q,{get jobId(){return u()},registerSaveHandler:j})}),v(ve,Ae)},De=ve=>{var Ae=Z(),ue=W(Ae);{var q=H=>{var _e=Z(),we=W(_e);va(we,u,Ve=>{yt(Ve,{get jobId(){return u()},registerSaveHandler:j})}),v(H,_e)},Y=H=>{var _e=Z(),we=W(_e);{var Ve=Le=>{var $e=Z(),Ue=W($e);va(Ue,u,B=>{St(B,{get jobId(){return u()},registerSaveHandler:j})}),v(Le,$e)},Ce=Le=>{var $e=Z(),Ue=W($e);{var B=re=>{var Fe=Z(),Oe=W(Fe);va(Oe,u,ae=>{Ot(ae,{get jobId(){return u()},registerSaveHandler:j})}),v(re,Fe)},O=re=>{var Fe=Z(),Oe=W(Fe);{var ae=Ee=>{var Ie=Z(),Be=W(Ie);va(Be,u,A=>{vs(A,{get jobId(){return u()},registerSaveHandler:j})}),v(Ee,Ie)},Me=Ee=>{var Ie=ps();v(Ee,Ie)};b(Oe,Ee=>{e(m)==="growing-windows"?Ee(ae):Ee(Me,!1)},!0)}v(re,Fe)};b(Ue,re=>{e(m)==="extraction-summary"?re(B):re(O,!1)},!0)}v(Le,$e)};b(we,Le=>{e(m)==="pca-analysis"?Le(Ve):Le(Ce,!1)},!0)}v(H,_e)};b(ue,H=>{e(m)==="tuning-progress"?H(q):H(Y,!1)},!0)}v(ve,Ae)};b(ye,ve=>{e(m)==="training-history"?ve(de):ve(De,!1)},!0)}v(p,K)};b(M,p=>{e(m)==="confusion-matrix"?p(le):p(oe,!1)},!0)}v(J,S)};b(se,J=>{e(m)==="cross-validation"?J(ne):J(fe,!1)},!0)}v(te,X)};b(he,te=>{e(m)==="prediction-probability"?te(xe):te(ke,!1)})}t(ge),t(pe),v(ie,pe)};b(ee,ie=>{e(a)&&ie(be)},!0)}v(P,Q)};b(x,P=>{e(a),i(()=>e(a)&&e(a).available_visualizations.length===0)?P(w):P($,!1)},!0)}v(E,y)};b(o,E=>{e(k)?E(z):E(F,!1)},!0)}v(d,r)};b(U,d=>{e(n)?d(Ne):d(D,!1)})}t(ze),R(d=>_(N,`Visualizations - Job ${d??""}...`),[()=>(ha(u()),i(()=>u().slice(0,8)))]),He("click",C,function(...d){G()?.apply(this,d)}),v(V,ze),ia()}export{Es as default};
