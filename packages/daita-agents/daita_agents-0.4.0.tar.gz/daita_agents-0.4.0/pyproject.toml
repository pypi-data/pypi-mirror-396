[build-system]
requires = ["setuptools>=42", "wheel"]
build-backend = "setuptools.build_meta"

[project]
name = "daita-agents"
version = "0.4.0"
description = "Daita Agents - Data focused AI agent framework with free local use and premium hosted enterprise features"
readme = "README.md"
authors = [{name = "Daita", email = "support@daita-tech.io"}]
# Commercial proprietary license
license = {text = "Proprietary"}
requires-python = ">=3.11"
keywords = ["ai", "agents", "llm", "automation", "workflows", "sdk"]
classifiers = [
    "Development Status :: 4 - Beta",
    "Intended Audience :: Developers",
    "License :: Other/Proprietary License",
    "Programming Language :: Python :: 3",
    "Programming Language :: Python :: 3.11",
    "Programming Language :: Python :: 3.12",
    "Topic :: Scientific/Engineering :: Artificial Intelligence",
]

# CORE (mandatory) - Only essential framework dependencies
dependencies = [
    "pydantic>=2.0.0",        # Configuration models
    "aiohttp>=3.8.0",         # HTTP client for internal operations and autonomous execution
    "python-dotenv>=1.0.0",   # Environment variable loading
    "click>=8.0.0",           # CLI framework
    "watchdog>=3.0.0",        # CLI watch mode
    "croniter>=1.0.0",        # Cron expression parsing for scheduling
]

[project.urls]
Homepage = "https://daita-tech.io"
Documentation = "https://docs.daita-tech.io"

[project.optional-dependencies]
# LLM Providers (user chooses what they need)
openai = ["openai>=1.0.0"]
anthropic = ["anthropic>=0.5.0"]
google = ["google-generativeai>=0.3.0"]
transformers = ["transformers>=4.51.0"]

# Database integrations
postgresql = ["asyncpg>=0.27.0", "psycopg2-binary>=2.9.0"]
mysql = ["aiomysql>=0.2.0", "SQLAlchemy>=2.0.0"]
mongodb = ["motor>=3.0.0"]
sqlite = ["aiosqlite>=0.21.0", "SQLAlchemy>=2.0.0"]
snowflake = ["snowflake-connector-python>=3.0.0"]
elasticsearch = ["elasticsearch>=8.0.0"]

# Vector database integrations
chromadb = ["chromadb>=1.3.0"]
pinecone = ["pinecone>=5.0.0"]
qdrant = ["qdrant-client>=1.16.0"]

# Cloud services
aws = ["boto3>=1.38.0"]
slack = ["slack-sdk>=3.31.0"]

# MCP (Model Context Protocol) integration
mcp = ["mcp>=1.0.0"]

# Autonomous execution features
scheduling = ["boto3>=1.38.0"]  # For EventBridge integration

# Data processing
data = [
    "pandas>=1.5.0",
    "numpy>=1.20.0",
    "openpyxl>=3.1.0",
    "beautifulsoup4>=4.13.0",
    "lxml>=5.4.0",
    "jsonpath-ng>=1.7.0",
    "fuzzywuzzy>=0.18.0"
]

# Web API server components (for building custom APIs)
webapi = [
    "fastapi>=0.115.0",
    "uvicorn>=0.34.0",
    "python-multipart>=0.0.20"
]

# Framework utilities
utils = [
    "aiofiles>=24.1.0",
    "PyYAML>=6.0.0",
    "certifi>=2025.4.0",
    "PyJWT>=2.10.0",
    "psutil>=7.0.0"
]

# Autonomous execution and scheduling (optional but recommended)
autonomous = [
    "croniter>=1.0.0",        # Already included in core for basic cron parsing
    "boto3>=1.38.0",          # For EventBridge scheduling integration
]

# Common combinations for easy installation
llm = [
    "openai>=1.0.0",
    "anthropic>=0.5.0",
    "google-generativeai>=0.3.0"
]
database = [
    "asyncpg>=0.27.0",
    "psycopg2-binary>=2.9.0",
    "aiomysql>=0.2.0",
    "SQLAlchemy>=2.0.0",
    "motor>=3.0.0",
    "aiosqlite>=0.21.0",
    "snowflake-connector-python>=3.0.0",
    "elasticsearch>=8.0.0"
]
vectordb = [
    "chromadb>=1.3.0",
    "pinecone>=5.0.0",
    "qdrant-client>=1.16.0"
]
cloud = [
    "boto3>=1.38.0",
    "slack-sdk>=3.31.0"
]
complete = [
    "openai>=1.0.0",
    "anthropic>=0.5.0",
    "google-generativeai>=0.3.0",
    "asyncpg>=0.27.0",
    "psycopg2-binary>=2.9.0",
    "aiomysql>=0.2.0",
    "SQLAlchemy>=2.0.0",
    "motor>=3.0.0",
    "boto3>=1.38.0",
    "slack-sdk>=3.31.0",
    "mcp>=1.0.0",
    "aiofiles>=24.1.0",
    "PyYAML>=6.0.0",
    "certifi>=2025.4.0",
    "PyJWT>=2.10.0",
    "psutil>=7.0.0"
]
all = [
    "openai>=1.0.0",
    "anthropic>=0.5.0",
    "google-generativeai>=0.3.0",
    "transformers>=4.51.0",
    "asyncpg>=0.27.0",
    "psycopg2-binary>=2.9.0",
    "aiomysql>=0.2.0",
    "SQLAlchemy>=2.0.0",
    "motor>=3.0.0",
    "aiosqlite>=0.21.0",
    "snowflake-connector-python>=3.0.0",
    "elasticsearch>=8.0.0",
    "chromadb>=1.3.0",
    "pinecone>=5.0.0",
    "qdrant-client>=1.16.0",
    "boto3>=1.38.0",
    "slack-sdk>=3.31.0",
    "mcp>=1.0.0",
    "pandas>=1.5.0",
    "numpy>=1.20.0",
    "openpyxl>=3.1.0",
    "beautifulsoup4>=4.13.0",
    "lxml>=5.4.0",
    "jsonpath-ng>=1.7.0",
    "fuzzywuzzy>=0.18.0",
    "fastapi>=0.115.0",
    "uvicorn>=0.34.0",
    "python-multipart>=0.0.20",
    "aiofiles>=24.1.0",
    "PyYAML>=6.0.0",
    "certifi>=2025.4.0",
    "PyJWT>=2.10.0",
    "psutil>=7.0.0"
]

# Development dependencies
dev = [
    "pytest>=8.0.0",
    "pytest-asyncio>=0.26.0", 
    "pytest-cov>=4.1.0",
    "black>=23.0.0",
    "mypy>=1.4.0",
]

[project.scripts]
daita = "daita.cli.main:main"

# Package discovery with security exclusions
[tool.setuptools.packages.find]
# Only include the daita package and its subpackages
include = ["daita*"]
# Exclude internal cloud operations (not distributed to customers)
exclude = [
    "daita.api*",                    # Internal API server
    "daita.cloud*",                  # All internal cloud operations
    "daita.examples*",               # Example files (still have SDK references)
    "alephagents*",                  # Other top-level packages
    "data_ingestion*", 
    "data_ingestion_api*"
]

# Don't package sensitive internal config files  
[tool.setuptools.package-data]
"daita" = ["!config/settings.py", "!**/lambda-env-vars.json"]

[tool.pytest.ini_options]
testpaths = ["tests"]
asyncio_mode = "auto"
pythonpath = ["."]
addopts = "--tb=short -v"
asyncio_default_fixture_loop_scope = "function"
markers = [
    "asyncio: Async test marker",
    "unit: Unit tests - fast, isolated tests",
    "integration: Integration tests - test component interactions", 
    "performance: Performance tests - measure speed and resource usage",
    "slow: Slow tests - may take several seconds",
    "requires_llm: Tests that require LLM API keys",
    "requires_db: Tests that require database setup",
    "stress: Stress tests - high load scenarios"
]

[tool.black]
line-length = 88
target-version = ['py39']