defaults:
  - _self_

seed: 42
save_frequency: 20 # Save every iterations

dataset:
  _target_: genmol.types.DatasetConfig
  path: ??? # Required argument, must be provided
  batch_size: 1000 # Default maximum number of fragments
  num_workers: 18 # Number of parallel workers - null defaults number of physical cores
  smiles_column: canonical_smiles
  safe_column: null # Optional column name for safe smiles
  score_column: null # Optional score column name - will be generated if generate_scores is True
  generate_scores: False #  Do not generate scores for reference smiles
  # not currently used
  number_of_samples_to_fragment: 10000 # Default number of fragments

oracle:
  _target_: genmol.types.ScoreConfig
  use_composite_score: True # Use a composite score based on the RDKit score and Tanimoto similarity
  score: QED # QED | LogP | SA
  score_cutoff: 0.9 # (a score value of 0.9 will contribute 1 to the composite score)
  similarity_cutoff: 0.5 #  (a score value of 0.5 will contribute 1 to the composite score)
  fingerprint_type: morgan # morgan | functional

generator:
  _target_: genmol.types.GenMolProduceConfig
  min_tokens_to_generate: 2
  max_tokens_to_generate: 10
  num_unique_generations: 4
  num_top_scored_molecules_to_keep: 8
  invoke_urls: # multiple genmol nim container api endpoint on single/multi-gpu setup
    # 2 node (3 gpu) setup
    - http://127.0.0.1:8000/generate # 4070 ti super
    - http://192.168.0.8:8001/generate # 3060
    - http://192.168.0.8:8003/generate
    - http://192.168.0.8:8000/generate # tesla
    - http://192.168.0.8:8002/generate
  api_instances_per_partition: # dataset partition splits
    - 1 # 1st gpu dataset is partition into 2 API instance
    - 2 # 2nd gpu dataset is partition into 3 API instance
    - 2 # 3rd gpu dataset is partition into 6 API instance
  # partition fractions must sum to 1.0
  # each fraction corresponds to the gpu partition in calculating the split of the total dataset
  partition_fractions:
    - 0.14 # 1st gpu uses 14% of total dataset
    - 0.38 # 2nd gpu uses 38% of total dataset
    - 0.48 # 3rd gpu uses 48% of total dataset
  inference:
    _target_: genmol.types.GenMolInferenceConfig
    num_molecules: 3 # Number of Molecules to Generate
    temperature: 1.75 # Temperature Scaling Factor for Softmax Sampling
    noise: 2.0 # Noise Factor for Top-K Sampling
    step_size: 1 # Diffusion Step Size
    unique: True # Show only unique molecules
    scoring: QED # QED | LogP
