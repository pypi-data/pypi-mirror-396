# Migrating to Namel3ss 3.0.x

This guide highlights key changes from earlier snapshots to the current 3.0.x release.

## Agents & Flows
- Agents now support reflection, debate, planning, and evaluation. Existing `AgentRunner.run` calls continue to work; opt into new capabilities via config flags.
- Flows use the consolidated control-flow engine with `parallel`, `for_each`, `try/catch/finally`, and `timeout` support. Legacy sequential flows run unchanged.

## Memory
- Memory 2.0 introduces episodic and semantic records with namespaces and retention. Existing memory hooks now write episodic records; semantic summaries are generated by the summarization worker.
- If you relied on ad-hoc memory writes, use the MemoryNamespace-aware APIs to scope data to tenant/user/agent.

## Security & Observability
- OAuth/API-key auth flows now populate `SecurityContext`; RBAC enforcement and field-level masking apply automatically. Ensure callers include roles/permissions in tokens or API-key mappings.
- Tracing and metrics are emitted across flows, agents, memory, and RAG. Attach trace IDs to logs for correlated debugging.

## Optimizer & Ecosystem
- Optimizer++ evaluations and suggestions are stored; suggestions require explicit accept/reject decisions before application.
- Plugins now rely on manifest/registry discovery. Place manifests under `plugins/<name>/plugin.toml` or `plugin.json`.
- Examples are discoverable via `n3 examples list` and through ecosystem APIs; update any hard-coded example paths to use catalog IDs where possible.

## Testing & Tooling
- Fast suite: `python -m pytest -m "not slow" -q -o addopts=''`
- Docs: `mkdocs build --strict`
- Studio: `cd studio && npm install && npm test`

## Legacy syntax to English-style DSL
- Prefer `let x be y` instead of `let x = y`.
- Replace colon-based blocks with the modern English block structure and layout terms.
- Keep using symbolic operators where needed, but English operators often read better (`plus`, `minus`, `times`, `divided by`).
- Legacy syntax remains supported through the canonical parser and transformer, but lint warnings (e.g., N3-L007) will encourage migration to the modern surface.
