[build-system]
requires = ['hatchling']
build-backend = 'hatchling.build'

[project]
name = 'spacing'
version = '0.9.0'
description = 'Python blank line formatter enforcing spacing rules for clean, readable code'
authors = [{name = 'Greg Smethells'}]
license = {text = 'GPL-3.0-or-later'}
readme = 'README.md'
requires-python = '>=3.11'
keywords = ['formatter', 'python', 'blank-lines', 'code-quality']
classifiers = [
  'Development Status :: 5 - Production/Stable',
  'Intended Audience :: Developers',
  'Programming Language :: Python :: 3',
  'Programming Language :: Python :: 3.11',
  'Programming Language :: Python :: 3.12',
  'Programming Language :: Python :: 3.13',
  'Programming Language :: Python :: 3.14',
]

[project.scripts]
spacing = 'spacing.cli:main'

[project.urls]
Repository = 'https://gitlab.com/oldmission/spacing'
Issues = 'https://gitlab.com/oldmission/spacing/-/issues'

[tool.hatch.build.targets.wheel]
packages = ["src/spacing"]

[tool.ruff]
line-length = 120
indent-width = 2
target-version = "py311"

[tool.ruff.format]
quote-style = "single"
indent-style = "space"
line-ending = "auto"

[tool.ruff.lint]
# F503 = line continuation before binary operator
# F601 = duplicate key literals
# F602 = repeated dictionary keys
# F701 = break statement outside a loop
# F821 = undefined variables
# F901 = syntax or indentation error
# F821 = missing variables
# I = Import formatting rules from isort
# Q = quote-related rules from flake8-quotes
select = ["Q", "I", "F401", "F503", "F601", "F602", "F701", "F821", "F901"]

[tool.ruff.lint.per-file-ignores]
"**/__init__.py" = ["F401"]
"**/conftest.py" = ["F401"]

[tool.ruff.lint.flake8-quotes]
inline-quotes = "single"
multiline-quotes = "double"
docstring-quotes = "double"

[tool.ruff.lint.isort]
case-sensitive = true
combine-as-imports = true
no-sections = true
order-by-type = false

[tool.pytest.ini_options]
testpaths = ['test']
pythonpath = ['src']
python_files = ['test*.py']
python_classes = ['Test*']
python_functions = ['test*']

[tool.coverage.run]
source = ['src/spacing']
omit = ['test/*', 'src/spacing/__init__.py']
branch = true

[tool.coverage.report]
precision = 2
show_missing = true
skip_covered = false
exclude_lines = [
  'pragma: no cover',
  'def __repr__',
  'raise AssertionError',
  'raise NotImplementedError',
  'if __name__ == .__main__.:',
  'if TYPE_CHECKING:',
  '@abstractmethod',
]

[tool.coverage.html]
directory = 'htmlcov'
