# Copyright (C) 2025 Embedl AB

[build-system]
requires = ["setuptools>=61.0.0", "wheel"]
build-backend = "setuptools.build_meta"

[project]
name = "embedl-hub"
description = "The official Embedl Hub Python client library."
readme = "README.md"
version = "2025.12.1.dev1"
license-files = [
    "LICENSE",
    "NOTICE",
]

requires-python = ">=3.11"

authors = [
  { name = "Embedl AB", email = "support@embedl.com" }
]

classifiers = [
  "Development Status :: 1 - Planning",
  "Intended Audience :: Developers",
  "License :: Other/Proprietary License",
  "Programming Language :: Python :: 3",
  "Programming Language :: Python :: 3 :: Only",
  "Programming Language :: Python :: 3.11",
  "Programming Language :: Python :: 3.12",
  "Topic :: Scientific/Engineering :: Artificial Intelligence",
  "Topic :: Software Development :: Embedded Systems",
  "Topic :: Software Development :: Libraries"
]

dependencies = [
  "aimet-torch>=2.18.0",
  "ai-edge-quantizer==0.4.0",
  "ai-edge-litert>=2.0.3",
  "Jinja2>=3.1.5",
  "mergedeep>=1.3.4",
  "onnx~=1.19.0",
  "onnx2tf==1.28.3",
  # onnx_graphsurgeon is required by onnx2tf
  "onnx_graphsurgeon==0.5.8",
  "onnxruntime>=1.18",
  "onnxsim>=0.4.33",
  "platformdirs>=4.5",
  "pydantic>=2.8.2",
  "PyYAML~=6.0.2",
  "qai-hub>=0.40.0",
  "requests>=2.32.3",
  "rich>=13.7",
  # sng4onnx is required by onnx2tf
  "sng4onnx==1.0.4",
  "tabulate>=0.9.0",
  "torch>=2.6.0",
  "torchvision>=0.21.0",
  "typer[all]>=0.12.0",
]

[project.optional-dependencies]
dev = [
  "mkdocs",
  "mkdocs-material",
  "mkdocstrings[python]",
  "pytest",
  "ruff",
]

[project.urls]
Homepage = "https://hub.embedl.com"
Documentation = "https://hub.embedl.com/docs"

[project.scripts]
embedl-hub = "embedl_hub.cli.app:app"
ehub = "embedl_hub.cli.app:app"

[tool.setuptools]
include-package-data = true
package-dir = { "" = "src" }

[tool.setuptools.packages.find]
where = ["src"]
include = ["embedl_hub*"]

[tool.setuptools.package-data]
"embedl_hub" = ["core/default_configs/*.yaml.j2"]
"*" = ["LICENSE", "NOTICE"]

[tool.pytest.ini_options]
testpaths = ["tests"]
addopts = "--strict-markers"

[tool.ruff]
line-length = 79

[tool.ruff.format]
quote-style = "preserve"

[tool.ruff.lint]
select = [
    # isort
    "I",
]
extend-select = [
  "UP",  # pyupgrade
  "C4", # flake8-comprehensions
  "F632" # PyFlakes
]

[tool.pylint.main]
extension-pkg-whitelist = ["qai_hub.public_api_pb2"]

[tool.pylint.typecheck]
generated-members = ["qai_hub.public_api_pb2.*"]
ignored-modules = ["qai_hub.public_api_pb2"]
