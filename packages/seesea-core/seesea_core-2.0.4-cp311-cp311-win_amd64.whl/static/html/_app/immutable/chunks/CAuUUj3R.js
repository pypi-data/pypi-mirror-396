const f=["en","zh-cn"],g="PARAGLIDE_LOCALE";const h=["cookie","globalVariable","baseLocale"];globalThis.__paraglide={};let c,u=!1,p=()=>{let e;for(const o of h){if(o==="cookie")e=E();else if(o==="baseLocale")e="en";else if(o==="globalVariable"&&c!==void 0)e=c;else if(w(o)&&l.has(o)){const t=l.get(o);if(t){const n=t.getLocale();if(n instanceof Promise)continue;e=n}}if(e!==void 0){const t=C(e);return u||(c=t,u=!0,y(t,{reload:!1})),t}}throw new Error("No locale found. Read the docs https://inlang.com/m/gerre34r/library-inlang-paraglideJs/errors#no-locale-found")};const b=e=>{window.location.reload()};let y=(e,o)=>{const t={reload:!0,...o};let n;try{n=p()}catch{}const s=[];for(const a of h)if(a==="globalVariable")c=e;else if(a==="cookie"){if(typeof document>"u"||typeof window>"u")continue;const r=`${g}=${e}; path=/; max-age=34560000`;document.cookie=r}else{if(a==="baseLocale")continue;if(w(a)&&l.has(a)){const r=l.get(a);if(r){let i=r.setLocale(e);i instanceof Promise&&(i=i.catch(L=>{throw new Error(`Custom strategy "${a}" setLocale failed.`,{cause:L})}),s.push(i))}}}const d=()=>{t.reload&&window.location&&e!==n&&b()};if(s.length)return Promise.all(s).then(()=>{d()});d()},k=()=>typeof window<"u"?window.location.origin:"http://fallback.com";function m(e){return typeof e!="string"?!1:e?f.some(o=>o.toLowerCase()===e.toLowerCase()):!1}function C(e){if(typeof e!="string")throw new Error(`Invalid locale: ${e}. Expected a string.`);const o=e.toLowerCase(),t=f.find(n=>n.toLowerCase()===o);if(!t)throw new Error(`Invalid locale: ${e}. Expected one of: ${f.join(", ")}`);return t}function E(){if(typeof document>"u"||!document.cookie)return;const o=document.cookie.match(new RegExp(`(^| )${g}=([^;]+)`))?.[2];if(m(o))return o}function x(e){return $(e)}function $(e){const o=typeof e=="string"?new URL(e,k()):new URL(e),t=o.pathname.split("/").filter(Boolean);return t.length>0&&m(t[0])&&(o.pathname="/"+t.slice(1).join("/")),o}const l=new Map;function w(e){return typeof e=="string"&&/^custom-[A-Za-z0-9_-]+$/.test(e)}export{x as d,p as g,y as s};
