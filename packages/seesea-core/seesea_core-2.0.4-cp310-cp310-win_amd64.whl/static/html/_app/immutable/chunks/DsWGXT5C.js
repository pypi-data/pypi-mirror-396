import"./DsnmJJEf.js";import{f as w,d,s as S,r as h,t as u,k as p,P as q,b as g}from"./Dsrcj9vp.js";import{s as x}from"./CHeL8ZiL.js";import{p as m,i as T}from"./BT4V5UhZ.js";import{a as f}from"./EOTwBAZt.js";var b=w('<span class="loading-text svelte-1a5pdw0"> </span>'),P=w('<div class="loading-container svelte-1a5pdw0"><div class="spinner svelte-1a5pdw0"><svg viewBox="0 0 50 50" class="svelte-1a5pdw0"><circle cx="25" cy="25" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round" class="svelte-1a5pdw0"></circle></svg></div> <!></div>');function L(i,e){let t=m(e,"size",3,"md"),r=m(e,"text",3,"");const s={sm:{spinner:20,text:"0.75rem"},md:{spinner:32,text:"0.875rem"},lg:{spinner:48,text:"1rem"}};let a=q(()=>s[t()]);var n=P(),l=d(n),y=S(l,2);{var _=c=>{var o=b(),v=d(o,!0);h(o),u(()=>{f(o,`font-size: ${p(a).text??""}`),x(v,r())}),g(c,o)};T(y,c=>{r()&&c(_)})}h(n),u(()=>f(l,`width: ${p(a).spinner??""}px; height: ${p(a).spinner??""}px;`)),g(i,n)}function R(){if(typeof window>"u")return"http://127.0.0.1:8080";const i=window.__SEESEA_CONFIG__?.API_BASE_URL;return i&&i.trim()!==""?i:window.location.origin}const U=R();class A{baseUrl;constructor(e=U){this.baseUrl=e}async request(e,t={}){const r=`${this.baseUrl}${e}`;try{const s=await fetch(r,{...t,headers:{"Content-Type":"application/json",Accept:"application/json",...t.headers}});if(!s.ok){let a=`HTTP ${s.status}: ${s.statusText}`;try{a=(await s.json()).message||a}catch{}throw new Error(a)}return s.json()}catch(s){throw s instanceof TypeError&&s.message.includes("fetch")?new Error("网络连接失败，请检查后端服务是否启动"):s}}async search(e,t={}){const r=new URLSearchParams({q:e,page:String(t.page||1),page_size:String(t.page_size||20)});return t.engines?.length&&r.append("engines",t.engines.join(",")),t.include_deepweb&&r.append("include_deepweb","true"),this.request(`/api/search?${r}`)}async proSearch(e,t={}){const r=new URLSearchParams({q:e,page:String(t.page||1),page_size:String(t.page_size||20)});return this.request(`/api/pro/search?${r}`)}async getHotPlatforms(){return this.request("/api/hot/platforms")}async getHotTrends(e){return this.request(`/api/hot/${e}`)}async getAllHotTrends(){return this.request("/api/hot/all")}async getMultipleHotTrends(e){const t=new URLSearchParams({platforms:e.join(",")});return this.request(`/api/hot?${t}`)}async getRssFeeds(){return this.request("/api/rss/feeds")}async fetchRssFeed(e,t={}){return this.request("/api/rss/fetch",{method:"POST",body:JSON.stringify({url:e,max_items:t.max_items||50,filter_keywords:t.filter_keywords||[]})})}async getRssTemplates(){return this.request("/api/rss/templates")}async addRssTemplate(e){return this.request("/api/rss/template/add",{method:"POST",body:JSON.stringify({name:e,categories:[]})})}async getCacheStats(){return this.request("/api/cache/stats")}async getStats(){return this.request("/api/stats")}async getRealtimeMetrics(){return this.request("/api/metrics/realtime")}async getVersion(){return this.request("/api/version")}}const C=new A;export{L,C as a};
