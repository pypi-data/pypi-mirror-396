import"../chunks/DsnmJJEf.js";import{d as Ce,o as Je,e as Ge,s as h}from"../chunks/CHeL8ZiL.js";import{p as Ke,I as E,O as re,f as p,t as m,k as t,b as n,c as Qe,M as je,s as d,d as s,G as l,$ as qe,r as a,Q as le,K as oe,a as ne}from"../chunks/Dsrcj9vp.js";import{i as u}from"../chunks/BT4V5UhZ.js";import{b as Ae,e as M,i as N,E as Be,a as He}from"../chunks/EOTwBAZt.js";import{h as Pe,E as Ve}from"../chunks/DUMB72kh.js";import{h as We}from"../chunks/BiofPN5-.js";import{r as Xe,s as Ye}from"../chunks/0qyMphDB.js";import"../chunks/Chx2bV3U.js";import{a as H,L as Ze}from"../chunks/DsWGXT5C.js";var $e=p('<button class="recent-item svelte-toklxn"> </button>'),et=p('<div class="recent-feeds svelte-toklxn"><span class="recent-label svelte-toklxn">æœ€è¿‘ä½¿ç”¨ï¼š</span> <div class="recent-list svelte-toklxn"></div></div>'),tt=p('<button class="template-tag svelte-toklxn"> </button>'),at=p('<div class="templates svelte-toklxn"><span class="template-label svelte-toklxn">æ¨èæ¨¡æ¿ï¼š</span> <div class="template-list svelte-toklxn"></div></div>'),st=p('<h2 class="feed-title svelte-toklxn"> </h2>'),rt=p('<p class="feed-description svelte-toklxn"> </p>'),lt=p('<p class="item-description svelte-toklxn"><!></p>'),ot=p('<span class="author"> </span>'),nt=p('<time class="published"> </time>'),it=p('<span class="category svelte-toklxn"> </span>'),vt=p('<div class="categories svelte-toklxn"></div>'),ct=p('<article class="feed-item svelte-toklxn"><h3 class="item-title svelte-toklxn"><a target="_blank" rel="noopener noreferrer" class="svelte-toklxn"> </a></h3> <!> <div class="item-meta svelte-toklxn"><!> <!> <!></div></article>'),dt=p('<div class="feed-content svelte-toklxn"><div class="feed-meta svelte-toklxn"><!> <!> <span class="item-count svelte-toklxn"> </span></div> <div class="feed-items svelte-toklxn"></div></div>'),pt=p('<div class="rss-page page-enter svelte-toklxn"><header class="page-header svelte-toklxn"><h1 class="page-title svelte-toklxn"><span class="title-icon svelte-toklxn">ğŸ“¡</span> RSS è®¢é˜…</h1> <p class="page-description svelte-toklxn">è¾“å…¥ RSS é“¾æ¥ï¼Œè·å–æœ€æ–°å†…å®¹</p></header> <section class="input-section svelte-toklxn"><form class="feed-form svelte-toklxn"><div class="input-wrapper svelte-toklxn"><input type="url" placeholder="è¾“å…¥ RSS Feed URL..." class="feed-input svelte-toklxn"/> <button type="submit" class="fetch-btn svelte-toklxn"><!></button></div></form> <!> <!></section> <section class="content-section"><!></section></div>');function yt(ie,ve){Ke(ve,!0);let _=E(!1),k=E(null),g=E(""),f=E(null),O=E(re([])),b=E(re([]));async function ce(){try{l(O,await H.getRssTemplates(),!0)}catch(e){console.error("åŠ è½½æ¨¡æ¿å¤±è´¥:",e)}}async function z(){if(t(g).trim()){l(_,!0),l(k,null);try{l(f,await H.fetchRssFeed(t(g),{max_items:50}),!0),t(b).includes(t(g))||(l(b,[t(g),...t(b).slice(0,4)],!0),localStorage.setItem("recentFeeds",JSON.stringify(t(b))))}catch(e){l(k,e instanceof Error?e.message:"è·å– RSS å†…å®¹å¤±è´¥",!0),l(f,null)}finally{l(_,!1)}}}function de(e){e.preventDefault(),z()}function pe(e){l(g,e,!0),z()}async function ue(e){l(_,!0),l(k,null);try{const r=await H.addRssTemplate(e);r.success?(l(f,null),l(k,null)):l(k,r.message||"åº”ç”¨æ¨¡æ¿å¤±è´¥",!0)}catch(r){l(k,r instanceof Error?r.message:"åº”ç”¨æ¨¡æ¿å¤±è´¥",!0)}finally{l(_,!1)}}function fe(e){if(!e)return"";try{return new Date(e).toLocaleDateString("zh-CN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return e}}Je(()=>{ce();const e=localStorage.getItem("recentFeeds");if(e)try{l(b,JSON.parse(e),!0)}catch{l(b,[],!0)}});var C=pt();We("toklxn",e=>{je(()=>{qe.title="RSS è®¢é˜… - SeeSea"})});var J=d(s(C),2),T=s(J),P=s(T),U=s(P);Xe(U);var G=d(U,2),me=s(G);{var _e=e=>{var r=le("è·å–ä¸­...");n(e,r)},xe=e=>{var r=le("è·å–å†…å®¹");n(e,r)};u(me,e=>{t(_)?e(_e):e(xe,!1)})}a(G),a(P),a(T);var V=d(T,2);{var he=e=>{var r=et(),S=d(s(r),2);M(S,21,()=>t(b),N,(L,y)=>{var i=$e();i.__click=()=>pe(t(y));var F=s(i,!0);a(i),m(()=>h(F,new URL(t(y)).hostname)),n(L,i)}),a(S),a(r),n(e,r)};u(V,e=>{t(b).length>0&&e(he)})}var ke=d(V,2);{var ge=e=>{var r=at(),S=d(s(r),2);M(S,21,()=>t(O),N,(L,y)=>{var i=tt();i.__click=()=>ue(t(y));var F=s(i,!0);a(i),m(()=>{i.disabled=t(_),h(F,t(y))}),n(L,i)}),a(S),a(r),n(e,r)};u(ke,e=>{t(O).length>0&&e(ge)})}a(J);var W=d(J,2),be=s(W);{var Se=e=>{Ze(e,{text:"è·å– RSS å†…å®¹ä¸­...",size:"lg"})},ye=e=>{var r=oe(),S=ne(r);{var L=i=>{Be(i,{get message(){return t(k)},retry:z})},y=i=>{var F=oe(),Re=ne(F);{var Fe=w=>{var K=dt(),Q=s(K),X=s(Q);{var Ee=x=>{var o=st(),D=s(o,!0);a(o),m(()=>h(D,t(f).meta.title)),n(x,o)};u(X,x=>{t(f).meta.title&&x(Ee)})}var Y=d(X,2);{var Le=x=>{var o=rt(),D=s(o,!0);a(o),m(()=>h(D,t(f).meta.description)),n(x,o)};u(Y,x=>{t(f).meta.description&&x(Le)})}var Z=d(Y,2),De=s(Z);a(Z),a(Q);var $=d(Q,2);M($,21,()=>t(f).items,N,(x,o,D)=>{var I=ct();He(I,`animation-delay: ${D*.03}s`);var j=s(I),q=s(j),Te=s(q,!0);a(q),a(j);var ee=d(j,2);{var Ue=v=>{var c=lt(),R=s(c);Pe(R,()=>t(o).description),a(c),n(v,c)};u(ee,v=>{t(o).description&&v(Ue)})}var te=d(ee,2),ae=s(te);{var Ie=v=>{var c=ot(),R=s(c,!0);a(c),m(()=>h(R,t(o).author)),n(v,c)};u(ae,v=>{t(o).author&&v(Ie)})}var se=d(ae,2);{var Me=v=>{var c=nt(),R=s(c,!0);a(c),m(A=>h(R,A),[()=>fe(t(o).published)]),n(v,c)};u(se,v=>{t(o).published&&v(Me)})}var Ne=d(se,2);{var Oe=v=>{var c=vt();M(c,21,()=>t(o).categories.slice(0,3),N,(R,A)=>{var B=it(),ze=s(B,!0);a(B),m(()=>h(ze,t(A))),n(R,B)}),a(c),n(v,c)};u(Ne,v=>{t(o).categories.length>0&&v(Oe)})}a(te),a(I),m(()=>{Ye(q,"href",t(o).link),h(Te,t(o).title)}),n(x,I)}),a($),a(K),m(()=>h(De,`${t(f).items.length??""} æ¡å†…å®¹`)),n(w,K)},we=w=>{Ve(w,{icon:"rss",title:"è¾“å…¥ RSS é“¾æ¥",description:"åœ¨ä¸Šæ–¹è¾“å…¥æ¡†ä¸­ç²˜è´´ RSS Feed çš„ URL"})};u(Re,w=>{t(f)?w(Fe):w(we,!1)},!0)}n(i,F)};u(S,i=>{t(k)?i(L):i(y,!1)},!0)}n(e,r)};u(be,e=>{t(_)?e(Se):e(ye,!1)})}a(W),a(C),m(e=>{U.disabled=t(_),G.disabled=e},[()=>t(_)||!t(g).trim()]),Ge("submit",T,de),Ae(U,()=>t(g),e=>l(g,e)),n(ie,C),Qe()}Ce(["click"]);export{yt as component};
