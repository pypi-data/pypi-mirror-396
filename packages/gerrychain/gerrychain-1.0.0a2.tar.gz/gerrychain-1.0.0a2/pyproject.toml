[build-system]
requires = ["setuptools>=80.0"]
build-backend = "setuptools.build_meta"


[tool.setuptools]
packages = { find = { include = ["gerrychain*"], exclude = ["tests*"] } }

[project]
name = "gerrychain"
version = "1.0.0a2"
description = "GerryChain is a Python library for building ensembles of districting plans using Markov Chain Monte Carlo methods."
readme = "README.rst"
authors = [
  { name = "MGGG Redistricting Lab", email = "code@mggg.org" },
]
requires-python = ">=3.11"
license = { text = "MIT" } 


dependencies = [
    "geopandas>=1.1.1",
    "networkx>=3.6.1",
    "numpy>=2.3.5",
    "pandas>=2.3.3",
    "rustworkx>=0.17.1",
    "scipy>=1.16.3",
    "shapely>=2.1.2",
    "tqdm>=4.67.1",
]

[tool.ruff]
line-length = 100
extend-exclude = [
  "tests",
  "**/__init__.py",
  "gerrychain/vendor"
]

[tool.ruff.lint]
select = ["E", "W", "F"]
ignore = [
    "E501",  # line length handled by black
    "E203",  # whitespace before ':', handled by black
    "E731",  # do not assign lambda expression
]
task-tags = ["TODO", "FIXME", "XXX", "HACK", "NOTE"]

[tool.ruff.lint.pycodestyle]
ignore-overlong-task-comments = true

[dependency-groups]
dev = [
  # Linters, formatters, type checkers
  "black>=25.1.0",
  "isort>=6.0.1",
  "autopep8>=2.3.2",
  "myst-parser>=4.0.1",

  # Iteractive kernel
  "ipykernel>=6.30.1",
  "ipywidgets>=8.1.7",

  # Testing
  "pytest>=8.4.2",
  "pytest-cov>=6.3.0",

  # Other 
  "pre-commit>=4.3.0",
]
docs = [
  "myst-parser>=4.0.1",
  "recommonmark>=0.7.1",
  "sphinx>=8.2.3",
  "sphinx-copybutton>=0.5.2",
  "sphinx-rtd-theme>=3.0.2",
]
frm = [
    "matplotlib>=3.10.7",
]



[[tool.uv.index]]
name = "testpypi"
url = "https://test.pypi.org/simple/"
publish-url = "https://test.pypi.org/legacy/"
explicit = true
