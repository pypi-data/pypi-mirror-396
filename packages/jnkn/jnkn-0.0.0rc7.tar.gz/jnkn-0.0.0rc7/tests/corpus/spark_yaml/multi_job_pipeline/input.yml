# Multi-job pipeline configuration
jobs:
  - job_name: ingest_raw_events
    schedule: "*/15 * * * *"
    entry_point: jobs/ingest_events.py
    outputs:
      - staging.raw_events
    environment:
      KAFKA_BOOTSTRAP_SERVERS: ${KAFKA_SERVERS}

  - job_name: process_events
    schedule: "0 * * * *"
    entry_point: jobs/process_events.py
    depends_on:
      - ingest_raw_events
    inputs:
      - staging.raw_events
    outputs:
      - warehouse.fact_events

  - job_name: build_aggregates
    schedule: "0 6 * * *"
    entry_point: jobs/aggregates.py
    depends_on:
      - process_events
    inputs:
      - warehouse.fact_events
      - warehouse.dim_users
    outputs:
      - warehouse.daily_aggregates
      - reporting.executive_summary
