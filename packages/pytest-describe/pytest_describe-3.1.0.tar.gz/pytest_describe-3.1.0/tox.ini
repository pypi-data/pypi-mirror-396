[tox]
envlist = py{39,py39}-pytest{60,61,62,70,71,72,73,74,80,81,82,83,84,-latest},py{310,py310}-pytest{70,71,72,73,74,80,81,82,83,84,90,-latest},py{311,py311}-pytest{73,74,80,81,82,83,84,90,-latest},py312-pytest{74,80,81,82,83,84,90,-latest},py{313,314}-pytest{84,90,-latest},lint,coverage

[testenv]
package = editable
basepython =
    py39: python3.9
    py310: python3.10
    py311: python3.11
    py312: python3.12
    py313: python3.13
    py314: python3.14
    pypy39: pypy3.9
    pypy310: pypy3.10
    pypy311: pypy3.11
deps =
    pytest60: pytest>=6.0,<6.1
    pytest61: pytest>=6.1,<6.2
    pytest62: pytest>=6.2,<6.3
    pytest70: pytest>=7.0,<7.1
    pytest71: pytest>=7.1,<7.2
    pytest72: pytest>=7.2,<7.3
    pytest73: pytest>=7.3,<7.4
    pytest74: pytest>=7.4,<7.5
    pytest80: pytest>=8.0,<8.1
    pytest81: pytest>=8.1,<8.2
    pytest82: pytest>=8.2,<8.3
    pytest83: pytest>=8.3,<8.4
    pytest84: pytest>=8.4,<8.5
    pytest90: pytest>=9.0,<9.1
    pytest-latest: pytest
    pytest-main: git+https://github.com/pytest-dev/pytest.git@main
commands = pytest test {posargs}

[testenv:lint]
basepython = python3.14
package = skip
deps =
    ruff>=0.14,<0.15
commands =
    ruff check src test
    ruff format --check src test

[testenv:format]
basepython = python3.14
package = skip
deps =
    ruff>=0.14,<0.15
commands =
    ruff format src test

[testenv:coverage]
basepython = python3.14
deps =
    coverage
    pytest
commands =
    coverage run -m pytest test {posargs}
    coverage report
