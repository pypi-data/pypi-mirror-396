Metadata-Version: 2.4
Name: better-tinker
Version: 0.2.1
Summary: Tinker CLI wrapper and bridge
Requires-Python: >=3.11
Requires-Dist: fastapi>=0.104.0
Requires-Dist: pydantic>=2.0.0
Requires-Dist: tinker
Requires-Dist: uvicorn[standard]>=0.24.0
Description-Content-Type: text/markdown

# Better Tinker

A beautiful terminal interface for the Tinker API, built with [Bubble Tea](https://github.com/charmbracelet/bubbletea).

![Go](https://img.shields.io/badge/Go-1.21+-00ADD8?style=flat&logo=go)
![Python](https://img.shields.io/badge/Python-3.11+-3776AB?style=flat&logo=python)
![License](https://img.shields.io/badge/License-MIT-blue.svg)

## Features

- ğŸš€ **Training Runs** - View and manage your training runs with expandable tree view
- ğŸ’¾ **Checkpoints** - Browse, publish/unpublish, and delete model checkpoints  
- ğŸ“Š **Usage Statistics** - View your API usage and quotas
- âš™ï¸ **Settings** - Configure API key with secure storage (OS keyring)
- âœ¨ **Interactive UI** - Beautiful dark theme with keyboard navigation
- ğŸ” **Secure Credential Storage** - API keys stored in Windows Credential Manager / macOS Keychain / Linux Secret Service

## Quick Start

### Option 1: Using uv/uvx (Recommended)

```bash
# Install uv if you don't have it
# macOS/Linux
curl -LsSf https://astral.sh/uv/install.sh | sh

# Windows (PowerShell)
powershell -ExecutionPolicy ByPass -c "irm https://astral.sh/uv/install.ps1 | iex"

# Run directly (downloads and runs in isolated environment)
uvx better-tinker
```

### Option 2: Using pip

```bash
pip install better-tinker
better-tinker
```

## Architecture

This CLI uses a **Python bridge server** to communicate with the Tinker API. The bridge is started automatically when you run `better-tinker`.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   Authorization Header   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     gRPC-Web    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Go CLI     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚  Python Bridge  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚ Tinker API  â”‚
â”‚ (Bubble Tea)â”‚   Bearer <api_key>       â”‚    (FastAPI)    â”‚                 â”‚             â”‚
â”‚             â”‚                          â”‚                 â”‚                 â”‚             â”‚
â”‚ Reads key   â”‚                          â”‚ Uses key from   â”‚                 â”‚             â”‚
â”‚ from keyringâ”‚                          â”‚ header (no      â”‚                 â”‚             â”‚
â”‚ (1 prompt)  â”‚                          â”‚ keyring access) â”‚                 â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Key Design Decision:** The Go CLI is the only component that accesses the system keyring. The API key is passed to the bridge via HTTP Authorization header, eliminating the double password prompt issue on macOS.

## Configuration

### Option 1: Use the Settings Menu (Recommended)

The easiest way to configure your API key is through the CLI itself:

1. Run `better-tinker`
2. Select **Settings** from the menu
3. Select **API Key** and enter your key
4. The key will be stored securely in your OS keyring:
   - **Windows**: Credential Manager
   - **macOS**: Keychain
   - **Linux**: Secret Service (GNOME Keyring, KWallet, etc.)

### Option 2: Environment Variable

Set your Tinker API key as an environment variable:

```bash
# Linux/macOS
export TINKER_API_KEY="your-api-key-here"

# Windows (PowerShell)
$env:TINKER_API_KEY="your-api-key-here"

# Windows (CMD)
set TINKER_API_KEY=your-api-key-here

# Then run
better-tinker
```

> **Note**: Environment variables take precedence over stored credentials.

### Persistent Environment Variable (Recommended for uvx)

If you use `uvx`, setting the environment variable in your shell config is the most reliable method:

**macOS/Linux (bash/zsh):**
```bash
echo 'export TINKER_API_KEY="your-api-key-here"' >> ~/.zshrc
source ~/.zshrc
```

**Windows (PowerShell profile):**
```powershell
# Add to your PowerShell profile
Add-Content $PROFILE 'setx TINKER_API_KEY "your-api-key-here"'
```

## Platform-Specific Notes

### macOS

- **Keychain Access**: The first time you run `better-tinker`, macOS may prompt for your password to allow keychain access. Click "Always Allow" to avoid future prompts.
- **Unsigned Binary Warning**: If macOS blocks the binary, go to System Preferences > Security & Privacy and click "Open Anyway"
- **Code Signing**: The binaries are ad-hoc signed to reduce Keychain prompts

### Windows

- **Credential Manager**: API keys are stored in Windows Credential Manager under `tinker-cli:api-key`
- **Firewall**: The bridge server runs on `127.0.0.1:8765`. Windows Firewall may ask to allow it (this is local-only traffic)

### Linux

- **Secret Service**: Requires a running secret service daemon (GNOME Keyring, KWallet, etc.)
- **Headless Servers**: On servers without a desktop environment, use the `TINKER_API_KEY` environment variable instead

## Keyboard Controls

| Key | Action |
|-----|--------|
| `â†‘/k` | Move up |
| `â†“/j` | Move down |
| `Enter` | Select / Confirm / Edit |
| `Space` | Expand/collapse training run |
| `r` | Refresh data |
| `p` | Publish/Unpublish checkpoint |
| `d` | Delete checkpoint / Delete API key (in Settings) |
| `Esc` | Go back / Cancel editing |
| `q` | Quit |

## Environment Variables

| Variable | Description | Default |
|----------|-------------|---------|
| `TINKER_API_KEY` | Your Tinker API key | (from keyring) |
| `TINKER_BRIDGE_URL` | Custom bridge server URL | `http://127.0.0.1:8765` |
| `TINKER_BRIDGE_PORT` | Bridge server port | `8765` |
| `TINKER_BRIDGE_HOST` | Bridge server host | `127.0.0.1` |

## Troubleshooting

### "API key required" error

Set your API key using one of these methods:

1. **Via Settings menu** (recommended):
   ```bash
   better-tinker
   # Navigate to Settings > API Key
   ```

2. **Via environment variable**:
   ```bash
   export TINKER_API_KEY="your-api-key-here"
   better-tinker
   ```

### "Tinker SDK not installed" error

This usually means the Python environment is missing dependencies. Try:

```bash
# Reinstall with fresh environment
uvx --refresh better-tinker

# Or with pip
pip install --upgrade better-tinker tinker
```

### "Bridge server not running" error

The bridge should start automatically. If it fails:

1. Check if port 8765 is already in use
2. Try manually starting the bridge:
   ```bash
   python -m better_tinker.bridge.server
   ```

### Double password prompt on macOS

This issue has been fixed in v0.2.0+. If you still experience it:

1. Update to the latest version: `uvx --refresh better-tinker`
2. Use environment variable instead of keyring:
   ```bash
   export TINKER_API_KEY="your-key"
   uvx better-tinker
   ```

### API Documentation

When the bridge server is running, you can access the interactive API documentation at:
- Swagger UI: http://127.0.0.1:8765/docs
- ReDoc: http://127.0.0.1:8765/redoc

## Development

### Build from source

```bash
git clone https://github.com/mohadese/better-tinker.git
cd better-tinker

# Build Go binaries for all platforms
python build_binaries.py

# Install in development mode
pip install -e .

# Run
better-tinker
```

### Project Structure

```
better-tinker/
â”œâ”€â”€ main.go                 # Go CLI entry point
â”œâ”€â”€ better_tinker/
â”‚   â”œâ”€â”€ wrapper.py          # Python wrapper (starts bridge + Go CLI)
â”‚   â”œâ”€â”€ bin/                # Pre-built Go binaries
â”‚   â”‚   â”œâ”€â”€ tinker-cli-windows.exe
â”‚   â”‚   â”œâ”€â”€ tinker-cli-linux
â”‚   â”‚   â”œâ”€â”€ tinker-cli-darwin
â”‚   â”‚   â””â”€â”€ tinker-cli-darwin-arm64
â”‚   â””â”€â”€ bridge/
â”‚       â””â”€â”€ server.py       # FastAPI bridge server
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ client.go       # REST API client (calls bridge)
â”‚   â”‚   â””â”€â”€ types.go        # API response types
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ keyring.go      # Secure credential storage
â”‚   â””â”€â”€ ui/
â”‚       â”œâ”€â”€ app.go          # Bubble Tea app model
â”‚       â”œâ”€â”€ styles.go       # Lip Gloss styles
â”‚       â””â”€â”€ views/          # UI views
â”œâ”€â”€ build_binaries.py       # Cross-compilation script
â”œâ”€â”€ pyproject.toml          # Python package config
â””â”€â”€ go.mod                  # Go module config
```

## Tech Stack

### Go CLI
- **TUI Framework**: [Bubble Tea](https://github.com/charmbracelet/bubbletea)
- **Components**: [Bubbles](https://github.com/charmbracelet/bubbles)
- **Styling**: [Lip Gloss](https://github.com/charmbracelet/lipgloss)
- **Credential Storage**: [go-keyring](https://github.com/zalando/go-keyring)

### Python Bridge
- **Web Framework**: [FastAPI](https://fastapi.tiangolo.com/)
- **ASGI Server**: [Uvicorn](https://www.uvicorn.org/)
- **Tinker SDK**: Official Python SDK for Tinker API

## License

MIT License - see [LICENSE](LICENSE) for details.

## Contributing

Contributions are welcome! Please feel free to submit a Pull Request.
