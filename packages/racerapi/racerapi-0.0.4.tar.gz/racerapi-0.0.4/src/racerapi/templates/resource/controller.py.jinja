from racerapi.core.decorators import Controller, Get, Post, Put, Delete
from .service import {{ class_name }}Service
from .schema import (
    {{ class_name }}Create,
    {{ class_name }}Update,
    {{ class_name }}Out,
)


@Controller("{{ class_name | lower }}")
class {{ class_name }}Controller:
    """
    {{ class_name }} HTTP Controller
    Handles transport-level concerns only.
    """

    def __init__(self):
        self.service = {{ class_name }}Service()

    # ----------------------------
    # LIST
    # GET /{{ class_name | lower }}
    # ----------------------------
    @Get("/")
    async def list(self) -> list[{{ class_name }}Out]:
        return await self.service.list()

    # ----------------------------
    # GET BY ID
    # GET /{{ class_name | lower }}/{{ '{id}' }}
    # ----------------------------
    @Get("/{id}")
    async def get(self, id: int) -> {{ class_name }}Out:
        return await self.service.get(id)

    # ----------------------------
    # CREATE
    # POST /{{ class_name | lower }}
    # ----------------------------
    @Post("/")
    async def create(self, payload: {{ class_name }}Create) -> {{ class_name }}Out:
        return await self.service.create(payload)

    # ----------------------------
    # UPDATE
    # PUT /{{ class_name | lower }}/{{ '{id}' }}
    # ----------------------------
    @Put("/{id}")
    async def update(
        self,
        id: int,
        payload: {{ class_name }}Update,
    ) -> {{ class_name }}Out:
        return await self.service.update(id, payload)

    # ----------------------------
    # DELETE
    # DELETE /{{ class_name | lower }}/{{ '{id}' }}
    # ----------------------------
    @Delete("/{id}")
    async def delete(self, id: int) -> None:
        await self.service.delete(id)
