function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./BuilderTemplateEditor-CTxYZzR0.js","./index-SYnWB7Y3.js","./index-UYkbVuMb.css","./WdsDropdownMenu-BDZ_O9Du.js","./WdsCheckbox-liKUs9JY.js","./WdsCheckbox-DKvpPA4D.css","./WdsDropdownMenu-CzzPN9Wg.css","./WdsTabs-BZUJ0In-.js","./WdsTabs-DKj7BqI0.css","./useKeyValueEditor-CPejCROR.js","./useKeyValueEditor-CsemOh8D.css","./BuilderTemplateEditor-CYSDeWgV.css","./BuilderEmbeddedCodeEditor-CE5dMdkR.js","./BuilderEmbeddedCodeEditor-B0bcjlhk.css","./BuilderGraphSelect-C7sx5G5a.js","./useListResources-D1uHNTZ4.js","./BuilderGraphSelect-D7B61d5s.css","./BuilderApplicationSelect-DLh5qcaQ.js","./BuilderApplicationSelect-XaM1D5fv.css","./BuilderModelSelect-C52uJh0M.js","./BuilderModelSelect-Dc4IPLp2.css","./BuilderSettingsArtifactAPITriggerDetails-CwzzyX5Z.js","./BuilderSettingsArtifactAPITriggerDetails-DnX66iRg.css","./BuilderSettingsHandlers-bTwAqQqh.js","./BuilderApp-BgtIE8iY.js","./marked.esm-273vDTCT.js","./BuilderApp-WimUfNZr.css","./useBlueprintRun-C2fVpPvJ.js","./BuilderSettingsHandlers-DJPeASfz.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{c as I,aV as Be,R as v,$ as Le,aW as et,C as tt,d as W,i as R,a as P,r as N,aX as Ne,o as i,b as F,au as nt,z as M,x as E,W as H,aq as oe,y as z,ax as Ce,an as ue,ap as we,aJ as q,at as re,f as w,D as j,g as B,S as x,E as Z,_ as K,ao as X,Q,m as U,q as ie,G as ve,aY as ze,K as Je,s as ce,a6 as ot,aR as lt,w as me,aZ as at,a8 as Ge,a_ as it,L as le,a$ as st,b0 as rt,aC as J,b1 as ye,Z as ut,b2 as Se,a7 as fe,A as ae,a3 as Oe,t as Y,l as Ee,aw as ee,v as be,b3 as Te,b4 as dt,X as ct,a1 as We,b5 as Fe,b6 as D,b7 as pt,b8 as vt,b9 as mt,ba as ft,aI as Ye,F as G,J as yt,a4 as He,u as Me,bb as Xe,bc as Ve,aN as pe,aU as gt,bd as _t,be as ht,bf as bt,a2 as kt}from"./index-SYnWB7Y3.js";import{W as Ie,a as St}from"./WdsDropdownMenu-BDZ_O9Du.js";import{W as se}from"./WdsTabs-BZUJ0In-.js";import{W as te,u as It}from"./useKeyValueEditor-CPejCROR.js";import{W as qe}from"./WdsCheckbox-liKUs9JY.js";function*Bt(t,r){const l=new Set;function*c(s){var o;if(l.has(s))return;l.add(s);const a=t.getComponentById(s);if(a)for(const g of t.getComponentsNested(a.parentId))(o=g.outs)!=null&&o.some(f=>f.toNodeId===s)&&(yield g,yield*c(g.id))}yield*c(r)}function Ct(t,r=void 0,l=Le()){const c=I(()=>new Set(Be(t.userStateInitial.value))),s=I(()=>{try{return xt(t,c.value)}catch(g){return l.error("Cannot compute blueprintsSetStates",g),{}}}),a=I(()=>{try{return Et(t,c.value)}catch(g){return l.error("Cannot compute bindings",g),{}}}),o=I(()=>{try{return wt(t,v(r))}catch(g){return l.error("Cannot compute blueprintsResults",g),{}}});return{blueprintsSetStates:s,bindings:a,blueprintsResults:o}}function wt(t,r,l=new Set){var s;const c={};for(const a of Bt(t,r)){const o=a.type,g=t.getComponentDefinition(a.type);if(!g||!(a.type&&!et.has(o)&&a.type.startsWith("blueprints_")&&((s=g==null?void 0:g.outs)==null?void 0:s.success)!==void 0))continue;const p=`results.${a.id}`;p&&!l.has(p)&&(c[p]??(c[p]={components:[]}),c[p].components.push(a))}return c}function Et(t,r=new Set){var c;const l={};for(const s of tt)for(const a of t.getComponentsNested(s)){const o=(c=a.binding)==null?void 0:c.stateRef;o&&!r.has(o)&&(l[o]??(l[o]={components:[]}),l[o].components.push(a))}return l}function xt(t,r=new Set){var s;function*l(){for(const a of t.getComponentsNested("blueprints_root"))a.type==="blueprints_setstate"&&a.content&&(yield a)}const c={};for(const a of l()){const o=(s=a.content)==null?void 0:s.element;!o||typeof o!="string"||r.has(o)||(c[o]??(c[o]={components:[]}),c[o].components.push(a))}return c}const xe=W({__name:"BuilderStateSelectorDropdownComponent",props:{componentId:{type:String,required:!0},path:{type:String,required:!0},selected:{type:Boolean,required:!1}},setup(t){const r=t,l=R(P.core),c=R(P.builderManager),s=N(!1),a=I(()=>l.getComponentById(r.componentId)),{name:o,possibleImageUrls:g,previewText:f}=Ne(l,a),p=I(()=>({icon:g.value,label:r.path,detail:f.value||o.value,value:r.path})),{goToComponentParentPage:S}=Ce(l,c);async function b(){await S(r.componentId),c.setSelection(r.componentId)}return(u,m)=>(i(),F(Ie,{class:"BuilderStateSelectorDropdownItemComponent",option:p.value,selected:t.selected,"show-custom-action":"",onMousemove:m[1]||(m[1]=y=>s.value=!0),onMouseout:m[2]||(m[2]=y=>s.value=!1)},nt({_:2},[s.value?{name:"action",fn:M(()=>[E(H,{variant:"neutral",size:"smallIcon","data-writer-tooltip":"Jump to this block",onClick:oe(b,["prevent"]),onMousemove:m[0]||(m[0]=y=>s.value=!0)},{default:M(()=>[E(z,{name:"square-dashed-mouse-pointer"})]),_:1})]),key:"0"}:void 0]),1032,["option","selected"]))}}),$t={class:"BuilderStateSelectorDropdown"},Tt={key:1,class:"BuilderStateSelectorDropdown__empty"},Ft={key:2,class:"BuilderStateSelectorDropdown__section"},Vt={key:3,class:"BuilderStateSelectorDropdown__section"},Ot={key:4,class:"BuilderStateSelectorDropdown__section"},Mt={key:5,class:"BuilderStateSelectorDropdown__section"},qt={key:6,class:"BuilderStateSelectorDropdown__section"},At=W({__name:"BuilderStateSelectorDropdown",props:ue({componentId:{type:String,required:!1,default:void 0},query:{type:String,required:!1,default:""},allowCreate:{type:Boolean,required:!1},hideSecrets:{type:Boolean,required:!1},hideBlueprintResults:{type:Boolean,required:!1}},{modelValue:{type:String},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const r=t,l=R(P.core),c=R(P.secretsManager),s=we(t,"modelValue"),a=Ct(l,q(r,"componentId")),o=I(()=>{const y=[];for(const _ of Be(l.userStateInitial.value))r.query&&!_.includes(r.query)||y.push({value:_,label:_,icon:"code",iconBgColor:re.Green2});return y.sort((_,C)=>_.label.localeCompare(C.label))}),g=I(()=>{if(r.hideSecrets)return[];const y=[];for(const _ of Be(c.secrets.value)){const C=`vault.${_}`;r.query&&!C.includes(r.query)||y.push({value:`vault.${_}`,label:_,icon:"key-round",iconBgColor:re.Yellow2})}return y.sort((_,C)=>_.label.localeCompare(C.label))}),f=I(()=>b(a.bindings.value)),p=I(()=>b(a.blueprintsSetStates.value)),S=I(()=>r.hideBlueprintResults?[]:b(a.blueprintsResults.value));function b(y){return Object.entries(y).map(([_,{components:C}])=>{for(const O of C)if(O.id!==r.componentId)return{componentId:O.id,path:_}}).filter(_=>!(!_||r.query&&!_.path.includes(r.query)))}const u=I(()=>!r.allowCreate||!r.query||r.query.endsWith(".")?!1:!(o.value.some(_=>_.value===r.query)||g.value.some(_=>_.value===r.query)||S.value.some(_=>_.path===r.query)||f.value.some(_=>_.path===r.query))),m=I(()=>!!(o.value.length||p.value.length||f.value.length||S.value.length||g.value.length));return(y,_)=>(i(),w("div",$t,[u.value?(i(),w(j,{key:0},[_[1]||(_[1]=B("p",{class:"BuilderStateSelectorDropdown__section__title"}," Add new variable ",-1)),E(Ie,{option:{value:t.query,label:t.query,icon:"plus",iconBgColor:v(re).Blue4,iconColor:v(re).White},onClick:_[0]||(_[0]=oe(C=>s.value=t.query,["stop"]))},null,8,["option"])],64)):m.value?x("",!0):(i(),w("div",Tt," No result ")),p.value.length?(i(),w("div",Ft,[_[2]||(_[2]=B("p",{class:"BuilderStateSelectorDropdown__section__title"}," Set states ",-1)),(i(!0),w(j,null,Z(p.value,C=>(i(),F(xe,{key:C.path,path:C.path,"component-id":C.componentId,selected:C.path===s.value,onClick:oe(O=>s.value=C.path,["stop"])},null,8,["path","component-id","selected","onClick"]))),128))])):x("",!0),f.value.length?(i(),w("div",Vt,[_[3]||(_[3]=B("p",{class:"BuilderStateSelectorDropdown__section__title"}," Interface variables ",-1)),(i(!0),w(j,null,Z(f.value,C=>(i(),F(xe,{key:C.path,path:C.path,"component-id":C.componentId,selected:C.path===s.value,onClick:oe(O=>s.value=C.path,["stop"])},null,8,["path","component-id","selected","onClick"]))),128))])):x("",!0),!t.hideBlueprintResults&&S.value.length?(i(),w("div",Ot,[_[4]||(_[4]=B("p",{class:"BuilderStateSelectorDropdown__section__title"}," block results ",-1)),(i(!0),w(j,null,Z(S.value,C=>(i(),F(xe,{key:C.path,path:C.path,"component-id":C.componentId,selected:C.path===s.value,onClick:oe(O=>s.value=C.path,["stop"])},null,8,["path","component-id","selected","onClick"]))),128))])):x("",!0),!t.hideSecrets&&g.value.length?(i(),w("div",Mt,[_[5]||(_[5]=B("p",{class:"BuilderStateSelectorDropdown__section__title"},"Secrets",-1)),(i(!0),w(j,null,Z(g.value,C=>(i(),F(Ie,{key:C.value,option:C,selected:C.value===s.value,onClick:oe(O=>s.value=C.value,["stop"])},null,8,["option","selected","onClick"]))),128))])):x("",!0),o.value.length?(i(),w("div",qt,[_[6]||(_[6]=B("p",{class:"BuilderStateSelectorDropdown__section__title"}," main.py variables ",-1)),(i(!0),w(j,null,Z(o.value,C=>(i(),F(Ie,{key:C.value,option:C,selected:C.value===s.value,onClick:oe(O=>s.value=C.value,["stop"])},null,8,["option","selected","onClick"]))),128))])):x("",!0)]))}}),Dt=K(At,[["__scopeId","data-v-d28f7ad6"]]),Rt=W({__name:"BuilderTemplateInputTemplate",props:ue({leftIcon:{type:String,required:!1,default:void 0},rightIcon:{type:String,required:!1,default:void 0},invalid:{type:Boolean,required:!1},variant:{type:String,default:void 0},autofocus:{type:Boolean},multiline:{type:Boolean,required:!1}},{modelValue:{type:String},modelModifiers:{}}),emits:ue({rightIconClick:()=>!0,input:t=>!!t},["update:modelValue"]),setup(t,{expose:r,emit:l}){const c=X({loader:()=>Q(()=>import("./BuilderTemplateEditor-CTxYZzR0.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]),import.meta.url)}),s=we(t,"modelValue"),a=t,o=l;r({focus:u,getSelection:b,value:s,setSelectionEnd:S,setSelectionStart:p});const g=U("input");ie(()=>{a.autofocus&&u()});async function f(m){s.value=m,o("input",{target:{value:m}})}function p(m){var y;(y=g.value)==null||y.setSelectionStart(m)}function S(m){var y;(y=g.value)==null||y.setSelectionEnd(m)}function b(){var m;return(m=g.value)==null?void 0:m.getSelection()}function u(){var m;(m=g.value)==null||m.focus()}return(m,y)=>(i(),F(ze,{"left-icon":t.leftIcon,"right-icon":t.rightIcon,invalid:t.invalid,variant:t.variant,class:ve(["BuilderTemplateInputTemplate",{"BuilderTemplateInputTemplate--singleline":!t.multiline,"BuilderTemplateInputTemplate--multiline":t.multiline}]),onRightIconClick:y[0]||(y[0]=_=>m.$emit("rightIconClick")),onClick:u},{default:M(()=>[E(v(c),{ref_key:"input",ref:g,class:"BuilderTemplateInputTemplate__input",multiline:t.multiline,"model-value":s.value,"onUpdate:modelValue":f},null,8,["multiline","model-value"])]),_:1},8,["left-icon","right-icon","invalid","variant","class"]))}}),Pt=K(Rt,[["__scopeId","data-v-2789dd2e"]]),Wt={class:"BuilderTemplateInputState__content"},Ut=W({__name:"BuilderTemplateInputState",props:ue({rightIcon:{type:String,required:!1,default:void 0}},{modelValue:{type:String},modelModifiers:{}}),emits:ue({rightIconClick:()=>!0},["update:modelValue"]),setup(t,{expose:r}){r({focus:u,setSelectionStart:p,setSelectionEnd:S,getSelection:b});const l=R(P.core),c=U("input"),s=we(t,"modelValue"),a=N(!1),o=I(()=>!s.value&&!a.value),g=I(()=>new Set(Be(l.userStateInitial.value))),f=I(()=>({opacity:o.value?0:void 0,backgroundColor:g.value.has(s.value)?re.Green2:re.Gray1}));function p(m){c.value&&(c.value.selectionStart=m)}function S(m){c.value&&(c.value.selectionEnd=m)}function b(){var m,y;return{selectionStart:(m=c.value)==null?void 0:m.selectionStart,selectionEnd:(y=c.value)==null?void 0:y.selectionEnd}}function u(){var m;(m=c.value)==null||m.focus()}return(m,y)=>(i(),F(ze,{class:"BuilderTemplateInputState","left-icon":o.value?"at-sign":void 0,"right-icon":t.rightIcon,onRightIconClick:y[3]||(y[3]=_=>m.$emit("rightIconClick")),onClick:y[4]||(y[4]=_=>v(c).focus())},{default:M(()=>[B("div",Wt,[B("div",{class:"BuilderTemplateInputState__content__tag",style:Je(f.value)},[y[5]||(y[5]=B("span",null,"@",-1)),ce(B("input",{ref_key:"input",ref:c,"onUpdate:modelValue":y[0]||(y[0]=_=>s.value=_),type:"text",onFocus:y[1]||(y[1]=_=>a.value=!0),onBlur:y[2]||(y[2]=_=>a.value=!1)},null,544),[[ot,s.value]])],4)])]),_:1},8,["left-icon","right-icon"]))}}),Kt=K(Ut,[["__scopeId","data-v-f03927da"]]);function jt(t,r){const l=t.lastIndexOf("@");if(l!==-1){let c=l;const a=t.slice(l).indexOf("{");return a!==-1&&(c+=a+1),t.indexOf("}",c)!==-1?t.substring(0,l)+`@{${r}}`:t.slice(0,l)+`@{${r}}`}return t+`@{${r}}`}function Lt(t){const r=t.lastIndexOf("@");if(r===-1)return"";const l=t.slice(r);return l.includes("}")||l.includes(`
`)||!l.startsWith("@{")&&l.includes(" ")?"":l.replace(/^@{?/,"")}function Nt(t,r){return function(c){var f;if(!t.value)return;let s=0;if(c.key==="ArrowDown"?s=1:c.key==="ArrowUp"&&(s=-1),s===0)return;const a=Array.from(t.value.querySelectorAll("button")).filter(p=>!p.hasAttribute("disabled")&&p.offsetParent!==null);let o=s===1?a[0]:a.at(-1);const g=a.indexOf(document.activeElement);g!==-1&&(o=a[g+s]),o?(o.focus(),c.preventDefault()):(f=r==null?void 0:r.nextFocusNotFound)==null||f.call(r)}}const zt=W({__name:"BuilderTemplateInput",props:{inputId:{type:String,required:!1,default:void 0},componentId:{type:String,required:!1,default:void 0},value:{type:String,required:!1,default:void 0},multiline:{type:Boolean,required:!1},variant:{type:String,required:!1,default:void 0},type:{type:String,required:!1,default:"template"},options:{type:Object,required:!1,default:void 0},placeholder:{type:String,required:!1,default:void 0},error:{type:String,required:!1,default:void 0},autofocus:{type:Boolean},readonly:{type:Boolean}},emits:["input","update:value"],setup(t,{expose:r,emit:l}){const c=t,s=l,a=U("root"),o=U("input"),g=U("dropdown"),f=N(),{floatingStyles:p,update:S}=lt(a,g,{placement:"bottom-start",middleware:[st(),rt({apply({rects:e,elements:n}){Object.assign(n.floating.style,{minWidth:`${e.reference.width}px`,maxWidth:`${e.reference.width}px`})}})],strategy:"fixed"});b();function b(){let e;function n(){e&&e(),e=void 0}me(g,()=>{n(),g.value&&(e=at(o,g.value,S))}),Ge(()=>n())}r({focus:()=>{var e;return(e=o.value)==null?void 0:e.focus()}});const u=I(()=>c.options?Object.entries(c.options).reduce((e,[n,V])=>(n.includes(c.value)&&e.push({value:n,label:V}),e),[]):[]),m=Nt(g,{nextFocusNotFound:()=>{var e;f.value=void 0,(e=o.value)==null||e.focus()}});function y(){u.value.length>0&&(f.value="static")}const _=I(()=>{var k,T;if(c.type==="state")return c.value;let e=((k=o.value)==null?void 0:k.value)??"";if(!e)return"";const{selectionStart:n}=((T=o.value)==null?void 0:T.getSelection())??{},V=e.slice(0,n);return Lt(V)}),C=it(a);me(C,async()=>{C.value||(await le(),setTimeout(()=>{f.value=void 0},300))});async function O(e){var A,L;let n=((A=o.value)==null?void 0:A.value)??"";const{selectionStart:V,selectionEnd:k}=((L=o.value)==null?void 0:L.getSelection())??{};let T=V??n.length;if(c.type==="template"){const _e=n.slice(0,V),he=n.slice(k).replace(/^(\})+/,""),de=jt(_e,e);n=`${de}${he}`,T=de.length}else n=e,T=e.length;s("input",{target:{value:n}}),s("update:value",n),o.value&&(o.value.focus(),f.value=void 0,await le(),o.value.setSelectionStart(T))}async function $(e){s("input",{target:{value:e}}),s("update:value",e),o.value&&(o.value.focus(),f.value=void 0,await le(),o.value.setSelectionStart(e.length))}function h(e){d({target:{value:e}})}function d(e){var A;let n=String(e.target.value??"");if(s("input",e),s("update:value",n),c.type==="state"){f.value="template";return}if(u.value.some(L=>L.value.includes(n))){f.value="static";return}const{selectionStart:V}=((A=o.value)==null?void 0:A.getSelection())??{},k=n.slice(0,V),T=!!k.match(/@\{([^}{@]*)$/)||k.endsWith("@")||!!_.value;f.value=T?"template":void 0}return(e,n)=>(i(),w("div",{ref_key:"root",ref:a,class:"BuilderTemplateInput",onKeydown:n[2]||(n[2]=oe((...V)=>v(m)&&v(m)(...V),["stop"]))},[t.type==="template"?(i(),F(Pt,{key:0,ref_key:"input",ref:o,"model-value":c.value,placeholder:c.placeholder,list:c.options?`list-${c.inputId}`:void 0,invalid:t.error!==void 0,autofocus:t.autofocus,readonly:t.readonly,multiline:t.multiline,onInput:d,onClick:y},null,8,["model-value","placeholder","list","invalid","autofocus","readonly","multiline"])):x("",!0),t.type==="state"?(i(),F(Kt,{key:1,ref_key:"input",ref:o,"right-icon":f.value?"chevron-up":"chevron-down","model-value":c.value,onRightIconClick:n[0]||(n[0]=V=>f.value=f.value?void 0:"template"),"onUpdate:modelValue":h,onClick:n[1]||(n[1]=V=>v(o).focus())},null,8,["right-icon","model-value"])):x("",!0),f.value?(i(),w("div",{key:2,ref_key:"dropdown",ref:g,class:"BuilderTemplateInput__dropdown",style:Je(v(p))},[f.value==="template"?(i(),F(Dt,{key:0,"hide-secrets":t.type==="state","hide-blueprint-results":t.type==="state","allow-create":t.type==="state",query:_.value,"component-id":t.componentId,"onUpdate:modelValue":O},null,8,["hide-secrets","hide-blueprint-results","allow-create","query","component-id"])):u.value.length?(i(),F(St,{key:1,options:u.value,onSelect:$},null,8,["options"])):x("",!0)],4)):x("",!0)],544))}}),ne=K(zt,[["__scopeId","data-v-8594b4ef"]]),ge=Object.freeze([{label:"Default",value:"default"},{label:"CSS",value:"css"},{label:"Pick",value:"pick"}]),Jt=["data-automation-key"],Gt={key:0,class:"main"},Yt={key:0,class:"pickerContainer"},Ht=W({__name:"BuilderFieldsAlign",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},direction:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(t){const r=X({loader:()=>Q(()=>import("./index-SYnWB7Y3.js").then(h=>h.bw),__vite__mapDeps([1,2]),import.meta.url)}),l=U("rootEl"),c=U("pickerEl"),s=U("freehandInputEl"),a=[{key:"start",label:"Left",match:h=>h=="start",default:"start",icon:"align-left"},{key:"center",label:"Center",match:h=>h=="center",default:"center",icon:"align-center"},{key:"end",label:"Right",match:h=>h=="end",default:"end",icon:"align-right"}],o=[{key:"start",label:"Top",match:h=>h=="start",default:"start",icon:"arrow-up-to-line"},{key:"center",label:"Center",match:h=>h=="center",default:"center",icon:"fold-vertical"},{key:"end",label:"Bottom",match:h=>h=="end",default:"end",icon:"arrow-down-to-line"}],g={pick:c,css:s,default:null},f=t,p=J({componentId:q(f,"componentId"),fieldKey:q(f,"fieldKey")}),S=I(()=>f.direction=="vertical"?o:f.direction=="horizontal"?a:o),b=I(()=>S.value.map(h=>({value:h.key,label:h.label,icon:h.icon}))),u=I(()=>{const h=p.value;for(const d in S.value)if(h&&S.value[d].match(h))return S.value[d].key;return null}),y=N((()=>{if(!p.value)return"default";for(const h in S.value)if(S.value[h].match(p.value))return"pick";return"css"})()),_=()=>{var d;const h=(d=g[y.value])==null?void 0:d.value;h&&(h.focus(),typeof h.selectionStart=="number"&&(h.selectionStart=h.selectionEnd=h.value.length))},C=async h=>{y.value!=h&&(y.value=h,await le(),_(),h==="default"&&(p.value=""))},O=h=>{for(const d in S.value)S.value[d].key==h&&(p.value=S.value[d].default)},$=h=>{p.value=h.target.value};return ie(()=>{l.value.addEventListener("focus",_)}),ye(()=>{l.value.removeEventListener("focus",_)}),(h,d)=>(i(),w("div",{ref_key:"rootEl",ref:l,class:"BuilderFieldsAlign",tabindex:"-1","data-automation-key":f.fieldKey},[E(se,{tabs:v(ge),"model-value":y.value,"onUpdate:modelValue":C},null,8,["tabs","model-value"]),y.value=="pick"||y.value=="css"?(i(),w("div",Gt,[y.value=="pick"?(i(),w("div",Yt,[E(v(r),{ref_key:"pickerEl",ref:c,"model-value":u.value,options:b.value,"onUpdate:modelValue":O},null,8,["model-value","options"])])):x("",!0),y.value=="css"?(i(),F(ne,{key:1,ref_key:"freehandInputEl",ref:s,value:v(p),error:t.error,onInput:$},null,8,["value","error"])):x("",!0)])):x("",!0)],8,Jt))}}),Ue=K(Ht,[["__scopeId","data-v-6a36fb0b"]]),Xt=["data-automation-key"],Qt={key:0,class:"main"},Zt={key:0,class:"pickerContainer"},en=["value"],tn=W({__name:"BuilderFieldsColor",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(t){const r=U("rootEl"),l=U("pickerEl"),c=U("freehandInputEl"),s={pick:l,css:c,default:null},a=t,o=J({componentId:q(a,"componentId"),fieldKey:q(a,"fieldKey")}),f=N((()=>{const u=o.value;return u?/#[A-Fa-f0-9]{6}/.test(u)?"pick":"css":"default"})()),p=()=>{var m;const u=(m=s[f.value])==null?void 0:m.value;u&&(u.focus(),typeof u.selectionStart=="number"&&(u.selectionStart=u.selectionEnd=u.value.length))},S=async u=>{f.value!=u&&(f.value=u,await le(),p(),u==="default"&&(o.value=""))},b=u=>o.value=u.target.value;return ie(()=>{r.value.addEventListener("focus",p)}),ye(()=>{r.value.removeEventListener("focus",p)}),(u,m)=>(i(),w("div",{ref_key:"rootEl",ref:r,class:"BuilderFieldsColor",tabindex:"-1","data-automation-key":t.fieldKey},[E(se,{tabs:v(ge),"model-value":f.value,"onUpdate:modelValue":S},null,8,["tabs","model-value"]),f.value=="pick"||f.value=="css"?(i(),w("div",Qt,[f.value=="pick"?(i(),w("div",Zt,[B("input",{ref_key:"pickerEl",ref:l,type:"color",value:v(o),onInput:b},null,40,en)])):x("",!0),f.value=="css"?(i(),F(ne,{key:1,ref_key:"freehandInputEl",ref:c,value:v(o),error:t.error,onInput:b},null,8,["value","error"])):x("",!0)])):x("",!0)],8,Xt))}}),nn=K(tn,[["__scopeId","data-v-5432e5c5"]]);function $e(t){return typeof t=="string"&&t.startsWith("@{")&&t.endsWith("}")}function Qe({fieldViewModel:t}){const r=N($e(t.value)),l=N({binding:$e(t.value)?t.value:"",noneBinding:r.value?"":t.value});function c(){r.value?($e(t.value)&&(l.value.binding=t.value),t.value=l.value.noneBinding,r.value=!1):(l.value.noneBinding=t.value,t.value=l.value.binding,r.value=!0)}return{isBindingMode:ut(r),toggleBindingMode:c}}const on=["data-automation-key"],ln=W({__name:"BuilderFieldsText",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},fieldControl:{type:String,required:!1,default:Se.Text},defaultValue:{type:String,default:void 0},error:{type:String,required:!1,default:void 0},autofocus:{type:Boolean},type:{type:String,required:!1,default:"template"}},setup(t){const r=R(P.core),l=t,c=J({componentId:q(l,"componentId"),fieldKey:q(l,"fieldKey"),defaultValue:q(l,"defaultValue")}),s=I(()=>`${l.componentId}-${l.fieldKey}`),a={uiComponents:()=>{const u=r.getComponents(void 0,{sortedByPosition:!0}).filter(y=>r.isChildOf("root",y.id)),m={};return u.forEach(y=>{m[y.id]=y.id}),m},uiComponentsWithEvents:()=>r.getComponents(void 0,{sortedByPosition:!0}).filter(u=>r.isChildOf("root",u.id)).filter(u=>!!r.getComponentDefinition(u.type).events).reduce((u,m)=>(u[m.id]=m.id,u),{}),eventTypes:(u,m)=>{var $;const y=($=u.getComponentById(m).content)==null?void 0:$.refComponentId,_=r.getComponentById(y);if(!_)return{};const C=u.getComponentDefinition(_.type);return Object.fromEntries(Object.keys(C.events??{}).map(h=>[h,h]))}},o=I(()=>{const u=r.getComponentById(l.componentId),y=r.getComponentDefinition(u.type).fields[l.fieldKey];return y.options?typeof y.options=="function"?y.options(r,l.componentId):typeof y.options=="string"?a==null?void 0:a[y.options](r,l.componentId):y.options:{}}),g=I(()=>["state","state-template"].includes(l.type)?"state":"template"),f=I(()=>b(c.value)),p=u=>{c.value=S(u.target.value)};function S(u){return typeof u!="string"?"":l.type==="state-template"?`@{${u}}`:u}function b(u){return typeof u!="string"?"":l.type==="state-template"?u.replace(/^@{/,"").replace(/}$/,""):u}return(u,m)=>(i(),w("div",{class:"BuilderFieldsText","data-automation-key":l.fieldKey},[t.fieldControl==v(Se).Text?(i(),F(ne,{key:0,class:"content","component-id":t.componentId,"input-id":s.value,value:f.value,placeholder:t.defaultValue,type:g.value,options:o.value,error:t.error,autofocus:t.autofocus,onInput:p},null,8,["component-id","input-id","value","placeholder","type","options","error","autofocus"])):t.fieldControl==v(Se).Textarea?(i(),F(ne,{key:1,multiline:"",variant:"text",class:"content","input-id":s.value,"component-id":t.componentId,value:f.value,placeholder:t.defaultValue,type:g.value,error:t.error,autofocus:t.autofocus,onInput:p},null,8,["input-id","component-id","value","placeholder","type","error","autofocus"])):x("",!0)],8,on))}}),Ae=K(ln,[["__scopeId","data-v-aa053130"]]),an=["data-automation-key"],sn=W({__name:"BuilderFieldsCheckbox",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},label:{type:String,default:void 0},unit:{type:String,default:void 0},hint:{type:String,default:void 0},error:{type:String,default:void 0}},setup(t){const r=t,l=J({componentId:q(r,"componentId"),fieldKey:q(r,"fieldKey")}),{isBindingMode:c,toggleBindingMode:s}=Qe({fieldViewModel:l}),a=I({get:()=>l.value==="yes",set:o=>{l.value=o?"yes":"no"}});return(o,g)=>v(c)?(i(),F(te,{key:0,"is-binding-button-shown":"","is-binding-enabled":v(c),label:t.label,unit:t.unit,hint:t.hint,error:t.error,"data-automation-key":r.fieldKey,"onUpdate:isBindingEnabled":v(s)},{default:M(()=>[E(Ae,{type:"state-template","component-id":t.componentId,"field-key":t.fieldKey,error:t.error,"default-value":""},null,8,["component-id","field-key","error"])]),_:1},8,["is-binding-enabled","label","unit","hint","error","data-automation-key","onUpdate:isBindingEnabled"])):(i(),w("div",{key:1,class:"BuilderFieldsCheckbox","data-automation-key":r.fieldKey},[E(qe,{modelValue:a.value,"onUpdate:modelValue":g[0]||(g[0]=f=>a.value=f),label:t.label,detail:t.hint,invalid:!!t.error},null,8,["modelValue","label","detail","invalid"]),E(H,{size:"smallIcon",variant:"neutral","data-writer-tooltip-placement":"left","data-writer-tooltip":"Bind to a variable",onClick:v(s)},{default:M(()=>[E(z,{name:"at-sign"})]),_:1},8,["onClick"])],8,an))}}),rn=K(sn,[["__scopeId","data-v-d540f2ac"]]),un={key:1,class:"BuilderFieldsKeyValueModal__assistedEntries"},dn={key:0,class:"BuilderFieldsKeyValueModal__assistedEntries__form"},cn=W({__name:"BuilderFieldsKeyValueModal",props:{data:{type:String,required:!0}},emits:{submit:t=>typeof t=="string",close:()=>!0},setup(t,{emit:r}){const l=X({loader:()=>Q(()=>import("./BuilderEmbeddedCodeEditor-CE5dMdkR.js").then(O=>O.B),__vite__mapDeps([12,1,2,13]),import.meta.url)}),c=t,{mode:s,assistedEntries:a,freehandValue:o,isValid:g,currentValue:f,addAssistedEntry:p,updateAssistedEntryValue:S,updateAssistedEntryKey:b,removeAssistedEntry:u,getAssistedEntryError:m}=It(c.data),y=r,_=I(()=>[{desc:"Save",fn:()=>y("submit",f.value),disabled:c.data===f.value||!g.value}]),C=[{label:"List",value:"assisted"},{label:"JSON",value:"freehand"}];return(O,$)=>(i(),F(Oe,{title:"Category key values","display-close-button":"",actions:_.value,onClose:$[2]||($[2]=h=>O.$emit("close"))},{titleActions:M(()=>[E(se,{modelValue:v(s),"onUpdate:modelValue":$[0]||($[0]=h=>fe(s)?s.value=h:null),class:"BuilderFieldsKeyValueModal__tabs",tabs:C},null,8,["modelValue"])]),default:M(()=>[v(s)==="freehand"?(i(),F(v(l),{key:0,modelValue:v(o),"onUpdate:modelValue":$[1]||($[1]=h=>fe(o)?o.value=h:null),class:"BuilderFieldsKeyValueModal__freehand",variant:"minimal",language:"json"},null,8,["modelValue"])):x("",!0),v(s)==="assisted"?(i(),w("div",un,[v(s)==="assisted"?(i(),w("div",dn,[$[3]||($[3]=B("p",{class:"BuilderFieldsKeyValueModal__assistedEntries__form__labelKey"}," Key ",-1)),$[4]||($[4]=B("p",{class:"BuilderFieldsKeyValueModal__assistedEntries__form__labelValue"}," Value ",-1)),(i(!0),w(j,null,Z(v(a),(h,d)=>(i(),w(j,{key:d},[E(te,{error:v(m)(d)},{default:M(()=>[E(ne,{placeholder:"Type a key...",value:h.key,error:v(m)(d),"onUpdate:value":e=>v(b)(d,e)},null,8,["value","error","onUpdate:value"])]),_:2},1032,["error"]),E(te,null,{default:M(()=>[E(ne,{placeholder:"Type a value...",value:h.value,"onUpdate:value":e=>v(S)(d,e)},null,8,["value","onUpdate:value"])]),_:2},1024),B("div",null,[E(H,{variant:"neutral",size:"smallIcon",class:"BuilderFieldsKeyValueModal__assistedEntries__form__deleteBtn",onClick:e=>v(u)(d)},{default:M(()=>[E(z,{name:"trash-2"})]),_:2},1032,["onClick"])])],64))),128))])):x("",!0),E(H,{variant:"special",size:"small",onClick:v(p)},{default:M(()=>[E(z,{name:"plus"}),$[5]||($[5]=ae(" Add a pair "))]),_:1},8,["onClick"])])):x("",!0)]),_:1},8,["actions"]))}}),pn=K(cn,[["__scopeId","data-v-4e74be91"]]),vn=["data-automation-key"],mn={class:"BuilderFieldsKeyValue__toolbar"},fn={key:1,class:"BuilderFieldsKeyValue__listEmpty"},yn={key:2,class:"BuilderFieldsKeyValue__list"},gn=["data-writer-tooltip"],_n=["data-writer-tooltip"],hn=W({__name:"BuilderFieldsKeyValue",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},instancePath:{type:Array,required:!0},error:{type:String,required:!1,default:void 0}},setup(t){const r=t,l=J({componentId:q(r,"componentId"),fieldKey:q(r,"fieldKey")}),c=R(P.core),s=R(P.secretsManager),{getEvaluatedFields:a}=Ee(c,s),o=N(!1),g=I(()=>{var S;return((S=a(r.instancePath))==null?void 0:S[r.fieldKey].value)??{}}),f=I(()=>l.value||JSON.stringify(g.value));function p(S){o.value=!1,l.value=S}return(S,b)=>(i(),w("div",{class:"BuilderFieldsKeyValue",tabindex:"-1","data-automation-key":r.fieldKey},[B("div",mn,[E(H,{variant:"neutral",size:"smallIcon","data-automation-key":"openAssistedMode",onClick:b[0]||(b[0]=u=>o.value=!0)},{default:M(()=>[E(z,{name:"pencil"})]),_:1})]),o.value?(i(),F(pn,{key:0,data:f.value,onSubmit:p,onClose:b[1]||(b[1]=u=>o.value=!1)},null,8,["data"])):x("",!0),Object.keys(g.value).length===0?(i(),w("div",fn,[b[4]||(b[4]=B("p",null,"There are no key value categories defined",-1)),E(H,{variant:"special",size:"small",onClick:b[2]||(b[2]=u=>o.value=!0)},{default:M(()=>[E(z,{name:"pencil"}),b[3]||(b[3]=ae(" Edit "))]),_:1})])):(i(),w("ul",yn,[(i(!0),w(j,null,Z(g.value,(u,m)=>(i(),w("li",{key:m,class:"BuilderFieldsKeyValue__list__item"},[B("p",{class:"BuilderFieldsKeyValue__list__item__key","data-writer-tooltip":m,"data-writer-tooltip-strategy":"overflow"},Y(m),9,gn),B("p",{class:"BuilderFieldsKeyValue__list__item__value","data-writer-tooltip":u,"data-writer-tooltip-strategy":"overflow"},Y(u||"<empty value>"),9,_n)]))),128))]))],8,vn))}}),bn=K(hn,[["__scopeId","data-v-43bf3550"]]),kn=W({__name:"BuilderFieldsObject",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},defaultValue:{type:String,required:!1,default:void 0},error:{type:String,required:!1,default:void 0}},setup(t){const r=t,l=J({componentId:q(r,"componentId"),fieldKey:q(r,"fieldKey"),defaultValue:q(r,"defaultValue")}),c=s=>{l.value=s.target.value};return(s,a)=>(i(),F(ne,{class:"BuilderFieldsObject","data-automation-key":r.fieldKey,multiline:"",variant:"code",value:v(l),placeholder:t.defaultValue,error:t.error,onInput:c},null,8,["data-automation-key","value","placeholder","error"]))}}),Sn=K(kn,[["__scopeId","data-v-efbda4e8"]]),In=["data-automation-key"],Bn={key:0,class:"main"},Cn={key:0,class:"pickerContainer"},wn={class:"BuilderFieldsPadding__options"},En=W({__name:"BuilderFieldsPadding",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(t){const r=X({loader:()=>Q(()=>import("./index-SYnWB7Y3.js").then(e=>e.bw),__vite__mapDeps([1,2]),import.meta.url)}),l=U("rootEl"),c=U("pickerEl"),s=U("freehandInputEl"),a=U("fixedEl"),o=[{key:"all_sides",label:"All sides",match:e=>e.split(" ").length==1&&e.endsWith("px"),default:()=>m.value?m.value[0]:"0px"},{key:"XY sides",label:"XY sides",match:e=>e.split(" ").length==2&&e.endsWith("px"),default:()=>m.value?m.value[2]+" "+m.value[0]:"0px 0px"},{key:"Per side",label:"Per side",match:e=>e.split(" ").length==4&&e.endsWith("px"),default:()=>m.value?[m.value[3],m.value[1],m.value[2],m.value[0]].join(" "):"0px 0px 0px 0px"}],g={pick:c,css:s,default:null},f=t,p=J({componentId:q(f,"componentId"),fieldKey:q(f,"fieldKey")}),S=I(()=>o.map(e=>({value:e.key,label:e.label,icon:"panel-top-dashed"}))),b=I(()=>{const e=p.value;for(const n in o)if(e&&o[n].match(e))return o[n].key;return null}),u=I(()=>{const e=m.value;return e?[e[0].substring(0,e[0].length-2),e[1].substring(0,e[1].length-2),e[2].substring(0,e[2].length-2),e[3].substring(0,e[3].length-2)]:["0","0","0","0"]}),m=I(()=>{const e=p.value;if(e){const n=e.split(" ");if(n.length==1&&n[0].endsWith("px"))return[n[0],n[0],n[0],n[0]];if(n.length==2&&n[0].endsWith("px")&&n[0].endsWith("px"))return[n[1],n[1],n[0],n[0]];if(n.length==4&&n[0].endsWith("px")&&n[1].endsWith("px")&&n[2].endsWith("px")&&n[3].endsWith("px"))return[n[3],n[1],n[0],n[2]]}else return null;return null}),_=N((()=>{if(!p.value)return"default";for(const e in o)if(o[e].match(p.value))return"pick";return"css"})()),C=()=>{var n;const e=(n=g[_.value])==null?void 0:n.value;e&&(e.focus(),typeof e.selectionStart=="number"&&(e.selectionStart=e.selectionEnd=e.value.length))},O=async e=>{_.value!=e&&(_.value=e,await le(),C(),e==="default"&&(p.value=""))},$=e=>{for(const n in o)o[n].key==e&&(p.value=o[n].default());le(()=>{var n;(n=a.value)==null||n.focus()})},h=e=>{p.value=e.target.value},d=(e,n,V)=>{const k=Number(e),T=p.value;if(n=="all_sides")p.value=k+"px";else if(n=="XY sides"){const A=T.split(" ");V=="x"?A[1]=k+"px":V=="y"&&(A[0]=k+"px"),p.value=A.join(" ")}else if(n=="Per side"){const A=T.split(" ");V=="top"?A[0]=k+"px":V=="right"?A[1]=k+"px":V=="bottom"?A[2]=k+"px":V=="left"&&(A[3]=k+"px"),p.value=A.join(" ")}};return ie(()=>{l.value.addEventListener("focus",C)}),ye(()=>{l.value.removeEventListener("focus",C)}),(e,n)=>(i(),w("div",{ref_key:"rootEl",ref:l,class:"BuilderFieldsPadding",tabindex:"-1","data-automation-key":f.fieldKey},[E(se,{tabs:v(ge),"model-value":_.value,"onUpdate:modelValue":O},null,8,["tabs","model-value"]),_.value=="pick"||_.value=="css"?(i(),w("div",Bn,[_.value=="pick"?(i(),w("div",Cn,[E(v(r),{ref_key:"pickerEl",ref:c,"model-value":b.value,options:S.value,"onUpdate:modelValue":$},null,8,["model-value","options"]),B("div",wn,[b.value=="all_sides"?(i(),w(j,{key:0},[n[7]||(n[7]=B("i",null,"All",-1)),E(ee,{ref_key:"fixedEl",ref:a,type:"number","model-value":u.value[0],"onUpdate:modelValue":n[0]||(n[0]=V=>d(V,b.value))},null,8,["model-value"]),n[8]||(n[8]=B("div",null,"px",-1))],64)):x("",!0),b.value=="XY sides"?(i(),w(j,{key:1},[n[9]||(n[9]=B("i",null,"X",-1)),E(ee,{type:"number","model-value":u.value[0],"onUpdate:modelValue":n[1]||(n[1]=V=>d(V,b.value,"x"))},null,8,["model-value"]),n[10]||(n[10]=B("div",null,"px",-1)),n[11]||(n[11]=B("i",null,"Y",-1)),E(ee,{type:"number","model-value":u.value[2],"onUpdate:modelValue":n[2]||(n[2]=V=>d(V,b.value,"y"))},null,8,["model-value"]),n[12]||(n[12]=B("div",null,"px",-1))],64)):x("",!0),b.value=="Per side"?(i(),w(j,{key:2},[n[13]||(n[13]=B("i",null,"Left",-1)),E(ee,{type:"number","model-value":u.value[0],"onUpdate:modelValue":n[3]||(n[3]=V=>d(V,b.value,"left"))},null,8,["model-value"]),n[14]||(n[14]=B("div",null,"px",-1)),n[15]||(n[15]=B("i",null,"Right",-1)),E(ee,{type:"number","model-value":u.value[1],"onUpdate:modelValue":n[4]||(n[4]=V=>d(V,b.value,"right"))},null,8,["model-value"]),n[16]||(n[16]=B("div",null,"px",-1)),n[17]||(n[17]=B("i",null,"Top",-1)),E(ee,{type:"number","model-value":u.value[2],"onUpdate:modelValue":n[5]||(n[5]=V=>d(V,b.value,"top"))},null,8,["model-value"]),n[18]||(n[18]=B("div",null,"px",-1)),n[19]||(n[19]=B("i",null,"Bottom",-1)),E(ee,{type:"number","model-value":u.value[3],"onUpdate:modelValue":n[6]||(n[6]=V=>d(V,b.value,"bottom"))},null,8,["model-value"]),n[20]||(n[20]=B("div",null,"px",-1))],64)):x("",!0)])])):x("",!0),_.value=="css"?(i(),F(ne,{key:1,ref_key:"freehandInputEl",ref:s,value:v(p),error:t.error,onInput:h},null,8,["value","error"])):x("",!0)])):x("",!0)],8,In))}}),xn=K(En,[["__scopeId","data-v-e122e664"]]),$n=["data-automation-key"],Tn={key:0,class:"main"},Fn={key:0,class:"pickerContainer"},Vn={class:"param"},On={class:"header"},Mn=["value"],qn={class:"param"},An={class:"header"},Dn=["value"],Rn={class:"param"},Pn={class:"header"},Wn=["value"],Un={class:"param"},Kn={class:"header"},jn=["value"],Ln={class:"param"},Nn=["value"],zn=W({__name:"BuilderFieldsShadow",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(t){const r=U("rootEl"),l=U("freehandInputEl"),c=U("paramOffsetXEl"),s=U("paramOffsetYEl"),a=U("paramBlurRadiusEl"),o=U("paramSpreadRadiusEl"),g=U("paramColorEl"),f={pick:c,css:l,default:null},p=t,S=J({componentId:q(p,"componentId"),fieldKey:q(p,"fieldKey")}),b=/^(?<offsetX>[0-9]+)px (?<offsetY>[0-9]+)px (?<blurRadius>[0-9]+)px (?<spreadRadius>[0-9-]+)px (?<color>#[A-Fa-f0-9]{6})$/,m=N((()=>{const h=S.value;return h?b.test(h)?"pick":"css":"default"})()),y=()=>{var d;const h=(d=f[m.value])==null?void 0:d.value;h&&(h.focus(),typeof h.selectionStart=="number"&&(h.selectionStart=h.selectionEnd=h.value.length))},_=async h=>{m.value!=h&&(m.value=h,await le(),y(),h==="default"&&(S.value=""))},C=()=>{const h=c.value.value,d=s.value.value,e=a.value.value,n=o.value.value,V=g.value.value,k=`${h}px ${d}px ${e}px ${n}px ${V}`;S.value=k},O=h=>{S.value=h.target.value},$=I(()=>{const h=S.value.match(b);return(h==null?void 0:h.groups)??{}});return ie(()=>{r.value.addEventListener("focus",y)}),ye(()=>{r.value.removeEventListener("focus",y)}),(h,d)=>{var e,n,V,k,T,A,L,_e,he,de,De,Re,Pe;return i(),w("div",{ref_key:"rootEl",ref:r,class:"BuilderFieldsShadow",tabindex:"-1","data-automation-key":p.fieldKey},[E(se,{tabs:v(ge),"model-value":m.value,"onUpdate:modelValue":_},null,8,["tabs","model-value"]),m.value=="pick"||m.value=="css"?(i(),w("div",Tn,[m.value=="pick"?(i(),w("div",Fn,[B("div",Vn,[B("div",On,[d[0]||(d[0]=B("div",{class:"name"},"Offset X",-1)),ce(B("div",{class:"value"},Y((e=$.value)==null?void 0:e.offsetX)+"px ",513),[[be,(n=$.value)==null?void 0:n.offsetX]])]),B("input",{ref_key:"paramOffsetXEl",ref:c,type:"range",min:"0",max:"32",value:(V=$.value)==null?void 0:V.offsetX,onInput:C},null,40,Mn)]),B("div",qn,[B("div",An,[d[1]||(d[1]=B("div",{class:"name"},"Offset Y",-1)),ce(B("div",{class:"value"},Y((k=$.value)==null?void 0:k.offsetY)+"px ",513),[[be,(T=$.value)==null?void 0:T.offsetY]])]),B("input",{ref_key:"paramOffsetYEl",ref:s,type:"range",min:"0",max:"32",value:(A=$.value)==null?void 0:A.offsetY,onInput:C},null,40,Dn)]),B("div",Rn,[B("div",Pn,[d[2]||(d[2]=B("div",{class:"name"},"Blur radius",-1)),ce(B("div",{class:"value"},Y((L=$.value)==null?void 0:L.blurRadius)+"px ",513),[[be,(_e=$.value)==null?void 0:_e.blurRadius]])]),B("input",{ref_key:"paramBlurRadiusEl",ref:a,type:"range",min:"0",max:"32",value:(he=$.value)==null?void 0:he.blurRadius,onInput:C},null,40,Wn)]),B("div",Un,[B("div",Kn,[d[3]||(d[3]=B("div",{class:"name"},"Spread radius",-1)),ce(B("div",{class:"value"},Y((de=$.value)==null?void 0:de.spreadRadius)+"px ",513),[[be,(De=$.value)==null?void 0:De.spreadRadius]])]),B("input",{ref_key:"paramSpreadRadiusEl",ref:o,type:"range",min:"-16",max:"32",value:(Re=$.value)==null?void 0:Re.spreadRadius,onInput:C},null,40,jn)]),B("div",Ln,[d[4]||(d[4]=B("div",{class:"header"},[B("div",{class:"name"},"Color")],-1)),B("input",{ref_key:"paramColorEl",ref:g,type:"color",value:(Pe=$.value)==null?void 0:Pe.color,onInput:C},null,40,Nn)])])):x("",!0),m.value=="css"?(i(),F(ne,{key:1,ref_key:"freehandInputEl",ref:l,value:v(S),error:t.error,onInput:O},null,8,["value","error"])):x("",!0)])):x("",!0)],8,$n)}}}),Jn=K(zn,[["__scopeId","data-v-c59dcd63"]]),Gn=["data-automation-key"],Yn={key:0,class:"main"},Hn={key:0,class:"pickerContainer"},Xn={key:0,class:"fixedContainer"},Qn=W({__name:"BuilderFieldsWidth",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(t){const r=X({loader:()=>Q(()=>import("./index-SYnWB7Y3.js").then(d=>d.bw),__vite__mapDeps([1,2]),import.meta.url)}),l=U("rootEl"),c=U("pickerEl"),s=U("freehandInputEl"),a=U("fixedEl"),o=[{key:"fixed",label:"Fixed",match:d=>d.endsWith("px"),default:"160px"},{key:"fit-content",label:"Fit Content",match:d=>d=="fit-content",default:"fit-content"},{key:"full",label:"Full",match:d=>d=="100%",default:"100%"}],g={pick:c,css:s,default:null},f=t,p=J({componentId:q(f,"componentId"),fieldKey:q(f,"fieldKey")}),S=I(()=>o.map(d=>({value:d.key,label:d.label,icon:"move-horizontal"}))),b=I(()=>{const d=p.value;for(const e in o)if(d&&o[e].match(d))return o[e].key;return null}),u=I(()=>{const d=p.value;if(d){if(d.endsWith("px"))return d.substring(0,d.length-2)}else return null;return null}),y=N((()=>{if(!p.value)return"default";for(const d in o)if(o[d].match(p.value))return"pick";return"css"})()),_=()=>{var e;const d=(e=g[y.value])==null?void 0:e.value;d&&(d.focus(),typeof d.selectionStart=="number"&&(d.selectionStart=d.selectionEnd=d.value.length))},C=async d=>{y.value!=d&&(y.value=d,await le(),_(),d==="default"&&(p.value=""))},O=d=>{for(const e in o)if(o[e].key==d){const n=o[e].default;p.value=n}d=="fixed"&&le(()=>{a.value.focus()})},$=d=>{p.value=d.target.value},h=d=>{p.value=`${d}px`};return ie(()=>{l.value.addEventListener("focus",_)}),ye(()=>{l.value.removeEventListener("focus",_)}),(d,e)=>(i(),w("div",{ref_key:"rootEl",ref:l,class:"BuilderFieldsWidth",tabindex:"-1","data-automation-key":f.fieldKey},[E(se,{tabs:v(ge),"model-value":y.value,"onUpdate:modelValue":C},null,8,["tabs","model-value"]),y.value=="pick"||y.value=="css"?(i(),w("div",Yn,[y.value=="pick"?(i(),w("div",Hn,[E(v(r),{ref_key:"pickerEl",ref:c,"model-value":b.value,options:S.value,"onUpdate:modelValue":O},null,8,["model-value","options"]),b.value=="fixed"?(i(),w("div",Xn,[E(ee,{ref_key:"fixedEl",ref:a,type:"number","model-value":u.value,invalid:t.error!==void 0,"onUpdate:modelValue":h},null,8,["model-value","invalid"]),e[0]||(e[0]=B("div",null,"px",-1))])):x("",!0)])):x("",!0),y.value=="css"?(i(),F(ne,{key:1,ref_key:"freehandInputEl",ref:s,value:v(p),onInput:$},null,8,["value"])):x("",!0)])):x("",!0)],8,Gn))}}),Zn=K(Qn,[["__scopeId","data-v-55a31bea"]]),eo=["data-automation-key"],to={class:"tools"},no=["onClick"],oo={class:"toolName"},lo={class:"addToolForm"},ao=W({__name:"BuilderFieldsTools",props:{componentId:{},fieldKey:{}},setup(t){const r=X({loader:()=>Q(()=>import("./BuilderGraphSelect-C7sx5G5a.js"),__vite__mapDeps([14,1,2,15,16]),import.meta.url)}),l=X({loader:()=>Q(()=>import("./BuilderEmbeddedCodeEditor-CE5dMdkR.js").then(d=>d.B),__vite__mapDeps([12,1,2,13]),import.meta.url)}),s={isShown:!1,type:"function",name:"new_tool",code:`
{
	"description": "Gets info for an employee, given an employee id",
    "parameters": {
      "id": {"type": "string", "description": "Id of the employee"}
    }
}
`.trim(),graphIds:"",binding:!1,includeDomains:"",excludeDomains:"",includeRawContent:!1},a=N(s),o=I(()=>{switch(a.value.type){case"function":return!a.value.code;case"graph":return!a.value.graphIds;case"web_search":return!1;default:return!0}}),g=I({get:()=>a.value.graphIds.split(",").filter(d=>!d.startsWith("@{")),set(d){a.value={...a.value,graphIds:d.join(",")}}}),f=I({get:()=>{const d=Te.exec(a.value.graphIds);return(d==null?void 0:d[1])??""},set(d){a.value={...a.value,graphIds:`@{${d}}`}}}),p=t,S=J({componentId:q(p,"componentId"),fieldKey:q(p,"fieldKey")}),b=I(()=>{try{return JSON.parse(S.value)}catch{return{}}});function u(){a.value={...s,isShown:!0}}function m(){const{type:d,code:e,graphIds:n,includeDomains:V,excludeDomains:k,includeRawContent:T}=a.value;if(d=="function")return{...JSON.parse(e),type:d};if(d=="graph"){const A=n.split(",").map(L=>L.trim());return{type:d,graph_ids:A}}if(d=="web_search"){const A={type:d};return V.trim()&&(A.include_domains=V.split(",").map(L=>L.trim()).filter(L=>L)),k.trim()&&(A.exclude_domains=k.split(",").map(L=>L.trim()).filter(L=>L)),T&&(A.include_raw_content=T),A}throw"Unexpected tool type."}function y(d){let e=[];const{originalName:n,name:V}=d;return V||e.push("The name cannot be empty."),Object.keys(b.value).includes(V)&&!(n||n==V)&&e.push("An existing tool with the specified name already exists."),e}function _(){const d=y(a.value);if(d.length>0){d.forEach(alert);return}let e;try{e=m()}catch{alert("Incorrect tool definition");return}const{originalName:n,name:V}=a.value;let k={...b.value};if(n&&n!==V){const{[n]:T,...A}=k;k=A}k[V]=e,S.value=JSON.stringify(k),a.value.isShown=!1}function C(d,e){var V,k,T,A;const{type:n}=e;if(n=="function")return{isShown:!0,type:"function",binding:!1,originalName:d,name:d,graphIds:"",code:JSON.stringify(e,void 0,2),includeDomains:"",excludeDomains:"",includeRawContent:!1};if(n=="graph"){const L=Te.test(((V=e.graph_ids)==null?void 0:V.at(0))??"");return{isShown:!0,type:"graph",originalName:d,name:d,binding:L,graphIds:((k=e.graph_ids)==null?void 0:k.join(","))??"",code:"",includeDomains:"",excludeDomains:"",includeRawContent:!1}}if(n=="web_search")return{isShown:!0,type:"web_search",originalName:d,name:d,graphIds:"",binding:!1,code:"",includeDomains:((T=e.include_domains)==null?void 0:T.join(", "))??"",excludeDomains:((A=e.exclude_domains)==null?void 0:A.join(", "))??"",includeRawContent:e.include_raw_content??!1};throw"Unexpected tool type;"}function O(d){var n;const e=(n=b.value)==null?void 0:n[d];e&&(a.value=C(d,e))}function $(d){const{[d]:e,...n}={...b.value};S.value=JSON.stringify(n)}const h=I(()=>[{desc:"cancel",fn:()=>a.value.isShown=!1},{desc:"Save",disabled:o.value,fn:_}]);return(d,e)=>(i(),w("div",{class:"BuilderFieldsTools colorTransformer","data-automation-key":p.fieldKey},[B("div",to,[(i(!0),w(j,null,Z(b.value,(n,V)=>(i(),w("div",{key:V,class:"tool",onClick:k=>O(V)},[B("div",oo,Y(V),1),E(H,{variant:"primary",size:"smallIcon",class:"delete",onClick:oe(k=>$(V),["stop"])},{default:M(()=>[E(z,{name:"trash-2"})]),_:2},1032,["onClick"])],8,no))),128))]),E(H,{size:"small",onClick:u},{default:M(()=>[E(z,{name:"plus"}),e[9]||(e[9]=ae(" Add tool "))]),_:1}),a.value.isShown?(i(),F(Oe,{key:0,actions:h.value,title:"Add tool","allow-overflow":""},{default:M(()=>[B("div",lo,[E(te,{label:"Tool type"},{default:M(()=>[E(dt,{modelValue:a.value.type,"onUpdate:modelValue":e[0]||(e[0]=n=>a.value.type=n)},{default:M(()=>e[10]||(e[10]=[B("option",{value:"function"},"Function",-1),B("option",{value:"graph"},"Knowledge graph",-1),B("option",{value:"web_search"},"Web search",-1)])),_:1},8,["modelValue"])]),_:1}),E(te,{label:"Tool name"},{default:M(()=>[E(ee,{modelValue:a.value.name,"onUpdate:modelValue":e[1]||(e[1]=n=>a.value.name=n)},null,8,["modelValue"])]),_:1}),a.value.type=="function"?(i(),F(te,{key:0,"frame-slot":!0,label:"Function tool definition"},{default:M(()=>[E(v(l),{modelValue:a.value.code,"onUpdate:modelValue":e[2]||(e[2]=n=>a.value.code=n),class:"addToolForm__codeEditor",variant:"minimal",language:"json"},null,8,["modelValue"])]),_:1})):x("",!0),a.value.type=="graph"?(i(),F(te,{key:1,"is-binding-enabled":a.value.binding,"onUpdate:isBindingEnabled":e[5]||(e[5]=n=>a.value.binding=n),label:"Graph id(s)",hint:"Specify the id of the knowledge graph you want to use. If multiple, separate the ids using commas.","is-binding-button-shown":""},{default:M(()=>[a.value.binding?(i(),F(ne,{key:0,type:"state",value:f.value,"onUpdate:value":e[3]||(e[3]=n=>f.value=n)},null,8,["value"])):(i(),F(v(r),{key:1,modelValue:g.value,"onUpdate:modelValue":e[4]||(e[4]=n=>g.value=n),"enable-multi-selection":""},null,8,["modelValue"]))]),_:1},8,["is-binding-enabled"])):x("",!0),a.value.type=="web_search"?(i(),F(te,{key:2,label:"Include domains (optional)",hint:"Comma-separated list of domains to search within (e.g., wikipedia.org, docs.python.org)"},{default:M(()=>[E(ee,{modelValue:a.value.includeDomains,"onUpdate:modelValue":e[6]||(e[6]=n=>a.value.includeDomains=n),placeholder:"domain1.com, domain2.org"},null,8,["modelValue"])]),_:1})):x("",!0),a.value.type=="web_search"?(i(),F(te,{key:3,label:"Exclude domains (optional)",hint:"Comma-separated list of domains to exclude from results"},{default:M(()=>[E(ee,{modelValue:a.value.excludeDomains,"onUpdate:modelValue":e[7]||(e[7]=n=>a.value.excludeDomains=n),placeholder:"spam.com, ads.net"},null,8,["modelValue"])]),_:1})):x("",!0),a.value.type=="web_search"?(i(),F(te,{key:4,label:"Include raw content",hint:"Include full page content in search results"},{default:M(()=>[E(qe,{modelValue:a.value.includeRawContent,"onUpdate:modelValue":e[8]||(e[8]=n=>a.value.includeRawContent=n),label:"Include raw content"},null,8,["modelValue"])]),_:1})):x("",!0)])]),_:1},8,["actions"])):x("",!0)],8,eo))}}),io=K(ao,[["__scopeId","data-v-9b70cc0d"]]),so=["data-automation-key"],ro={class:"availableMcpTools"},uo={class:"sectionHeader"},co={key:0,class:"errorState"},po={key:1,class:"loadingState"},vo={key:2,class:"emptyState"},mo=["onClick"],fo={class:"iconContainer"},yo=["src","alt"],go={class:"appName"},_o={key:1,class:"selectedCount"},ho={key:0,class:"mcpFunctionsList"},bo=["data-writer-tooltip"],ko=["onClick"],So={class:"functionName"},Io={key:0,class:"functionDescription"},Bo=W({__name:"BuilderFieldsToolsWithMcp",props:{componentId:{},fieldKey:{}},setup(t){const r=R(P.core),l=Le(),{writerApi:c}=ct(),s=N([]),a=N(!1),o=N(void 0),g=N(new Set),f=I(()=>{var h;const $={};for(const d of s.value){const e=d.appName||"Unknown App";$[e]||($[e]={functions:[],logo:(h=d.connector)==null?void 0:h.logo}),$[e].functions.push(d)}return $}),p=I(()=>{const $={};for(const[h,d]of Object.entries(f.value))$[h]=d.functions.filter(e=>u(e)).length;return $});function S($){g.value.has($)?g.value.delete($):g.value.add($)}function b($){return`${$.appName}_${$.functionName}`.replace(/[^a-zA-Z0-9_]/g,"_")}function u($){return b($)in O.value}function m($,h){const d=b($);if(h){const e={type:"mcp",appId:$.appId,functionName:$.functionName,function:$.function};C.value=JSON.stringify({...O.value,[d]:e})}else{const{[d]:e,...n}=O.value;C.value=JSON.stringify(n)}}async function y(){const $=r.writerOrgId.value;if(!$){o.value=new Error("No organization ID available");return}a.value=!0,o.value=void 0;try{const h=r.writerAppId.value;s.value=await c.fetchMcpTools($,h)}catch(h){const d=h instanceof Error?h:new Error(String(h));o.value=d,s.value=[]}finally{a.value=!1}}ie(()=>{y()});const _=t,C=J({componentId:q(_,"componentId"),fieldKey:q(_,"fieldKey")}),O=I(()=>{try{return JSON.parse(C.value)}catch($){return l.error($),{}}});return($,h)=>(i(),w("div",{class:"BuilderFieldsToolsWithMcp colorTransformer","data-automation-key":_.fieldKey},[B("div",ro,[B("div",uo,[h[2]||(h[2]=B("div",{class:"sectionTitle"},"Available MCP Tools",-1)),E(H,{size:"small",variant:"secondary",loading:a.value,onClick:h[0]||(h[0]=d=>y())},{default:M(()=>[E(z,{name:"refresh-cw"}),h[1]||(h[1]=ae(" Refresh "))]),_:1},8,["loading"])]),o.value?(i(),w("div",co,[ae(" Error loading MCP tools: "+Y(o.value.message)+" ",1),h[3]||(h[3]=B("br",null,null,-1)),h[4]||(h[4]=B("small",null,"Check console for details",-1))])):a.value&&s.value.length===0?(i(),w("div",po,[(i(),w(j,null,Z(3,d=>B("div",{key:d,class:"loadingSkeleton"},[E(We,{style:{width:"200px","margin-bottom":"8px"}}),E(We,{style:{width:"150px"}})])),64))])):s.value.length===0?(i(),w("div",vo,h[5]||(h[5]=[ae(" No MCP tools available "),B("br",null,null,-1),B("small",null,"Make sure you have connected MCP applications with enabled functions",-1)]))):(i(),w("div",{key:3,class:ve(["mcpToolsList",{loading:a.value}])},[(i(!0),w(j,null,Z(f.value,(d,e)=>(i(),w("div",{key:e,class:ve(["mcpAppGroup",{expanded:g.value.has(e)}])},[B("div",{class:ve(["mcpAppHeader",{expanded:g.value.has(e)}]),onClick:n=>S(e)},[B("div",fo,[E(z,{name:g.value.has(e)?"minus":"plus",class:"expandIcon"},null,8,["name"])]),d.logo?(i(),w("img",{key:0,src:d.logo,alt:`${e} logo`,class:"appLogo"},null,8,yo)):x("",!0),B("span",go,Y(e),1),p.value[e]>0?(i(),w("span",_o,Y(p.value[e])+" selected ",1)):x("",!0)],10,mo),g.value.has(e)?(i(),w("div",ho,[(i(!0),w(j,null,Z(d.functions,n=>{var V,k;return i(),w("div",{key:`${n.appId}-${n.functionName}`,class:"mcpFunctionItem","data-writer-tooltip":(V=n.function)==null?void 0:V.description,"data-writer-tooltip-placement":"left"},[E(qe,{class:"functionCheckbox","model-value":u(n),"onUpdate:modelValue":T=>m(n,T)},null,8,["model-value","onUpdate:modelValue"]),B("div",{class:"functionInfo",onClick:T=>m(n,!u(n))},[B("div",So,Y(n.functionName),1),(k=n.function)!=null&&k.description?(i(),w("div",Io,Y(n.function.description),1)):x("",!0)],8,ko)],8,bo)}),128))])):x("",!0)],2))),128))],2))])],8,so))}}),Co=K(Bo,[["__scopeId","data-v-c8204108"]]),wo=W({__name:"BuilderFieldsCode",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0},isExpanded:{type:Boolean,required:!0},inputLanguage:{type:String,required:!0},singleLine:{type:Boolean,required:!1}},setup(t){const r=X({loader:()=>Q(()=>import("./BuilderEmbeddedCodeEditor-CE5dMdkR.js").then(a=>a.B),__vite__mapDeps([12,1,2,13]),import.meta.url)}),l=t,c=J({componentId:q(l,"componentId"),fieldKey:q(l,"fieldKey")}),s=I(()=>l.singleLine?"single-line":l.isExpanded?"half-screen":"minimal");return(a,o)=>(i(),F(v(r),{modelValue:v(c),"onUpdate:modelValue":o[0]||(o[0]=g=>fe(c)?c.value=g:null),language:t.inputLanguage,variant:s.value,class:"BuilderFieldsCode"},null,8,["modelValue","language","variant"]))}}),Ke=K(wo,[["__scopeId","data-v-a2ca567b"]]),Eo=["data-automation-key"],xo=W({__name:"BuilderFieldsBlueprintKey",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0}},setup(t){const r=X({loader:()=>Q(()=>import("./index-SYnWB7Y3.js").then(p=>p.bw),__vite__mapDeps([1,2]),import.meta.url)}),l=R(P.core),c=R(P.builderManager),s=t,a=J({componentId:q(s,"componentId"),fieldKey:q(s,"fieldKey")}),o=I(()=>{const p=new Set;for(const u of l.getComponents("blueprints_root"))u.content.key&&p.add(u.content.key);const S=[...p].sort((u,m)=>u.localeCompare(m)).map(u=>({value:u,label:u,icon:"wds-blueprints"})),b=[{value:"",label:"(No blueprint)",icon:"block"},...S];if(!b.some(u=>u.value===a.value)){const u=a.value;b.push({value:u,label:u})}return b}),g=I(()=>{const p=l.getComponents("blueprints_root").find(S=>S.content.key===a.value);return p==null?void 0:p.id});function f(){g.value&&(c.setSelection(g.value,null,"click"),l.setActivePageId(g.value))}return(p,S)=>(i(),w("div",{class:"BuilderFieldsBlueprintKey","data-automation-key":s.fieldKey},[E(v(r),{modelValue:v(a),"onUpdate:modelValue":S[0]||(S[0]=b=>fe(a)?a.value=b:null),options:o.value},null,8,["modelValue","options"]),g.value?(i(),F(H,{key:0,variant:"neutral",size:"smallIcon","data-writer-tooltip":"Jump to the blueprint",onClick:f},{default:M(()=>[E(z,{name:"square-dashed-mouse-pointer"})]),_:1})):x("",!0)],8,Eo))}}),$o=K(xo,[["__scopeId","data-v-f1beb9af"]]),To=["data-automation-key"],Fo=W({__name:"BuilderFieldsBlueprintId",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0}},setup(t){const r=R(P.core),l=t,c=I(()=>r.getComponentById(l.componentId)),s=I(()=>{var a;return((a=c.value)==null?void 0:a.parentId)??""});return(a,o)=>(i(),w("div",{class:"BuilderFieldsBlueprintId","data-automation-key":l.fieldKey},[E(ee,{"model-value":s.value,disabled:""},null,8,["model-value"])],8,To))}}),Vo=K(Fo,[["__scopeId","data-v-23c33b8b"]]),Oo=["data-automation-key"],Mo=W({__name:"BuilderFieldsHandler",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0}},setup(t){const r=X({loader:()=>Q(()=>import("./index-SYnWB7Y3.js").then(o=>o.bw),__vite__mapDeps([1,2]),import.meta.url)}),l=R(P.core),c=t,s=J({componentId:q(c,"componentId"),fieldKey:q(c,"fieldKey")}),a=I(()=>{const o=l.userFunctions.value.map(f=>f.name).sort((f,p)=>f.localeCompare(p)).map(f=>({value:f,label:f,icon:"wds-function"})),g=[{value:"",label:"(No handler)",icon:"ban"},...o];if(!g.some(f=>f.value===s.value)){const f=s.value;g.push({value:f,label:f})}return g});return(o,g)=>(i(),w("div",{class:"BuilderFieldsHandler","data-automation-key":c.fieldKey},[E(v(r),{modelValue:v(s),"onUpdate:modelValue":g[0]||(g[0]=f=>fe(s)?s.value=f:null),options:a.value},null,8,["modelValue","options"])],8,Oo))}}),qo=["data-automation-key"],Ao=["href","data-writer-tooltip"],Do=W({__name:"BuilderFieldsWriterResourceId",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},label:{type:String,required:!1,default:void 0},unit:{type:String,required:!1,default:void 0},hint:{type:String,required:!1,default:void 0},error:{type:String,required:!1,default:void 0},resourceType:{type:String,required:!0},enableMultiSelection:{type:Boolean,required:!1,default:!1},isBindingButtonShown:{type:Boolean,required:!1,default:!1}},setup(t){const r=X({loader:()=>Q(()=>import("./BuilderApplicationSelect-DLh5qcaQ.js"),__vite__mapDeps([17,1,2,15,18]),import.meta.url)}),l=X({loader:()=>Q(()=>import("./BuilderGraphSelect-C7sx5G5a.js"),__vite__mapDeps([14,1,2,15,16]),import.meta.url)}),c=X({loader:()=>Q(()=>import("./BuilderModelSelect-C52uJh0M.js"),__vite__mapDeps([19,1,2,15,20]),import.meta.url)}),s=t,a=J({componentId:q(s,"componentId"),fieldKey:q(s,"fieldKey")}),{isBindingMode:o,toggleBindingMode:g}=Qe({fieldViewModel:a}),f=J({componentId:q(s,"componentId"),fieldKey:"appInputs"}),p=U("selectorEl"),S=I(()=>{switch(s.resourceType){case"model":return c;case"graph":return l;case"application":return r;default:throw new Error(`Unexpected resourceType: ${s.resourceType}`)}}),b=I(()=>{switch(s.resourceType){case"graph":return"Edit knowledge graph";case"application":return"Edit agent";case"model":return"About models";default:return}}),u=I(()=>{var O,$;if(Array.isArray(m.value))return;const _=m.value;if(!_)return;const C=($=(O=p.value)==null?void 0:O.selectedData)==null?void 0:$.organization_id;if(C)switch(s.resourceType){case"graph":{const h=new URLSearchParams({graphId:_});return`https://app.writer.com/aistudio/organization/${C}/knowledge-graph?${h}`}case"application":return`https://app.writer.com/aistudio/organization/${C}/app/${_}`;case"model":return"https://dev.writer.com/home/models#model-overview";default:return}}),m=I({get(){if(s.enableMultiSelection){const _=a.value||"[]";try{return JSON.parse(_)}catch{return[]}}return a.value},set(_){a.value=s.enableMultiSelection?JSON.stringify(_):String(_)}});function y(_){s.resourceType!=="application"||!_||!_.inputs||typeof _.inputs!="object"||(f.value=JSON.stringify(_.inputs))}return(_,C)=>(i(),F(te,{"is-binding-button-shown":t.isBindingButtonShown,"is-binding-enabled":v(o),label:t.label,unit:t.unit,hint:t.hint,error:t.error,"data-automation-key":t.fieldKey,"onUpdate:isBindingEnabled":v(g)},{default:M(()=>[B("div",{class:"BuilderFieldsWriterResourceId","data-automation-key":t.fieldKey},[v(o)?(i(),F(Ae,{key:0,type:"state-template","component-id":t.componentId,"field-key":t.fieldKey,error:t.error,"default-value":""},null,8,["component-id","field-key","error"])):(i(),F(Fe(S.value),{key:1,ref_key:"selectorEl",ref:p,modelValue:m.value,"onUpdate:modelValue":C[0]||(C[0]=O=>m.value=O),"enable-multi-selection":t.enableMultiSelection,onSelectedData:y},null,40,["modelValue","enable-multi-selection"])),u.value?(i(),w("a",{key:2,class:"BuilderFieldsWriterResourceId__link",href:u.value,target:"_blank","data-writer-tooltip":b.value},[E(z,{name:"external-link"})],8,Ao)):x("",!0)],8,qo)]),_:1},8,["is-binding-button-shown","is-binding-enabled","label","unit","hint","error","data-automation-key","onUpdate:isBindingEnabled"]))}}),ke=K(Do,[["__scopeId","data-v-59e28cc4"]]),Ro=["data-automation-key"],Po=W({__name:"BuilderFieldsComponentId",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(t){const r=X({loader:()=>Q(()=>import("./index-SYnWB7Y3.js").then(u=>u.bw),__vite__mapDeps([1,2]),import.meta.url)}),l=R(P.core),c=R(P.builderManager),s=t,a=J({componentId:q(s,"componentId"),fieldKey:q(s,"fieldKey")});function*o(){yield l.getComponentById("root"),yield*l.getComponentsNested("root")}const g=I(()=>{const u=[];for(const m of o()){const y=l.getComponentDefinition(m==null?void 0:m.type);if(!(y!=null&&y.events)||Object.keys(y.events).length===0)continue;const{name:_,previewText:C,possibleImageUrls:O}=Ne(l,m),$=O.value,h=m.id;u.push({value:h,label:C.value||_.value,detail:C.value?_.value:void 0,icon:$})}return u}),f=I({get:()=>a.value,set(u){a.value=String(u)}}),p=I(()=>{let u=f.value;for(;u;){const m=l.getComponentById(u);if(m.type==="page")return m.id;u=m.parentId}}),S=I(()=>l.getComponentById(f.value));function b(){!f.value||!S.value||(p.value&&(c.mode.value="ui",l.setActivePageId(p.value)),c.setSelection(f.value,null,"click"))}return(u,m)=>(i(),w("div",{class:"BuilderFieldsComponentId","data-automation-key":s.fieldKey},[E(v(r),{modelValue:f.value,"onUpdate:modelValue":m[0]||(m[0]=y=>f.value=y),options:g.value,"enable-search":""},null,8,["modelValue","options"]),f.value?(i(),F(H,{key:0,variant:"neutral",size:"smallIcon","data-writer-tooltip":"Jump to the element",disabled:!S.value,onClick:b},{default:M(()=>[E(z,{name:"square-dashed-mouse-pointer"})]),_:1},8,["disabled"])):x("",!0)],8,Ro))}}),Wo=K(Po,[["__scopeId","data-v-fcce992f"]]),Uo=["data-automation-key"],Ko=W({__name:"BuilderFieldsComponentEventType",props:{componentId:{type:String,required:!0},fieldKey:{type:String,required:!0},error:{type:String,required:!1,default:void 0}},setup(t){const r=X({loader:()=>Q(()=>import("./index-SYnWB7Y3.js").then(p=>p.bw),__vite__mapDeps([1,2]),import.meta.url)}),l=R(P.core),c=t,s=J({componentId:q(c,"componentId"),fieldKey:q(c,"fieldKey")}),a=I(()=>l.getComponentById(c.componentId)),o=I(()=>{var p;return l.getComponentDefinition((p=a.value)==null?void 0:p.type)}),g=I(()=>{var m,y;const p=(y=Object.entries(((m=o.value)==null?void 0:m.fields)??{}).find(([,_])=>_.type===D.ComponentId))==null?void 0:y.at(0);if(p===void 0)return[];const S=a.value.content[String(p)],b=l.getComponentById(S),u=l.getComponentDefinition(b==null?void 0:b.type);return u!=null&&u.events?Object.keys(u.events).map(_=>({value:_,label:_})):[]}),f=I({get:()=>s.value,set(p){s.value=String(p)}});return(p,S)=>(i(),w("div",{class:"BuilderFieldsComponentEventType","data-automation-key":c.fieldKey},[g.value.length?(i(),F(v(r),{key:0,modelValue:f.value,"onUpdate:modelValue":S[0]||(S[0]=b=>f.value=b),options:g.value,"hide-icons":""},null,8,["modelValue","options"])):(i(),F(ee,{key:1,modelValue:f.value,"onUpdate:modelValue":S[1]||(S[1]=b=>f.value=b)},null,8,["modelValue"]))],8,Uo))}});function jo(t,r,l){const{getEvaluatedFields:c}=Ee(t,l);function s(p){return!!Te.exec(p)}const a=I(()=>{var p;return(p=r.value.at(-1))==null?void 0:p.componentId}),o=I(()=>{if(a.value!==void 0)return t.getComponentById(a.value)}),g=I(()=>{var p,S;return(p=o.value)!=null&&p.type?((S=t.getComponentDefinition(o.value.type))==null?void 0:S.fields)??{}:{}}),f=I(()=>c(r.value));return I(()=>Object.entries(g.value).reduce((p,[S,b])=>{var y;const u=((y=o.value.content)==null?void 0:y[S])??"";if(s(u))return p;const m=f.value[S].value;return p[S]=Lo(t,a.value,b,m),p},{}))}function Lo(t,r,l,c){let s=l.validator;if(s===void 0&&typeof l.options=="object"&&l.options!==null&&Object.keys(l.options).length>0?s=pt(Object.keys(l.options)):typeof s=="function"&&(s=s(t,r)),s===void 0)return;const a=vt(s);if(!(a(c)||a.errors===void 0))return zo(a.errors)}function No(t){var l;if(t.keyword==="format"&&Object.values(mt).includes(t.params.format))return ft[t.params.format].errorMessage;let r="";return t.instancePath&&(r+=`${t.instancePath} `),r+=t.message,Array.isArray((l=t.params)==null?void 0:l.allowedValues)&&(r+=`: ${t.params.allowedValues.join(", ")}`),r}function zo(t){return t.map(No).join(`
`)}const Jo={key:0,class:"BuilderSettingsProperties"},Go=["inert"],Yo=W({__name:"BuilderSettingsProperties",props:{isReadOnly:{type:Boolean}},setup(t){const r=R(P.core),l=R(P.builderManager),c=R(P.secretsManager),s=N(new Set),a=I(()=>{var e,n;return Ye((n=(e=l.firstSelectedItem)==null?void 0:e.value)==null?void 0:n.instancePath)}),o=I(()=>r.getComponentById(l.firstSelectedId.value)),g=I(()=>{var e;return r.getComponentDefinition((e=o.value)==null?void 0:e.type)}),{getEvaluatedFields:f}=Ee(r,c),p=I(()=>f(a.value)),S=I(()=>{var n;const e=Object.entries(((n=g.value)==null?void 0:n.fields)??{}).filter(([V,k])=>k.isArtifactField?!1:k.enabled===void 0?!0:k.enabled({evaluatedFields:p.value}));return Object.fromEntries(e)});function b(e){return e.type===D.Code||e.type===D.JSONInput||e.type===D.Object||e.control===Se.Textarea}const u=jo(r,a,c),m=N(G.General),y=Object.freeze({[G.General]:"Configure",[G.Style]:"Style",[G.Tools]:"Tools"}),_=I(()=>C.value.map(e=>({label:y[e]??e,value:e}))),C=I(()=>[G.General,G.Style,G.Tools].filter(e=>{var n;return(n=O.value[e])==null?void 0:n.length})),O=I(()=>{const e={[G.General]:[],[G.Style]:[],[G.Tools]:[]};return Object.entries(S.value).forEach(([n,V])=>{const k=V.category||G.General;e[k]&&e[k].push([n,V])}),{[G.General]:$(e[G.General]),[G.Style]:$(e[G.Style]),[G.Tools]:$(e[G.Tools])}});function $(e){return e.map((n,V)=>[n,V]).sort(([n,V],[k,T])=>{const A=n[1].order??0;return(k[1].order??0)-A||V-T}).map(([n])=>n)}function h(e){s.value.add(e)}function d(e){s.value.delete(e)}return(e,n)=>v(l).isSingleSelectionActive?(i(),w("div",Jo,[C.value.length>1?(i(),F(se,{key:0,modelValue:m.value,"onUpdate:modelValue":n[0]||(n[0]=V=>m.value=V),variant:"bar",tabs:_.value},null,8,["modelValue","tabs"])):x("",!0),(i(!0),w(j,null,Z(C.value.length>1?[m.value]:C.value,V=>(i(),w("div",{key:V,inert:t.isReadOnly,class:"BuilderSettingsProperties__category"},[(i(!0),w(j,null,Z(O.value[V],([k,T])=>(i(),w("div",{key:k,class:"BuilderSettingsProperties__category__field"},[T.type===v(D).Boolean?(i(),F(rn,{key:0,"field-key":k,"component-id":o.value.id,label:T.name??k,hint:T.desc,unit:T.type,error:v(u)[k]},null,8,["field-key","component-id","label","hint","unit","error"])):T.type===v(D).WriterGraphId?(i(),F(ke,{key:1,"is-binding-button-shown":"","field-key":k,"component-id":o.value.id,label:T.name??k,hint:T.desc,unit:T.type,error:v(u)[k],"resource-type":"graph"},null,8,["field-key","component-id","label","hint","unit","error"])):T.type===v(D).WriterGraphIds?(i(),F(ke,{key:2,"is-binding-button-shown":"","field-key":k,"component-id":o.value.id,label:T.name??k,hint:T.desc,unit:T.type,error:v(u)[k],"resource-type":"graph","enable-multi-selection":""},null,8,["field-key","component-id","label","hint","unit","error"])):T.type===v(D).WriterAppId?(i(),F(ke,{key:3,"field-key":k,"component-id":o.value.id,label:T.name??k,hint:T.desc,unit:T.type,error:v(u)[k],"resource-type":"application"},null,8,["field-key","component-id","label","hint","unit","error"])):T.type===v(D).WriterModelId?(i(),F(ke,{key:4,"field-key":k,"component-id":o.value.id,label:T.name??k,hint:T.desc,unit:T.type,error:v(u)[k],"resource-type":"model"},null,8,["field-key","component-id","label","hint","unit","error"])):(i(),F(te,{key:5,label:V==="Tools"?void 0:T.name??k,hint:T.desc,unit:T.type,error:v(u)[k],"is-expansible":b(T),onExpand:A=>h(k),onShrink:A=>d(k)},{default:M(()=>[T.type==v(D).Color?(i(),F(nn,{key:0,"field-key":k,"component-id":o.value.id,error:v(u)[k]},null,8,["field-key","component-id","error"])):x("",!0),T.type==v(D).Shadow?(i(),F(Jn,{key:1,"field-key":k,"component-id":o.value.id,error:v(u)[k]},null,8,["field-key","component-id","error"])):x("",!0),T.type==v(D).KeyValue?(i(),F(bn,{key:2,"field-key":k,"component-id":o.value.id,"instance-path":a.value,error:v(u)[k]},null,8,["field-key","component-id","instance-path","error"])):x("",!0),T.type==v(D).Text||T.type==v(D).Number||T.type==v(D).Binding||T.type==v(D).IdKey?(i(),F(Ae,{key:3,type:T.type==v(D).Binding?"state":"template","field-key":k,"field-control":T.control,"component-id":o.value.id,"default-value":T.default,error:v(u)[k]},null,8,["type","field-key","field-control","component-id","default-value","error"])):x("",!0),T.type==v(D).BlueprintId?(i(),F(Vo,{key:4,"field-key":k,"component-id":o.value.id},null,8,["field-key","component-id"])):x("",!0),T.type==v(D).BlueprintKey?(i(),F($o,{key:5,"field-key":k,"component-id":o.value.id},null,8,["field-key","component-id"])):x("",!0),T.type==v(D).Handler?(i(),F(Mo,{key:6,"field-key":k,"component-id":o.value.id},null,8,["field-key","component-id"])):x("",!0),T.type==v(D).Object?(i(),F(Sn,{key:7,"field-key":k,"component-id":o.value.id,"default-value":T.default,error:v(u)[k]},null,8,["field-key","component-id","default-value","error"])):x("",!0),T.type==v(D).JSONInput?(i(),F(Ke,{key:8,"field-key":k,"component-id":o.value.id,"is-expanded":s.value.has(k),"input-language":"json"},null,8,["field-key","component-id","is-expanded"])):x("",!0),T.type==v(D).Width?(i(),F(Zn,{key:9,"field-key":k,"component-id":o.value.id,error:v(u)[k]},null,8,["field-key","component-id","error"])):x("",!0),T.type==v(D).HAlign?(i(),F(Ue,{key:10,direction:"horizontal","field-key":k,"component-id":o.value.id,error:v(u)[k]},null,8,["field-key","component-id","error"])):x("",!0),T.type==v(D).VAlign?(i(),F(Ue,{key:11,direction:"vertical","field-key":k,"component-id":o.value.id,error:v(u)[k]},null,8,["field-key","component-id","error"])):x("",!0),T.type==v(D).Padding?(i(),F(xn,{key:12,"field-key":k,"component-id":o.value.id,error:v(u)[k]},null,8,["field-key","component-id","error"])):x("",!0),T.type==v(D).Tools&&o.value.type==="blueprints_writerchatreplywithtoolconfig"?(i(),F(Co,{key:13,"field-key":k,"component-id":o.value.id},null,8,["field-key","component-id"])):T.type==v(D).Tools?(i(),F(io,{key:14,"field-key":k,"component-id":o.value.id},null,8,["field-key","component-id"])):x("",!0),T.type==v(D).Code||T.type==v(D).Eval?(i(),F(Ke,{key:15,"field-key":k,"component-id":o.value.id,"is-expanded":s.value.has(k),"input-language":"python","single-line":T.type==v(D).Eval},null,8,["field-key","component-id","is-expanded","single-line"])):x("",!0),T.type==v(D).ComponentId?(i(),F(Wo,{key:16,"field-key":k,"component-id":o.value.id,error:v(u)[k]},null,8,["field-key","component-id","error"])):x("",!0),T.type==v(D).ComponentEventType?(i(),F(Ko,{key:17,"field-key":k,"component-id":o.value.id,error:v(u)[k]},null,8,["field-key","component-id","error"])):x("",!0)]),_:2},1032,["label","hint","unit","error","is-expansible","onExpand","onShrink"]))]))),128))],8,Go))),128))])):x("",!0)}}),Ho=K(Yo,[["__scopeId","data-v-d82ebb47"]]),Xo={},Qo={class:"WdsTitle"};function Zo(t,r){return i(),w("h2",Qo,[yt(t.$slots,"default",{},void 0,!0)])}const Ze=K(Xo,[["render",Zo],["__scopeId","data-v-3b68d589"]]),el=["inert"],tl="Connect the result of this block to a dynamic variable you can use across this agent",nl=W({__name:"BuilderSettingsBinding",props:{isReadOnly:{type:Boolean}},setup(t){const r=R(P.core),l=R(P.builderManager),c=R(P.secretsManager),s=Ce(r,l),{getEvaluatedFields:a}=Ee(r,c),o=I(()=>{var b,u;return Ye((u=(b=l.firstSelectedItem)==null?void 0:b.value)==null?void 0:u.instancePath)}),g=I(()=>r.getComponentById(l.firstSelectedId.value)),f=I(()=>a(o.value)),p=I(()=>{const b=r.getComponentDefinition(g.value.type);return b?Object.entries(b.events).filter(([,y])=>y.bindable?y.enabled===void 0?!0:y.enabled({evaluatedFields:f.value}):!1).map(([y])=>y)[0]:void 0});function S(b){s.setBinding(l.firstSelectedId.value,b,p.value)}return me(p,()=>{var u;if(!p.value)return;const b=(u=g.value)==null?void 0:u.binding;b!=null&&b.stateRef&&p.value!==b.eventType&&S(b.stateRef)}),(b,u)=>v(l).isSingleSelectionActive?(i(),w("div",{key:0,inert:t.isReadOnly,class:"BuilderSettingsBinding"},[E(Ze,null,{default:M(()=>u[1]||(u[1]=[ae("Binding")])),_:1}),E(te,{class:"BuilderSettingsBinding__main",label:"Link Variable",hint:tl},{default:M(()=>{var m;return[E(ne,{type:"state",value:(m=g.value.binding)==null?void 0:m.stateRef,"component-id":v(l).firstSelectedId.value,onInput:u[0]||(u[0]=y=>S(y.target.value))},null,8,["value","component-id"])]}),_:1})],8,el)):x("",!0)}}),ol=K(nl,[["__scopeId","data-v-f92e4a05"]]),ll=["inert"],al={class:"main"},il={class:"flexRow"},sl=["checked"],rl='Reference a state or context element that will evaluate to true or false. Reference the element directly, i.e. use "my_var" instead of "@{my_var}".',ul=W({__name:"BuilderSettingsVisibility",props:{isReadOnly:{type:Boolean}},setup(t){const r=[{label:"Yes",value:"yes"},{label:"No",value:"no"},{label:"Custom",value:"custom"}],l=I({get(){const g=o.value.visible;return(g==null?void 0:g.expression)==="custom"?"custom":g===void 0||g.expression===!0?"yes":"no"},set(g){var f,p;g==="custom"?a(o.value.id,"custom",(f=o.value.visible)==null?void 0:f.binding,(p=o.value.visible)==null?void 0:p.reversed):a(o.value.id,g==="yes")}}),c=R(P.core),s=R(P.builderManager),{setVisibleValue:a}=Ce(c,s),o=I(()=>c.getComponentById(s.firstSelectedId.value));return(g,f)=>v(s).isSingleSelectionActive?(i(),w("div",{key:0,inert:t.isReadOnly,class:"BuilderSettingsVisibility"},[E(Ze,null,{default:M(()=>f[3]||(f[3]=[ae("Visibility")])),_:1}),B("div",al,[E(se,{modelValue:l.value,"onUpdate:modelValue":f[0]||(f[0]=p=>l.value=p),tabs:r},null,8,["modelValue"]),typeof o.value.visible<"u"&&o.value.visible.expression==="custom"?(i(),F(te,{key:0,hint:rl},{default:M(()=>[E(ne,{value:o.value.visible.binding,type:"state",placeholder:"my_visibility_state_value",onInput:f[1]||(f[1]=p=>v(a)(o.value.id,"custom",p.target.value,o.value.visible.reversed))},null,8,["value"]),B("div",il,[B("input",{type:"checkbox",checked:o.value.visible.reversed,onInput:f[2]||(f[2]=p=>v(a)(o.value.id,"custom",o.value.visible.binding,p.target.checked))},null,40,sl),f[4]||(f[4]=B("span",null,"Reverse",-1))])]),_:1})):x("",!0)])],8,ll)):x("",!0)}}),dl=K(ul,[["__scopeId","data-v-c4316bf1"]]),je={apiTriggerDetails:X({loader:()=>Q(()=>import("./BuilderSettingsArtifactAPITriggerDetails-CwzzyX5Z.js"),__vite__mapDeps([21,1,2,7,8,9,10,3,4,5,6,22]),import.meta.url)})},cl={class:"BuilderSettingsMain"},pl={key:0,class:"BuilderSettingsMain__description"},vl={key:1,class:"BuilderSettingsMain__warning cmc-warning"},ml={class:"BuilderSettingsMain__section"},fl={class:"BuilderSettingsMain__componentId"},yl=W({__name:"BuilderSettingsMain",setup(t){const r=X({loader:()=>Q(()=>import("./BuilderSettingsHandlers-bTwAqQqh.js"),__vite__mapDeps([23,1,2,24,4,5,25,26,27,3,6,7,8,9,10,28]),import.meta.url)}),l=R(P.core),c=R(P.builderManager),s=I(()=>l.getComponentById(c.firstSelectedId.value)),a=I(()=>s.value.isCodeManaged),o=I(()=>c.isSingleSelectionActive.value?!g.value.toolkit||g.value.toolkit=="core":!1),g=I(()=>{const{type:y}=s.value;return l.getComponentDefinition(y)});me(s,y=>{y||c.setSelection(null)});const{copy:f,copied:p}=He();function S(){f(c.firstSelectedId.value)}const b=I(()=>{var y;return Object.values(((y=g.value)==null?void 0:y.events)??{}).some(_=>_.bindable)}),u=I(()=>{var y;return(((y=g.value)==null?void 0:y.settingsArtifacts)??[]).filter(_=>_.position!=="bottom")}),m=I(()=>{var y;return(((y=g.value)==null?void 0:y.settingsArtifacts)??[]).filter(_=>_.position==="bottom")});return(y,_)=>(i(),w("div",cl,[g.value.description?(i(),w("p",pl,Y(g.value.description),1)):x("",!0),a.value?(i(),w("p",vl,[B("span",null,[E(z,{name:"triangle-alert"})]),_[0]||(_[0]=B("span",null," This component is instantiated in code. All settings in this panel are read-only and cannot be edited. ",-1))])):x("",!0),B("div",ml,[E(Ho,{"is-read-only":a.value},null,8,["is-read-only"]),(i(!0),w(j,null,Z(u.value,C=>(i(),F(Fe(v(je)[C.key]),{key:C.key,inert:a.value},null,8,["inert"]))),128)),o.value?(i(),w(j,{key:0},[b.value?(i(),F(ol,{key:0,"is-read-only":a.value},null,8,["is-read-only"])):x("",!0),E(v(r),{"is-read-only":a.value},null,8,["is-read-only"]),E(dl,{"is-read-only":a.value},null,8,["is-read-only"])],64)):x("",!0),(i(!0),w(j,null,Z(m.value,C=>(i(),F(Fe(v(je)[C.key]),{key:C.key,inert:a.value},null,8,["inert"]))),128))]),_[1]||(_[1]=B("div",{class:"BuilderSettingsMain__spacer"},null,-1)),B("div",fl,[B("p",{class:"BuilderSettingsMain__componentId__text",onClick:S},Y(v(c).firstSelectedId.value),1),E(H,{class:"BuilderSettingsMain__componentId__btn",size:"smallIcon",variant:"tertiary","data-writer-tooltip":v(p)?"Copied!":"Copy block id","data-automation-action":"copy-component-id",onClick:S},{default:M(()=>[E(z,{name:v(p)?"check":"clipboard"},null,8,["name"])]),_:1},8,["data-writer-tooltip"])])]))}}),gl=K(yl,[["__scopeId","data-v-aa8c395b"]]),_l=["data-writer-id"],hl=W({__name:"BuilderSettingsActions",setup(t){const r=R(P.core),l=R(P.builderManager),c=Me(r),{dropdownOptions:s,handleDropdownSelect:a}=Xe(r,l,c);function o(){a(Ve.Delete)}const g=I(()=>{const p=s.value.find(S=>S.value===Ve.Delete);return p?p.disabled:!0}),f=l.firstSelectedId;return(p,S)=>(i(),w("div",{class:"BuilderSettingsActions","data-writer-id":v(f)},[v(l).selectionStatus.value===v(pe).Multiple?(i(),F(H,{key:0,class:"BuilderSettingsActions__btn",variant:"neutral",size:"smallIcon","data-automation-action":"clear-selection","data-writer-tooltip":"Clear selection","data-writer-tooltip-placement":"left",onClick:S[0]||(S[0]=b=>v(l).setSelection(null))},{default:M(()=>[E(z,{name:"x"})]),_:1})):x("",!0),E(H,{class:"BuilderSettingsActions__btn BuilderSettingsActions__btn--delete",variant:"neutral",size:"smallIcon","data-automation-action":"delete","data-writer-tooltip":"Delete (Del)","data-writer-tooltip-placement":"left",disabled:g.value,onClick:o},{default:M(()=>[E(z,{name:"trash-2"})]),_:1},8,["disabled"])],8,_l))}}),bl=K(hl,[["__scopeId","data-v-08efde31"]]),kl=["id"],Sl=["value"],Il=W({__name:"BuilderSettingsAddComponentModal",props:ue({selectedId:{type:String,required:!0}},{isOpen:{type:Boolean,default:!1},isOpenModifiers:{}}),emits:["update:isOpen"],setup(t){const r=R(P.core),l=R(P.builderManager),c=gt(),s=Me(r),{createAndInsertComponent:a}=Ce(r,l,s),o=t,g=I(()=>r.getContainableTypes(o.selectedId).reduce((b,u)=>(b[u]=r.getComponentDefinition(u),b),{})),f=we(t,"isOpen");function p(){f.value=!1}function S(b){const u=b.target.value;if(!u)return;const m=Object.entries(g.value).find(([_,C])=>C.name==u);if(!m)return;const y=m[0];a(y,o.selectedId),p()}return(b,u)=>f.value?(i(),F(Oe,{key:0,title:"Add child component","display-close-button":"",onClose:p},{default:M(()=>[E(ee,{type:"text",list:v(c),placeholder:"Component...",onChange:S},null,8,["list"]),B("datalist",{id:v(c)},[(i(!0),w(j,null,Z(g.value,(m,y)=>(i(),w("option",{key:y,value:m.name},Y(m.name),9,Sl))),128))],8,kl)]),_:1})):x("",!0)}});function Bl(t,r=500){const l=N(0);let c=null;function s(){t.value&&(l.value=t.value.clientHeight)}return ie(()=>{s(),c=setInterval(s,r)}),Ge(()=>{c&&clearInterval(c)}),l}const Cl={key:0,class:"BuilderSettings__collapser"},wl={key:1,class:"BuilderSettings__titleBar"},El={class:"BuilderSettings__titleBar__title"},xl={class:"BuilderSettings__titleBar__actions"},$l=["data-writer-tooltip"],Tl=W({__name:"BuilderSettings",setup(t){_t(h=>({baa1d07a:v(l).getMode()=="blueprints"?"82px":"20px","1e1ab0af":a.value}));const r=R(P.core),l=R(P.builderManager),c=U("root"),s=Bl(c,1e3),a=I(()=>{if(!s.value)return"unset";const h=s.value-42;return h>0?`${h}px`:"unset"}),{component:o,definition:g}=ht(r,l.firstSelectedId),f=bt(o,g),{copy:p,copied:S}=He();function b(){p(f.value)}const u=Me(r),m=N(!1),{dropdownOptions:y,handleDropdownSelect:_}=Xe(r,l,u,{[Ve.Add]:()=>m.value=!0}),C=I(()=>l.selectionStatus.value===pe.Multiple?!0:l.isSettingsBarCollapsed.value),O=I(()=>l.selection.value.length);function $(){l.isSettingsBarCollapsed.value=!l.isSettingsBarCollapsed.value}return me(o,h=>{h||l.setSelection(null)}),(h,d)=>v(l).selectionStatus.value!==v(pe).None?(i(),w("div",{key:0,ref_key:"root",ref:c,class:ve(["BuilderSettings",{"BuilderSettings--collapsed":C.value}])},[v(l).isSingleSelectionActive.value?(i(),w("div",Cl,[C.value?(i(),F(H,{key:0,class:"BuilderSettings__collapser__btn",size:"smallIcon",variant:"neutral","data-writer-tooltip-placement":"left","data-writer-tooltip":"Expand settings","data-automation-action":"expand-settings",onClick:$},{default:M(()=>[E(z,{name:"settings"})]),_:1})):(i(),F(H,{key:1,class:"BuilderSettings__collapser__btn",size:"smallIcon",variant:"neutral","data-writer-tooltip-placement":"left","data-writer-tooltip":"Collapse settings","data-automation-action":"collapse-settings",onClick:$},{default:M(()=>[E(z,{name:"arrow-right-to-line"})]),_:1}))])):x("",!0),v(l).isSingleSelectionActive?(i(),w("div",wl,[B("p",El,Y(v(g).name),1),B("div",xl,[v(f)?(i(),F(H,{key:0,size:"smallIcon",variant:"neutral","data-writer-tooltip-placement":"bottom","data-writer-tooltip":v(S)?"Copied!":"Copy result variable",onClick:oe(b,["prevent"])},{default:M(()=>[E(z,{name:"at-sign"})]),_:1},8,["data-writer-tooltip"])):x("",!0),E(kt,{class:"BuilderSettings__titleBar__actions__more","data-automation-action":"settings-actions-dropdown",options:v(y),"trigger-custom-size":"32px","trigger-icon":"ellipsis-vertical",onSelect:v(_)},null,8,["options","onSelect"])])])):x("",!0),v(l).selectionStatus.value===v(pe).Multiple?(i(),w("div",{key:2,class:"BuilderSettings__selectionCount","data-writer-tooltip-placement":"left","data-writer-tooltip":`${O.value} components selected`},[B("p",null,Y(O.value),1)],8,$l)):x("",!0),C.value&&v(l).selectionStatus.value===v(pe).Multiple?(i(),F(bl,{key:3,class:"BuilderSettings__actions"})):x("",!0),E(gl,{class:"BuilderSettings__main",inert:C.value},null,8,["inert"]),v(l).isSingleSelectionActive.value?(i(),F(Il,{key:4,"is-open":m.value,"onUpdate:isOpen":d[0]||(d[0]=e=>m.value=e),"selected-id":v(l).firstSelectedId.value},null,8,["is-open","selected-id"])):x("",!0)],2)):x("",!0)}}),Fl=K(Tl,[["__scopeId","data-v-6a0c1c16"]]),Dl=Object.freeze(Object.defineProperty({__proto__:null,default:Fl},Symbol.toStringTag,{value:"Module"}));export{Ke as B,Ze as W,Dl as a,Ct as u};
