import{u as O}from"./useBlueprintRun-C2fVpPvJ.js";import{d as h,c as z,m as $,r as q,aR as V,aS as A,o as m,f as g,g as c,J as I,x as r,y,z as b,K as F,R as w,S as J,as as M,G as x,_ as W,i as S,a as T,D as E,E as G,W as D,t as R,Y as K,b as j,A as N,ae as L}from"./index-SYnWB7Y3.js";const P=["disabled"],Y=["disabled"],H=h({__name:"WdsButtonSplit",props:{variant:{type:String,default:"primary"},size:{type:String,default:"default"},disabled:{type:Boolean,required:!1}},emits:{mainClick:()=>!0,dropdownOpen:()=>!0,dropdownClose:()=>!0},setup(i,{expose:f,emit:a}){const d=i,_=z(()=>[`WdsButtonSplit--size-${d.size}`,`WdsButtonSplit--variant-${d.variant}`,d.disabled?"WdsButtonSplit--disabled":void 0]),v=a,n=$("btn"),o=$("dropdown"),t=q(!1),{floatingStyles:l}=V(n,o,{placement:"bottom-end",middleware:[A(12)]});function s(B=!t.value){t.value=B,t.value?v("dropdownOpen"):v("dropdownClose")}return f({toggleDropdown:s}),(B,p)=>(m(),g("div",{ref_key:"btn",ref:n,class:x(["WdsButtonSplit",_.value])},[c("button",{type:"button",class:"WdsButtonSplit__main",disabled:i.disabled,onClick:p[0]||(p[0]=C=>B.$emit("mainClick"))},[I(B.$slots,"button",{},void 0,!0)],8,P),p[2]||(p[2]=c("hr",{class:"WdsButtonSplit__divider"},null,-1)),c("button",{class:"WdsButtonSplit__dropdownTrigger",type:"button",disabled:i.disabled,onClickCapture:p[1]||(p[1]=C=>s())},[r(y,{name:t.value?"chevron-up":"chevron-down"},null,8,["name"])],40,Y),r(M,null,{default:b(()=>[t.value?(m(),g("div",{key:0,ref_key:"dropdown",ref:o,style:F(w(l))},[I(B.$slots,"dropdown",{},void 0,!0)],4)):J("",!0)]),_:3})],2))}}),Q=W(H,[["__scopeId","data-v-e9224293"]]),U={class:"BlueprintToolbarBlocksDropdown"},X={class:"BlueprintToolbarBlocksDropdown__list"},Z={class:"BlueprintToolbarBlocksDropdown__list__item__description"},tt={class:"BlueprintToolbarBlocksDropdown__list__item__title"},et=h({__name:"BlueprintToolbarBlocksDropdown",props:{components:{type:Array,required:!0}},emits:{jumpToComponent:i=>typeof i=="string",runBranch:i=>typeof i=="string"},setup(i){const f=i,a=S(T.core);function d(n){const o=a.getComponentDefinition(n.type);return(o==null?void 0:o.name)??n.type}function _(n){if(n.type!=="blueprints_uieventtrigger"||!!n.content.defaultResult)return!0;const t=(n.outs??[]).map(s=>a.getComponentById(s.toNodeId)).flatMap(s=>Object.values(s.content??{}));return t.length===0?!0:!t.some(s=>s.includes("@{result}"))}const v=z(()=>f.components.map(n=>{var s;const o=a.getComponentDefinition(n.type),t=((s=n.content)==null?void 0:s.alias)||d(n),l=(o==null?void 0:o.name)??n.type;return{id:n.id,disabled:!_(n),title:t,description:t===l?void 0:l}}));return(n,o)=>(m(),g("div",U,[o[0]||(o[0]=c("p",{class:"BlueprintToolbarBlocksDropdown__header"}," Start blueprint from ",-1)),c("div",X,[(m(!0),g(E,null,G(v.value,t=>(m(),g("div",{key:t.id,class:x(["BlueprintToolbarBlocksDropdown__list__item",{"BlueprintToolbarBlocksDropdown__list__item--disabled":t.disabled}])},[r(D,{variant:"primary",size:"smallIcon","custom-size":"20px",disabled:t.disabled,"data-writer-tooltip":t.disabled?"Can not run without a default result. Go to this block to define a default result.":"Run the branch",onClick:l=>n.$emit("runBranch",t.id)},{default:b(()=>[r(y,{name:"play"})]),_:2},1032,["disabled","data-writer-tooltip","onClick"]),c("div",null,[c("p",Z,R(t.description),1),c("p",tt,R(t.title),1)]),r(D,{variant:"neutral",size:"smallIcon","custom-size":"20px","data-writer-tooltip":"Jump to the blueprint",onClick:l=>n.$emit("jumpToComponent",t.id)},{default:b(()=>[r(y,{name:"square-dashed-mouse-pointer"})]),_:2},1032,["onClick"])],2))),128))])]))}}),nt=W(et,[["__scopeId","data-v-e0d0a711"]]),ot={ref:"root",class:"BlueprintToolbar","data-writer-unselectable":!0},st=h({__name:"BlueprintToolbar",emits:{autogenClick:()=>!0},setup(i){const f=S(T.core),a=S(T.builderManager),d=S(T.componentId),_=$("runBlueprintBtn"),{run:v,stop:n,isRunning:o}=O(f,a,d),t=z(()=>f.getComponents(d).filter(u=>{var e;return((e=f.getComponentDefinition(u.type))==null?void 0:e.category)==="Triggers"})),l=K([]);function s(){l.value=L(a.selection.value),a.setSelection(null)}function B(){var u;if((u=l.value)!=null&&u.length){a.setSelection(null);for(const e of l.value)a.appendSelection(e.componentId,e.instancePath,e.source);l.value=[]}}function p(u){var e;a.setSelection(u,void 0,"click"),(e=_.value)==null||e.toggleDropdown(!1)}async function C(u){var e;(e=_.value)==null||e.toggleDropdown(!1),await v(u)}return(u,e)=>(m(),g("div",ot,[r(D,{variant:"tertiary",size:"icon","data-automation-action":"run-autogen","data-writer-tooltip":"Autogen","data-writer-tooltip-placement":"bottom",onClick:e[0]||(e[0]=k=>u.$emit("autogenClick"))},{default:b(()=>[r(y,{name:"wand-sparkles"})]),_:1}),t.value.length&&!w(o)?(m(),j(Q,{key:0,ref_key:"runBlueprintBtn",ref:_,class:"BlueprintToolbar__runBlueprintDropdown",variant:"special",onMainClick:e[2]||(e[2]=k=>C()),onDropdownOpen:s,onDropdownClose:B},{button:b(()=>[r(y,{name:"play"}),e[4]||(e[4]=N(" Run blueprint "))]),dropdown:b(()=>[r(nt,{components:t.value,onJumpToComponent:p,onRunBranch:e[1]||(e[1]=k=>C(k))},null,8,["components"])]),_:1},512)):(m(),j(D,{key:1,class:"BlueprintToolbar__runBlueprint","data-automation-action":"run-blueprint",variant:"special",onClick:e[3]||(e[3]=k=>w(o)?w(n)():C())},{default:b(()=>[r(y,{name:w(o)?"square":"play"},null,8,["name"]),N(" "+R(w(o)?"Stop run":"Run blueprint"),1)]),_:1}))],512))}}),rt=W(st,[["__scopeId","data-v-a0eb1db5"]]);export{rt as default};
