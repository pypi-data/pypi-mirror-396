
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "auto_examples/advanced_examples/plot_select_electrodes_resample.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        :ref:`Go to the end <sphx_glr_download_auto_examples_advanced_examples_plot_select_electrodes_resample.py>`
        to download the full example code.

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_auto_examples_advanced_examples_plot_select_electrodes_resample.py:


================================
Select Electrodes and Resampling
================================

Within paradigm, it is possible to restrict analysis only to a subset of
electrodes and to resample to a specific sampling rate. There is also a
utility function to select common electrodes shared between datasets.
This tutorial demonstrates how to use this functionality.

.. GENERATED FROM PYTHON SOURCE LINES 11-30

.. code-block:: Python


    # Authors: Sylvain Chevallier <sylvain.chevallier@uvsq.fr>
    #
    # License: BSD (3-clause)
    import matplotlib.pyplot as plt
    from mne.decoding import CSP
    from pyriemann.estimation import Covariances
    from pyriemann.tangentspace import TangentSpace
    from sklearn.discriminant_analysis import LinearDiscriminantAnalysis as LDA
    from sklearn.linear_model import LogisticRegression as LR
    from sklearn.pipeline import make_pipeline

    import moabb.analysis.plotting as moabb_plt
    from moabb.datasets import BNCI2014_001, Zhou2016
    from moabb.datasets.utils import find_intersecting_channels
    from moabb.evaluations import WithinSessionEvaluation
    from moabb.paradigms import LeftRightImagery



.. GENERATED FROM PYTHON SOURCE LINES 31-35

Datasets
--------

Load 2 subjects of BNCI 2014-004 and Zhou2016 datasets, with 2 sessions each

.. GENERATED FROM PYTHON SOURCE LINES 35-41

.. code-block:: Python


    subj = [1, 2]
    datasets = [Zhou2016(), BNCI2014_001()]
    for d in datasets:
        d.subject_list = subj


.. GENERATED FROM PYTHON SOURCE LINES 42-48

Paradigm
--------

Restrict further analysis to specified channels, here C3, C4, and Cz.
Also, use a specific resampling. In this example, all datasets are
set to 200 Hz.

.. GENERATED FROM PYTHON SOURCE LINES 48-51

.. code-block:: Python


    paradigm = LeftRightImagery(channels=["C3", "C4", "Cz"], resample=200.0)


.. GENERATED FROM PYTHON SOURCE LINES 52-57

Evaluation
----------

The evaluation is conducted on with CSP+LDA, only on the 3 electrodes, with
a sampling rate of 200 Hz.

.. GENERATED FROM PYTHON SOURCE LINES 57-66

.. code-block:: Python


    evaluation = WithinSessionEvaluation(paradigm=paradigm, datasets=datasets)
    csp_lda = make_pipeline(CSP(n_components=2), LDA())
    ts_lr = make_pipeline(
        Covariances(estimator="oas"), TangentSpace(metric="riemann"), LR(C=1.0)
    )
    results = evaluation.process({"csp+lda": csp_lda, "ts+lr": ts_lr})
    print(results.head())


.. GENERATED FROM PYTHON SOURCE LINES 67-74

Electrode Selection
-------------------

It is possible to select the electrodes that are shared by all datasets
using the `find_intersecting_channels` function. Datasets that have 0
overlap with others are discarded. It returns the set of common channels,
as well as the list of datasets with valid channels.

.. GENERATED FROM PYTHON SOURCE LINES 74-82

.. code-block:: Python


    electrodes, datasets = find_intersecting_channels(datasets)
    evaluation = WithinSessionEvaluation(
        paradigm=paradigm, datasets=datasets, overwrite=True, suffix="resample"
    )
    results = evaluation.process({"csp+lda": csp_lda, "ts+lr": ts_lr})
    print(results.head())


.. GENERATED FROM PYTHON SOURCE LINES 83-88

Plot Results
------------

Compare the obtained results with the two pipelines, CSP+LDA and logistic
regression computed in the tangent space of the covariance matrices.

.. GENERATED FROM PYTHON SOURCE LINES 88-91

.. code-block:: Python


    fig = moabb_plt.paired_plot(results, "csp+lda", "ts+lr")
    plt.show()

**Estimated memory usage:**  0 MB


.. _sphx_glr_download_auto_examples_advanced_examples_plot_select_electrodes_resample.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: plot_select_electrodes_resample.ipynb <plot_select_electrodes_resample.ipynb>`

    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: plot_select_electrodes_resample.py <plot_select_electrodes_resample.py>`

    .. container:: sphx-glr-download sphx-glr-download-zip

      :download:`Download zipped: plot_select_electrodes_resample.zip <plot_select_electrodes_resample.zip>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
