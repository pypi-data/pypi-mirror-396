#!/usr/bin/env python3
"""Script to convert README.md to Python module.

This generates mdmailbox/_docs.py which is included in the package.
Run this before building/releasing: make build-docs
"""

from pathlib import Path


def build_docs():
    """Convert README.md to mdmailbox/_docs.py"""
    script_dir = Path(__file__).parent
    readme_path = script_dir / "README.md"
    docs_path = script_dir / "mdmailbox" / "_docs.py"

    # Read README content
    if not readme_path.exists():
        raise FileNotFoundError(f"README.md not found at {readme_path}")

    readme_content = readme_path.read_text(encoding="utf-8")

    # Generate Python module
    python_content = '''"""Documentation content for mdmailbox.

This file is auto-generated from README.md during package build.
Do not edit this file directly.
"""

README_CONTENT = """\\
''' + readme_content + '''"""
'''

    # Write to _docs.py
    docs_path.write_text(python_content, encoding="utf-8")
    print(f"Generated {docs_path}")


if __name__ == "__main__":
    build_docs()
