Metadata-Version: 2.4
Name: docrag-kit
Version: 0.1.1
Summary: Universal RAG system for project documentation
Author: DocRAG Kit Contributors
License: MIT
Project-URL: Homepage, https://github.com/dexiusprime-oss/docrag-kit
Project-URL: Documentation, https://github.com/dexiusprime-oss/docrag-kit#readme
Project-URL: Repository, https://github.com/dexiusprime-oss/docrag-kit
Project-URL: Issues, https://github.com/dexiusprime-oss/docrag-kit/issues
Keywords: rag,documentation,search,ai,llm,mcp
Classifier: Development Status :: 3 - Alpha
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Topic :: Software Development :: Documentation
Classifier: Topic :: Text Processing :: Indexing
Requires-Python: <3.13,>=3.10
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: click>=8.0.0
Requires-Dist: langchain>=0.1.0
Requires-Dist: langchain-community>=0.0.10
Requires-Dist: langchain-openai>=0.0.5
Requires-Dist: langchain-google-genai>=0.0.5
Requires-Dist: langchain-chroma>=0.1.0
Requires-Dist: chromadb>=0.4.22
Requires-Dist: pyyaml>=6.0
Requires-Dist: python-dotenv>=1.0.0
Requires-Dist: chardet>=5.0.0
Requires-Dist: tiktoken>=0.5.0
Requires-Dist: mcp>=0.9.0
Provides-Extra: dev
Requires-Dist: pytest>=7.0.0; extra == "dev"
Requires-Dist: pytest-asyncio>=0.21.0; extra == "dev"
Requires-Dist: hypothesis>=6.0.0; extra == "dev"
Requires-Dist: black>=23.0.0; extra == "dev"
Requires-Dist: flake8>=6.0.0; extra == "dev"
Requires-Dist: mypy>=1.0.0; extra == "dev"
Dynamic: license-file

# DocRAG Kit

![Tests](https://github.com/dexiusprime-oss/docrag-kit/workflows/Tests/badge.svg)
![Python](https://img.shields.io/badge/python-3.10%2B-blue)
![License](https://img.shields.io/badge/license-MIT-green)

Universal RAG (Retrieval-Augmented Generation) system for project documentation. Quickly add AI-powered semantic search to any project.

## Features

- ðŸš€ **Quick Setup** - Initialize RAG system in any project with one command
- ðŸ“š **Universal** - Works with any documentation (Markdown, code, configs)
- ðŸ”Œ **MCP Integration** - Seamless integration with Kiro AI via Model Context Protocol
- ðŸŒ **Multilingual** - Supports Russian and English questions and answers
- ðŸŽ¯ **Project Templates** - Predefined templates for Symfony, iOS, and general projects
- ðŸ”’ **Secure** - API keys stored safely in .env files

## Installation

### Requirements

- Python >= 3.10 (3.11 recommended)
- pip >= 21.0

### From PyPI (when published)

```bash
pip install docrag-kit
```

### From Source

```bash
git clone https://github.com/dexiusprime-oss/docrag-kit.git
cd docrag-kit
pip install -e .
```

### Troubleshooting Installation

If you encounter dependency conflicts with `onnxruntime` or `pulsar-client`:

```bash
# Use Python 3.11
python3.11 -m venv venv
source venv/bin/activate
pip install --upgrade pip
pip install docrag-kit
```

For more solutions, see [docs/TROUBLESHOOTING.md](docs/TROUBLESHOOTING.md#dependency-conflict-with-onnxruntime-or-pulsar-client)

## Quick Start

### 1. Initialize RAG System

Navigate to your project directory and run:

```bash
docrag init
```

This will:
- Start an interactive configuration wizard
- Ask for your LLM provider (OpenAI or Gemini)
- Request your API key
- Configure directories and file types to index
- Create `.docrag/` directory with configuration

### 2. Index Your Documentation

```bash
docrag index
```

This will:
- Scan configured directories for documentation
- Split documents into chunks
- Create embeddings using your chosen LLM provider
- Store vectors in local ChromaDB database

### 3. Connect to Kiro AI

```bash
docrag mcp-config
```

This will display the MCP server configuration to add to Kiro.

### 4. Start Searching

Once configured in Kiro, you can ask questions about your project:
- "What is the architecture of this project?"
- "How do I configure the database?"
- "What APIs are available?"

## Configuration

After initialization, your project will have:

```
your-project/
â”œâ”€â”€ .docrag/
â”‚   â”œâ”€â”€ config.yaml      # Configuration file
â”‚   â”œâ”€â”€ mcp_server.py    # MCP server for Kiro
â”‚   â”œâ”€â”€ vectordb/        # Vector database (gitignored)
â”‚   â””â”€â”€ .gitignore       # Excludes vectordb and .env
â””â”€â”€ .env                 # API keys (gitignored)
```

### Configuration File

`.docrag/config.yaml` contains all settings:

```yaml
project:
  name: "my-project"
  type: "symfony"  # symfony, ios, general, custom

llm:
  provider: "openai"  # openai, gemini
  embedding_model: "text-embedding-3-small"
  llm_model: "gpt-4o-mini"
  temperature: 0.3

indexing:
  directories:
    - "docs/"
    - "src/"
  extensions:
    - ".md"
    - ".txt"
    - ".py"
  exclude_patterns:
    - "node_modules/"
    - ".git/"

chunking:
  chunk_size: 1000
  chunk_overlap: 200

retrieval:
  top_k: 5
```

## Commands

### `docrag init`
Initialize DocRAG in current project with interactive wizard.

### `docrag index`
Index project documents and create vector database.

### `docrag reindex`
Rebuild vector database from scratch (useful after documentation changes).

### `docrag config`
Display current configuration.

### `docrag config --edit`
Open configuration file in default editor.

### `docrag mcp-config`
Display MCP server configuration for Kiro integration.

### `docrag doctor`
Diagnose installation and configuration issues. Checks:
- DocRAG initialization
- Configuration files
- API keys
- Vector database
- Python environment
- Required packages
- MCP configuration

### `docrag --version`
Display version information.

### `docrag --help`
Display help information.

## Supported File Types

- **Markdown**: `.md`
- **Text**: `.txt`
- **Python**: `.py`
- **PHP**: `.php`
- **Swift**: `.swift`
- **JSON**: `.json`
- **YAML**: `.yaml`, `.yml`
- **Config**: `.conf`, `.config`, `.ini`

## LLM Providers

### OpenAI
- **Embeddings**: `text-embedding-3-small`
- **LLM**: `gpt-4o-mini`
- Get API key: https://platform.openai.com/api-keys

### Google Gemini
- **Embeddings**: `models/embedding-001`
- **LLM**: `gemini-1.5-flash`
- Get API key: https://makersuite.google.com/app/apikey

## Project Templates

### Symfony
Optimized for Symfony PHP framework projects with expert knowledge of:
- Symfony components and bundles
- Doctrine ORM
- Twig templates
- PHP best practices

### iOS
Optimized for iOS development projects with expert knowledge of:
- Swift programming language
- UIKit and SwiftUI
- iOS SDK and frameworks
- Xcode and development tools

### General Documentation
General-purpose template for any project type.

### Custom
Provide your own custom prompt template.

## Security

âš ï¸ **CRITICAL WARNING**: Never commit your `.env` file to git!

Your `.env` file contains sensitive API keys that provide access to paid services. If exposed, they can be used by others, potentially costing you money or compromising your accounts.

### Automatic Security Features

DocRAG Kit automatically protects your API keys by:
- Creating `.docrag/.gitignore` to exclude sensitive files (`vectordb/`, `.env`, `*.pyc`)
- Checking if `.env` is in your root `.gitignore`
- Offering to add `.env` to `.gitignore` if missing
- Creating `.env.example` template without real keys
- Displaying security warnings after initialization

### Best Practices

1. **Always keep `.env` in `.gitignore`**
   - DocRAG Kit checks this during initialization
   - Verify with: `grep .env .gitignore`

2. **Use `.env.example` as a template**
   - Share `.env.example` with your team (no real keys)
   - Team members copy it to `.env` and add their own keys

3. **Never share API keys**
   - Don't paste them in public issues or forums
   - Don't commit them to public repositories
   - Don't share them in chat or email

4. **Rotate keys if exposed**
   - If you accidentally commit `.env`, revoke keys immediately
   - Generate new keys from provider dashboard
   - Update your `.env` file

### What to Do If You Accidentally Commit API Keys

If you accidentally commit your `.env` file or API keys to git:

1. **Revoke the exposed keys immediately:**
   - OpenAI: https://platform.openai.com/api-keys
   - Google Gemini: https://makersuite.google.com/app/apikey

2. **Generate new API keys** from the provider dashboard

3. **Update your `.env` file** with the new keys

4. **Remove keys from git history:**
   ```bash
   # Using git filter-branch (for small repos)
   git filter-branch --force --index-filter \
     "git rm --cached --ignore-unmatch .env" \
     --prune-empty --tag-name-filter cat -- --all
   
   # Or use BFG Repo-Cleaner (recommended for large repos)
   # https://rtyley.github.io/bfg-repo-cleaner/
   bfg --delete-files .env
   ```

5. **Force push to remote** (if already pushed):
   ```bash
   git push origin --force --all
   git push origin --force --tags
   ```

6. **Notify team members** to re-clone the repository

### Pre-commit Hook (Recommended)

Add a pre-commit hook to prevent accidentally committing `.env`:

```bash
# Create .git/hooks/pre-commit
cat > .git/hooks/pre-commit << 'EOF'
#!/bin/bash
if git diff --cached --name-only | grep -q "^\.env$"; then
    echo "ERROR: Attempting to commit .env file!"
    echo "This file contains sensitive API keys."
    echo "Add .env to .gitignore and try again."
    exit 1
fi
EOF

# Make it executable
chmod +x .git/hooks/pre-commit
```

### Security Checklist

Before pushing to git, verify:
- [ ] `.env` is in `.gitignore`
- [ ] `.env` is not staged for commit (`git status`)
- [ ] `.env.example` exists (without real keys)
- [ ] `.docrag/.gitignore` excludes `vectordb/` and `.env`
- [ ] No API keys in configuration files
- [ ] Pre-commit hook is installed (optional but recommended)

## MCP Integration

DocRAG Kit provides two MCP tools for Kiro AI:

### `search_docs`
Search project documentation using semantic search.

**Parameters:**
- `question` (string, required): Question to search for
- `include_sources` (boolean, optional): Include source files in response

**Example:**
```
Question: "How do I configure the database?"
Response: "To configure the database, edit the .env file..."
```

### `list_indexed_docs`
List all indexed documents in the project.

**Returns:** List of all source files in the vector database.

## Documentation

### Quick Links

- **[docs/SECURITY.md](docs/SECURITY.md)** - Complete security guide (read this first!)
- **[docs/EXAMPLES.md](docs/EXAMPLES.md)** - Detailed usage examples for different project types
- **[docs/MCP_INTEGRATION.md](docs/MCP_INTEGRATION.md)** - Complete guide for Kiro AI integration
- **[docs/TROUBLESHOOTING.md](docs/TROUBLESHOOTING.md)** - Solutions for common issues
- **[docs/API_REFERENCE.md](docs/API_REFERENCE.md)** - Complete CLI and configuration reference

### Examples

See [docs/EXAMPLES.md](docs/EXAMPLES.md) for detailed usage examples including:
- Symfony project setup
- iOS project setup
- General documentation project
- Example questions and answers
- Configuration examples

### MCP Integration

See [docs/MCP_INTEGRATION.md](docs/MCP_INTEGRATION.md) for complete integration guide:
- Getting MCP configuration
- Manual and automatic setup
- Testing MCP server
- Troubleshooting connection issues

### Troubleshooting

See [docs/TROUBLESHOOTING.md](docs/TROUBLESHOOTING.md) for detailed solutions to:
- Installation issues
- API key problems
- Indexing errors
- MCP connection issues
- Performance optimization

Quick fixes:

**Database Not Found**
```bash
docrag index
```

**API Key Errors**
```bash
# Check .env file
cat .env
# Should show: OPENAI_API_KEY=sk-... or GOOGLE_API_KEY=...
```

**MCP Connection Issues**
```bash
# Verify MCP server exists
ls .docrag/mcp_server.py

# Test manually
python .docrag/mcp_server.py
```

## Development

### Setup Development Environment

```bash
git clone https://github.com/yourusername/docrag-kit.git
cd docrag-kit
pip install -e ".[dev]"
```

### Run Tests

```bash
pytest
```

### Run Property-Based Tests

```bash
pytest tests/property/
```

### Code Formatting

```bash
black src/ tests/
```

### Type Checking

```bash
mypy src/
```

## Requirements

- Python >= 3.8
- OpenAI API key or Google Gemini API key
- 100MB+ disk space for vector database

## License

MIT License - see [LICENSE](LICENSE) file for details.

## Contributing

Contributions are welcome! Please feel free to submit a Pull Request.

## Support

### Documentation
- [README.md](README.md) - Main documentation
- [docs/](docs/) - Complete documentation
- [docs/SECURITY.md](docs/SECURITY.md) - Security best practices
- [docs/EXAMPLES.md](docs/EXAMPLES.md) - Usage examples
- [docs/MCP_INTEGRATION.md](docs/MCP_INTEGRATION.md) - MCP setup guide
- [docs/TROUBLESHOOTING.md](docs/TROUBLESHOOTING.md) - Troubleshooting guide
- [docs/API_REFERENCE.md](docs/API_REFERENCE.md) - Complete API reference

### Community
- Issues: [GitHub Issues](https://github.com/yourusername/docrag-kit/issues)
- Discussions: [GitHub Discussions](https://github.com/yourusername/docrag-kit/discussions)

## Changelog

### 0.1.0 (Initial Release)
- Initial release with core functionality
- Support for OpenAI and Gemini providers
- MCP integration for Kiro AI
- Interactive setup wizard
- Project templates (Symfony, iOS, General)
