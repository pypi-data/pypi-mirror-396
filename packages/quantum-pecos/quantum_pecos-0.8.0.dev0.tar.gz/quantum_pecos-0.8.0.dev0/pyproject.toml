# Copyright 2023 The PECOS Developers
#
# Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with
# the License.You may obtain a copy of the License at
#
#     https://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the
# specific language governing permissions and limitations under the License.

[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[project]
name = "quantum-pecos"
version = "0.8.0.dev0"
authors = [
    {name = "The PECOS Developers"},
]
maintainers =[
    {name = "Ciaran Ryan-Anderson", email = "ciaranra@gmail.com"},
]
description = """PECOS is a library for the evaluation, study, and design of quantum error correction protocols."""
readme = "README.md"
requires-python = ">=3.10"
license = { file = "LICENSE"}
keywords = ["quantum", "QEC", "simulation", "PECOS"]
dependencies = [
    "pecos-rslib==0.8.0.dev0",
    "phir>=0.3.3",
    "networkx>=2.1.0",
]
classifiers = [
    "Development Status :: 4 - Beta",
    "Intended Audience :: Developers",
    "Intended Audience :: Science/Research",
    "License :: OSI Approved :: Apache Software License",
    "Operating System :: OS Independent",
    "Topic :: Scientific/Engineering :: Physics",
    "Programming Language :: Python :: 3",
    "Programming Language :: Python :: 3.10",
    "Programming Language :: Python :: 3.11",
    "Programming Language :: Python :: 3.12",
    "Programming Language :: Python :: 3.13",
    "Programming Language :: Python :: 3.14",
    "Programming Language :: Python :: Implementation :: CPython",
]

[project.urls]
documentation = "https://quantum-pecos.readthedocs.io"
repository = "https://github.com/PECOS-packages/PECOS"

[project.optional-dependencies]
guppy = [
    "guppylang>=0.21.0",  # Install guppylang first
    "selene-sim~=0.2.0",  # Then selene-sim (dependency of guppylang)
]
stim = [
    "stim>=1.12.0",  # For Stim circuit conversion and interoperability
]
visualization = [
    "matplotlib>=2.2.0",
    "plotly~=5.9.0",
]
all = [
    "quantum-pecos[visualization]",
    "quantum-pecos[guppy]",
    "quantum-pecos[stim]",
]

# CUDA dependencies. See docs/user-guide/cuda-setup.md for detailed installation instructions
# Requires CUDA Toolkit 13 or 12 installed at system level first.
# For Ubuntu/Pop!_OS: sudo apt install cuda-toolkit-13
# These packages work with uv/pip once CUDA toolkit is installed.
# Note: CUDA packages require Python 3.11+ due to cuquantum-python-cu13 requirements
cuda = [
    "cupy-cuda13x>=13.0.0; python_version >= '3.11'",  # Use cupy-cuda12x for CUDA 12
    "cuquantum-python-cu13>=25.3.0; python_version >= '3.11'",  # Use cuquantum-python-cu12 for CUDA 12
    "pytket-cutensornet>=0.12.0; python_version >= '3.11'",
]
# Install with: uv pip install -e .[cuda]

[dependency-groups]
test = [
    # Core testing dependencies - no numpy required
]
numpy-compat = [
    "numpy>=1.15.0",  # NumPy compatibility tests - core functionality uses pecos.num
]

[tool.uv]
# default-groups = ["dev", "test"]  # Uncommented now that dependency-groups is defined
default-groups = ["test"]

[tool.uv.sources]
pecos-rslib = { workspace = true }

[tool.hatch.build.targets.wheel]
packages = ["src/pecos"]

# Linting and autorefactoring tools
# ---------------------------------

[tool.black]
line-length = 120
