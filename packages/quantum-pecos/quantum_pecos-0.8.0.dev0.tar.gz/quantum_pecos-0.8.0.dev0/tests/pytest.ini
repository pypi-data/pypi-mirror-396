[pytest]
addopts =
    --strict-config
    --strict-markers
    --import-mode=importlib
    # By default, run fast tests and only tests using required dependencies. To run all tests: pytest -m ""
    # -m not slow and not optional_dependency
    -m "not optional_dependency"

testpaths = .
markers =
    # slow: mark test as slow.
    optional_dependency: mark a test as using one or more optional dependencies.
    optional_unix: mark tests as using an optional dependency that only work with Unix-based systems.
    numpy: mark tests that verify NumPy compatibility (requires numpy installed).

# Ignore deprecation warnings from external libraries that we cannot control
filterwarnings =
    ignore::DeprecationWarning:cuquantum
    # guppylang uses deprecated tket_exts.opaque_bool() internally - waiting for upstream fix
    ignore:Use tket_exts.bool.*:DeprecationWarning
